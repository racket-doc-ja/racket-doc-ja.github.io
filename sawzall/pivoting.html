<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/sawzall/pivoting.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:30:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>10&nbsp;Pivoting</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Sawzall:<span class="mywbr"> &nbsp;</span> A grammar for chopping up data</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="constructors.html" class="tocviewlink" data-pltdoc="x">Constructing data-<wbr></wbr>frames</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="display.html" class="tocviewlink" data-pltdoc="x">Displaying data</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="grouping.html" class="tocviewlink" data-pltdoc="x">Grouping and splitting</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="where.html" class="tocviewlink" data-pltdoc="x">Filtering</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="slice.html" class="tocviewlink" data-pltdoc="x">Slicing</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="create.html" class="tocviewlink" data-pltdoc="x">Creating and modifying columns</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="aggregate.html" class="tocviewlink" data-pltdoc="x">Summarizing</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="join.html" class="tocviewlink" data-pltdoc="x">Joining</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="reorder.html" class="tocviewlink" data-pltdoc="x">Sorting</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Pivoting</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="separate.html" class="tocviewlink" data-pltdoc="x">Separating variables</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="unnest.html" class="tocviewlink" data-pltdoc="x">Unnesting</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="missing-values.html" class="tocviewlink" data-pltdoc="x">Missing values</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28form._%28%28lib._sawzall%2Fmain..rkt%29._pivot-longer%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">pivot-<wbr></wbr>longer</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sawzall%2Fmain..rkt%29._pivot-wider%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pivot-<wbr></wbr>wider</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="reorder.html" title="backward to &quot;9 Sorting&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Sawzall: A grammar for chopping up data&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="separate.html" title="forward to &quot;11 Separating variables&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;sawzall-doc/sawzall.scrbl&quot;)" x-source-pkg="sawzall-doc" x-part-tag="&quot;pivoting&quot;">10<tt>&nbsp;</tt><a name="(part._pivoting)"></a>Pivoting</h3><p>The majority of data found in the wild will not be <span style="font-style: italic">tidy</span>, and therefore not work with the above
operations. The goal of pivoting is to help make your data tidy.</p><p><div class="SIntrapara">Tidy data is data where:
</div><div class="SIntrapara"><ul><li><p>Every column is a variable.</p></li><li><p>Every row is an observation.</p></li><li><p>Every cell is a single value.</p></li></ul></div></p><p>So, for example, if you were to have a column corresponding to a value and not a variable (such as a site),
or a column corresponding to a "type" of observation, these operations would help.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._sawzall/main..rkt)._pivot-longer))"></a><span title="Provided from: sawzall | Package: sawzall-lib"><span class="RktSym"><a href="#%28form._%28%28lib._sawzall%2Fmain..rkt%29._pivot-longer%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">pivot-longer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">df</span><span class="hspace">&nbsp;</span><span class="RktVar">slice-spec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:names-to</span><span class="hspace">&nbsp;</span><span class="RktVar">names-to</span><span class="hspace">&nbsp;</span><span class="RktPn">#:values-to</span><span class="hspace">&nbsp;</span><span class="RktVar">values-to</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">df</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=data-frame&amp;rel=index.html%23%2528def._%2528%2528lib._data-frame%252Fmain..rkt%2529._data-frame%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">data-frame?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">names-to</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">values-to</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a new data-frame that is the input <span class="RktVar">df</span> pivoted "longer", so less columns,
more rows. This is useful for tidying wide-form data.</div></p><p><span class="RktVar">slice-spec</span> is an expression in the slice sub-language. See <a href="slice.html" data-pltdoc="x">Slicing</a> for more information
on this language. Any not column returned by evaluating <span class="RktVar">slice-spec</span> will be brought along so that
former observations line up, but its data will not be modified.</p><p>All the names of every column selected by <span class="RktVar">slice-spec</span> is brought into a new column with name
<span class="RktVar">names-to</span>, and all the values are brought into a new column with name <span class="RktVar">values-to</span>.</p><p>This function does not work with grouped data frames, as it has potential to destroy some internal
invariants.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">wide-df</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="constructors.html#%28form._%28%28lib._sawzall%2Fmain..rkt%29._row-df%29%29" class="RktStxLink" data-pltdoc="x">row-df</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">day</span><span class="hspace">&nbsp;</span><span class="RktSym">hour</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">c</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">97</span><span class="hspace">&nbsp;</span><span class="RktVal">84</span><span class="hspace">&nbsp;</span><span class="RktVal">55</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">78</span><span class="hspace">&nbsp;</span><span class="RktVal">47</span><span class="hspace">&nbsp;</span><span class="RktVal">54</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=threading&amp;rel=index.html%23%2528form._%2528%2528lib._threading%252Fmain..rkt%2529._%7E7e%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">wide-df</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._sawzall%2Fmain..rkt%29._pivot-longer%29%29" class="RktStxLink" data-pltdoc="x">pivot-longer</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">#:names-to</span><span class="hspace">&nbsp;</span><span class="RktVal">"site"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:values-to</span><span class="hspace">&nbsp;</span><span class="RktVal">"catch"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="display.html#%28form._%28%28lib._sawzall%2Fmain..rkt%29._show%29%29" class="RktStxLink" data-pltdoc="x">show</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">data-frame: 6 rows x 4 columns</span></p></td></tr><tr><td><p><span class="RktOut">&#9484;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;hour&#9474;catch&#9474;site&#9474;day&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;10</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;97 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;a </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;11</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;78 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;a </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;10</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;84 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;b </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;11</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;47 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;b </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;10</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;55 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;c </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;11</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;54 </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;c </span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9492;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;</span></p></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sawzall/main..rkt)._pivot-wider))"></a><span title="Provided from: sawzall | Package: sawzall-lib"><span class="RktSym"><a href="#%28def._%28%28lib._sawzall%2Fmain..rkt%29._pivot-wider%29%29" class="RktValDef RktValLink" data-pltdoc="x">pivot-wider</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">df</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:names-from</span><span class="hspace">&nbsp;</span><span class="RktVar">names-from</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:values-from</span><span class="hspace">&nbsp;</span><span class="RktVar">values-from</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=data-frame&amp;rel=index.html%23%2528def._%2528%2528lib._data-frame%252Fmain..rkt%2529._data-frame%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">data-frame?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">df</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=data-frame&amp;rel=index.html%23%2528def._%2528%2528lib._data-frame%252Fmain..rkt%2529._data-frame%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">data-frame?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">names-from</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">values-from</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a new data-frame that is the input <span class="RktVar">df</span> pivoted "wider", so less rows, more columns.
This is useful for putting data into "wide form", optimized for data entry for export into spreadsheet
software like Excel, or for some convoluted tidying pipeline.</div></p><p><span class="RktVar">names-from</span> is the column to create new columns from, and <span class="RktVar">values-from</span> is the column to
get the corresponding data from.</p><p>If a value is not found in the long format data-frame, it will be replaced with "NA" (<span class="RktVal">#f</span>).</p><p>This function does not work with grouped data frames, as it has potential to destroy some internal
invariants.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">long-df1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="constructors.html#%28form._%28%28lib._sawzall%2Fmain..rkt%29._row-df%29%29" class="RktStxLink" data-pltdoc="x">row-df</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">day</span><span class="hspace">&nbsp;</span><span class="RktSym">grp</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"A"</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"B"</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"B"</span><span class="hspace">&nbsp;</span><span class="RktVal">30</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=threading&amp;rel=index.html%23%2528form._%2528%2528lib._threading%252Fmain..rkt%2529._%7E7e%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">long-df1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._sawzall%2Fmain..rkt%29._pivot-wider%29%29" class="RktValLink" data-pltdoc="x">pivot-wider</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:names-from</span><span class="hspace">&nbsp;</span><span class="RktVal">"grp"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:values-from</span><span class="hspace">&nbsp;</span><span class="RktVal">"val"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="display.html#%28form._%28%28lib._sawzall%2Fmain..rkt%29._show%29%29" class="RktStxLink" data-pltdoc="x">show</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">data-frame: 2 rows x 3 columns</span></p></td></tr><tr><td><p><span class="RktOut">&#9484;&#9472;&#9472;&#9516;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;B &#9474;A &#9474;day&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9532;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;20&#9474;10&#9474;1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9532;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;30&#9474;#f&#9474;2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9492;&#9472;&#9472;&#9524;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">long-df2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="constructors.html#%28form._%28%28lib._sawzall%2Fmain..rkt%29._row-df%29%29" class="RktStxLink" data-pltdoc="x">row-df</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">day</span><span class="hspace">&nbsp;</span><span class="RktSym">hour</span><span class="hspace">&nbsp;</span><span class="RktSym">grp</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">83</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">78</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">80</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">105</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">95</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">77</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">96</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">99</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=threading&amp;rel=index.html%23%2528form._%2528%2528lib._threading%252Fmain..rkt%2529._%7E7e%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">long-df2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._sawzall%2Fmain..rkt%29._pivot-wider%29%29" class="RktValLink" data-pltdoc="x">pivot-wider</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:names-from</span><span class="hspace">&nbsp;</span><span class="RktVal">"grp"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:values-from</span><span class="hspace">&nbsp;</span><span class="RktVal">"val"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="display.html#%28form._%28%28lib._sawzall%2Fmain..rkt%29._show%29%29" class="RktStxLink" data-pltdoc="x">show</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">data-frame: 4 rows x 4 columns</span></p></td></tr><tr><td><p><span class="RktOut">&#9484;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;b</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;a &#9474;hour&#9474;day&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;78 &#9474;83&#9474;10</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;77 &#9474;95&#9474;10</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;105&#9474;80&#9474;11</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9500;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9508;</span></p></td></tr><tr><td><p><span class="RktOut">&#9474;99 &#9474;96&#9474;11</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">&#9474;</span></p></td></tr><tr><td><p><span class="RktOut">&#9492;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;</span></p></td></tr></table></td></tr></table></blockquote></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="reorder.html" title="backward to &quot;9 Sorting&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Sawzall: A grammar for chopping up data&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="separate.html" title="forward to &quot;11 Separating variables&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/sawzall/pivoting.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:30:43 GMT -->
</html>