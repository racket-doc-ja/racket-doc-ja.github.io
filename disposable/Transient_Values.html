<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/disposable/Transient_Values.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:25:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Transient Values</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Disposable Values</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Basic_Disposable_API_and_Concepts.html" class="tocviewlink" data-pltdoc="x">Basic Disposable API and Concepts</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Reusing_Disposables_with_Pools.html" class="tocviewlink" data-pltdoc="x">Reusing Disposables with Pools</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Transient Values</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Batteries-Included_Disposables.html" class="tocviewlink" data-pltdoc="x">Batteries-<wbr></wbr>Included Disposables</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Transient Values</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._.Definition_and_.Construction%29" class="tocviewlink" data-pltdoc="x">Definition and Construction</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._.Manipulating_.Transients%29" class="tocviewlink" data-pltdoc="x">Manipulating Transients</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Definition_and_.Construction%29" class="tocsubseclink" data-pltdoc="x">Definition and Construction</a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">transient?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">transient/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">disposable-<wbr></wbr>transient</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Manipulating_.Transients%29" class="tocsubseclink" data-pltdoc="x">Manipulating Transients</a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">transient-<wbr></wbr>dispose</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">transient-<wbr></wbr>acquire</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-get%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">transient-<wbr></wbr>get</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-refresh%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">transient-<wbr></wbr>refresh</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Reusing_Disposables_with_Pools.html" title="backward to &quot;2 Reusing Disposables with Pools&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Disposable Values&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Batteries-Included_Disposables.html" title="forward to &quot;4 Batteries-Included Disposables&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;disposable/scribblings/main.scrbl&quot;)" x-source-pkg="disposable" x-part-tag="&quot;Transient_Values&quot;">3<tt>&nbsp;</tt><a name="(part._.Transient_.Values)"></a>Transient Values</h3><p>A <a name="(tech._transient)"></a><span style="font-style: italic">transient</span> value is a wrapper around a value
allocated by a <a href="Basic_Disposable_API_and_Concepts.html#%28tech._disposable%29" class="techoutside" data-pltdoc="x"><span class="techinside">disposable</span></a> that allows users of the value to
have some limited control over its lifecycle. In particular, users of a
transient may:</p><ul><li><p>Eagerly dispose the value with <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span></p></li><li><p>Replace the value with a <span class="emph">fresh</span> value allocated from the same
disposable with <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-refresh%29%29" class="RktValLink" data-pltdoc="x">transient-refresh</a></span></p></li><li><p>Directly access the value with <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span>, which may
allocate a fresh value if the transient&rsquo;s current value has already been
disposed</p></li><li><p>Access the value only if it hasn&rsquo;t been disposed with <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-get%29%29" class="RktValLink" data-pltdoc="x">transient-get</a></span></p></li></ul><p>Any disposable may be converted to a disposable of a transient value by using
<span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span>. Transients are intended for lightweight control
of disposable allocation and deallocation in a way that cooperates with other
disposable wrappers and combinators. For example, combining transients with
<span class="RktSym"><a href="Reusing_Disposables_with_Pools.html#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-pool%29%29" class="RktValLink" data-pltdoc="x">disposable-pool</a></span> allows values to be reused <span class="emph">and</span> allows clients to
explicitly create and destroy pooled values if needed.</p><p>Transients are thread safe, but not thread isolated. A transient either contains
one allocated value or contains no values, and multiple threads may call any of
the above functions on transients without violating this consistency. However,
the above functions will block if a new value needs to be allocated or
deallocated. To acquire disposables in a thread isolated manner where each
thread has unfettered access to its own private instance of a disposable, see
<span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28def._%28%28lib._disposable%2Fmain..rkt%29._acquire-virtual%29%29" class="RktValLink" data-pltdoc="x">acquire-virtual</a></span>.</p><p>All of the bindings documented in this section are provided by
<a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">disposable</span></a>.</p><h4 x-source-module="(lib &quot;disposable/scribblings/main.scrbl&quot;)" x-source-pkg="disposable" x-part-tag="&quot;Definition_and_Construction&quot;">3.1<tt>&nbsp;</tt><a name="(part._.Definition_and_.Construction)"></a>Definition and Construction</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._transient~3f))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">transient?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a <a href="#%28tech._transient%29" class="techoutside" data-pltdoc="x"><span class="techinside">transient</span></a>, returns
<span class="RktVal">#f</span> otherwise.</div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._transient/c))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">transient/c</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a contract that recognizes <a href="#%28tech._transient%29" class="techoutside" data-pltdoc="x"><span class="techinside">transients</span></a> that own values
that satisfy <span class="RktVar">c</span>. The returned contract monitors all future values that
a transient might allocate in addition to checking its current value.</div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._disposable-transient))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValDef RktValLink" data-pltdoc="x">disposable-transient</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">disp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable%2Fc%29%29" class="RktValLink" data-pltdoc="x">disposable/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="RktValLink" data-pltdoc="x">transient?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">disp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable~3f%29%29" class="RktValLink" data-pltdoc="x">disposable?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="Basic_Disposable_API_and_Concepts.html#%28tech._disposable%29" class="techoutside" data-pltdoc="x"><span class="techinside">disposable</span></a> that wraps values allocated by
<span class="RktVar">disp</span> in a <a href="#%28tech._transient%29" class="techoutside" data-pltdoc="x"><span class="techinside">transient</span></a>. Disposal of the transient
disposes its underlying value using <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span>.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28form._%28%28lib._disposable%2Fmain..rkt%29._with-disposable%29%29" class="RktStxLink" data-pltdoc="x">with-disposable</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Batteries-Included_Disposables.html#%28def._%28%28lib._disposable%2Fexample..rkt%29._example-disposable%29%29" class="RktValLink" data-pltdoc="x">example-disposable</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Acquired transient: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-refresh%29%29" class="RktValLink" data-pltdoc="x">transient-refresh</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Refreshed transient: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Allocated 84</span></p></td></tr><tr><td><p><span class="RktOut">Acquired transient: 84</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 84</span></p></td></tr><tr><td><p><span class="RktOut">Allocated 55</span></p></td></tr><tr><td><p><span class="RktOut">Refreshed transient: 55</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 55</span></p></td></tr></table></td></tr></table></blockquote></div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><h4 x-source-module="(lib &quot;disposable/scribblings/main.scrbl&quot;)" x-source-pkg="disposable" x-part-tag="&quot;Manipulating_Transients&quot;">3.2<tt>&nbsp;</tt><a name="(part._.Manipulating_.Transients)"></a>Manipulating Transients</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._transient-dispose))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValDef RktValLink" data-pltdoc="x">transient-dispose</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="RktValLink" data-pltdoc="x">transient?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Disposes the currently allocated value of <span class="RktVar">t</span> if one exists. A value
owned by a <a href="#%28tech._transient%29" class="techoutside" data-pltdoc="x"><span class="techinside">transient</span></a> will never be deallocated twice &#8212;<wbr></wbr>
repeated calls to <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span> on the same transient have no
effect. The <a href="Basic_Disposable_API_and_Concepts.html#%28tech._disposable%29" class="techoutside" data-pltdoc="x"><span class="techinside">disposable</span></a> returend by <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span> calls <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span> upon deallocation.</div></p><p>After disposal of the value owned by <span class="RktVar">t</span>, calling <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span> will block on allocating a fresh value while <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-get%29%29" class="RktValLink" data-pltdoc="x">transient-get</a></span> will return <span class="RktVal">#f</span>.</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28form._%28%28lib._disposable%2Fmain..rkt%29._with-disposable%29%29" class="RktStxLink" data-pltdoc="x">with-disposable</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Batteries-Included_Disposables.html#%28def._%28%28lib._disposable%2Fexample..rkt%29._example-disposable%29%29" class="RktValLink" data-pltdoc="x">example-disposable</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Allocated 98</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 98</span></p></td></tr></table></td></tr></table></blockquote></div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._transient-acquire))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValDef RktValLink" data-pltdoc="x">transient-acquire</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="RktValLink" data-pltdoc="x">transient?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the allocated value of <span class="RktVar">t</span>. If <span class="RktVar">t</span> does not currently own
an allocated value (due to a previous use of <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span>) a
fresh value is created inside <span class="RktVar">t</span> using the <a href="Basic_Disposable_API_and_Concepts.html#%28tech._disposable%29" class="techoutside" data-pltdoc="x"><span class="techinside">disposable</span></a>
that <span class="RktVar">t</span> was constructed with. See also <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-get%29%29" class="RktValLink" data-pltdoc="x">transient-get</a></span> which
returns <span class="RktVal">#f</span> instead of allocating a new value.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28form._%28%28lib._disposable%2Fmain..rkt%29._with-disposable%29%29" class="RktStxLink" data-pltdoc="x">with-disposable</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Batteries-Included_Disposables.html#%28def._%28%28lib._disposable%2Fexample..rkt%29._example-disposable%29%29" class="RktValLink" data-pltdoc="x">example-disposable</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Acquired transient: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Allocated 26</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 26</span></p></td></tr><tr><td><p><span class="RktOut">Allocated 60</span></p></td></tr><tr><td><p><span class="RktOut">Acquired transient: 60</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 60</span></p></td></tr></table></td></tr></table></blockquote></div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._transient-get))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-get%29%29" class="RktValDef RktValLink" data-pltdoc="x">transient-get</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="RktValLink" data-pltdoc="x">transient?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the allocated value of <span class="RktVar">t</span> or <span class="RktVal">#f</span> if <span class="RktVar">t</span> does not
currently own an allocated value (due to a previous use of <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span>). In general, prefer using <span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span> unless
there is a specific reason to avoid allocating a fresh value.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28form._%28%28lib._disposable%2Fmain..rkt%29._with-disposable%29%29" class="RktStxLink" data-pltdoc="x">with-disposable</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Batteries-Included_Disposables.html#%28def._%28%28lib._disposable%2Fexample..rkt%29._example-disposable%29%29" class="RktValLink" data-pltdoc="x">example-disposable</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Transient value: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-get%29%29" class="RktValLink" data-pltdoc="x">transient-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Allocated 70</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 70</span></p></td></tr><tr><td><p><span class="RktOut">Transient value: #f</span></p></td></tr></table></td></tr></table></blockquote></div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._disposable/main..rkt)._transient-refresh))"></a><span title="Provided from: disposable | Package: disposable"><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-refresh%29%29" class="RktValDef RktValLink" data-pltdoc="x">transient-refresh</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient~3f%29%29" class="RktValLink" data-pltdoc="x">transient?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Disposes the allocated value owned by <span class="RktVar">t</span> if one exists, then allocates
a fresh value inside <span class="RktVar">t</span> and returns that value. Equivalent to calling
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-dispose%29%29" class="RktValLink" data-pltdoc="x">transient-dispose</a></span><span class="stt"> </span><span class="RktVar">t</span><span class="RktPn">)</span> followed by <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-acquire%29%29" class="RktValLink" data-pltdoc="x">transient-acquire</a></span><span class="stt"> </span><span class="RktVar">t</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Basic_Disposable_API_and_Concepts.html#%28form._%28%28lib._disposable%2Fmain..rkt%29._with-disposable%29%29" class="RktStxLink" data-pltdoc="x">with-disposable</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._disposable-transient%29%29" class="RktValLink" data-pltdoc="x">disposable-transient</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Batteries-Included_Disposables.html#%28def._%28%28lib._disposable%2Fexample..rkt%29._example-disposable%29%29" class="RktValLink" data-pltdoc="x">example-disposable</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Refreshed value: ~a\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._disposable%2Fmain..rkt%29._transient-refresh%29%29" class="RktValLink" data-pltdoc="x">transient-refresh</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">Allocated 81</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 81</span></p></td></tr><tr><td><p><span class="RktOut">Allocated 23</span></p></td></tr><tr><td><p><span class="RktOut">Refreshed value: 23</span></p></td></tr><tr><td><p><span class="RktOut">Deallocated 23</span></p></td></tr></table></td></tr></table></blockquote></div></p><p class="SHistory">Added in version 0.3 of package <span class="stt">disposable</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Reusing_Disposables_with_Pools.html" title="backward to &quot;2 Reusing Disposables with Pools&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Disposable Values&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Batteries-Included_Disposables.html" title="forward to &quot;4 Batteries-Included Disposables&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/disposable/Transient_Values.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:25:36 GMT -->
</html>