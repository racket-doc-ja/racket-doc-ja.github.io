<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/thrift/Thrift_for_Racket_Architecture.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Thrift for Racket Architecture</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Package thrift.</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Thrift for Racket Architecture</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Thrift_IDL_Support_.html" class="tocviewlink" data-pltdoc="x">Thrift IDL Support.</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Thrift_Transport_Support_.html" class="tocviewlink" data-pltdoc="x">Thrift Transport Support.</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Thrift_Protocol_Support.html" class="tocviewlink" data-pltdoc="x">Thrift Protocol Support</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Thrift_Processor_Support.html" class="tocviewlink" data-pltdoc="x">Thrift Processor Support</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="License.html" class="tocviewlink" data-pltdoc="x">License</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Thrift for Racket Architecture</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._.Interface_.Definition_.Language%29" class="tocviewlink" data-pltdoc="x">Interface Definition Language</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._.Transport_.Layer%29" class="tocviewlink" data-pltdoc="x">Transport Layer</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._.Protocol_.Layer%29" class="tocviewlink" data-pltdoc="x">Protocol Layer</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._.Processor_.Layer%29" class="tocviewlink" data-pltdoc="x">Processor Layer</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="#%28part._.Server_.Layer%29" class="tocviewlink" data-pltdoc="x">Server Layer</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Interface_.Definition_.Language%29" class="tocsubseclink" data-pltdoc="x">Interface Definition Language</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Transport_.Layer%29" class="tocsubseclink" data-pltdoc="x">Transport Layer</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.Protocol_.Layer%29" class="tocsubseclink" data-pltdoc="x">Protocol Layer</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Processor_.Layer%29" class="tocsubseclink" data-pltdoc="x">Processor Layer</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._.Server_.Layer%29" class="tocsubseclink" data-pltdoc="x">Server Layer</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Package thrift.&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Package thrift.&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Thrift_IDL_Support_.html" title="forward to &quot;2 Thrift IDL Support.&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;thrift/scribblings/thrift.scrbl&quot;)" x-source-pkg="thrift" x-part-tag="&quot;Thrift_for_Racket_Architecture&quot;">1<tt>&nbsp;</tt><a name="(part._.Thrift_for_.Racket_.Architecture)"></a>Thrift for Racket Architecture</h3><p>The <a href="https://thrift.apache.org/docs/concepts">Apache Thrift Concepts</a>
page introduces the following diagram showing the architectural layers that
make up the Thrift framework. The documentation below will describe how these
layers and the features within them are provided by this package.</p><blockquote class="SCentered"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">+-------------------------------------------+</span></p></td></tr><tr><td><p><span class="stt">| Server</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">| (single-threaded, event-driven etc)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">+-------------------------------------------+</span></p></td></tr><tr><td><p><span class="stt">| Processor</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">| (compiler generated)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">+-------------------------------------------+</span></p></td></tr><tr><td><p><span class="stt">| Protocol</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">| (JSON, compact etc)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">+-------------------------------------------+</span></p></td></tr><tr><td><p><span class="stt">| Transport</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">| (raw TCP, HTTP etc)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">+-------------------------------------------+</span></p></td></tr></table></blockquote><p>Additionally, the Thrift
<a href="https://thrift.apache.org/docs/HowToNewLanguage"><span style="font-style: italic">Roadmap for
adding new language bindings</span></a> specifies required, recommended, and optional
features for each of the architecture layers above.</p><p>Finally, there is no attempt to utilize the existing and comprehensive
<a href="https://github.com/apache/thrift/blob/master/test/README.md">integration
test suite</a>.</p><h4 x-source-module="(lib &quot;thrift/scribblings/thrift.scrbl&quot;)" x-source-pkg="thrift" x-part-tag="&quot;Interface_Definition_Language&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Interface_.Definition_.Language)"></a>Interface Definition Language</h4><p>The tools provided in this package do not, currently, provide a parser for the
<a href="https://thrift.apache.org/docs/idl">Thrift interface description language</a>
as-is. Instead it uses a set of macros in the module <span class="RktSym">thrift/idl/language</span>
to describe an interface and can code generate from a module that uses these
macros.</p><p>The following table lists the major components of the Thrift IDL language and
their corresponding Racket macros.</p><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Thrift</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Racket</span></p></td></tr><tr><td><p>include</p></td><td><p>not yet defined</p></td></tr><tr><td><p>namespace</p></td><td><p><span class="RktSym"><a href="Thrift_IDL_Support_.html#%28form._%28%28lib._thrift%2Fidl%2Flanguage..rkt%29._define-thrift-namespace%29%29" class="RktStxLink" data-pltdoc="x">define-thrift-namespace</a></span></p></td></tr><tr><td><p>const</p></td><td><p>not yet defined</p></td></tr><tr><td><p>typedef</p></td><td><p>not yet defined</p></td></tr><tr><td><p>enum</p></td><td><p><span class="RktSym"><a href="Thrift_IDL_Support_.html#%28form._%28%28lib._thrift%2Fidl%2Flanguage..rkt%29._define-thrift-enum%29%29" class="RktStxLink" data-pltdoc="x">define-thrift-enum</a></span></p></td></tr><tr><td><p>senum</p></td><td><p>not yet defined</p></td></tr><tr><td><p>struct</p></td><td><p><span class="RktSym"><a href="Thrift_IDL_Support_.html#%28form._%28%28lib._thrift%2Fidl%2Flanguage..rkt%29._define-thrift-struct%29%29" class="RktStxLink" data-pltdoc="x">define-thrift-struct</a></span></p></td></tr><tr><td><p>union</p></td><td><p><span class="RktSym">define-thrift-union</span></p></td></tr><tr><td><p>exception</p></td><td><p>not yet defined</p></td></tr><tr><td><p>service</p></td><td><p>not yet defined</p></td></tr></table></p><h4 x-source-module="(lib &quot;thrift/scribblings/thrift.scrbl&quot;)" x-source-pkg="thrift" x-part-tag="&quot;Transport_Layer&quot;">1.2<tt>&nbsp;</tt><a name="(part._.Transport_.Layer)"></a>Transport Layer</h4><p>The transport layer consists of wrappers around standard Racket I/O capabilities
and specifically a <span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._transport%29%29" class="RktValLink" data-pltdoc="x">transport</a></span> struct that wraps an individual Racket
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span>. Each transport is responsible for providing an <span class="RktSym">open-input...</span>
and <span class="RktSym">open-output...</span> function. As you can see from the table below their
is good coverage of the transport API, although at this time the two server
functions <span style="font-style: italic">listen</span> and <span style="font-style: italic">accept</span> are not supported.</p><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Thrift</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Racket</span></p></td></tr><tr><td><p>open</p></td><td><p><span class="RktSym">open-input-?-transport</span></p></td></tr><tr><td><p></p></td><td><p><span class="RktSym">open-output-?-transport</span></p></td></tr><tr><td><p>close</p></td><td><p><span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._close-transport%29%29" class="RktValLink" data-pltdoc="x">close-transport</a></span></p></td></tr><tr><td><p>read</p></td><td><p><span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._transport-read-byte%29%29" class="RktValLink" data-pltdoc="x">transport-read-byte</a></span></p></td></tr><tr><td><p></p></td><td><p><span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._transport-read-bytes%29%29" class="RktValLink" data-pltdoc="x">transport-read-bytes</a></span></p></td></tr><tr><td><p>write</p></td><td><p><span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._transport-write-byte%29%29" class="RktValLink" data-pltdoc="x">transport-write-byte</a></span></p></td></tr><tr><td><p></p></td><td><p><span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._transport-write-bytes%29%29" class="RktValLink" data-pltdoc="x">transport-write-bytes</a></span></p></td></tr><tr><td><p>flush</p></td><td><p><span class="RktSym"><a href="Thrift_Transport_Support_.html#%28def._%28%28lib._thrift%2Ftransport%2Fcommon..rkt%29._flush-transport%29%29" class="RktValLink" data-pltdoc="x">flush-transport</a></span></p></td></tr><tr><td><p>listen</p></td><td><p>not yet defined</p></td></tr><tr><td><p>accept</p></td><td><p>not yet defined</p></td></tr></table></p><p>The following table lists the transports defined by Thrift and their corresponding
Racket implementation (if any).</p><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Feature</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Coverage</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Racket</span></p></td></tr><tr><td><p>Sockets</p></td><td><p>minimal-required</p></td><td><p>not yet defined</p></td></tr><tr><td><p>Buffered</p></td><td><p>minimal-required</p></td><td><p><a href="Thrift_Transport_Support_.html#%28part._.Buffered_and_.Framed_.Transports%29" data-pltdoc="x">Buffered and Framed Transports</a></p></td></tr><tr><td><p>Framed</p></td><td><p>minimal-required</p></td><td><p><a href="Thrift_Transport_Support_.html#%28part._.Buffered_and_.Framed_.Transports%29" data-pltdoc="x">Buffered and Framed Transports</a></p></td></tr><tr><td><p>Files</p></td><td><p>minimal-recommended</p></td><td><p><a href="Thrift_Transport_Support_.html#%28part._.File_.Transport%29" data-pltdoc="x">File Transport</a></p></td></tr><tr><td><p>HTTP Client</p></td><td><p>minimal-recommended</p></td><td><p>not yet defined</p></td></tr><tr><td><p>HTTP Server</p></td><td><p>other-recommended</p></td><td><p>not yet defined</p></td></tr><tr><td><p>Pipes</p></td><td><p>other-recommended</p></td><td><p>not yet defined</p></td></tr><tr><td><p>NamedPipes</p></td><td><p>other-recommended</p></td><td><p>not yet defined</p></td></tr><tr><td><p></p></td><td><p></p></td><td><p><a href="Thrift_Transport_Support_.html#%28part._.In-.Memory_.Transport%29" data-pltdoc="x">In-Memory Transport</a></p></td></tr><tr><td><p></p></td><td><p></p></td><td><p><a href="Thrift_Transport_Support_.html#%28part._.Console_.Transport%29" data-pltdoc="x">Console Transport</a></p></td></tr></table></p><p>The memory buffer transport (module <span class="RktSym">thrift/transport/memory</span>) is primarily
used for testing and allows reading/writing over byte buffers.</p><h4 x-source-module="(lib &quot;thrift/scribblings/thrift.scrbl&quot;)" x-source-pkg="thrift" x-part-tag="&quot;Protocol_Layer&quot;">1.3<tt>&nbsp;</tt><a name="(part._.Protocol_.Layer)"></a>Protocol Layer</h4><p>The Protocol interface described in the Thrift Concepts page is actually split
into two separate components in the Racket implementation. These two are
defined in the module <span class="RktSym">thrift/protocol/common</span> as the structs
<span class="RktSym"><a href="Thrift_Protocol_Support.html#%28def._%28%28lib._thrift%2Fprotocol%2Fcommon..rkt%29._encoder%29%29" class="RktValLink" data-pltdoc="x">encoder</a></span> and <span class="RktSym"><a href="Thrift_Protocol_Support.html#%28def._%28%28lib._thrift%2Fprotocol%2Fcommon..rkt%29._decoder%29%29" class="RktValLink" data-pltdoc="x">decoder</a></span>. This reflects the Racket philosophy of
having separate input and output ports as well as making it easier to implement
just one half of the protocol interface.</p><p>The following table presents a sample of the mapping from the Thrift API on the
left hand side to the Racket module form on the right. For the four methods on
the thrift interface that deal with structured data: message, field, map, list,
and set we define structs that are input to the write functions and returned
from the read functions.</p><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Thrift</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Racket</span></p></td></tr><tr><td><p>writeMessageBegin(name, type, seq)</p></td><td><p><span class="RktPn">(</span><span class="RktSym">write-message-begin</span><span class="stt"> </span><span class="RktSym"><a href="Thrift_Protocol_Support.html#%28def._%28%28lib._thrift%2Fprotocol%2Fcommon..rkt%29._message-header~3f%29%29" class="RktValLink" data-pltdoc="x">message-header?</a></span><span class="RktPn">)</span></p></td></tr><tr><td><p>name, type, seq = readMessageBegin()</p></td><td><p><span class="RktSym">read-message-begin</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym"><a href="Thrift_Protocol_Support.html#%28def._%28%28lib._thrift%2Fprotocol%2Fcommon..rkt%29._message-header~3f%29%29" class="RktValLink" data-pltdoc="x">message-header?</a></span></p></td></tr><tr><td><p>writeMessageEnd()</p></td><td><p><span class="RktSym">write-message-end</span></p></td></tr><tr><td><p>readMessageEnd()</p></td><td><p><span class="RktSym">read-message-end</span></p></td></tr><tr><td><p>writeI16(i16)</p></td><td><p><span class="RktPn">(</span><span class="RktSym">write-int16</span><span class="stt"> </span><span class="RktSym">type-int16?</span><span class="RktPn">)</span></p></td></tr><tr><td><p>i16 = readI16()</p></td><td><p><span class="RktSym">read-int16</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym">type-int16?</span></p></td></tr></table></p><p>Additionally the <span class="RktSym">thrift/protocol/decoding</span> module provides
<span class="RktSym">decode-a-struct</span>, <span class="RktSym">decode-a-list</span>, and <span class="RktSym">decode-a-set</span>.</p><p>The following table lists the protocols defined by Thrift and their corresponding
Racket implementation (if any).</p><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Feature</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Coverage</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Racket</span></p></td></tr><tr><td><p>Binary</p></td><td><p>minimal-required</p></td><td><p><a href="Thrift_Protocol_Support.html#%28part._.Binary_.Protocol%29" data-pltdoc="x">Binary Protocol</a></p></td></tr><tr><td><p>Multiplex</p></td><td><p>minimal-required</p></td><td><p><a href="Thrift_Protocol_Support.html#%28part._.Multiplexed_.Protocol%29" data-pltdoc="x">Multiplexed Protocol</a></p></td></tr><tr><td><p>JSON</p></td><td><p>minimal-recommended</p></td><td><p><a href="Thrift_Protocol_Support.html#%28part._.J.S.O.N_.Protocol%29" data-pltdoc="x">JSON Protocol</a></p></td></tr><tr><td><p>Compact</p></td><td><p>other-recommended</p></td><td><p><a href="Thrift_Protocol_Support.html#%28part._.Compact_.Protocol%29" data-pltdoc="x">Compact Protocol</a></p></td></tr><tr><td><p>Debug</p></td><td><p>other-recommended</p></td><td><p><a href="Thrift_Protocol_Support.html#%28part._.S-.Expression_.Protocol%29" data-pltdoc="x">S-Expression Protocol</a></p></td></tr></table></p><h4 x-source-module="(lib &quot;thrift/scribblings/thrift.scrbl&quot;)" x-source-pkg="thrift" x-part-tag="&quot;Processor_Layer&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Processor_.Layer)"></a>Processor Layer</h4><p>The key element of the processor layer is the definition of an interface used
by the server layer to denote a component that reads from one and writes to
another protocol. This interface is described in the Thrift documentation
as follows.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">interface TProcessor {</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">bool process(TProtocol in, TProtocol out) throws TException</span></p></td></tr><tr><td><p><span class="stt">}</span></p></td></tr></table></p><p>The <span class="RktSym">thrift/processor/common</span> module provides the following contract
definition that describes a function in the same manner as the interface
above.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Thrift_Processor_Support.html#%28def._%28%28lib._thrift%2Fprocessor%2Fcommon..rkt%29._protocol-processor%2Fc%29%29" class="RktValLink" data-pltdoc="x">protocol-processor/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Thrift_Protocol_Support.html#%28def._%28%28lib._thrift%2Fprotocol%2Fcommon..rkt%29._decoder~3f%29%29" class="RktValLink" data-pltdoc="x">decoder?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Thrift_Protocol_Support.html#%28def._%28%28lib._thrift%2Fprotocol%2Fcommon..rkt%29._encoder~3f%29%29" class="RktValLink" data-pltdoc="x">encoder?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h4 x-source-module="(lib &quot;thrift/scribblings/thrift.scrbl&quot;)" x-source-pkg="thrift" x-part-tag="&quot;Server_Layer&quot;">1.5<tt>&nbsp;</tt><a name="(part._.Server_.Layer)"></a>Server Layer</h4><p>The following table lists the servers defined by Thrift, this is not currently
the focus of this package and none are implemented.</p><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Feature</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Coverage</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Racket</span></p></td></tr><tr><td><p>SimpleServer</p></td><td><p>minimal-required</p></td><td><p>not yet defined</p></td></tr><tr><td><p>Non-Blocking</p></td><td><p>other-recommended</p></td><td><p>not yet defined</p></td></tr><tr><td><p>Threaded</p></td><td><p>other-recommended</p></td><td><p>not yet defined</p></td></tr><tr><td><p>Thread Pool</p></td><td><p>other-recommended</p></td><td><p>not yet defined</p></td></tr></table></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Package thrift.&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Package thrift.&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Thrift_IDL_Support_.html" title="forward to &quot;2 Thrift IDL Support.&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/thrift/Thrift_for_Racket_Architecture.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:44 GMT -->
</html>