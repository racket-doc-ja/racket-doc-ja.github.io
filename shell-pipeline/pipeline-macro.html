<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/shell-pipeline/pipeline-macro.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Pipeline Macro Library</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Shell Pipeline Package</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="pipeline.html" class="tocviewlink" data-pltdoc="x">Basic Unix-<wbr></wbr>style Pipelines</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="mixed-pipeline.html" class="tocviewlink" data-pltdoc="x">Mixed Unix-<wbr></wbr>style and Racket Object Pipelines</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Pipeline Macro Library</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Code_and_License.html" class="tocviewlink" data-pltdoc="x">Code and License</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Pipeline Macro Library</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._shell_pipeline-macro_stability%29" class="tocviewlink" data-pltdoc="x">shell/<span class="mywbr"> &nbsp;</span>pipeline-<wbr></wbr>macro stability</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._shell_pipeline-macro_guide%29" class="tocviewlink" data-pltdoc="x">shell/<span class="mywbr"> &nbsp;</span>pipeline-<wbr></wbr>macro guide</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._shell_pipeline-macro_reference%29" class="tocviewlink" data-pltdoc="x">shell/<span class="mywbr"> &nbsp;</span>pipeline-<wbr></wbr>macro reference</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="#%28part._.Demo_stuff_reference%29" class="tocviewlink" data-pltdoc="x">Demo stuff reference</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._shell_pipeline-macro_stability%29" class="tocsubseclink" data-pltdoc="x">shell/<span class="mywbr"> &nbsp;</span>pipeline-<wbr></wbr>macro stability</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._shell_pipeline-macro_guide%29" class="tocsubseclink" data-pltdoc="x">shell/<span class="mywbr"> &nbsp;</span>pipeline-<wbr></wbr>macro guide</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._shell_pipeline-macro_reference%29" class="tocsubseclink" data-pltdoc="x">shell/<span class="mywbr"> &nbsp;</span>pipeline-<wbr></wbr>macro reference</a></td></tr><tr><td><span class="tocsublinknumber">3.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Running_.Pipelines%29" class="tocsubseclink" data-pltdoc="x">Running Pipelines</a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">run-<wbr></wbr>pipeline</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Pipeline_.Flags%29" class="tocsubseclink" data-pltdoc="x">Pipeline Flags</a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26bg%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;bg</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26pipeline-ret%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;pipeline-<wbr></wbr>ret</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26in%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;in</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3c%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;&lt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26out%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;out</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;&gt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;&gt;!</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;&gt;&gt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26err%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;err</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26strict%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;strict</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26permissive%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;permissive</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26lazy%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;lazy</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26lazy-timeout%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&amp;lazy-<wbr></wbr>timeout</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._with-pipeline-config%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">with-<wbr></wbr>pipeline-<wbr></wbr>config</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._splicing-with-pipeline-config%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">splicing-<wbr></wbr>with-<wbr></wbr>pipeline-<wbr></wbr>config</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.3<tt>&nbsp;</tt></span><a href="#%28part._.Pipeline_.Operators%29" class="tocsubseclink" data-pltdoc="x">Pipeline Operators</a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dcomposite-pipe~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=composite-<wbr></wbr>pipe=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-unix-pipe~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=basic-<wbr></wbr>unix-<wbr></wbr>pipe=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=unix-<wbr></wbr>pipe=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">\|</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fexpression~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=basic-<wbr></wbr>object-<wbr></wbr>pipe/<span class="mywbr"> &nbsp;</span>expression=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fform~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=basic-<wbr></wbr>object-<wbr></wbr>pipe/<span class="mywbr"> &nbsp;</span>form=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=basic-<wbr></wbr>object-<wbr></wbr>pipe=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">\|&gt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe%2Fexpression~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=object-<wbr></wbr>pipe/<span class="mywbr"> &nbsp;</span>expression=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe%2Fform~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=object-<wbr></wbr>pipe/<span class="mywbr"> &nbsp;</span>form=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">=object-<wbr></wbr>pipe=</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">\|&gt;&gt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._default-pipeline-starter%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">default-<wbr></wbr>pipeline-<wbr></wbr>starter</span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.4<tt>&nbsp;</tt></span><a href="#%28part._.Defining_.Pipeline_.Operators%29" class="tocsubseclink" data-pltdoc="x">Defining Pipeline Operators</a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-operator%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>pipeline-<wbr></wbr>operator</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-alias%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>pipeline-<wbr></wbr>alias</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-simple-pipeline-alias%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>simple-<wbr></wbr>pipeline-<wbr></wbr>alias</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">current-<wbr></wbr>pipeline-<wbr></wbr>argument</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29.__%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">_</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._expand-pipeline-arguments%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">expand-<wbr></wbr>pipeline-<wbr></wbr>arguments</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.3.5<tt>&nbsp;</tt></span><a href="#%28part._.Inspecting_.Pipelines%29" class="tocsubseclink" data-pltdoc="x">Inspecting Pipelines</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._.Demo_stuff_reference%29" class="tocsubseclink" data-pltdoc="x">Demo stuff reference</a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fdemo%2Fmore-pipeline-operators..rkt%29._~3dmap~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">=map=</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._shell%2Fdemo%2Fmore-pipeline-operators..rkt%29._~3dfilter~3d%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">=filter=</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="mixed-pipeline.html" title="backward to &quot;2 Mixed Unix-style and Racket Object Pipelines&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Shell Pipeline Package&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Code_and_License.html" title="forward to &quot;4 Code and License&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;pipeline-macro&quot;">3<tt>&nbsp;</tt><a name="(part._pipeline-macro)"></a><a name="(mod-path._shell/pipeline-macro)"></a>Pipeline Macro Library</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">shell/pipeline-macro</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/shell-pipeline" title="Install this package using `raco pkg install shell-pipeline`"><span class="stt">shell-pipeline</span></a></span></td></tr></table></p><h4 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;shell_pipeline-macro_stability&quot;">3.1<tt>&nbsp;</tt><a name="(part._shell_pipeline-macro_stability)"></a>shell/pipeline-macro stability</h4><p>Unstable features are flagged in the documentation.  There are few of them.</p><p>The base set of pipeline operators is likely to change, and some of the names I want to review before a stable release.</p><p>Some pipeline options (&amp;in, etc) are currently backed by syntax parameters, which is wrong.  It causes things to be... not as lexical as they are supposed to be.  That will be changed.</p><h4 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;shell_pipeline-macro_guide&quot;">3.2<tt>&nbsp;</tt><a name="(part._shell_pipeline-macro_guide)"></a>shell/pipeline-macro guide</h4><p>This module is a macro DSL wrapper around the
<a href="mixed-pipeline.html" data-pltdoc="x">Mixed Unix-style and Racket Object Pipelines</a>
library.  It is designed for running pipelines of external processes (which pass each other ports) and Racket functions (which pass each other objects).  It does this with a very flat syntax and user-definable pipeline operators, which provide a lot of convenient sugar for making pipelines shorter.  It is particularly tailored for use in a line-based syntax, like that of the Rash language.</p><p>Here are some quick examples:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Pipe</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">output</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">ls</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">grep.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">grep</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">foo</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">To</span><span class="hspace">&nbsp;</span><span class="RktCmt">save</span><span class="hspace">&nbsp;</span><span class="RktCmt">on</span><span class="hspace">&nbsp;</span><span class="RktCmt">space,</span><span class="hspace">&nbsp;</span><span class="RktCmt">let's</span><span class="hspace">&nbsp;</span><span class="RktCmt">assume</span><span class="hspace">&nbsp;</span><span class="RktCmt">%</span><span class="hspace">&nbsp;</span><span class="RktCmt">is</span><span class="hspace">&nbsp;</span><span class="RktCmt">bound</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">=unix-pipe=</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">%</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">%</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">grep</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">foo</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>We can also pipeline objects.  Object pipelines are full of functions instead of process specifications.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">This</span><span class="hspace">&nbsp;</span><span class="RktCmt">will</span><span class="hspace">&nbsp;</span><span class="RktCmt">return</span><span class="hspace">&nbsp;</span><span class="RktCmt">3</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=object-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=object-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._length%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">length</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">To</span><span class="hspace">&nbsp;</span><span class="RktCmt">save</span><span class="hspace">&nbsp;</span><span class="RktCmt">on</span><span class="hspace">&nbsp;</span><span class="RktCmt">space,</span><span class="hspace">&nbsp;</span><span class="RktCmt">let's</span><span class="hspace">&nbsp;</span><span class="RktCmt">assume</span><span class="hspace">&nbsp;</span><span class="RktCmt">%&gt;</span><span class="hspace">&nbsp;</span><span class="RktCmt">is</span><span class="hspace">&nbsp;</span><span class="RktCmt">bound</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">=object-pipe=</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">%&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">%&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._length%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">length</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>We can mix the two:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Capitalized</span><span class="hspace">&nbsp;</span><span class="RktCmt">ls</span><span class="hspace">&nbsp;</span><span class="RktCmt">output.</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">=object-pipe=</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">automatically</span><span class="hspace">&nbsp;</span><span class="RktCmt">converts</span><span class="hspace">&nbsp;</span><span class="RktCmt">ports</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">strings.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">%</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">%&gt;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-upcase%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-upcase</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>I am really running out of steam for documenting right now... TODO - write a good guide.</p><h4 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;shell_pipeline-macro_reference&quot;">3.3<tt>&nbsp;</tt><a name="(part._shell_pipeline-macro_reference)"></a>shell/pipeline-macro reference</h4><h5 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;Running_Pipelines&quot;">3.3.1<tt>&nbsp;</tt><a name="(part._.Running_.Pipelines)"></a>Running Pipelines</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._run-pipeline))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">run-pipeline</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pipeline-flag</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">pipeline-member-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">pipeline-flag</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">pipeline-member-spec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">pipe-operator</span><span class="hspace">&nbsp;</span><span class="RktVar">pipe-operator-arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">pipeline-flag</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;bg</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;pipeline-ret</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;in</span><span class="hspace">&nbsp;</span><span class="RktVar">file-expression</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;&lt;</span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;out</span><span class="hspace">&nbsp;</span><span class="RktVar">file-expression</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;&gt;</span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;&gt;&gt;</span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;&gt;!</span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;err</span><span class="hspace">&nbsp;</span><span class="RktVar">file-expression</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;strict</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;permissive</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;lazy</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">&amp;lazy-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">timeout-expression</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Run a pipeline.  This is a macro wrapper for <span class="RktSym">shell/mixed-pipeline/run-mixed-pipeline</span> that uses pipeline operator macros to specify the pipeline to be run.  So you should read the docs about that as well.</div></p><p>The pipeline flags affect the options passed to <span class="RktSym">shell/mixed-pipeline/run-mixed-pipeline</span> and are documented separately.</p><p>The pipeline-member-specs are transformed according to the pipeline operators given.  If the first non-flag argument to <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> is not a pipeline operator, then a default is put in its place as determined by a lexical default operator.  The default is determined by the lexical context of the first form among the arguments (after the run-pipeline identifier itself).  The full names of pipeline operators are conventionally identifiers surrounded with = signs.</p><p>At the time of writing I&rsquo;m not really sure what to write here, so have an example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=object-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=map=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=map=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><div class="SIntrapara">This returns </div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">.  Notice that <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span> is placed automatically for the second =map= operator &ndash; it could have been left off of the other one as well, but I wanted to show what identifier is sneakily added.</div></p><p><div class="SIntrapara">If we instead run
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=object-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=map=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">=map=</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26bg%29%29" class="RktStxLink" data-pltdoc="x">&amp;bg</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara">we will get a pipeline object back.  Conceptually it is still running when it is returned, though in this case it&rsquo;s likely finished by the time we can inspect it.  We can use <span class="RktSym"><a href="mixed-pipeline.html#%28def._%28%28lib._shell%2Fmixed-pipeline..rkt%29._pipeline~3f%29%29" class="RktValLink" data-pltdoc="x">pipeline?</a></span>, <span class="RktSym"><a href="mixed-pipeline.html#%28def._%28%28lib._shell%2Fmixed-pipeline..rkt%29._pipeline-success~3f%29%29" class="RktValLink" data-pltdoc="x">pipeline-success?</a></span>, <span class="RktSym"><a href="mixed-pipeline.html#%28def._%28%28lib._shell%2Fmixed-pipeline..rkt%29._pipeline-return%29%29" class="RktValLink" data-pltdoc="x">pipeline-return</a></span>, etc on it.</div></p><h5 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;Pipeline_Flags&quot;">3.3.2<tt>&nbsp;</tt><a name="(part._.Pipeline_.Flags)"></a>Pipeline Flags</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26bg))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26bg%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;bg</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26pipeline-ret))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26pipeline-ret%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;pipeline-ret</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26in))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26in%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;in</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">port-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26~3c))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3c%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;&lt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26out))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26out%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;out</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">port/reader-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26~3e))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26~3e!))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e%21%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;&gt;!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26~3e~3e))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;&gt;&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">file-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26err))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26err%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;err</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">port-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26strict))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26strict%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;strict</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26permissive))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26permissive%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;permissive</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26lazy))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26lazy%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;lazy</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-flag</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~26lazy-timeout))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26lazy-timeout%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&amp;lazy-timeout</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">These identifiers are all errors if used outside of <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span>.  They are essentially used in place of #:keywords to not conflict with pipeline operators that take keywords.</div></p><p><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3c%29%29" class="RktStxLink" data-pltdoc="x">&amp;&lt;</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e%29%29" class="RktStxLink" data-pltdoc="x">&amp;&gt;</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">&amp;&gt;&gt;</a></span>, and <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26~3e%21%29%29" class="RktStxLink" data-pltdoc="x">&amp;&gt;!</a></span> each take a file name and cause (respectively) input redirection from the given file, output redirection to the given file erroring if the file exists, output redirection appending to the given file, and output redirection truncating the given file.  <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26in%29%29" class="RktStxLink" data-pltdoc="x">&amp;in</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26out%29%29" class="RktStxLink" data-pltdoc="x">&amp;out</a></span>, and <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26err%29%29" class="RktStxLink" data-pltdoc="x">&amp;err</a></span> take an argument suitable to be passed to #:in, #:out, and #:err of <span class="RktSym">shell/mixed-pipeline/run-mixed-pipeline</span>.</p><p><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26bg%29%29" class="RktStxLink" data-pltdoc="x">&amp;bg</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26pipeline-ret%29%29" class="RktStxLink" data-pltdoc="x">&amp;pipeline-ret</a></span> toggle #:bg and #:return-pipeline-object, and <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26strict%29%29" class="RktStxLink" data-pltdoc="x">&amp;strict</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26permissive%29%29" class="RktStxLink" data-pltdoc="x">&amp;permissive</a></span>, and <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~26lazy%29%29" class="RktStxLink" data-pltdoc="x">&amp;lazy</a></span> set the #:strictness argument.
<span style="font-weight: bold">Not stable:
All of the file redirection flags may change how they do things like dollar, glob, and tilde expansion.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._with-pipeline-config))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._with-pipeline-config%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">with-pipeline-config</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:in</span><span class="hspace">&nbsp;</span><span class="RktVar">in-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:out</span><span class="hspace">&nbsp;</span><span class="RktVar">out-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:err</span><span class="hspace">&nbsp;</span><span class="RktVar">err-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:starter</span><span class="hspace">&nbsp;</span><span class="RktVar">default-pipeline-starter</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Parameterizes the body forms to use <span class="RktVar">default-pipeline-starter</span> when no starter is explicitly given, and to use <span class="RktVar">in-expr</span>, <span class="RktVar">out-expr</span>, and <span class="RktVar">err-expr</span> as default redirections.  Note that the expressions given for redirection are evaluated for every pipeline run in the body.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._splicing-with-pipeline-config))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._splicing-with-pipeline-config%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">splicing-with-pipeline-config</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:in</span><span class="hspace">&nbsp;</span><span class="RktVar">in-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:out</span><span class="hspace">&nbsp;</span><span class="RktVar">out-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:err</span><span class="hspace">&nbsp;</span><span class="RktVar">err-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:starter</span><span class="hspace">&nbsp;</span><span class="RktVar">default-pipeline-starter</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._with-pipeline-config%29%29" class="RktStxLink" data-pltdoc="x">with-pipeline-config</a></span>, except that it splices into definition contexts.</div></p><h5 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;Pipeline_Operators&quot;">3.3.3<tt>&nbsp;</tt><a name="(part._.Pipeline_.Operators)"></a>Pipeline Operators</h5><p>The core module only provides a few simple pipeline operators.  There are many more in the demo/ directory in the source repository.  Most of them are hastily written experiments, but some good ones should eventually be standardized.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dcomposite-pipe~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dcomposite-pipe~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=composite-pipe=</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">pipe-op</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Produces a composite pipeline member spec made from the pipeline operators given.  This is really more for use when defining new pipeline operators than for use in a pipeline itself.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dbasic-unix-pipe~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-unix-pipe~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=basic-unix-pipe=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">options</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Produces a unix-pipeline-member-spec with the given arguments as the process/function argument list.  The arguments are not quoted.  Any argument that produces a list will be spliced into the argument list.</div></p><p>Options all take an argument, must precede any arguments, and are as follows:</p><p><span class="RktPn">#:err</span> - Takes an expression to produce an error redirection value suitable for <span class="RktSym"><a href="mixed-pipeline.html#%28def._%28%28lib._shell%2Fmixed-pipeline..rkt%29._unix-pipeline-member-spec%29%29" class="RktValLink" data-pltdoc="x">unix-pipeline-member-spec</a></span>.</p><p><span class="RktPn">#:success</span> - Takes an expression suitable for the <span class="RktPn">#:success</span> argument of <span class="RktSym"><a href="mixed-pipeline.html#%28def._%28%28lib._shell%2Fmixed-pipeline..rkt%29._unix-pipeline-member-spec%29%29" class="RktValLink" data-pltdoc="x">unix-pipeline-member-spec</a></span>.</p><p>TODO - env modification</p><p>Arguments are evaluated left-to-right, and the first argument (that does not produce an empty list) is checked to be a valid executable path.  If it is not a valid executable path, an exception is raised before evaluating the other arguments.  (Note that an executable could be removed between a successful check and an attempt to spawn a subprocess, so it could still error after evaluating the other arguments.)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dunix-pipe~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=unix-pipe=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This is the pipe that does more or less what you expect.  It does tilde expansion (~ -&gt; $HOME).  It does globbing.  When you have $identifiers-with-dollar-signs they are expanded into variable references.  When $DOLLAR_IDENTIFIERS_ARE_CAPITALIZED they are expanded to environment variable lookups.</div></p><p>The operator quotes other arguments, and then passes through to <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-unix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-unix-pipe=</a></span>.  But it takes some extra optional arguments:</p><p><span class="RktPn">#:as</span> - This is sugar for adding on an object pipeline member afterward that parses the output somehow.  This should be given either #f (no transformation), a port reading function (eg. <span class="RktSym">port-&gt;string</span>), or one of a pre-set list of symbols:  <span class="RktVal">'</span><span class="RktVal">string</span>, <span class="RktVal">'</span><span class="RktVal">trim</span>, <span class="RktVal">'</span><span class="RktVal">lines</span>, or <span class="RktVal">'</span><span class="RktVal">words</span>.</p><p><span class="RktPn">#:e&gt;</span> - Accepts a file name (as an identifier), redirects the error stream to that file.  Produces an error if the file exists.</p><p><span class="RktPn">#:e&gt;!</span> - Accepts a file name (as an identifier), redirects the error stream to that file.  Truncates the file if it exists.</p><p><span class="RktPn">#:e&gt;&gt;</span> - Accepts a file name (as an identifier), redirects the error stream to that file.  Appends to the file if it exists.</p><p>BUT: if the first argument is a pipeline alias defined with <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-alias%29%29" class="RktStxLink" data-pltdoc="x">define-pipeline-alias</a></span> or <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-simple-pipeline-alias%29%29" class="RktStxLink" data-pltdoc="x">define-simple-pipeline-alias</a></span>, then the operator from that alias is swapped in instead, skipping everything else that this operator would normally do.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">echo</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$HOME/*.rkt</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-simple-pipeline-alias%29%29" class="RktStxLink" data-pltdoc="x">define-simple-pipeline-alias</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">d</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><span class="nobreak">--c</span>olor=auto</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dfdir</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">dotfiles</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">d</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$HOME/$dfdir</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>At runtime, the first argument is evaluated and tested to see if it exists as an executable on the path.  If it&rsquo;s not, an error is raised before the other arguments are evaluated.  (This is an optimization for error messages &ndash; the executable could still be removed between evaluating other arguments and executing the program, in which case the error message is worse.)</p><p>Usually <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c%29%29" class="RktStxLink" data-pltdoc="x">\|</a></span> is used instead.</p><p><div class="SIntrapara"><span style="font-weight: bold">Unstable:

The way dollar, tilde, and glob expansion is done by default may change (though it will still be consistent with examples in the GPCE paper).

The #:as flag may go away (it&rsquo;s redundant with just piping to a reader function).</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~7c))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">\|</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Alias for <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span>.</div></p><p>Note that the backslash is required in the normal racket reader because <span style="font-weight: bold">|</span> is normally treated specially.  In the Rash reader, you can get this by typing just <span style="font-weight: bold">|</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dbasic-object-pipe/expression~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fexpression~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=basic-object-pipe/expression=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">e</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The simplest object pipe.  <span class="RktVar">e</span> is simply the body of a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span>.  When used as a pipeline starter, the lambda accepts no arguments.  Otherwise it is a single-argument function, and <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span> is used to refer to its argument.</div></p><p><span style="font-weight: bold">Unstable.  The name will probably change.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dbasic-object-pipe/form~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fform~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=basic-object-pipe/form=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Creates an object pipe where <span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktMeta"></span> is the body of a function.</div></p><p>As with other object pipes, when used as a pipeline starter it generates a lambda with no arguments, and as a pipeline joint it generates a lambda with one argument, <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span>.</p><p><span style="font-weight: bold">Unstable.  The name will probably change.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dbasic-object-pipe~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=basic-object-pipe=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f-arg</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fform~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-object-pipe/form=</a></span>, except that when not used as a pipeline starter, if the <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span> is not used within the arguments, it is appended as the last argument.</div></p><p>To discover whether <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span> is used, each argument is local-expanded.  So <span class="RktVar">f-arg</span> must evaluate to function, and NOT be the name of a macro to be expanded with the other args.</p><p><span style="font-weight: bold">Note:</span>  If <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-object-pipe=</a></span> follows a subprocess form, it should close the received port.  Operators that handle ports automatically such as <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">\|&gt;&gt;</a></span> close the port automatically, but <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e%29%29" class="RktStxLink" data-pltdoc="x">\|&gt;</a></span> allows things like lazy reading into a stream, so it can not apply an automatic policy that will always work effectively.</p><p>Usually <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e%29%29" class="RktStxLink" data-pltdoc="x">\|&gt;</a></span> is used instead.</p><p><div class="SIntrapara"><span style="font-weight: bold">Unstable.  The name will probably change and/or this name may be given to a pipe of different meaning.  But the <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e%29%29" class="RktStxLink" data-pltdoc="x">\|&gt;</a></span> alias will NOT have its meaning changed (IE it is stable).</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~7c~3e))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">\|&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Alias for <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-object-pipe=</a></span>.</div></p><p>Note that the backslash is required in the normal racket reader because <span style="font-weight: bold">|</span> is normally treated specially.  In the Rash reader, you can get this by typing just <span style="font-weight: bold">|&gt;</span>.</p><p><span style="font-weight: bold">Unstable.  The name will probably change.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dobject-pipe/expression~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe%2Fexpression~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=object-pipe/expression=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fexpression~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-object-pipe/expression=</a></span>, but when it receives a port as an argument, it converts it to a string.</div></p><p><div class="SIntrapara"><span style="font-weight: bold">Unstable.  The name will probably change.</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dobject-pipe/form~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe%2Fform~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=object-pipe/form=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe%2Fform~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-object-pipe/form=</a></span>, but when it receives a port as an argument, it converts it to a string.</div></p><p><div class="SIntrapara"><span style="font-weight: bold">Unstable.  The name will probably change.</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~3dobject-pipe~3d))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">=object-pipe=</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f-arg</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dbasic-object-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=basic-object-pipe=</a></span>, but when it receives a port as an argument, it converts it to a string.</div></p><p>The same caveat applies that <span class="RktVar">f-arg</span> must NOT be a macro you expect to expand with the other arguments &ndash; it must evaluate to a function.</p><p>Usually <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">\|&gt;&gt;</a></span> is used instead.</p><p><div class="SIntrapara"><span style="font-weight: bold">Unstable.  The name will probably change.  But note that the <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">\|&gt;&gt;</a></span> alias is stable.</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._~7c~3e~3e))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~7c~3e~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">\|&gt;&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Alias for <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dobject-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=object-pipe=</a></span>.</div></p><p>Note that the backslash is required in the normal racket reader because <span style="font-weight: bold">|</span> is normally treated specially.  In the Rash reader, you can get this by typing just <span style="font-weight: bold">|&gt;&gt;</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><a name="(form._((lib._shell/pipeline-macro..rkt)._default-pipeline-starter))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><span class="RktSymDef RktSym">default-pipeline-starter</span></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Syntax parameter determining which pipeline operator is inserted when a <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span> form doesn&rsquo;t explicitly start with one.</div></p><p><span style="font-weight: bold">Unstable in that it will not be a syntax parameter in the future, but something with better semantics for what it&rsquo;s supposed to do.</span></p><p>I&rsquo;ve written various other pipeline operators that are a little more exciting and that are currently in the demo directory of the repository.  I&rsquo;ll eventually polish them up and put them somewhere stable.  They include things like unix pipes that automatically glob things, unix pipes that have lexically scoped alias resolution, =filter=, =map=, =for/stream=,=for/list/unix-arg=,=for/list/unix-input=...</p><h5 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;Defining_Pipeline_Operators&quot;">3.3.4<tt>&nbsp;</tt><a name="(part._.Defining_.Pipeline_.Operators)"></a>Defining Pipeline Operators</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._define-pipeline-operator))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-operator%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-pipeline-operator</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">start-or-joint</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">start-or-joint</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:start</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:joint</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:operator</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Define a pipeline operator.  Pipeline operators can act differently when they are in the starting position of a pipeline or later (joint position).  Specifically, when an operator creates an <span class="RktSym"><a href="mixed-pipeline.html#%28def._%28%28lib._shell%2Fmixed-pipeline..rkt%29._object-pipeline-member-spec%29%29" class="RktValLink" data-pltdoc="x">object-pipeline-member-spec</a></span>, it needs to have a function that accepts 0 arguments when in the start position and 1 argument in others.</div></p><p>If you use the #:operator keyword, the same transformer is used in start and joint positions.</p><p>If a transformer function is not specified for one of the options, a default implementation (that generates an error) is used.</p><p>The transformer will receive a syntax object corresponding to <span class="RktPn">(</span><span class="RktSym">name-of-pipe</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">argument</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktMeta"></span>, so it will likely want to ignore its first argument like most macros do.  But simetimes it may be useful to recur.</p><p>If a pipeline operator is used outside of <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span>, it raises a syntax error.</p><p>The operator must desugar to code which produces a pipeline-member-spec.</p><p>Example uses are in the demo directory in the repository.</p><p><span style="font-weight: bold">Unstable:

Currently for operators to desugar to another operator, the new operator must be at the top-level of the returned syntax or it will raise an error (IE that a pipeline operator was used out of context).  This should be fixed later.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._define-pipeline-alias))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-alias%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-pipeline-alias</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines an alias macro recognized by <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span> and maybe others.</div></p><p><span class="RktVar">transformer</span> must be a syntax transformer function, and must return a syntax object that starts with a pipeline operator.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Unix</span><span class="hspace">&nbsp;</span><span class="RktCmt">`find`</span><span class="hspace">&nbsp;</span><span class="RktCmt">has</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">take</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">directory</span><span class="hspace">&nbsp;</span><span class="RktCmt">first,</span><span class="hspace">&nbsp;</span><span class="RktCmt">but</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">want</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">always</span><span class="hspace">&nbsp;</span><span class="RktCmt">add</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">-type</span><span class="hspace">&nbsp;</span><span class="RktCmt">f</span><span class="hspace">&nbsp;</span><span class="RktCmt">flag</span><span class="hspace">&nbsp;</span><span class="RktCmt">at</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">end.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-alias%29%29" class="RktStxLink" data-pltdoc="x">define-pipeline-alias</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">find-f</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">syntax-parser</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#'</a></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">find</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-t</span>ype</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">these</span><span class="hspace">&nbsp;</span><span class="RktCmt">are</span><span class="hspace">&nbsp;</span><span class="RktCmt">equivalent</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">find-f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"."</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">find</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"."</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-t</span>ype</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span style="font-weight: bold">Unstable:  I might re-think this slightly...  if it changes it will be similar and existing aliases will probably still work, but I&rsquo;m not 100% sure so I want to hedge.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._define-simple-pipeline-alias))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-simple-pipeline-alias%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-simple-pipeline-alias</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">cmd</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Simple sugar for <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-pipeline-alias%29%29" class="RktStxLink" data-pltdoc="x">define-pipeline-alias</a></span>.  It defines an alias transformer that uses <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span>.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._define-simple-pipeline-alias%29%29" class="RktStxLink" data-pltdoc="x">define-simple-pipeline-alias</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><span class="nobreak">--c</span>olor=auto</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">these</span><span class="hspace">&nbsp;</span><span class="RktCmt">are</span><span class="hspace">&nbsp;</span><span class="RktCmt">equivalent</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">d</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$HOME</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._run-pipeline%29%29" class="RktStxLink" data-pltdoc="x">run-pipeline</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">ls</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><span class="nobreak">--c</span>olor=auto</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-l</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">$HOME</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Note that arguments are passed through as-is to <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._~3dunix-pipe~3d%29%29" class="RktStxLink" data-pltdoc="x">=unix-pipe=</a></span>, so if you use the name of another alias it will cause alias replacement a second time unless you quote the command name or put it in a string.</p><p><span style="font-weight: bold">Unstable:  The name might change or something.  I just want to hedge the possibility that I want to re-look at aliases.</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._shell/pipeline-macro..rkt)._current-pipeline-argument))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The name of the implicit argument for object pipes.  The default is an error, and pipe operators that accept it must set it up using <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._expand-pipeline-arguments%29%29" class="RktStxLink" data-pltdoc="x">expand-pipeline-arguments</a></span> or <span class="RktSym">syntax-parameterize</span>.</div></p><p><div class="SIntrapara">Usually <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span> is used instead.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._shell/pipeline-macro..rkt).__))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29.__%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">_</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Alias for <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span>.  It&rsquo;s an underscore, if you&rsquo;re having trouble telling which of the many horizontal line characters it is since it&rsquo;s all alone right there in that bar.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/pipeline-macro..rkt)._expand-pipeline-arguments))"></a><span title="Provided from: shell/pipeline-macro | Package: shell-pipeline"><span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._expand-pipeline-arguments%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">expand-pipeline-arguments</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">TODO - document this.</div></p><p>It&rsquo;s used to get the <span class="RktSym"><a href="#%28form._%28%28lib._shell%2Fpipeline-macro..rkt%29._current-pipeline-argument%29%29" class="RktStxLink" data-pltdoc="x">current-pipeline-argument</a></span> detected and inserted automatically if missing.</p><p><span style="font-weight: bold">Unstable &ndash; this is not a great API and I don&rsquo;t want the burden of maintaining it.</span></p><h5 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;Inspecting_Pipelines&quot;">3.3.5<tt>&nbsp;</tt><a name="(part._.Inspecting_.Pipelines)"></a>Inspecting Pipelines</h5><p>See <a href="mixed-pipeline.html#%28part._inspecting-mixed-pipelines%29" data-pltdoc="x">Inspecting Mixed Pipelines</a>.</p><h4 x-source-module="(lib &quot;shell/scribblings/shell-pipeline.scrbl&quot;)" x-source-pkg="shell-pipeline" x-part-tag="&quot;Demo_stuff_reference&quot;">3.4<tt>&nbsp;</tt><a name="(part._.Demo_stuff_reference)"></a>Demo stuff reference</h4><p>These things are documented in the Rash documentation, but I&rsquo;m adding these definitions to not have broken links...</p><p><div class="SIntrapara">You can get these with </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(require rash/demo/setup)</span></p></td></tr></table></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/demo/more-pipeline-operators..rkt)._~3dmap~3d))"></a><span title="Provided from: shell/demo/more-pipeline-operators"><span class="RktSym"><span class="RktSymDef RktSym">=map=</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Unstable in that it will probably be moved into the main rash module, but I think it will stay the same now.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>pipeline-operator</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._shell/demo/more-pipeline-operators..rkt)._~3dfilter~3d))"></a><span title="Provided from: shell/demo/more-pipeline-operators"><span class="RktSym"><span class="RktSymDef RktSym">=filter=</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Unstable in that it will probably be moved into the main rash module, but I think it will stay the same now.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="mixed-pipeline.html" title="backward to &quot;2 Mixed Unix-style and Racket Object Pipelines&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Shell Pipeline Package&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Code_and_License.html" title="forward to &quot;4 Code and License&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/shell-pipeline/pipeline-macro.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:24 GMT -->
</html>