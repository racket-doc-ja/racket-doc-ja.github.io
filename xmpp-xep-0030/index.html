<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/xmpp-xep-0030/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:07:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>XMPP Service Discovery (XEP-0030)</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">XMPP Service Discovery (XEP-<wbr></wbr>0030)</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Example%29" class="tocviewlink" data-pltdoc="x">Example</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Reference%29" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">XMPP Service Discovery (XEP-<wbr></wbr>0030)</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Example%29" class="tocsubseclink" data-pltdoc="x">Example</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Nested_hierarchy%29" class="tocsubseclink" data-pltdoc="x">Nested hierarchy</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.J.S.O.N_data%29" class="tocsubseclink" data-pltdoc="x">JSON data</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Reference%29" class="tocsubseclink" data-pltdoc="x">Reference</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._disco%29" class="tocsubseclink" data-pltdoc="x">disco</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>provide-<wbr></wbr>disco</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>xmpp-<wbr></wbr>disco!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-~3ejsexpr%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>&gt;jsexpr</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-provider%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>provider</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._disco_info%29" class="tocsubseclink" data-pltdoc="x">disco#info</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>provide-<wbr></wbr>disco-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-entity%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>info-<wbr></wbr>entity!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-identity%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>info-<wbr></wbr>identity!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>info-<wbr></wbr>feature!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._make-xmpp-disco-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>info-<wbr></wbr>provider</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>info-<wbr></wbr>identity</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-feature%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>info-<wbr></wbr>feature</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._disco_items%29" class="tocsubseclink" data-pltdoc="x">disco#items</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-items%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>provide-<wbr></wbr>disco-<wbr></wbr>items</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-items-entity%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>items-<wbr></wbr>entity!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>item!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._make-xmpp-disco-items%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>xmpp-<wbr></wbr>disco-<wbr></wbr>items</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>items-<wbr></wbr>provider</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>items</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>disco-<wbr></wbr>item</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.X.M.P.P_.Service_.Discovery__.X.E.P-0030_)"></a><a name="(mod-path._xmpp/xep-0030)"></a>XMPP Service Discovery (XEP-0030)</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Navlost &lt;racket at navlost dot eu&gt;</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">xmpp/xep-0030</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/XMPP" title="Install this package using `raco pkg install XMPP`"><span class="stt">XMPP</span></a></span></td></tr></table></p><p>This module implements
<a href="https://xmpp.org/extensions/xep-0030.html">XMPP Service Discovery (XMPP-0030)</a>,
an <a href="https://xmpp.org/">XMPP</a> protocol extension for discovering information
about other XMPP entities.</p><h3 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Example&quot;">1<tt>&nbsp;</tt><a name="(part._.Example)"></a>Example</h3><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We will define a component with two entities, of the form:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">my-component.example.net</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&#9500; node0</span><span class="RktCmt">@</span><span class="RktCmt">my-component.example.net</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&#9492; node1</span><span class="RktCmt">@</span><span class="RktCmt">my-component.example.net</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">With the following configuration:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">my-component.example.net:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Name:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">My component</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Category: component</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Type:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">generic</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">node0</span><span class="RktCmt">@</span><span class="RktCmt">my-component.example.net:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Name:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">First node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Category: account</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Type:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">registered</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">node1</span><span class="RktCmt">@</span><span class="RktCmt">my-component.example.net:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Name:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">Second node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Category: account</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Type:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">registered</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xmpp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Let us connect to the server as a component.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">host</span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="hspace">&nbsp;</span><span class="RktSym">domain</span><span class="hspace">&nbsp;</span><span class="RktSym">secret</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"example.net"</span><span class="hspace">&nbsp;</span><span class="RktVal">5255</span><span class="hspace">&nbsp;</span><span class="RktVal">"my-component.example.net"</span><span class="hspace">&nbsp;</span><span class="RktVal">"COMPONENT!SECRET"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-transport&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Ftransport..rkt%2529._xmpp-connect-component%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connect-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">host</span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="hspace">&nbsp;</span><span class="RktSym">domain</span><span class="hspace">&nbsp;</span><span class="RktSym">secret</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-transport&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Ftransport..rkt%2529._xmpp-set-handler%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-set-handler</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">First we set up disco#info</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We start the disco#info service handler on this connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-provide-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Let us create a disco#info object for the component itself</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._make-xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">make-xmpp-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Let us add an &lt;identity/&gt; value</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-identity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-identity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-identity</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"My component"</span><span class="hspace">&nbsp;</span><span class="RktVal">"component"</span><span class="hspace">&nbsp;</span><span class="RktVal">"generic"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">disco-info-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">And advertise the disco#info feature</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-feature%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-feature</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"http://jabber.org/protocol/disco#info"</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We add the disco-info object to the disco#info handler.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">After this, the component will start replying to any</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">incoming disco#info queries.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">NOTE: we could have also added it first and then configured it.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-entity!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Now we set up disco#items</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We start the disco#items service handler</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-provide-disco-items</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We create a disco#items object holding the component</span><span class="RktCmt">'</span><span class="RktCmt">s child items</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We add it to the handler (we can do this before or after configuring</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the object</span><span class="RktCmt">'</span><span class="RktCmt">s items).</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-items-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-items-entity!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We tell the root</span><span class="RktCmt">'</span><span class="RktCmt">s disco#info to also advertise disco#items capability</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-feature%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-feature</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"http://jabber.org/protocol/disco#items"</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We define the first node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._string-%7E3ejid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jid</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"node0@my-component.example.net"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We define the second node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._string-%7E3ejid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jid</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"node1@my-component.example.net"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We add them to the disco#items object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-item!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-item!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di1</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">And now we add the disco#info for each of the two nodes</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We can also chain the different calls:</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-entity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-feature%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-feature</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"http://jabber.org/protocol/disco#info"</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-identity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-identity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-identity</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"First node"</span><span class="hspace">&nbsp;</span><span class="RktVal">"registered"</span><span class="hspace">&nbsp;</span><span class="RktVal">"account"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-jid%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-node%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-entity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-feature%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-feature</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"http://jabber.org/protocol/disco#info"</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-identity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-identity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-identity</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Second node"</span><span class="hspace">&nbsp;</span><span class="RktVal">"registered"</span><span class="hspace">&nbsp;</span><span class="RktVal">"account"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-jid%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-node%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">disco-info</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>When the above component is queried, the conversation will be something like this:</p><blockquote class="SCodeFlow"><p style="white-space:pre;font-family:mono;font-size:10pt;color:green;">&lt;iq type=&rsquo;get&rsquo; id=&rsquo;a1197a&rsquo; to=&rsquo;my-component.example.net&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#info&rsquo;/&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:green;">&lt;iq type=&rsquo;get&rsquo; id=&rsquo;a1198a&rsquo; to=&rsquo;my-component.example.net&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#items&rsquo;/&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:blue;">&lt;iq type=&rsquo;result&rsquo; id=&rsquo;a1197a&rsquo; from=&rsquo;my-component.example.net&rsquo; to=&rsquo;user@example.com/laptop-129&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#info&rsquo;&gt;
    &lt;identity name=&rsquo;My component&rsquo; type=&rsquo;generic&rsquo; category=&rsquo;component&rsquo;/&gt;
    &lt;feature var=&rsquo;http://jabber.org/protocol/disco#items&rsquo;/&gt;
    &lt;feature var=&rsquo;http://jabber.org/protocol/disco#info&rsquo;/&gt;
  &lt;/query&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:blue;">&lt;iq type=&rsquo;result&rsquo; id=&rsquo;a1198a&rsquo; from=&rsquo;my-component.example.net&rsquo; to=&rsquo;user@example.com/laptop-129&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#items&rsquo;&gt;
    &lt;item jid=&rsquo;node1@my-component.example.net&rsquo;/&gt;
    &lt;item jid=&rsquo;node0@my-component.example.net&rsquo;/&gt;
  &lt;/query&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:green;">&lt;iq type=&rsquo;get&rsquo; id=&rsquo;a1199a&rsquo; to=&rsquo;node1@my-component.example.net&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#info&rsquo;/&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:green;">&lt;iq type=&rsquo;get&rsquo; id=&rsquo;a119aa&rsquo; to=&rsquo;node0@my-component.example.net&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#info&rsquo;/&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:blue;">&lt;iq type=&rsquo;result&rsquo; id=&rsquo;a1199a&rsquo; from=&rsquo;node1@my-component.example.net&rsquo; to=&rsquo;user@example.com/laptop-129&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#info&rsquo;&gt;
    &lt;identity name=&rsquo;Second node&rsquo; type=&rsquo;account&rsquo; category=&rsquo;registered&rsquo;/&gt;
    &lt;feature var=&rsquo;http://jabber.org/protocol/disco#info&rsquo;/&gt;
  &lt;/query&gt;
&lt;/iq&gt;</p><p style="white-space:pre;font-family:mono;font-size:10pt;color:blue;">&lt;iq type=&rsquo;result&rsquo; id=&rsquo;a119aa&rsquo; from=&rsquo;node0@my-component.example.net&rsquo; to=&rsquo;user@example.com/laptop-129&rsquo;&gt;
  &lt;query xmlns=&rsquo;http://jabber.org/protocol/disco#info&rsquo;&gt;
    &lt;identity name=&rsquo;First node&rsquo; type=&rsquo;account&rsquo; category=&rsquo;registered&rsquo;/&gt;
    &lt;feature var=&rsquo;http://jabber.org/protocol/disco#info&rsquo;/&gt;
  &lt;/query&gt;
&lt;/iq&gt;</p></blockquote><h4 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Nested_hierarchy&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Nested_hierarchy)"></a>Nested hierarchy</h4><p>Continuing from the previous example, we illustrate how to add items deeper in the hierarchy.</p><p>In this case, we will add two nodes under <span class="stt">node0@my-component.example.net</span>, named &#8220;config&#8221; and &#8220;user&#8221;:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-items-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-items-entity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This is one item</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-item!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-jid%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"user"</span><span class="hspace">&nbsp;</span><span class="RktVal">"User management"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This is another</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-item!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-jid%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"config"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Configuration"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This is the container for the items. The root node for these items is</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lsquo;</span><span class="RktCmt">di0</span><span class="RktCmt">&lsquo;</span><span class="RktCmt"> (defined in the previous example).</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-jid%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-node%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This is the disco#items handler</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We indicate that </span><span class="RktCmt">&lsquo;</span><span class="RktCmt">node0</span><span class="RktCmt">@</span><span class="RktCmt">my-component.example.net</span><span class="RktCmt">&lsquo;</span><span class="RktCmt"> now also supports</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">disco#items.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-entity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"http://jabber.org/protocol/disco#items"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-jid%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item-node%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym">di0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info</span><span class="RktPn">)</span></td></tr></table></blockquote><h4 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;JSON_data&quot;">1.2<tt>&nbsp;</tt><a name="(part._.J.S.O.N_data)"></a>JSON data</h4><p>Alternatively, it might be more convenient to load the configuration from a
<a href="https://datatracker.ietf.org/doc/html/rfc8259">JSON</a> object (see
Racket&rsquo;s
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=json&amp;rel=index.html&amp;version=8.6" class="Sq" data-pltdoc="x">JSON</a> module).</p><p>For instance, the above configuration can be represented as:</p><blockquote class="SCodeFlow"><p style="white-space:pre;font-family:mono;font-size:10pt;color#222;">{
  "info": {
    "features": [
      {
        "node": null,
        "var": "http://jabber.org/protocol/disco#items"
      },
      {
        "node": null,
        "var": "http://jabber.org/protocol/disco#info"
      }
    ],
    "identity": [
      {
        "category": "My component",
        "name": "generic",
        "type": "component"
      }
    ]
  },
  "items": [
    {
      "info": {
        "features": [
          {
            "node": null,
            "var": "http://jabber.org/protocol/disco#info"
          }
        ],
        "identity": [
          {
            "category": "Second node",
            "name": "account",
            "type": "registered"
          }
        ]
      },
      "items": [],
      "jid": "node1@my-component.example.net",
      "name": null,
      "node": null
    },
    {
      "info": {
        "features": [
          {
            "node": null,
            "var": "http://jabber.org/protocol/disco#info"
          }
        ],
        "identity": [
          {
            "category": "First node",
            "name": "account",
            "type": "registered"
          }
        ]
      },
      "items": [],
      "jid": "node0@my-component.example.net",
      "name": null,
      "node": null
    }
  ],
  "jid": "my-component.example.net",
  "name": null,
  "node": null
}</p></blockquote><p>We could then load the configuration as:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xmpp</span><span class="hspace">&nbsp;</span><span class="RktSym">json</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Let us connect to the server as a component.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">host</span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="hspace">&nbsp;</span><span class="RktSym">domain</span><span class="hspace">&nbsp;</span><span class="RktSym">secret</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"example.net"</span><span class="hspace">&nbsp;</span><span class="RktVal">5255</span><span class="hspace">&nbsp;</span><span class="RktVal">"my-component.example.net"</span><span class="hspace">&nbsp;</span><span class="RktVal">"COMPONENT!SECRET"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-transport&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Ftransport..rkt%2529._xmpp-connect-component%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connect-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">host</span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="hspace">&nbsp;</span><span class="RktSym">domain</span><span class="hspace">&nbsp;</span><span class="RktSym">secret</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-transport&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Ftransport..rkt%2529._xmpp-set-handler%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-set-handler</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">First we set up disco#info</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We start both disco#info and disco#items service</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">handlers on this connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco%29%29" class="RktValLink" data-pltdoc="x">xmpp-provide-disco</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">config</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-append</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"{\"info\":{\"features\":[{\"node\":null,\"var\":\"http://jabb"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"er.org/protocol/disco#items\"},{\"node\":null,\"var\":\"http:/"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"/jabber.org/protocol/disco#info\"}],\"identity\":[{\"category\"\n</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">":\"My component\",\"name\":\"generic\",\"type\":\"component\""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"}]},\"items\":[{\"info\":{\"features\":[{\"node\":null,\"var\""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">":\"http://jabber.org/protocol/disco#info\"}],\"identity\":[{\""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"category\":\"Second node\",\"name\":\"account\",\"type\":\"reg"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"istered\"}]},\"items\":[],\"jid\":\"node1@my-component.example"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">".net\",\"name\":null,\"node\":null},{\"info\":{\"features\":[{"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"\"node\":null,\"var\":\"http://jabber.org/protocol/disco#info\"\n</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"}],\"identity\":[{\"category\":\"First node\",\"name\":\"acco"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"unt\",\"type\":\"registered\"}]},\"items\":[],\"jid\":\"node0@"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"my-component.example.net\",\"name\":null,\"node\":null}],\"jid"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"\":\"my-component.example.net\",\"name\":null,\"node\":null}"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco!</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=json&amp;rel=index.html%23%2528def._%2528%2528lib._json%252Fmain..rkt%2529._string-%7E3ejsexpr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jsexpr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">config</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._invalid-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">invalid-jid</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktSym">disco</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Reference&quot;">2<tt>&nbsp;</tt><a name="(part._.Reference)"></a>Reference</h3><h4 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;disco&quot;">2.1<tt>&nbsp;</tt><a name="(part._disco)"></a>disco</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-provide-disco))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-provide-disco</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-provider?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Installs both <span class="emph">disco#info</span> and <span class="emph">disco#items</span> handlers in one go.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._add-xmpp-disco!))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-xmpp-disco!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">json</span><span class="hspace">&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span><span class="RktVar">disco</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-provider?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">json</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=json&amp;rel=index.html%23%2528def._%2528%2528lib._json%252Fmain..rkt%2529._jsexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jsexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">disco</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-provider?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Read the configuration from a
 <a href="https://datatracker.ietf.org/doc/html/rfc8259">JSON</a> object
 and insert it as a child of <span class="RktVar">jid</span>+<span class="RktVar">node</span>. If <span class="RktVar">jid</span>+<span class="RktVar">node</span>
 does not already exist, the configuration will be inserted at the top level of
 the discovery tree.</div></p><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Use (invalid-jid) "" to load the configuration</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">at the root of the tree.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">json-data</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._invalid-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">invalid-jid</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktVar">disco</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-~3ejsexpr))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-~3ejsexpr%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-&gt;jsexpr</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">disco</span><span class="hspace">&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktVar">node</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=json&amp;rel=index.html%23%2528def._%2528%2528lib._json%252Fmain..rkt%2529._jsexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jsexpr?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">disco</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-provider?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">""</span></td></tr></table></blockquote></div><div class="SIntrapara">Export the discovery configuration for  <span class="RktVar">jid</span>+<span class="RktVar">node</span> as a JSON object.</div></p><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Export the entire configuration tree</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-~3ejsexpr%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-&gt;jsexpr</a></span><span class="hspace">&nbsp;</span><span class="RktVar">disco</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span></td></tr></table></blockquote><p><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">'</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">info</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#hasheq</span><span class="RktRes">(</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">features</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">var</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"http://jabber.org/protocol/disco#info"</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">var</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"http://jabber.org/protocol/disco#items"</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">identity</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">category</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"My component"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"generic"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">type</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"component"</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">items</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">info</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#hasheq</span><span class="RktRes">(</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">features</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">var</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"http://jabber.org/protocol/disco#info"</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">identity</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">category</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"First node"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"account"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">type</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"registered"</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">items</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">jid</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"node0@my-component.example.net"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">#hasheq</span><span class="RktRes">(</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">info</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">#hasheq</span><span class="RktRes">(</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">features</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">var</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"http://jabber.org/protocol/disco#info"</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">identity</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">(</span><span class="RktRes">#hasheq</span><span class="RktRes">(</span><span class="RktRes">(</span><span class="RktRes">category</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"Second node"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"account"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">type</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"registered"</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">items</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">jid</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"node1@my-component.example.net"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">jid</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">"my-component.example.net"</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">name</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span></td></tr><tr><td><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="RktRes">(</span><span class="RktRes">node</span><span class="RktRes"><span class="hspace">&nbsp;</span></span><span class="RktRes">. </span><span class="RktRes">null</span><span class="RktRes">)</span><span class="RktRes">)</span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-provider-disco-items))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-provider-disco-info))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-provider~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-provider))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-provider))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-provider%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-provider</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">disco-info</span><span class="stt"> </span><span class="RktSym">disco-items</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">disco-info</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-provider?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">disco-items</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items-provider?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Structure that holds a node&rsquo;s information for both <span class="emph">disco#info</span>
and <span class="emph">disco#items</span>.</div></p><h4 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;disco_info&quot;">2.2<tt>&nbsp;</tt><a name="(part._disco_info)"></a>disco#info</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-provide-disco-info))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-provide-disco-info</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-provider?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Install the <span class="emph">disco#info</span> handler on an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection</a></span>.
The connection itself has to be managed via <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-transport&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Ftransport..rkt%2529._xmpp-set-handler%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-set-handler</a></span><span class="stt"> </span><span class="RktVar">conn</span><span class="RktPn">)</span>.</div></p><p>The returned <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-provider</a></span> mutable object is used to configure
the actual <span class="emph">disco#info</span> data.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._add-xmpp-disco-info-entity!))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-entity%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-xmpp-disco-info-entity!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">entity</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">provider</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-provider?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">entity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">provider</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-provider?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Add an entity, either a JID or a node, to the <span class="emph">disco#info</span> database, so that
 <span class="emph">disco#info</span> identities and features can be associated to it.</div></p><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xmpp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We start the disco#info service handler on this connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-provide-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Let us create a disco#info object for the component itself</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">(assume the component</span><span class="RktCmt">'</span><span class="RktCmt">s name is my-component.example.net).</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._string-%7E3ejid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jid</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"my-component.example.net"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Now we can add disco#info data to my-component.example.net &#8230;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-identity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-identity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-identity</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Racket XMPP"</span><span class="hspace">&nbsp;</span><span class="RktVal">"component"</span><span class="hspace">&nbsp;</span><span class="RktVal">"generic"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Features are plain-text strings</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://jabber.org/protocol/disco#info"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-info-root</span><span class="RktPn">)</span></td></tr></table></blockquote><p>(add-xmpp-disco-info-entity!
 disco-info-root
 disco-info)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._add-xmpp-disco-info-identity!))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-identity%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-xmpp-disco-info-identity!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">identity</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">entity</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xmpp-disco-info-entity?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">identity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-identity?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">entity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xmpp-disco-info-entity?</span></td></tr></table></blockquote></div><div class="SIntrapara">Add an identity entry
(<a href="https://xmpp.org/extensions/xep-0030.html#info-basic">in the sense of this service discovery protocol</a>)
to the target <span class="RktVar">entity</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._add-xmpp-disco-info-feature!))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-info-feature%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-xmpp-disco-info-feature!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">feature</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">entity</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xmpp-disco-info-entity?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">feature</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">entity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xmpp-disco-info-entity?</span></td></tr></table></blockquote></div><div class="SIntrapara">Add a feature entry
(<a href="https://xmpp.org/extensions/xep-0030.html#info-basic">in the sense of this service discovery protocol</a>)
to the target <span class="RktVar">entity</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._make-xmpp-disco-info))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._make-xmpp-disco-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-xmpp-disco-info</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span><span class="RktVar">node</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A convenience function equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info</a></span><span class="stt"> </span><span class="RktVar">jid</span><span class="stt"> </span><span class="RktVar">node</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-provider-entities))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-provider~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-info-provider))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-provider))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-provider%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-info-provider</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">entities</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">entities</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Structure that holds a list of <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info</a></span> entities,
each representing a JID or a JID+node, which in turn hold <span class="emph">disco#info</span>
data.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-form))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-features))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-identities))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-node))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-jid))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-info))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-info</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">jid</span><span class="stt"> </span><span class="RktSym">node</span><span class="stt"> </span><span class="RktSym">identities</span><span class="stt"> </span><span class="RktSym">features</span><span class="stt"> </span><span class="RktSym">form</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">identities</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-info-identity?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">features</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">non-empty-string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">form</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktSym">non-empty-string?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Structure that holds a node&rsquo;s <span class="emph">disco#info</span> information.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-identity-type))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-identity-category))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-identity-name))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-identity~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-info-identity))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-identity))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-identity%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-info-identity</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">category</span><span class="stt"> </span><span class="RktSym">type</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">category</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">non-empty-string?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">non-empty-string?</span></td></tr></table></blockquote></div><div class="SIntrapara">Structure that represents a <span class="emph">disco#info</span> <span class="stt">&lt;identity/&gt;</span> entity.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-feature-node))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-feature-var))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-feature~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-info-feature))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-info-feature))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-info-feature%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-info-feature</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">var</span><span class="stt"> </span><span class="RktSym">node</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Structure that represents a <span class="emph">disco#info</span> <span class="stt">&lt;feature/&gt;</span> entity.</div></p><h4 x-source-module="(lib &quot;xmpp/xep-0030/xmpp-xep-0030.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;disco_items&quot;">2.3<tt>&nbsp;</tt><a name="(part._disco_items)"></a>disco#items</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-provide-disco-items))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-items%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-provide-disco-items</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items-provider?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Install the <span class="emph">disco#items</span> handler on an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection</a></span>.
The connection itself has to be managed via <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-transport&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Ftransport..rkt%2529._xmpp-set-handler%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-set-handler</a></span><span class="stt"> </span><span class="RktVar">conn</span><span class="RktPn">)</span>.</div></p><p>The returned <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items-provider</a></span> mutable object is used to configure
the actual <span class="emph">disco#items</span> data.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._add-xmpp-disco-items-entity!))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-items-entity%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-xmpp-disco-items-entity!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">entity</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">provider</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items-provider?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">entity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">provider</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items-provider?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Add an entity, either a JID or a JID+node, to the <span class="emph">disco#items</span> database, so that
 <span class="emph">disco#items</span> nodes can be associated to it.</div></p><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xmpp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">We start the disco#items service handler on this connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-provide-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-provide-disco-items</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Let us create a disco#items object for the component itself</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">(assume the component</span><span class="RktCmt">'</span><span class="RktCmt">s name is my-component.example.net).</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._string-%7E3ejid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jid</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"my-component.example.net"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Now we can add disco#items data to my-component.example.net &#8230;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-item!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._string-%7E3ejid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jid</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"node0@"</span><span class="hspace">&nbsp;</span><span class="RktVal">"my-component.example.net"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktVal">"First node"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-items-entity%21%29%29" class="RktValLink" data-pltdoc="x">add-xmpp-disco-items-entity!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items-root</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktSym">disco-items</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._add-xmpp-disco-item!))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._add-xmpp-disco-item%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-xmpp-disco-item!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">item</span><span class="hspace">&nbsp;</span><span class="RktVar">entity</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">item</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">entity</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Add an item to <span class="RktVar">entity</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/xep-0030..rkt)._make-xmpp-disco-items))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._make-xmpp-disco-items%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-xmpp-disco-items</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span><span class="RktVar">node</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A convenience function equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items</a></span><span class="stt"> </span><span class="RktVar">jid</span><span class="stt"> </span><span class="RktVar">node</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items-provider-entities))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items-provider~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-items-provider))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items-provider))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items-provider%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-items-provider</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">entities</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">entities</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Structure that holds a list of <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-items</a></span> entities,
each representing a JID or a JID+node, which in turn hold <span class="emph">disco#items</span>
data.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items-items))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items-node))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items-jid))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-items))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-items))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-items%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-items</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">jid</span><span class="stt"> </span><span class="RktSym">node</span><span class="stt"> </span><span class="RktSym">items</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">items</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item~3f%29%29" class="RktValLink" data-pltdoc="x">xmpp-disco-item?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Structure representing a JID or JID+node. Its <span class="RktSym">items</span>
member holds its children items.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-item-name))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-item-node))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-item-jid))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-item~3f))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._struct~3axmpp-disco-item))"></a><a name="(def._((lib._xmpp/xep-0030..rkt)._xmpp-disco-item))"></a><span title="Provided from: xmpp/xep-0030 | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Fxep-0030..rkt%29._xmpp-disco-item%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-disco-item</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">jid</span><span class="stt"> </span><span class="RktSym">node</span><span class="stt"> </span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A <span class="emph">disco#items</span>
<a href="https://xmpp.org/extensions/xep-0030.html#items-basic"><span class="stt">&lt;item/&gt;</span> entity</a>.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/xmpp-xep-0030/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:07:22 GMT -->
</html>