<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/turnstile/The_Turnstile_Guide.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;The Turnstile Guide</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">The <span class="RktModLink"><span class="RktSym">turnstile</span></span> language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">The Turnstile Guide</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="The_Turnstile_Reference.html" class="tocviewlink" data-pltdoc="x">The Turnstile Reference</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Rackunit-Style_Test_Forms_for_Turnstile.html" class="tocviewlink" data-pltdoc="x">Rackunit-<wbr></wbr>Style Test Forms for Turnstile</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" data-pltdoc="x">Bibliography</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">The Turnstile Guide</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._judgements%29" class="tocviewlink" data-pltdoc="x">A New Type Judgement</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._define-typed-syntax%29" class="tocviewlink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>typed-<wbr></wbr>syntax</span></span></a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._tycon%29" class="tocviewlink" data-pltdoc="x">Defining Types</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._.Defining_~e2~87~90_.Rules%29" class="tocviewlink" data-pltdoc="x">Defining <span class="RktSym"><span class="RktStxLink">&#8656;</span></span> Rules</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="#%28part._.Defining_.Primitive_.Operations__.Primops_%29" class="tocviewlink" data-pltdoc="x">Defining Primitive Operations (Primops)</a></td></tr><tr><td align="right">1.6&nbsp;</td><td><a href="#%28part._stlc%29" class="tocviewlink" data-pltdoc="x">A Complete Language</a></td></tr><tr><td align="right">1.7&nbsp;</td><td><a href="#%28part._stlcsub%29" class="tocviewlink" data-pltdoc="x">Extending a Language</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._judgements%29" class="tocsubseclink" data-pltdoc="x">A New Type Judgement</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._define-typed-syntax%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>typed-<wbr></wbr>syntax</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Type_rules_vs_define-typed-syntax%29" class="tocsubseclink" data-pltdoc="x">Type rules vs <span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>typed-<wbr></wbr>syntax</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.2<tt>&nbsp;</tt></span><a href="#%28part._define-typed-syntax_premises%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>typed-<wbr></wbr>syntax</span></span> premises</a></td></tr><tr><td><span class="tocsublinknumber">1.2.3<tt>&nbsp;</tt></span><a href="#%28part._syntax-parse_directives_as_premises%29" class="tocsubseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">syntax-<wbr></wbr>parse</span></span> directives as premises</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._tycon%29" class="tocsubseclink" data-pltdoc="x">Defining Types</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Defining_~e2~87~90_.Rules%29" class="tocsubseclink" data-pltdoc="x">Defining <span class="RktSym"><span class="RktStxLink">&#8656;</span></span> Rules</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._.Defining_.Primitive_.Operations__.Primops_%29" class="tocsubseclink" data-pltdoc="x">Defining Primitive Operations (Primops)</a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part._stlc%29" class="tocsubseclink" data-pltdoc="x">A Complete Language</a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._stlcsub%29" class="tocsubseclink" data-pltdoc="x">Extending a Language</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;The turnstile language&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;The turnstile language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="The_Turnstile_Reference.html" title="forward to &quot;2 The Turnstile Reference&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;The_Turnstile_Guide&quot;">1<tt>&nbsp;</tt><a name="(part._.The_.Turnstile_.Guide)"></a>The Turnstile Guide</h3><p>This guide introduces Turnstile with the implementation of a simply-typed core
language. It then reuses the simply-typed language implementation to implement
a language with subtyping.</p><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;judgements&quot;">1.1<tt>&nbsp;</tt><a name="(part._judgements)"></a>A New Type Judgement</h4><p><div class="SIntrapara">Turnstile&rsquo;s syntax borrows from that of conventional type
judgements. Specifically, programmers may implement typed languages using a
declarative syntax that interleaves program rewriting (i.e., macro expansion)
and type checking. These new rules rely on two core
[<a href="doc-bibliography.html#%28cite._bidirectional%29" data-pltdoc="x">bidirectional</a>] judgements:
</div><div class="SIntrapara"><ol><li><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">&#915; &#8866; e &#8811; e- &#8658; &#964;</span></p></td></tr></table></div><div class="SIntrapara">reads: "In context &#915;, <span class="RktSym">e</span> expands to <span class="RktSym">e-</span> and has type
&#964;."</div></p></li><li><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">&#915; &#8866; e &#8811; e- &#8656; &#964;</span></p></td></tr></table></div><div class="SIntrapara">reads: "In context &#915;, <span class="RktSym">e</span> expands to <span class="RktSym">e-</span> and must
have type &#964;."</div></p><p>The key difference is that &#964; is an output in the first relation and
an input in the second relation.</p><p>As will be shown below, these input and output positions
conveniently correspond to <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528tech._syntax._pattern%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">syntax patterns</span></a> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax</a></span> <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=pattern-macros.html%23%2528tech._template%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">templates</span></a>,
respectively.</p></li></ol></div></p><p>For example, here are some rules that check and rewrite simply-typed
lambda-calculus terms to the untyped lambda-calculus.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x &#8811; x- : &#964;] &#8712; &#915;</span></p></td></tr><tr><td><p><span class="stt">[VAR] -----------------</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; x &#8811; x- &#8658; &#964;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915;,[x &#8811; x- : &#964;1] &#8866; e &#8811; e- &#8658; &#964;2</span></p></td></tr><tr><td><p><span class="stt">[LAM] -------------------------------</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; &#955;x:&#964;1.e &#8811; &#955;x-.e- &#8658; &#964;1 &#8594; &#964;2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; e1 &#8811; e1- &#8658; &#964;1 &#8594; &#964;2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; e2 &#8811; e2- &#8656; &#964;1</span></p></td></tr><tr><td><p><span class="stt">[APP] -------------------------</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; e1 e2 &#8811; e1- e2- &#8658; &#964;2</span></p></td></tr></table></p><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;define-typed-syntax&quot;">1.2<tt>&nbsp;</tt><a name="(part._define-typed-syntax)"></a><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span></h4><p>Here are implementations of the above rules using Turnstile
(we extended the forms to define multi-arity functions):</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">Initial function and application definitions</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[LAM]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x:id</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in:type</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in.norm</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">-------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in.norm</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[APP]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn</span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app-</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn-</span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><div class="SIntrapara">The above code assumes some existing bindings:
</div><div class="SIntrapara"><ul><li><p><span class="RktSym">&#8594;</span>, a programmer-defined (or imported) type constructor,
see <a href="#%28part._tycon%29" data-pltdoc="x">Defining Types</a>;</p></li><li><p><span class="RktSym">~&#8594;</span>, a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528tech._pattern._expander%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">pattern expander</span></a> associated with the <span class="RktSym">&#8594;</span> type
constructor;</p></li><li><p><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span>, a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-specifying.html%23%2528tech._syntax._clas%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">syntax class</span></a> for recognizing valid types that is
pre-defined by Turnstile;</p></li><li><p>and core Racket forms suffixed with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">-</span><span class="hspace"></span></span>, for example
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span>, that are also predefined by Turnstile.</p></li></ul></div></p><p>The <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> form resembles a conventional Racket macro
definition: the above rules begin with an input pattern, where the leftmost
identifier is the name of the macro, which is followed by a series of premises
that specify side conditions and bind local pattern variables, and concludes
with an output <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax</a></span> <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=pattern-macros.html%23%2528tech._template%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">template</span></a>.</p><p><div class="SIntrapara">More specifically, <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> is roughly an extension of
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Defining_Simple_Macros.html%23%2528form._%2528%2528lib._syntax%252Fparse%252Fdefine..rkt%2529._define-syntax-parser%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-syntax-parser</a></span> in that:
</div><div class="SIntrapara"><ul><li><p>a programmer may specify <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span>
options, e.g., <span class="RktPn">#:datum-literals</span>;</p></li><li><p>pattern positions may use any <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span> combinators, e.g.
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._%7E7eand%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~and</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._%7E7eseq%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~seq</a></span>, or custom-defined <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528tech._pattern._expander%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">pattern expanders</span></a>;</p></li><li><p>and the premises may be interleaved with <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span>
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-specifying.html%23%2528tech._pattern._directive%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">pattern directives</span></a>, e.g., <span class="RktPn">#:with</span> or <span class="RktPn">#:when</span>.</p></li></ul></div></p><h5 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;Type_rules_vs_define-typed-syntax&quot;">1.2.1<tt>&nbsp;</tt><a name="(part._.Type_rules_vs_define-typed-syntax)"></a>Type rules vs <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span></h5><p>The <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> form extends typical Racket macros by
interleaving type checking computations, possibly written using a type judgement
syntax, directly into the macro definition.</p><p>Compared to the type rules in the <a href="#%28part._judgements%29" data-pltdoc="x">A New Type Judgement</a> section, Turnstile
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> definitions differ in a few ways:</p><ul><li><p>Each premise and conclusion must be enclosed in brackets.</p></li><li><p>A conclusion is "split" into its inputs (at the top) and outputs (at the
bottom) to resemble other Racket macro-definition forms. In other words,
pattern variable scope flows top-to-bottom, enabling the programmers to read
the code more easily.</p><p>For example, the input part of the [LAM] rule&rsquo;s conclusion corresponds to the
<span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x:id</span><span class="stt"> </span><span class="RktSym">:</span><span class="stt"> </span><span class="RktSym">&#964;_in:type</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">e</span><span class="RktPn">)</span> pattern and the output part
corresponds to the <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x-</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">e-</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="stt"> </span><span class="RktSym">&#964;_in.norm</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span> templates. A <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span> delimiter separates the input pattern
from the premises while <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span> in the conclusion associates the type
with the output expression.</p></li><li><p>The <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> definitions do not thread through an
explicit type environment <span class="RktSym">&#915;</span>.  Rather, Turnstile reuses Racket&rsquo;s
lexical scope as the type environment and programmers should only write new
type environment bindings to the left of the <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span>, analogous to
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let</a></span>.</p></li><li><p>Since type environments obey lexical scope, an explicit implementation of
the <span class="stt">[VAR]</span> rule is unneeded.</p></li></ul><h5 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;define-typed-syntax_premises&quot;">1.2.2<tt>&nbsp;</tt><a name="(part._define-typed-syntax_premises)"></a><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> premises</h5><p>Like their type rule counterparts, a <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> definition
supports two [<a href="doc-bibliography.html#%28cite._bidirectional%29" data-pltdoc="x">bidirectional</a>]-style type checking judgements in its
premises.</p><p>A <span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="stt"> </span><span class="RktSym">e</span><span class="stt"> </span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="stt"> </span><span class="RktSym">e-</span><span class="stt"> </span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="stt"> </span><span class="RktSym">&#964;</span><span class="RktPn">]</span> judgement expands expression <span class="RktSym">e</span>, binds its
expanded form to <span class="RktSym">e-</span>, and its type to <span class="RktSym">&#964;</span>. In other words,
<span class="RktSym">e</span> is an input syntax template, and <span class="RktSym">e-</span> and <span class="RktSym">&#964;</span> are
output patterns.</p><p>Dually, one may write <span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="stt"> </span><span class="RktSym">e</span><span class="stt"> </span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="stt"> </span><span class="RktSym">e-</span><span class="stt"> </span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="stt"> </span><span class="RktSym">&#964;</span><span class="RktPn">]</span> to check that <span class="RktSym">e</span> has type
<span class="RktSym">&#964;</span>. Here, both <span class="RktSym">e</span> and <span class="RktSym">&#964;</span> are inputs (templates) and only
 <span class="RktSym">e-</span> is an output (pattern).</p><p>For example, in the definition of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span><span class="RktMeta"></span> from section
<a href="#%28part._define-typed-syntax%29" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-typed-syntax</span></span></a>, the first premise, <span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="stt"> </span><span class="RktSym">e_fn</span><span class="stt"> </span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="stt"> </span><span class="RktSym">e_fn-</span><span class="stt"> </span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="stt"> </span><span class="RktSym">&#964;_in</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span>, expands function <span class="RktSym">e_fn</span>, binds it to pattern variable
<span class="RktSym">e_fn-</span>, and binds its input types to <span class="RktPn">(</span><span class="RktSym">&#964;_in</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> and its output
type to <span class="RktSym">&#964;_out</span>. Macro expansion stops with a type error if
<span class="RktSym">e_fn</span> does not have a function type.</p><p>The second <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span> premise then uses the <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> to check that the
given inputs have types that match the expected types. Again, a type error is
reported if the types do not match.</p><p>The <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span> definition from that section also utilizes a <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span> premise,
except it must add bindings to the type environment, which are written to the
left of the <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span>. The lambda body is then type checked in this context.</p><p>Observe how ellipses may be used in exactly the same manner as
other Racket macros. (The <span class="RktSym">norm</span> <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-specifying.html%23%2528tech._attribute%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">attribute</span></a> comes from the
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._type%29%29" class="RktStxLink" data-pltdoc="x">type</a></span> syntax class and is bound to the expanded representation of the
type. This is used to avoid double-expansions of the types.)</p><h5 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;syntax-parse_directives_as_premises&quot;">1.2.3<tt>&nbsp;</tt><a name="(part._syntax-parse_directives_as_premises)"></a><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span> directives as premises</h5><p>A <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> definition may also use <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span>
options and <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-specifying.html%23%2528tech._pattern._directive%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">pattern directives</span></a> in its premises. Here is a modified
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span> that reports a more precise error for an arity mismatch:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">Function application with a better error message</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[APP]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn</span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:fail-unless</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._stx-length~3d~3f%29%29" class="RktValLink" data-pltdoc="x">stx-length=?</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"arity mismatch, expected ~a args, given ~a"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._stx-length%29%29" class="RktValLink" data-pltdoc="x">stx-length</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app-</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn-</span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;tycon&quot;">1.3<tt>&nbsp;</tt><a name="(part._tycon)"></a>Defining Types</h4><p>The rules from section <a href="#%28part._define-typed-syntax%29" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-typed-syntax</span></span></a> require a function type
constructor. Turnstile includes convenient forms for defining such type
constructors, e.g. <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-type-constructor%29%29" class="RktStxLink" data-pltdoc="x">define-type-constructor</a></span>:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">The function type</span></span></p><blockquote class="Rfilecontent"><p><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-type-constructor%29%29" class="RktStxLink" data-pltdoc="x">define-type-constructor</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktPn">#:arity</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3e%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></p></blockquote></blockquote><p>The <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-type-constructor%29%29" class="RktStxLink" data-pltdoc="x">define-type-constructor</a></span> declaration defines the <span class="RktSym">&#8594;</span>
function type as a macro that takes at least one argument, along with a
<span class="RktSym">~&#8594;</span> <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528tech._pattern._expander%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">pattern expander</span></a> matching on that type in <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528tech._syntax._pattern%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">syntax patterns</span></a>.</p><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;Defining_⇐_Rules&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Defining_~e2~87~90_.Rules)"></a>Defining <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> Rules</h4><p>The rules from from <a href="#%28part._judgements%29" data-pltdoc="x">A New Type Judgement</a> are incomplete. Specifically,
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> clauses appear in the premises but never in the conclusion.</p><p>To complete the rules, we can add a general <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> rule (sometimes called a
subsumption rule) that dispatches to the appropriate <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span> rule:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; e &#8811; e- &#8658; &#964;2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#964;1 = &#964;2</span></p></td></tr><tr><td><p><span class="stt">[FLIP] -----------------</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&#915; &#8866; e &#8811; e- &#8656; &#964;1</span></p></td></tr></table></p><p>Similarly, Turnstile uses an implicit <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> rule so programmers need not
specify a <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> variant of every rule. If a programmer writes an explicit
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> rule, then it is used instead of the default. Writing an explicit
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> rule is useful for implementing (local) type inference or type
annotations. Here is an extended lambda that adds a
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> clause.</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">lambda with inference, and ann</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[LAM]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:datum-literals</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">:</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&#8658; rule (as before)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x:id</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in:type</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in.norm</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">-------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in.norm</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&#8656; rule (new)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x:id</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">---------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ann</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._%7E7edatum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;:type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;.norm</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;.norm</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>This revised lambda definition uses an alternate, multi-clause
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span> syntax, analogous to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span> (whereas
<a href="#%28part._define-typed-syntax%29" data-pltdoc="x">the simpler syntax from section 1.2</a> resembles
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Defining_Simple_Macros.html%23%2528form._%2528%2528lib._syntax%252Fparse%252Fdefine..rkt%2529._define-simple-macro%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-simple-macro</a></span>).</p><p>The first clause is the same as before. The second clause has an additional
input type pattern and the clause matches only if both patterns match,
indicating that the type of the expression can be inferred. Observe that the
second lambda clause&rsquo;s input parameters have no type annotations. Since the
lambda body&rsquo;s type is already known, the premise in the second clause uses the
<span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span> arrow. Finally, the conclusion specifies only the expanded
syntax object because the input type is automatically attached to that output.</p><p>We also define an annotation form <span class="RktSym">ann</span>, which invokes the <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span>
clause of a type rule.</p><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;Defining_Primitive_Operations__Primops_&quot;">1.5<tt>&nbsp;</tt><a name="(part._.Defining_.Primitive_.Operations__.Primops_)"></a>Defining Primitive Operations (Primops)</h4><p>The previous sections have defined type rules for <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span>,
as well as a function type, but we cannot write any well-typed programs yet
since there are no base types. Let&rsquo;s fix that:</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">defining a base type, literal, and primop</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-base-type%29%29" class="RktStxLink" data-pltdoc="x">define-base-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-primop%29%29" class="RktStxLink" data-pltdoc="x">define-primop</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n:integer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">#:error</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._type-error%29%29" class="RktStxLink" data-pltdoc="x">type-error</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:src</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">x</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:msg</span><span class="hspace">&nbsp;</span><span class="RktVal">"Unsupported literal: ~v"</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>The code above defines a base type <span class="RktSym">Int</span>, and attaches type information
to both <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span> and integer literals.</p><p><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-primop%29%29" class="RktStxLink" data-pltdoc="x">define-primop</a></span> creates an identifier macro that attaches the specified
type to the specified identifier. When only one identifier is specified, it is
used as both the name of the typed operation, and appended with a "<span class="stt">-</span>"
suffix and (that corresponding Racket function is) used as the macro
output. Alternatively, a programmer may explicitly specify separate surface and
target identifiers (see <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-primop%29%29" class="RktStxLink" data-pltdoc="x">define-primop</a></span> in the reference).</p><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;stlc&quot;">1.6<tt>&nbsp;</tt><a name="(part._stlc)"></a>A Complete Language</h4><p>We can now write well-typed programs! Here is the complete
language implementation, with some examples:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Languages implemented using <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> <a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">turnstile</span></a>
must additionally provide <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25module-begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%module-begin</a></span> and other forms required by
Racket. Use <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> <a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">turnstile</span></a><span class="stt">/lang</span> to automatically
provide some default forms. See the section on <a href="The_Turnstile_Reference.html#%28part._turnstilelang%29" data-pltdoc="x"><span class="RktModLink"><span class="RktMod">#lang</span></span> <span class="RktModLink"><span class="RktSym">turnstile</span></span>/lang</a> for more
details.</p></blockquote></blockquote></blockquote><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"STLC"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">turnstile</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">ann</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-base-type%29%29" class="RktStxLink" data-pltdoc="x">define-base-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-type-constructor%29%29" class="RktStxLink" data-pltdoc="x">define-type-constructor</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktPn">#:arity</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3e%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-primop%29%29" class="RktStxLink" data-pltdoc="x">define-primop</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[APP]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn</span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:fail-unless</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._stx-length~3d~3f%29%29" class="RktValLink" data-pltdoc="x">stx-length=?</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"arity mismatch, expected ~a args, given ~a"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._stx-length%29%29" class="RktValLink" data-pltdoc="x">stx-length</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">[</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app-</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_fn-</span><span class="hspace">&nbsp;</span><span class="RktSym">e_arg-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[LAM]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:datum-literals</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">:</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x:id</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in:type</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in.norm</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">-------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in.norm</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x:id</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_in</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_out</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">---------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[ANN]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ann</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-patterns.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._%7E7edatum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">~datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;:type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~90%29%29" class="RktStxLink" data-pltdoc="x">&#8656;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;.norm</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;.norm</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[DATUM]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n:integer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">#:error</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._type-error%29%29" class="RktStxLink" data-pltdoc="x">type-error</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:src</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">x</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:msg</span><span class="hspace">&nbsp;</span><span class="RktVal">"Unsupported literal: ~v"</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><div class="SIntrapara">STLC Examples:</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktVal">1</span></td></tr><tr><td><p><span class="RktRes">1</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktVal">"1"</span></td></tr><tr><td><p><span class="RktErr">TYPE-ERROR: Unsupported literal: "\"1\""</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:4:0: #%app: type mismatch: expected Int, given (&#8594; Int</span></p></td></tr><tr><td><p><span class="RktErr">Int)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expression: (&#955; ((x : Int)) x)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: (&#955; ((x : Int)) x)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: (#%app + 1 (&#955; ((x : Int)) x))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:5:0: &#955;: no expected type, add annotations</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: (&#955; (x) x)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: (&#955; (x) x)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">parsing context: </span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">while parsing has-expected-type</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">term: (&#955; (x) x)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">location: eval:5:0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">ann</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;procedure&gt;</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ann</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">1</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">[</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr></table></div></p><h4 x-source-module="(lib &quot;turnstile/scribblings/turnstile.scrbl&quot;)" x-source-pkg="turnstile-doc" x-part-tag="&quot;stlcsub&quot;">1.7<tt>&nbsp;</tt><a name="(part._stlcsub)"></a>Extending a Language</h4><p>Since the <span class="stt">STLC</span> language from <a href="#%28part._stlc%29" data-pltdoc="x">A Complete Language</a> is implemented as just a series
of macros, like any other Racket <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a>, its forms may be imported and
exported and may be easily reused in other languages. Let&rsquo;s see how we can
reuse the above implementation to implement a subtyping language.</p><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"STLC+SUB"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">turnstile</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._extends%29%29" class="RktStxLink" data-pltdoc="x">extends</a></span><span class="hspace">&nbsp;</span><span class="RktSym">STLC</span><span class="hspace">&nbsp;</span><span class="RktPn">#:except</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Top</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-base-types%29%29" class="RktStxLink" data-pltdoc="x">define-base-types</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Top</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-primop%29%29" class="RktStxLink" data-pltdoc="x">define-primop</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-primop%29%29" class="RktStxLink" data-pltdoc="x">define-primop</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n:nat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n:integer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n:number</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~bb%29%29" class="RktStxLink" data-pltdoc="x">&#8827;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">STLC:#%datum</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin-for-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin-for-syntax</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub?</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">need this because recursive calls made with unexpanded types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._current-type-eval%29%29" class="RktValLink" data-pltdoc="x">current-type-eval</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._current-type-eval%29%29" class="RktValLink" data-pltdoc="x">current-type-eval</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._or%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._current-type~3d~3f%29%29" class="RktValLink" data-pltdoc="x">current-type=?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Top?</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Parsing_Syntax.html%23%2528form._%2528%2528lib._syntax%252Fparse..rkt%2529._syntax-parse%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax-parse</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">~Num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">current-sub?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;1</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">~Int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">current-sub?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;1</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">Nat</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;i1</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;o1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;i2</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;o2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subs?</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">&#964;i2</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">&#964;i1</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">current-sub?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">&#964;o1</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">&#964;o2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">current-sub?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-parameter%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-parameter</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sub?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._current-typecheck-relation%29%29" class="RktValLink" data-pltdoc="x">current-typecheck-relation</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sub?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subs?</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;s1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;s2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._stx-length~3d~3f%29%29" class="RktValLink" data-pltdoc="x">stx-length=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;s1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;s2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._stx-andmap%29%29" class="RktValLink" data-pltdoc="x">stx-andmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">current-sub?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;s1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;s2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">join</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">current-sub?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">current-sub?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">Top</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">current-join</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-parameter%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-parameter</a></span><span class="hspace">&nbsp;</span><span class="RktSym">join</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[IF]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._define-typed-syntax%29%29" class="RktStxLink" data-pltdoc="x">define-typed-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_tst</span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_tst</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_tst-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a non-false value is truthy</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e1</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e1-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;1</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e2</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~ab%29%29" class="RktStxLink" data-pltdoc="x">&#8811;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e2-</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;2</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><span class="nobreak">--------</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~8a~a2%29%29" class="RktStxLink" data-pltdoc="x">&#8866;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if-</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_tst-</span><span class="hspace">&nbsp;</span><span class="RktSym">e1-</span><span class="hspace">&nbsp;</span><span class="RktSym">e2-</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~87~92%29%29" class="RktStxLink" data-pltdoc="x">&#8658;</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#,</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">current-join</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">&#964;1</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">&#964;2</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>This language uses subtyping instead of type equality as its "typecheck
relation". Specifically, the language defines a <span class="RktSym">sub?</span> function
and sets it as the <span class="RktSym"><a href="The_Turnstile_Reference.html#%28def._%28%28lib._turnstile%2Fmain..rkt%29._current-typecheck-relation%29%29" class="RktValLink" data-pltdoc="x">current-typecheck-relation</a></span>. Thus it is able to reuse
the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%app</a></span> rules from the previous sections without
modification. The <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._extends%29%29" class="RktStxLink" data-pltdoc="x">extends</a></span> clause is useful for declaring this. It
automatically <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span>s and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span>s the previous rules and
re-exports them with the new language.</p><p>The new language does not reuse <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span>, however, since
subtyping requires updates these forms. Specifically, the new language defines
a hierarchy of numeric base types, gives <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span> a more general type, and
redefines <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span> to assign more precise types to numeric literals.
Observe that <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._%7E23%7E25datum%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%datum</a></span> dispatches to <span class="stt">STLC</span>&rsquo;s datum in the "else"
clause, using the <span class="RktSym"><a href="The_Turnstile_Reference.html#%28form._%28%28lib._turnstile%2Fmain..rkt%29._~e2~89~bb%29%29" class="RktStxLink" data-pltdoc="x">&#8827;</a></span> conclusion form, which dispatches to another
(typed) macro. In this manner, the new typed language may still define and
invoke macros like any other Racket program.</p><p>Since the new language uses subtyping, it also defines a (naive) <span class="RktSym">join</span>
function, which is needed by conditional forms like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span>. The
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span> definition uses the <span class="RktSym">current-join</span> parameter, to
make it reusable by other languages. Observe that the output type in the
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span> definition uses <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span>. In general, all <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax</a></span> <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=pattern-macros.html%23%2528tech._template%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">template</span></a>
positions in Turnstile are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span>es.</p><p><div class="SIntrapara">STLC+SUB Examples:</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Top</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">-1</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">-1</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">-1</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:4:0: #%app: type mismatch: expected Nat, given Int</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expression: -1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: -1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: (#%app (&#955; ((x : Nat)) x) -1)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">2</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1.1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:7:0: #%app: type mismatch: expected (&#8594; Num Int), given</span></p></td></tr><tr><td><p><span class="RktErr">(&#8594; Int Int)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expression: add1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: add1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: (#%app (&#955; ((f : (&#8594; Num Int))) (f 1.1)) add1)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="hspace">&nbsp;</span><span class="RktSym">Num</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">2</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Nat</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:9:0: #%app: type mismatch: expected (&#8594; Int Nat), given</span></p></td></tr><tr><td><p><span class="RktErr">(&#8594; Int Int)</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expression: add1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: add1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: (#%app (&#955; ((f : (&#8594; Int Nat))) (f 1)) add1)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="hspace">&nbsp;</span><span class="RktSym">Int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">1.1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:10:0: #%app: type mismatch: expected Int, given Num</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">expression: 1.1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">at: 1.1</span></p></td></tr><tr><td><p><span class="RktErr"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktErr">in: (#%app f 1.1)</span></p></td></tr></table></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;The turnstile language&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;The turnstile language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="The_Turnstile_Reference.html" title="forward to &quot;2 The Turnstile Reference&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/turnstile/The_Turnstile_Guide.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:45 GMT -->
</html>