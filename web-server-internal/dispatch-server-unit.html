<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/web-server-internal/dispatch-server-unit.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:15:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Dispatching Server</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Web Server:<span class="mywbr"> &nbsp;</span> HTTP Server</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Dispatching Server</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="dispatchers.html" class="tocviewlink" data-pltdoc="x">Dispatchers</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="web-server.html" class="tocviewlink" data-pltdoc="x">Launching Servers</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Web_Servers.html" class="tocviewlink" data-pltdoc="x">Web Servers</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="private.html" class="tocviewlink" data-pltdoc="x">Internal APIs</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Troubleshooting_and_Tips.html" class="tocviewlink" data-pltdoc="x">Troubleshooting and Tips</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Dispatching Server</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._.Dispatching_.Server_.Signatures%29" class="tocviewlink" data-pltdoc="x">Dispatching Server Signatures</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._safety-limits%29" class="tocviewlink" data-pltdoc="x">Safety Limits</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._.Dispatching_.Server_.Unit%29" class="tocviewlink" data-pltdoc="x">Dispatching Server Unit</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._.Threads_and_.Custodians%29" class="tocviewlink" data-pltdoc="x">Threads and Custodians</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Dispatching_.Server_.Signatures%29" class="tocsubseclink" data-pltdoc="x">Dispatching Server Signatures</a></td></tr><tr><td><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">dispatch-<wbr></wbr>server^</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e._serve%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">serve</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e._serve-ports%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">serve-<wbr></wbr>ports</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">dispatch-<wbr></wbr>server-<wbr></wbr>connect^</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e._port-~3ereal-ports%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">port-<wbr></wbr>&gt;real-<wbr></wbr>ports</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">dispatch-<wbr></wbr>server-<wbr></wbr>config*^</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._port%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">port</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._listen-ip%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">listen-<wbr></wbr>ip</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>request</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._dispatch%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dispatch</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._safety-limits%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">safety-<wbr></wbr>limits</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">dispatch-<wbr></wbr>server-<wbr></wbr>config^</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e._max-waiting%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">max-<wbr></wbr>waiting</span></span></a></td></tr><tr><td><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e._initial-connection-timeout%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">initial-<wbr></wbr>connection-<wbr></wbr>timeout</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._safety-limits%29" class="tocsubseclink" data-pltdoc="x">Safety Limits</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._safety-limits~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">safety-<wbr></wbr>limits?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>safety-<wbr></wbr>limits</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nonnegative-<wbr></wbr>length/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._positive-count%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">positive-<wbr></wbr>count/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">timeout/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>unlimited-<wbr></wbr>safety-<wbr></wbr>limits</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.Dispatching_.Server_.Unit%29" class="tocsubseclink" data-pltdoc="x">Dispatching Server Unit</a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fprivate%2Fdispatch-server-unit..rkt%29._dispatch-server-with-connect~40%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dispatch-<wbr></wbr>server-<wbr></wbr>with-<wbr></wbr>connect@</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._web-server%2Fprivate%2Fdispatch-server-unit..rkt%29._dispatch-server~40%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">dispatch-<wbr></wbr>server@</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Threads_and_.Custodians%29" class="tocsubseclink" data-pltdoc="x">Threads and Custodians</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Web Server: HTTP Server&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Web Server: HTTP Server&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="dispatchers.html" title="forward to &quot;2 Dispatchers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;web-server/scribblings/web-server-internal.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;dispatch-server-unit&quot;">1<tt>&nbsp;</tt><a name="(part._dispatch-server-unit)"></a>Dispatching Server</h3><p>The Web Server is just a configuration of a dispatching server.</p><h4 x-source-module="(lib &quot;web-server/scribblings/web-server-internal.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;Dispatching_Server_Signatures&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Dispatching_.Server_.Signatures)"></a><a name="(mod-path._web-server/private/dispatch-server-sig)"></a>Dispatching Server Signatures</h4><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._web-server%2Fprivate%2Fdispatch-server-sig%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">web-server/private/dispatch-server-sig</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/web-server-lib" title="Install this package using `raco pkg install web-server-lib`"><span class="stt">web-server-lib</span></a></span></td></tr></table></div><div class="SIntrapara">The <a href="#%28mod-path._web-server%2Fprivate%2Fdispatch-server-sig%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">web-server/private/dispatch-server-sig</span></a> library
provides the signatures <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server^</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-connect^</a></span>,
and <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span>.</div><div class="SIntrapara"><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>signature</p></div></div><p class="RForeground"><a name="(form._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server~5e))"></a><span title="Provided from: web-server/private/dispatch-server-sig | Package: web-server-lib"><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">dispatch-server^</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span>signature</p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><p>The <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server^</a></span> signature is an alias for
<span class="RktSym"><a href="Web_Servers.html#%28form._%28%28lib._web-server%2Fweb-server-sig..rkt%29._web-server~5e%29%29" class="RktStxLink" data-pltdoc="x">web-server^</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server~5e._serve))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e._serve%29%29" class="RktValDef RktValLink" data-pltdoc="x">serve</a></span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktPn">#:confirmation-channel</span><span class="hspace">&nbsp;</span><span class="RktVar">confirmation-ach</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">confirmation-ach</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=async-channel.html%23%2528def._%2528%2528lib._racket%252Fasync-channel..rkt%2529._async-channel%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">async-channel/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._port-number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port-number?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Runs the server.
The confirmation channel, if provided, will be sent an exception if one occurs
while starting the server or the port number if the server starts successfully.</div></p><p>Calling the returned procedure shuts down the server.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server~5e._serve-ports))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e._serve-ports%29%29" class="RktValDef RktValLink" data-pltdoc="x">serve-ports</a></span><span class="hspace">&nbsp;</span><span class="RktVar">ip</span><span class="hspace">&nbsp;</span><span class="RktVar">op</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ip</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">op</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Asynchronously serves a single connection represented by the ports <span class="RktVar">ip</span> and
<span class="RktVar">op</span>.</div></p></blockquote></div></p></div><div class="SIntrapara"><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>signature</p></div></div><p class="RForeground"><a name="(form._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-connect~5e))"></a><span title="Provided from: web-server/private/dispatch-server-sig | Package: web-server-lib"><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">dispatch-server-connect^</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span>signature</p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><p>The <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-connect^</a></span> signature abstracts the conversion of connection
ports (e.g., to implement SSL) as used by the dispatch server.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-connect~5e._port-~3ereal-ports))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e._port-~3ereal-ports%29%29" class="RktValDef RktValLink" data-pltdoc="x">port-&gt;real-ports</a></span><span class="hspace">&nbsp;</span><span class="RktVar">ip</span><span class="hspace">&nbsp;</span><span class="RktVar">op</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span></td></tr></table></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ip</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">op</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Converts connection ports as necessary.</div></p><p>The connection ports are normally TCP ports, but an alternate
implementation of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=net&amp;rel=tcp.html%23%2528form._%2528%2528lib._net%252Ftcp-sig..rkt%2529._tcp%7E5e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">tcp^</a></span> linked to the dispatcher can supply
different kinds of ports.</p></blockquote></div></p></div><div class="SIntrapara"><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>signature</p></div></div><p class="RForeground"><a name="(form._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config*~5e))"></a><span title="Provided from: web-server/private/dispatch-server-sig | Package: web-server-lib"><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span>signature</p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="leftindent"><p class="SHistory">Added in version 1.6 of package <span class="stt">web-server-lib</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config*~5e._port))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._port%29%29" class="RktValDef RktValLink" data-pltdoc="x">port</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._listen-port-number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listen-port-number?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Specifies the port to serve on.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config*~5e._listen-ip))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._listen-ip%29%29" class="RktValDef RktValLink" data-pltdoc="x">listen-ip</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Passed to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config*~5e._read-request))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValDef RktValLink" data-pltdoc="x">read-request</a></span><span class="hspace">&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span><span class="RktVar">port-addresses</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr></table></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="connection-manager.html#%28def._%28%28lib._web-server%2Fprivate%2Fconnection-manager..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._listen-port-number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listen-port-number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port-addresses</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Defines the way the server reads requests off connections to be passed
to <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._dispatch%29%29" class="RktValLink" data-pltdoc="x">dispatch</a></span>.
The <span class="RktVar">port-addresses</span> argument should be a procedure
like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=net&amp;rel=tcp.html%23%2528sig-val._%2528%2528lib._net%252Ftcp-sig..rkt%2529._tcp%7E5e._tcp-addresses%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">tcp-addresses</a></span>.</div></p><p><div class="SIntrapara">The first result of <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span> is ordinarily a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">request</a></span> value,
but that is not a requirement at the dispatch-server level.
The second result is <span class="RktVal">#true</span> if the connection <span class="RktVar">c</span> should be closed
after handling this request, or <span class="RktVal">#false</span> if the connection may be reused.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config*~5e._dispatch))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._dispatch%29%29" class="RktValDef RktValLink" data-pltdoc="x">dispatch</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="connection-manager.html#%28def._%28%28lib._web-server%2Fprivate%2Fconnection-manager..rkt%29._connection~3f%29%29" class="RktValLink" data-pltdoc="x">connection?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Used to handle requests.
The second argument to <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._dispatch%29%29" class="RktValLink" data-pltdoc="x">dispatch</a></span> is ordinarily a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=http.html%23%2528def._%2528%2528lib._web-server%252Fhttp%252Frequest-structs..rkt%2529._request%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">request</a></span> value,
like the first result of <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span>,
but that is not a requirement at the dispatch-server level.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config*~5e._safety-limits))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._safety-limits%29%29" class="RktValDef RktValLink" data-pltdoc="x">safety-limits</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._safety-limits~3f%29%29" class="RktValLink" data-pltdoc="x">safety-limits?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A <a href="#%28tech._safety._limit%29" class="techoutside" data-pltdoc="x"><span class="techinside">safety limits</span></a> value specifying the policies to be used
while reading and handling requests.</div></p></blockquote></div></p></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>signature</p></div></div><p class="RForeground"><a name="(form._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config~5e))"></a><span title="Provided from: web-server/private/dispatch-server-sig | Package: web-server-lib"><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">dispatch-server-config^</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span>signature</p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote><p><span style="background-color: yellow"><span style="font-weight: bold">NOTE:</span></span> This signature is deprecated; use <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span>, instead. </p></blockquote></div></p><blockquote class="leftindent"><p><div class="SIntrapara">For backwards compatability, <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config^</a></span>
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._extends%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">extends</a></span> <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span> and uses <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._define-values-for-export%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-values-for-export</a></span>
to define <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._safety-limits%29%29" class="RktValLink" data-pltdoc="x">safety-limits</a></span> as:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">#:max-waiting</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e._max-waiting%29%29" class="RktValLink" data-pltdoc="x">max-waiting</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">#:request-read-timeout</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e._initial-connection-timeout%29%29" class="RktValLink" data-pltdoc="x">initial-connection-timeout</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p class="SHistory">Changed in version 1.6 of package <span class="stt">web-server-lib</span>: Deprecated in favor of <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span>.
See <a href="#%28elem._safety-limits-porting%29" data-pltdoc="x">compatability note</a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config~5e._max-waiting))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e._max-waiting%29%29" class="RktValDef RktValLink" data-pltdoc="x">max-waiting</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Passed to <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(sig-val._((lib._web-server/private/dispatch-server-sig..rkt)._dispatch-server-config~5e._initial-connection-timeout))"></a><span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e._initial-connection-timeout%29%29" class="RktValDef RktValLink" data-pltdoc="x">initial-connection-timeout</a></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Passed to <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>  as its <span class="RktPn">#:request-read-timeout</span> argument.
</div><div class="SIntrapara"><p class="SHistory">Changed in version 1.6 of package <span class="stt">web-server-lib</span>: Loosened contract for consistency with <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>.</p></div></p></blockquote><h4 x-source-module="(lib &quot;web-server/scribblings/web-server-internal.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;safety-limits&quot;">1.2<tt>&nbsp;</tt><a name="(part._safety-limits)"></a><a name="(mod-path._web-server/safety-limits)"></a>Safety Limits</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._web-server%2Fsafety-limits%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">web-server/safety-limits</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/web-server-lib" title="Install this package using `raco pkg install web-server-lib`"><span class="stt">web-server-lib</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._web-server/safety-limits..rkt)._safety-limits~3f))"></a><span title="Provided from: web-server/safety-limits | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._safety-limits~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">safety-limits?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top" colspan="3"><span class="RktPn">(</span><a name="(def._((lib._web-server/safety-limits..rkt)._make-safety-limits))"></a><span title="Provided from: web-server/safety-limits | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-safety-limits</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:max-concurrent</span><span class="hspace">&nbsp;</span><span class="RktVar">max-concurrent</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-waiting</span><span class="hspace">&nbsp;</span><span class="RktVar">max-waiting</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:request-read-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">request-read-timeout</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-line-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-line-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-headers</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-headers</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-header-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-header-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-body-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-body-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-parts</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-parts</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-header-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-header-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-files</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-files</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-file-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-file-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:form-data-file-memory-threshold</span><span class="hspace">&nbsp;</span><span class="RktVar">form-data-file-memory-threshold</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-fields</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-fields</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-field-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-field-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:response-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">response-timeout</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:response-send-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">response-send-timeout</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._safety-limits~3f%29%29" class="RktValLink" data-pltdoc="x">safety-limits?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-concurrent</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._positive-count%2Fc%29%29" class="RktValLink" data-pltdoc="x">positive-count/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">10000</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-waiting</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">511</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">request-read-timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">60</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-request-line-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">8 KiB</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-headers</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">100</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-request-header-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">8 KiB</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-request-body-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">1 MiB</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-form-data-parts</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-fields</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-files</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-form-data-header-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">8 KiB</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-files</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">100</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-form-data-file-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">10 MiB</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">form-data-file-memory-threshold</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">1 MiB</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-fields</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">100</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">max-form-data-field-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">1024</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">8 KiB</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">response-timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">60</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">response-send-timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">60</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/safety-limits..rkt)._nonnegative-length/c))"></a><span title="Provided from: web-server/safety-limits | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._flat-contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flat-contract?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/safety-limits..rkt)._positive-count/c))"></a><span title="Provided from: web-server/safety-limits | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._positive-count%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">positive-count/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._flat-contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flat-contract?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/safety-limits..rkt)._timeout/c))"></a><span title="Provided from: web-server/safety-limits | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">timeout/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._flat-contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flat-contract?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._%7E3e%7E3d%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&gt;=/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The web server uses opaque <a name="(tech._safety._limit)"></a><span style="font-style: italic">safety limits</span> values, recognized
by the predicate <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._safety-limits~3f%29%29" class="RktValLink" data-pltdoc="x">safety-limits?</a></span>, to encapsulate
policies for protection against misbehaving or malicious clients and servlets.
Construct <a href="#%28tech._safety._limit%29" class="techoutside" data-pltdoc="x"><span class="techinside">safety limits</span></a> values using <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>,
which supplies reasonably safe default policies that should work for most applications.
See the <a href="#%28elem._safety-limits-porting%29" data-pltdoc="x">compatability note</a> and
 <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span> for further details.</div></p><p><div class="SIntrapara">The arguments to <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span> are used as follows:
</div><div class="SIntrapara"><ul><li><p>The <span class="RktVar">max-concurrent</span> argument limits the number of open
concurrent connections to the server.  Once the limit is reached, new
connections are queued at the TCP level (see <span class="RktVar">max-waiting</span>)
until existing connections finish or time out.</p></li><li><p>The <span class="RktVar">max-waiting</span> argument is passed to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span>
to specify the maximum number of client connections that can be waiting for acceptance.
When <span class="RktVar">max-waiting</span> clients are waiting for acceptance, no new client connections can be made.</p></li><li><p>The <span class="RktVar">request-read-timeout</span> limits how long, in seconds,
the standard <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span> implementation
(e.g. from <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._serve%29%29" class="RktValLink" data-pltdoc="x">serve</a></span> or <span class="RktSym"><a href="Web_Servers.html#%28def._%28%28lib._web-server%2Fweb-server-unit..rkt%29._web-server~40%29%29" class="RktValLink" data-pltdoc="x">web-server@</a></span>)
will wait for request data to come in from the client
before it closes the connection.
If you need to support large file uploads over slow connections,
you may need to adjust this value.</p></li><li><p>The <span class="RktVar">max-request-line-length</span> limits the length (in bytes) of the
the first line of an HTTP request (the &ldquo;request line&rdquo;),
which specifies the request method, path, and protocol version.
Requests with a first line longer than <span class="RktVar">max-request-line-length</span>
are rejected by the standard <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span>
implementation (e.g. from <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._serve%29%29" class="RktValLink" data-pltdoc="x">serve</a></span> or <span class="RktSym"><a href="Web_Servers.html#%28def._%28%28lib._web-server%2Fweb-server-unit..rkt%29._web-server~40%29%29" class="RktValLink" data-pltdoc="x">web-server@</a></span>).
Increase this if you have very long URLs, but see also <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=stateless.html%23%2528def._%2528%2528lib._web-server%252Flang%252Fstuff-url..rkt%2529._is-url-too-big%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">is-url-too-big?</a></span>.</p></li><li><p>The <span class="RktVar">max-request-headers</span> and <span class="RktVar">max-request-header-length</span>
arguments limit the number of headers allowed per HTTP request
and the length, in bytes, of an individual request header, respectively.
Requests that exceed these limits are rejected by the standard
<span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span>
implementation (e.g. from <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._serve%29%29" class="RktValLink" data-pltdoc="x">serve</a></span> or <span class="RktSym"><a href="Web_Servers.html#%28def._%28%28lib._web-server%2Fweb-server-unit..rkt%29._web-server~40%29%29" class="RktValLink" data-pltdoc="x">web-server@</a></span>).</p></li><li><p>The <span class="RktVar">max-request-body-length</span> limits the size, in bytes,
of HTTP request bodies&#8212;<wbr></wbr>but it does not apply to multipart (file upload)
requests: see <span class="RktVar">max-form-data-files</span> and related limits, below.
Requests with bodies longer than <span class="RktVar">max-request-body-length</span>
are rejected by the standard <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span>
implementation (e.g. from <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._serve%29%29" class="RktValLink" data-pltdoc="x">serve</a></span> or <span class="RktSym"><a href="Web_Servers.html#%28def._%28%28lib._web-server%2Fweb-server-unit..rkt%29._web-server~40%29%29" class="RktValLink" data-pltdoc="x">web-server@</a></span>).</p></li><li><p>The <span class="RktVar">max-form-data-files</span>, <span class="RktVar">max-form-data-fields</span>,
<span class="RktVar">max-form-data-file-length</span>, <span class="RktVar">max-form-data-field-length</span>,
<span class="RktVar">max-form-data-parts</span>, <span class="RktVar">form-data-file-memory-threshold</span>,
and <span class="RktVar">max-form-data-header-length</span> arguments control the handling of
<span class="stt">multipart/form-data</span> (file upload) requests by the standard
<span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._read-request%29%29" class="RktValLink" data-pltdoc="x">read-request</a></span>
implementation (e.g. from <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._serve%29%29" class="RktValLink" data-pltdoc="x">serve</a></span> or <span class="RktSym"><a href="Web_Servers.html#%28def._%28%28lib._web-server%2Fweb-server-unit..rkt%29._web-server~40%29%29" class="RktValLink" data-pltdoc="x">web-server@</a></span>).</p><p>The number of files and non-file &ldquo;fields&rdquo; per request are limited by
<span class="RktVar">max-form-data-files</span> and <span class="RktVar">max-form-data-fields</span>, respectively,
and <span class="RktVar">max-form-data-file-length</span> and <span class="RktVar">max-form-data-field-length</span>
limit the length, in bytes, of an individual file or non-file field.
Additionally, the total number of &ldquo;parts,&rdquo; which includes both files and fields,
must not exceed <span class="RktVar">max-form-data-parts</span>.
Requests that exceed these limits are rejected.</p><p>Files longer than <span class="RktSym">request-file-memory-threshold</span>, in bytes,
are automatically offloaded to disk as temporary files
to avoid running out of memory.</p><p>The <span class="RktVar">max-form-data-header-length</span> argument limits the length of a header
for an individual part (file or field).
Since such headers are already tightly constrained by
<a href="https://tools.ietf.org/html/rfc7578#section-4.8">RFC 7578 &#167;4.8.</a>,
it should be especially rare to need to increase this limit,
but doing so could allow for exceptionally long file or field names.</p></li><li><p>The <span class="RktVar">response-timeout</span> and <span class="RktVar">response-send-timeout</span>
arguments limit the time for which individual request handlers
(as in <span class="RktSym"><a href="#%28sig-val._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e._dispatch%29%29" class="RktValLink" data-pltdoc="x">dispatch</a></span>) are allowed to run.</p><p>The <span class="RktVar">response-timeout</span> specifies the maximum time, in seconds,
that a handler is allowed to run after the request has been read
before it writes its first byte of response data.
If no data is written within this time limit, the connection is killed.</p><p>The <span class="RktVar">response-send-timeout</span> specifies the maximum time, in seconds,
that the server will wait for a chunk of response data.
Each time a chunk of data is sent to the client, this timeout resets.
If your application uses streaming responses or long polling,
either adjust this value or make sure that your request handler sends
data periodically, such as a no-op, to avoid hitting this limit.</p></li></ul></div></p><p><a name="(elem._safety-limits-porting)"></a><span style="font-weight: bold">Compatibility note:</span>
The <a href="#%28tech._safety._limit%29" class="techoutside" data-pltdoc="x"><span class="techinside">safety limits</span></a> type may be extended in the future to provide
additional protections.
Creating <a href="#%28tech._safety._limit%29" class="techoutside" data-pltdoc="x"><span class="techinside">safety limits</span></a> values with <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>
will allow applications to take advantage of reasonable default values
for any new limits that are added.
However, adding new limits does have the potential to break some existing
applications: as an alternative, the <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span>
constructor uses default values that avoid imposing any limits that
aren&rsquo;t explicitly specified. (In most cases, this means a default of <span class="RktVal">+inf.0</span>.)
Of course, applications using <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span>
may remain vulnerable to threats which the values from <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>
would have protected against.</p><p>The <a href="#%28tech._safety._limit%29" class="techoutside" data-pltdoc="x"><span class="techinside">safety limits</span></a> type was introduced in version 1.6 of the
<span class="stt">web-server-lib</span> package.
Previous versions of this library only supported the <span class="RktVar">max-waiting</span> limit
and (in some cases) an <span class="RktSym">initial-connection-timeout</span> limit,
which was similar to <span class="RktVar">request-read-timeout</span>, but had
<a href="https://github.com/racket/web-server/pull/77">some problems</a>.
These limits were specified through <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config^</a></span>, <span class="RktSym"><a href="Web_Servers.html#%28form._web-config._%28%28lib._web-server%2Fweb-config-sig..rkt%29._web-config~5e%29%29" class="RktStxLink" data-pltdoc="x">web-config^</a></span>,
and optional arguments to functions like <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._serve%29%29" class="RktValLink" data-pltdoc="x">serve</a></span>:
if values weren&rsquo;t explicitly supplied, the default behavior was closest to using
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span><span class="stt"> </span><span class="RktPn">#:request-read-timeout</span><span class="stt"> </span><span class="RktVal">60</span><span class="RktPn">)</span>.</p><p>However, version 1.6 adopted <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span><span class="RktPn">)</span> as the default,
as most applications would benefit from using reasonable protections.
When porting from earlier versions of this library,
if you think your application may be especially resource-intensive,
you may prefer to use <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span> while determining
limits that work for your application.</p><p><div class="SIntrapara"><p class="SHistory">Added in version 1.6 of package <span class="stt">web-server-lib</span>.</p></div><div class="SIntrapara"><p class="SHistory">Changed in version 1.11 of package <span class="stt">web-server-lib</span>: added the <span class="RktVar">max-concurrent</span> limit</p></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top" colspan="3"><span class="RktPn">(</span><a name="(def._((lib._web-server/safety-limits..rkt)._make-unlimited-safety-limits))"></a><span title="Provided from: web-server/safety-limits | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:max-concurrent</span><span class="hspace">&nbsp;</span><span class="RktVar">max-concurrent</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-waiting</span><span class="hspace">&nbsp;</span><span class="RktVar">max-waiting</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:request-read-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">request-read-timeout</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-line-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-line-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-headers</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-headers</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-header-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-header-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-body-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-body-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-files</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-files</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-request-file-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-request-file-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:request-file-memory-threshold</span><span class="hspace">&nbsp;</span><span class="RktVar">request-file-memory-threshold</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-parts</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-parts</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-header-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-header-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-files</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-files</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-file-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-file-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:form-data-file-memory-threshold</span><span class="hspace">&nbsp;</span><span class="RktVar">form-data-file-memory-threshold</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-fields</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-fields</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-form-data-field-length</span><span class="hspace">&nbsp;</span><span class="RktVar">max-form-data-field-length</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:response-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">response-timeout</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:response-send-timeout</span><span class="hspace">&nbsp;</span><span class="RktVar">response-send-timeout</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._safety-limits~3f%29%29" class="RktValLink" data-pltdoc="x">safety-limits?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-concurrent</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._positive-count%2Fc%29%29" class="RktValLink" data-pltdoc="x">positive-count/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-waiting</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">511</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">request-read-timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-line-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-headers</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-header-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-body-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-files</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-request-file-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">request-file-memory-threshold</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-parts</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-header-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-files</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-file-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">form-data-file-memory-threshold</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">+inf.0</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-fields</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-form-data-field-length</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._nonnegative-length%2Fc%29%29" class="RktValLink" data-pltdoc="x">nonnegative-length/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">response-timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">response-send-timeout</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._timeout%2Fc%29%29" class="RktValLink" data-pltdoc="x">timeout/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>, but with default values that avoid
imposing any limits that aren&rsquo;t explicitly specified,
rather than the safer defaults of <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span>.
Think carefully before using <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-unlimited-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-unlimited-safety-limits</a></span>,
as it may leave your application vulnerable to denial of service attacks
or other threats that the default values from <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fsafety-limits..rkt%29._make-safety-limits%29%29" class="RktValLink" data-pltdoc="x">make-safety-limits</a></span> would mitigate.
See the <a href="#%28elem._safety-limits-porting%29" data-pltdoc="x">compatability note</a> for more details.</div></p><p>Note that the default value for <span class="RktVar">max-waiting</span> is <span class="RktVal">511</span>,
<span style="font-style: italic">not</span> <span class="RktVal">+inf.0</span>, due to the contract of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._tcp-listen%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">tcp-listen</a></span>.</p><p><div class="SIntrapara"><p class="SHistory">Added in version 1.6 of package <span class="stt">web-server-lib</span>.</p></div><div class="SIntrapara"><p class="SHistory">Changed in version 1.11 of package <span class="stt">web-server-lib</span>: added the <span class="RktVar">max-concurrent</span> limit</p></div></p><h4 x-source-module="(lib &quot;web-server/scribblings/web-server-internal.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;Dispatching_Server_Unit&quot;">1.3<tt>&nbsp;</tt><a name="(part._.Dispatching_.Server_.Unit)"></a><a name="(mod-path._web-server/private/dispatch-server-unit)"></a>Dispatching Server Unit</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._web-server%2Fprivate%2Fdispatch-server-unit%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">web-server/private/dispatch-server-unit</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/web-server-lib" title="Install this package using `raco pkg install web-server-lib`"><span class="stt">web-server-lib</span></a></span></td></tr></table></p><p>The <a href="#%28mod-path._web-server%2Fprivate%2Fdispatch-server-unit%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">web-server/private/dispatch-server-unit</span></a> module
provides the unit that actually implements a dispatching server.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._web-server/private/dispatch-server-unit..rkt)._dispatch-server-with-connect~40))"></a><span title="Provided from: web-server/private/dispatch-server-unit | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fprivate%2Fdispatch-server-unit..rkt%29._dispatch-server-with-connect~40%29%29" class="RktValDef RktValLink" data-pltdoc="x">dispatch-server-with-connect@</a></span></span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=unitcontracts.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._unit%252Fc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unit/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._import%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">import</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=net&amp;rel=tcp.html%23%2528form._%2528%2528lib._net%252Ftcp-sig..rkt%2529._tcp%7E5e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">tcp^</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-connect~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-connect^</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._export%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">export</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server^</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Runs the dispatching server config in a very basic way, except that it uses
<a href="connection-manager.html" data-pltdoc="x">Connection Manager</a> to manage connections.</div></p><p class="SHistory">Added in version 1.1 of package <span class="stt">web-server-lib</span>.<br/>Changed in version 1.6: Use <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span>
rather than <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config^</a></span>.
See <a href="#%28elem._safety-limits-porting%29" data-pltdoc="x">compatability note</a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><table cellspacing="0" cellpadding="0" class="argcontract RForeground"><tr><td valign="top"><a name="(def._((lib._web-server/private/dispatch-server-unit..rkt)._dispatch-server~40))"></a><span title="Provided from: web-server/private/dispatch-server-unit | Package: web-server-lib"><span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fprivate%2Fdispatch-server-unit..rkt%29._dispatch-server~40%29%29" class="RktValDef RktValLink" data-pltdoc="x">dispatch-server@</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=unitcontracts.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._unit%252Fc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unit/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._import%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">import</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=net&amp;rel=tcp.html%23%2528form._%2528%2528lib._net%252Ftcp-sig..rkt%2529._tcp%7E5e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">tcp^</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._export%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">export</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server^</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._web-server%2Fprivate%2Fdispatch-server-unit..rkt%29._dispatch-server-with-connect~40%29%29" class="RktValLink" data-pltdoc="x">dispatch-server-with-connect@</a></span>, but using <span class="RktSym"><a href="web-server.html#%28def._%28%28lib._web-server%2Fweb-server..rkt%29._raw~3adispatch-server-connect~40%29%29" class="RktValLink" data-pltdoc="x">raw:dispatch-server-connect@</a></span>.</div></p><p class="SHistory">Changed in version 1.6 of package <span class="stt">web-server-lib</span>: Use <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config%2A~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config*^</a></span>
rather than <span class="RktSym"><a href="#%28form._%28%28lib._web-server%2Fprivate%2Fdispatch-server-sig..rkt%29._dispatch-server-config~5e%29%29" class="RktStxLink" data-pltdoc="x">dispatch-server-config^</a></span>.
See <a href="#%28elem._safety-limits-porting%29" data-pltdoc="x">compatability note</a>.</p><h4 x-source-module="(lib &quot;web-server/scribblings/web-server-internal.scrbl&quot;)" x-source-pkg="web-server-doc" x-part-tag="&quot;Threads_and_Custodians&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Threads_and_.Custodians)"></a>Threads and Custodians</h4><p>The dispatching server runs in a dedicated thread. Every time a connection is initiated, a new thread is started to handle it.
Connection threads are created inside a dedicated custodian that is a child of the server&rsquo;s custodian. When the server is used to
provide servlets, each servlet also receives a new custodian that is a child of the server&rsquo;s custodian <span style="font-weight: bold">not</span> the connection
custodian.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Web Server: HTTP Server&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Web Server: HTTP Server&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="dispatchers.html" title="forward to &quot;2 Dispatchers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/web-server-internal/dispatch-server-unit.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:15:16 GMT -->
</html>