<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/cli/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 02:57:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>cli: Simple Command Line Interfaces</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">cli:<span class="mywbr"> &nbsp;</span> Simple Command Line Interfaces</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Usage%29" class="tocviewlink" data-pltdoc="x">Usage</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Forms%29" class="tocviewlink" data-pltdoc="x">Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Interoperating_with_.Racket%29" class="tocviewlink" data-pltdoc="x">Interoperating with Racket</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Implementation%29" class="tocviewlink" data-pltdoc="x">Implementation</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Testing_.Your_.Script%29" class="tocviewlink" data-pltdoc="x">Testing Your Script</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">cli:<span class="mywbr"> &nbsp;</span> Simple Command Line Interfaces</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Usage%29" class="tocsubseclink" data-pltdoc="x">Usage</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.In_a_script%29" class="tocsubseclink" data-pltdoc="x">In a script</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.In_a_main_submodule%29" class="tocsubseclink" data-pltdoc="x">In a main submodule</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Forms%29" class="tocsubseclink" data-pltdoc="x">Forms</a></td></tr><tr><td><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._help%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">help</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">flag</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._constraint%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">constraint</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">program</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">run</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Interoperating_with_.Racket%29" class="tocsubseclink" data-pltdoc="x">Interoperating with Racket</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Implementation%29" class="tocsubseclink" data-pltdoc="x">Implementation</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Testing_.Your_.Script%29" class="tocsubseclink" data-pltdoc="x">Testing Your Script</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._cli__.Simple_.Command_.Line_.Interfaces)"></a><a name="(mod-path._cli)"></a>cli: Simple Command Line Interfaces</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Siddhartha Kasivajhula</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">cli</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/cli" title="Install this package using `raco pkg install cli`"><span class="stt">cli</span></a></span></td></tr></table></p><p>A language for writing command line interfaces that aims to be simple, composable, and robust. You can use it to write <a href="#%28part._.In_a_script%29" data-pltdoc="x">standalone scripts</a>, or to extend the capabilities of <a href="#%28part._.In_a_main_submodule%29" data-pltdoc="x">an existing main submodule</a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._help%29%29" class="RktStxLink" data-pltdoc="x">help</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">usage</span><span class="hspace">&nbsp;</span><span class="RktVal">"A convenient way to write command line interfaces."</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">verbose</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"-v"</span><span class="hspace">&nbsp;</span><span class="RktVal">"--verbose"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Show detailed messages."</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">verbose</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hello</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">verbose</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"By golly, it is very nice to meet you, indeed!"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Nice to meet you."</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span><span class="hspace">&nbsp;</span><span class="RktSym">hello</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;Usage&quot;">1<tt>&nbsp;</tt><a name="(part._.Usage)"></a>Usage</h3><p>The language provides a small set of <a href="#%28part._.Forms%29" data-pltdoc="x">forms</a> that allow you to comprehensively specify the behavior of your command line interface. You may use these forms in the following ways.</p><h4 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;In_a_script&quot;">1.1<tt>&nbsp;</tt><a name="(part._.In_a_script)"></a>In a script</h4><p>In order to use the language to write a command line script, simply declare the module as <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> <span class="RktSym">cli</span> at the top of the file.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">cli</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hello</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span><span class="hspace">&nbsp;</span><span class="RktSym">hello</span><span class="RktPn">)</span></td></tr></table></blockquote><h4 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;In_a_main_submodule&quot;">1.2<tt>&nbsp;</tt><a name="(part._.In_a_main_submodule)"></a>In a main submodule</h4><p>To use the language in a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._main-and-test%2529&amp;version=8.6" class="Sq" data-pltdoc="x">main submodule</a>, use <span class="RktSym">cli</span> as the module language.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/format</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">greeting</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fformat..rkt%2529._%7E7ea%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">~a</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello, "</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">greeting</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._module%252A%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">module*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">main</span><span class="hspace">&nbsp;</span><span class="RktSym">cli</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._submod%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">submod</a></span><span class="hspace">&nbsp;</span><span class="RktVal">".."</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">say-hello</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"Your name"</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">greeting</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span><span class="hspace">&nbsp;</span><span class="RktSym">say-hello</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Since the module language differs from the enclosing module language, we need to explicitly require the enclosing module in the main submodule via <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._submod%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">submod</a></span><span class="stt"> </span><span class="RktVal">".."</span><span class="RktPn">)</span><span class="RktPn">)</span> in order to use the identifiers declared there. Also note that unlike in the typical case of using <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._module%252B%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">module+</a></span><span class="stt"> </span><span class="RktSym">main</span><span class="RktPn">)</span>, the main submodule would only have access to the enclosing module identifiers when they are explicitly <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x">provided</a>, as in the example above.</p><h3 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;Forms&quot;">2<tt>&nbsp;</tt><a name="(part._.Forms)"></a>Forms</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._cli/main..rkt)._help))"></a><span title="Provided from: cli | Package: cli"><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._help%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">help</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">help-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">help-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">usage</span><span class="hspace">&nbsp;</span><span class="RktVar">line</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">labels</span><span class="hspace">&nbsp;</span><span class="RktVar">line</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">ps</span><span class="hspace">&nbsp;</span><span class="RktVar">line</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">line</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">string</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Document various aspects of the command for display via shell interaction (for instance, via the <span class="RktSym"><span class="nobreak">-h</span></span> or <span class="RktSym"><span class="nobreak">--h</span>elp</span> flag). <span class="RktVar">usage</span> shows usage information, <span class="RktVar">labels</span> appear before the help section on flags, and <span class="RktVar">ps</span> appears at the end of the help text, as a "postscript" to the text. Each of the subforms, <span class="RktVar">usage</span>, <span class="RktVar">labels</span> and <span class="RktVar">ps</span>, accept strings provided in sequence, with each provided string appearing on a separate line in the output. These forms correspond to the identically-named forms in Racket&rsquo;s <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Command-Line_Parsing.html&amp;version=8.6" class="Sq" data-pltdoc="x">built-in command line provisions</a>.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._help%29%29" class="RktStxLink" data-pltdoc="x">help</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">usage</span><span class="hspace">&nbsp;</span><span class="RktVal">"A script to say hello."</span><span class="hspace">&nbsp;</span><span class="RktVal">"It also validates any provided links."</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">labels</span><span class="hspace">&nbsp;</span><span class="RktVal">"A label"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Another label"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">ps</span><span class="hspace">&nbsp;</span><span class="RktVal">"Goodbye!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._cli/main..rkt)._flag))"></a><span title="Provided from: cli | Package: cli"><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">flag</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-paramspec</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">metadata</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-paramspec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:param</span><span class="hspace">&nbsp;</span><span class="RktVar">paramspec</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">paramspec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">param-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">param-name</span><span class="hspace">&nbsp;</span><span class="RktVar">init-value</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">metadata</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">short-flag</span><span class="hspace">&nbsp;</span><span class="RktVar">long-flag</span><span class="hspace">&nbsp;</span><span class="RktVar">description</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Declare a flag that will be accepted by the program. This form specifies a function that will be called when the flag is provided at the command line. This function (and the corresponding command-line flag) can accept any number of arguments, or no arguments &ndash; but in general, a specific number of them. The flag will consume the specified number of arguments at the command line. To accept an arbitrary number of arguments, use the <span class="RktSym">multi</span> <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._constraint%29%29" class="RktStxLink" data-pltdoc="x">constraint</a></span>, instead (or in addition).</div></p><p>Each flag defined using <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span> results in the creation of a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=eval-model.html%23%2528tech._parameter%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">parameter</span></a> which may be used to store relevant values or configuration which will be available to the running program defined in the <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span> form. By default, this parameter has the same name as that of the flag, and is initialized with the value <span class="RktVal">#f</span>, but these may be configured via the keyword argument <span class="RktPn">#:param</span>. Note that Racket parameters are accessed by invoking them, so in the examples below, it is these parameters being invoked rather than the flag functions which appear to have the same name (but which, under the hood, are anonymous).</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">attempts</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"-a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"--attempts"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Number of attempts to make"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">attempts</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transaction</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">timeout</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"-t"</span><span class="hspace">&nbsp;</span><span class="RktVal">"--transaction"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Size of transaction, and timeout value"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transaction</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">timeout</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">links</span><span class="hspace">&nbsp;</span><span class="RktPn">#:param</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">links</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._link%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">link</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"-l"</span><span class="hspace">&nbsp;</span><span class="RktVal">"--link"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Links to validate"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">links</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cons%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._link%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">link</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">links</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._cli/main..rkt)._constraint))"></a><span title="Provided from: cli | Package: cli"><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._constraint%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">constraint</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">constraint-clause</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">constraint-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">one-of</span><span class="hspace">&nbsp;</span><span class="RktVar">flag-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">multi</span><span class="hspace">&nbsp;</span><span class="RktVar">flag-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">final</span><span class="hspace">&nbsp;</span><span class="RktVar">flag-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Declare a constraint that applies to the flags. By default, a flag declared via <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span> may appear at the command line at most once. A constraint changes this expectation for the indicated flags. <span class="RktVar">one-of</span> means that only one of the flags in the indicated set may be provided, i.e. at most one <span class="emph">in the set</span> rather than individually. <span class="RktVar">multi</span> means that the indicated flags may appear any number of times. <span class="RktVar">final</span> means that none of the arguments following the indicated flags will be treated as flags.</div></p><p>A constraint does not modify the number of arguments the flag will consume, which is determined by the <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" class="RktStxLink" data-pltdoc="x">flag</a></span> definition. For instance, a flag with a <span class="RktVar">multi</span> constraint that accepts two arguments in its definition will consume two arguments <span class="emph">each time</span> it appears at the command line.</p><p>See <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Command-Line_Parsing.html&amp;version=8.6" class="Sq" data-pltdoc="x">Command-Line Parsing</a> for more on what these constraints mean.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._constraint%29%29" class="RktStxLink" data-pltdoc="x">constraint</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">one-of</span><span class="hspace">&nbsp;</span><span class="RktSym">attempts</span><span class="hspace">&nbsp;</span><span class="RktSym">retries</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._constraint%29%29" class="RktStxLink" data-pltdoc="x">constraint</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">multi</span><span class="hspace">&nbsp;</span><span class="RktSym">links</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._constraint%29%29" class="RktStxLink" data-pltdoc="x">constraint</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">final</span><span class="hspace">&nbsp;</span><span class="RktSym">exec</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._cli/main..rkt)._program))"></a><span title="Provided from: cli | Package: cli"><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">program</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">argspec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">argspec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">arg</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktVar">description</span><span class="RktPn">]</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Define the command to be run. This simply defines a function, where the arguments correspond directly to those received at the command line. The arguments may optionally be documented inline, and these descriptions would appear at the command line in help text and prompts. Any declared <a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" data-pltdoc="x">flags</a> are available in the body of the function via the corresponding <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=eval-model.html%23%2528tech._parameter%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">parameters</span></a>. Any number of commands may be defined in the same file, and they would all have access to the same flags and environment. A command so defined is not executed unless it is invoked via <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span>.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">contact-hosts</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">admin</span><span class="hspace">&nbsp;</span><span class="RktVal">"Your name"</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fformat..rkt%2529._%7E7ea%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">~a</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello, "</span><span class="hspace">&nbsp;</span><span class="RktSym">admin</span><span class="hspace">&nbsp;</span><span class="RktVal">"!"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._for-each%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">for-each</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._link%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">link</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._when%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">when</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">contact-host</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingunits.html%23%2528form._%2528%2528lib._racket%252Funit..rkt%2529._link%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">link</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">attempts</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=set_.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._set%2521%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">links</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fformat..rkt%2529._%7E7ea%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">~a</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Done. Result: "</span><span class="hspace">&nbsp;</span><span class="RktSym">result</span><span class="hspace">&nbsp;</span><span class="RktVal">" hosts contacted."</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Although the function defined using <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span> appears to accept the arguments you indicate, in reality, it accepts raw command line arguments as a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=runtime.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-command-line-arguments%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x">vector of strings</a> which are parsed into the arguments you expect prior to your using them in the body of the function. Thus, if you called this function directly (for instance, mistakenly assuming it to be another function with the same name), you would get the following inscrutable error: <span class="RktSym">parse-command-line:</span><span class="stt"> </span><span class="RktSym">expected</span><span class="stt"> </span><span class="RktSym">argument</span><span class="stt"> </span><span class="RktSym">of</span><span class="stt"> </span><span class="RktSym">type</span><span class="stt"> </span><span class="RktSym">&lt;argument</span><span class="stt"> </span><span class="RktSym">vector/list</span><span class="stt"> </span><span class="RktSym">of</span><span class="stt"> </span><span class="RktSym">strings&gt;</span>. As commands are just functions, they must have distinct names from other identifiers in scope in order to avoid shadowing them.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._cli/main..rkt)._run))"></a><span title="Provided from: cli | Package: cli"><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">run</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">program-instance</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">program-instance</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">argv</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Run a command. Any command defined via <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span> may be indicated here. The command need not be defined in the same module &ndash; since programs are just functions, they could be defined anywhere and simply <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x">required</a> in order to make them available for execution.</div></p><p>By default, <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span> passes the <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=runtime.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-command-line-arguments%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x">current command line arguments</a> to the command, but you could also override this by providing a vector of strings representing a command line invocation, which may be useful <a href="#%28part._.Testing_.Your_.Script%29" data-pltdoc="x">for testing</a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span><span class="hspace">&nbsp;</span><span class="RktSym">contact-hosts</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span><span class="hspace">&nbsp;</span><span class="RktSym">contact-hosts</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"-a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"3"</span><span class="hspace">&nbsp;</span><span class="RktVal">"George"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h3 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;Interoperating_with_Racket&quot;">3<tt>&nbsp;</tt><a name="(part._.Interoperating_with_.Racket)"></a>Interoperating with Racket</h3><p>In addition to the forms above, the language includes all of <span class="RktSym">racket/base</span>, so that you may <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span> any identifiers that may be needed in your command line script. You may also freely intersperse and use Racket code within the <span class="RktSym">cli</span> module.</p><h3 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;Implementation&quot;">4<tt>&nbsp;</tt><a name="(part._.Implementation)"></a>Implementation</h3><p>This library internally leverages Racket&rsquo;s built-in command line facilities including <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Command-Line_Parsing.html%23%2528def._%2528%2528lib._racket%252Fcmdline..rkt%2529._parse-command-line%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parse-command-line</a></span> for core functionality, and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=runtime.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-command-line-arguments%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-command-line-arguments</a></span> for arguments parsed from the command line. The functionality provided by this library therefore includes all of the functionality of the core interfaces.</p><h3 x-source-module="(lib &quot;cli/scribblings/cli.scrbl&quot;)" x-source-pkg="cli" x-part-tag="&quot;Testing_Your_Script&quot;">5<tt>&nbsp;</tt><a name="(part._.Testing_.Your_.Script)"></a>Testing Your Script</h3><p>The <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span> form syntactically resembles and indeed compiles to a simple function, and so can be tested just like any other function. But since command line scripts do not typically return values, it would probably make the most sense to put any business logic in vanilla (non-CLI) functions which are independently unit-tested, with the <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._program%29%29" class="RktStxLink" data-pltdoc="x">program</a></span> form dispatching to those functions.</p><p>Even so, it can be useful during development and even for "smoke" tests to be able to run your script programmatically. To do this, simply pass the arguments and flags that you would on the command line to the <span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span> form as a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=runtime.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-command-line-arguments%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x">vector of strings</a>, like <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._run%29%29" class="RktStxLink" data-pltdoc="x">run</a></span><span class="stt"> </span><span class="RktSym">contact-hosts</span><span class="stt"> </span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">"-a"</span><span class="stt"> </span><span class="RktVal">"3"</span><span class="stt"> </span><span class="RktVal">"George"</span><span class="RktVal">)</span><span class="RktPn">)</span>. Note that each value in the vector <span class="emph">must</span> be a string, even if you use it as another data type (such as a number) in the body of your program form.</p><p>Finally, bear in mind that as passing <a href="#%28form._%28%28lib._cli%2Fmain..rkt%29._flag%29%29" data-pltdoc="x">flags</a> to a command results in <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=parameterize.html&amp;version=8.6" class="Sq" data-pltdoc="x">parameters</a> being set, which are <span class="emph">dynamically</span> rather than lexically bound, commands correspond to a dynamic runtime state. Therefore, if you plan on running a command in a test module more than once, you should do so with care since it may produce different results on a subsequent invocation depending on this varying dynamic state.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/cli/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 02:57:53 GMT -->
</html>