<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/iracket/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:01:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>IRacket: Racket Kernel for Jupyter</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">IRacket:<span class="mywbr"> &nbsp;</span> Racket Kernel for Jupyter</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._install%29" class="tocviewlink" data-pltdoc="x">Installing the IRacket Jupyter Kernel</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._lang%29" class="tocviewlink" data-pltdoc="x">IRacket and Languages</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">IRacket:<span class="mywbr"> &nbsp;</span> Racket Kernel for Jupyter</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._install%29" class="tocsubseclink" data-pltdoc="x">Installing the IRacket Jupyter Kernel</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._install-api%29" class="tocsubseclink" data-pltdoc="x">IRacket Installation API</a></td></tr><tr><td><a href="#%28def._%28%28lib._iracket%2Finstall..rkt%29._install-iracket%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">install-<wbr></wbr>iracket!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._lang%29" class="tocsubseclink" data-pltdoc="x">IRacket and Languages</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._hopeless%29" class="tocsubseclink" data-pltdoc="x">The Top Level (REPL) Is Hopeless</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._iracket-lang%29" class="tocsubseclink" data-pltdoc="x"><span class="RktModLink"><span class="RktMod">#lang</span></span><span class="stt"> </span><span class="RktModLink"><span class="RktSym">iracket/<span class="mywbr"> &nbsp;</span>lang</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;iracket/iracket.scrbl&quot;)" x-source-pkg="iracket" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.I.Racket__.Racket_.Kernel_for_.Jupyter)"></a>IRacket: Racket Kernel for Jupyter</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Ryan Culpepper &lt;<a href="mailto:ryanc@racket-lang.org">ryanc@racket-lang.org</a>&gt;</p></span></div><p>This library provides a Racket kernel for <a href="https://jupyter.org/">Jupyter</a>,
enabling interactive notebook-style programming with Racket.</p><h3 x-source-module="(lib &quot;iracket/iracket.scrbl&quot;)" x-source-pkg="iracket" x-part-tag="&quot;install&quot;">1<tt>&nbsp;</tt><a name="(part._install)"></a>Installing the IRacket Jupyter Kernel</h3><p>After installing the <span class="stt">iracket</span> package, you must register the IRacket kernel
with Jupyter. Kernel registration can be done either through the <span class="stt">raco
iracket install</span> command or by using the <a href="#%28mod-path._iracket%2Finstall%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/install</span></a> module.</p><p><div class="SIntrapara">If <span class="stt">racket</span> and <span class="stt">jupyter</span> are both in your executable search
path, then you can register the kernel by either of the following:
</div><div class="SIntrapara"><ul><li><p>at the command line: <span class="stt">raco iracket install</span>, or</p></li><li><p>in Racket: <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym">iracket/install</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._iracket%2Finstall..rkt%29._install-iracket%21%29%29" class="RktValLink" data-pltdoc="x">install-iracket!</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></li></ul></div></p><p>If the <span class="stt">jupyter</span> command is not in your executable search path, you must
tell the installer the absolute path to the <span class="stt">jupyter</span> executable using
the <span class="stt">--jupyter-exe</span> flag or <span class="RktPn">#:jupyter-exe</span> keyword argument. The
installer runs <span class="stt">jupyter --data-dir</span> to find the directory where it
should install the IRacket kernel.</p><p>If the <span class="stt">racket</span> command is not in your executable search path, or if you
want to register a kernel that uses a specific version of Racket, then you must
tell the installer the path to the executable to use. The executable must
support the same command-line interface that the <span class="stt">racket</span> executable
supports, but it does not have to be named <span class="RktInBG"><span class="hspace"></span><span class="RktIn">racket</span><span class="hspace"></span></span>&#8212;<wbr></wbr>for example, a
<span class="stt">racketcgc</span> or <span class="stt">racketcs</span> executable would also work. See the
output of <span class="stt">raco iracket install --help</span> or the documentation for
<span class="RktSym"><a href="#%28def._%28%28lib._iracket%2Finstall..rkt%29._install-iracket%21%29%29" class="RktValLink" data-pltdoc="x">install-iracket!</a></span> for details.</p><p>Note that if you register the kernel with a non-version-specific Racket command
(the default) and then change that command to run a different version of Racket
(for example, by changing your <span class="stt">PATH</span> or by installing a new version of
Racket over the old one), then Jupyter will try to use the new version of Racket
to run the IRacket kernel. If the <span class="stt">iracket</span> package is not installed in the
new version, this typically results in an error like &ldquo;collection not found for
module path: <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lib%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lib</a></span><span class="stt"> </span><span class="RktVal">"iracket/iracket"</span><span class="RktPn">)</span>&rdquo;. The same error will
occur if you try to run the kernel after removing the <span class="stt">iracket</span> package.</p><p class="SHistory">Changed in version 1.1: Added <span class="stt">raco iracket</span> command.</p><h4 x-source-module="(lib &quot;iracket/iracket.scrbl&quot;)" x-source-pkg="iracket" x-part-tag="&quot;install-api&quot;">1.1<tt>&nbsp;</tt><a name="(part._install-api)"></a><a name="(mod-path._iracket/install)"></a>IRacket Installation API</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._iracket%2Finstall%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/install</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/iracket" title="Install this package using `raco pkg install iracket`"><span class="stt">iracket</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._iracket/install..rkt)._install-iracket!))"></a><span title="Provided from: iracket/install | Package: iracket"><span class="RktSym"><a href="#%28def._%28%28lib._iracket%2Finstall..rkt%29._install-iracket%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">install-iracket!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:jupyter-exe</span><span class="hspace">&nbsp;</span><span class="RktVar">jupyter-exe</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:racket-exe</span><span class="hspace">&nbsp;</span><span class="RktVar">racket-exe</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">jupyter-exe</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">racket-exe</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">auto</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">this-version</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Registers the IRacket kernel in the location reported by <span class="RktVar">jupyter-exe</span>
(with the <span class="stt">--data-dir</span> flag). If <span class="RktVar">racket-exe</span> is a path or
string, then it is included in the kernel registration as the command Jupyter
should use to run the kernel. If <span class="RktVar">racket-exe</span> is <span class="RktVal">#f</span>, then the
registration uses the generic <span class="stt">racket</span> command, but only if it is
included in the current executable search path; otherwise, an error is
raised. If <span class="RktVar">racket-exe</span> is <span class="RktVal">'</span><span class="RktVal">this-version</span>, then the absolute path
to the currently running version of Racket is used.</div></p><p class="SHistory">Added in version 1.1 of package <span class="stt">iracket</span>.</p><h3 x-source-module="(lib &quot;iracket/iracket.scrbl&quot;)" x-source-pkg="iracket" x-part-tag="&quot;lang&quot;">2<tt>&nbsp;</tt><a name="(part._lang)"></a>IRacket and Languages</h3><p>The IRacket kernel does not support Racket&rsquo;s <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> syntax for selecting
languages, for the same reason that syntax doesn&rsquo;t work at the Racket REPL. That
is, <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> is a syntax for <span class="emph">whole modules</span>, whereas both the REPL and
Jupyter work with top-level forms and generally receive them one at a time. See
also <a href="#%28part._hopeless%29" data-pltdoc="x">The Top Level (REPL) Is Hopeless</a>.</p><p>Instead of general <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a> support, IRacket recognizes
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span> as a special declaration for adjusting
the notebook&rsquo;s language.</p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktPn">#:require</span><span class="hspace">&nbsp;</span><span class="RktVar">lang-mod</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-reader</span></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-reader</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:reader</span><span class="hspace">&nbsp;</span><span class="RktVar">reader-mod</span></td></tr></table></td></tr></table></blockquote><p>Creates a new empty namespace, populates it by requiring
<span class="RktVar">lang-mod</span> (a module path), and installs it as the kernel&rsquo;s
current namespace, used for evaluation. The namespace shares the
module instances of the kernel&rsquo;s original namespace, but it does not
include previous top-level definitions.</p><p>If <span class="RktVar">reader-mod</span> is given, the kernel&rsquo;s reader is set to the
<span class="RktSym">read-syntax</span> export of <span class="RktVar">reader-mod</span> (a module
path); otherwise the kernel&rsquo;s reader is set to Racket&rsquo;s
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-syntax%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read-syntax</a></span>.</p><p>Warning: If <span class="RktVar">reader-mod</span> is given, its <span class="RktSym">read-syntax</span> export
must be suitable for reading top-level forms. For example,
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=scribble&amp;rel=reader-internals.html%23%2528mod-path._scribble%252Freader%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">scribble/reader</span></a> is suitable, but
<font class="badlink"><span class="RktModLink"><span class="RktSym">at-exp/lang/reader</span></span></font> is not suitable, because it provides a
<span class="emph">whole-module meta-reader</span>.</p></blockquote><p>If a cell contains <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span>, it must be the first
thing in the cell; no other forms, comments, or even whitespace can
appear before it. The declaration does not have to appear in the first
cell in the notebook; in fact, multiple cells may contain language
declarations. The declaration takes effect when it is evaluated, and
it affects the rest of the current cell and subsequent evaluations,
until the kernel is restarted or until the next <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span> declaration is evaluated.</p><p><div class="SIntrapara">For example, the following declaration sets the initial environment to
the exports of <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a> and sets the reader to
Scribble&rsquo;s reader:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">#lang iracket/lang #:require racket/base #:reader scribble/reader</span></p></blockquote></div></p><p class="SHistory">Added in version 1.2.</p><h4 x-source-module="(lib &quot;iracket/iracket.scrbl&quot;)" x-source-pkg="iracket" x-part-tag="&quot;hopeless&quot;">2.1<tt>&nbsp;</tt><a name="(part._hopeless)"></a>The Top Level (REPL) Is Hopeless</h4><p>Due to the combination of Racket&rsquo;s macro system, its recursive
top-level environment, and the fact that the REPL receives and
processes forms one at a time, the Racket REPL occasionally produces
unexpected behavior. These problems are known in the Racket community
as &ldquo;the top level is hopeless&rdquo;. The same problems occur in Jupyter
notebooks.</p><p>For example, consider the following program:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">range : Real Real -&gt; Real</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Compute the size of the given interval.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">range</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3c%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._-%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">swap to normalize, try again</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">range</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">range</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">range</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr></table></blockquote><p>When placed inside a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="stt"> </span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a> module,
this code prints <span class="RktRes">5</span> twice. But when run at the REPL (or in a
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=load-lang.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/load</span></a> module), the same code prints <span class="RktRes">5</span> and
then <span class="RktRes">'(5<span class="stt"> </span>6<span class="stt"> </span>7<span class="stt"> </span>8<span class="stt"> </span>9)</span>!</p><p>The problem is that when the REPL receives the definition of
<span class="RktSym">range</span>, it compiles the definition in an environment where
<span class="RktSym">range</span> is still bound to <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Flist..rkt%2529._range%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x"><span class="stt">range</span></a> from <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a>
(which re-provides the exports of <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528mod-path._racket%252Flist%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/list</span></a>). So the
&ldquo;recursive&rdquo; call to <span class="RktSym">range</span> gets compiled as a call to
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528mod-path._racket%252Flist%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/list</span></a>&rsquo;s <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Flist..rkt%2529._range%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x"><span class="stt">range</span></a>, not to the top-level
<span class="RktSym">range</span> function that has not yet been defined.</p><p>Racket&rsquo;s module system mainly avoids such problems by detecting defined names
before expanding the right-hand sides of definitions.</p><p>To avoid this problem, avoid redefining names.</p><p>(An alternative is to put <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-syntaxes%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-syntaxes</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">range</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="RktPn">)</span><span class="RktPn">)</span> before the definition above. This form of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-syntaxes%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-syntaxes</a></span> is
only allowed at the top level, and it changes <span class="RktSym">range</span> to resolve as
a binding in the top-level environment without giving it a value.)</p><h4 x-source-module="(lib &quot;iracket/iracket.scrbl&quot;)" x-source-pkg="iracket" x-part-tag="&quot;iracket-lang&quot;">2.2<tt>&nbsp;</tt><a name="(part._iracket-lang)"></a><a name="(mod-path._iracket/lang)"></a><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="stt"> </span><a href="#%28mod-path._iracket%2Flang%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/lang</span></a></h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="#%28mod-path._iracket%2Flang%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/lang</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/iracket" title="Install this package using `raco pkg install iracket`"><span class="stt">iracket</span></a></span></td></tr></table></p><p>In addition to being interpreted specially by the IRacket kernel (see
<a href="#%28part._lang%29" data-pltdoc="x">IRacket and Languages</a>), <a href="#%28mod-path._iracket%2Flang%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/lang</span></a> can be used as a language in
Racket code. The purpose of the language is for testing how code should work in
a Jupyter notebook; the <a href="#%28mod-path._iracket%2Flang%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/lang</span></a> language is not useful for
developing normal Racket libraries and programs.</p><p>As a language, it behaves similarly to <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=load-lang.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/load</span></a>. Like
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=load-lang.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/load</span></a>, it evaluates body forms one by one in a top-level
namespace. Unlike <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=load-lang.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/load</span></a>, it allows controlling the reader,
and it delays reading the module body until run time, so that if one expression
dynamically changes the reader, it affects the reading of the rest of the module
body.</p><p><div class="SIntrapara">The following inconsistencies between Racket&rsquo;s interpretation of the
<a href="#%28mod-path._iracket%2Flang%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">iracket/lang</span></a> language and IRacket&rsquo;s interpretation of
a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span> declaration are known:
</div><div class="SIntrapara"><ul><li><p>IRacket allows multiple <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span> declarations in a
notebook, but a Racket module does not (unless you change reader parameters, but
then it still means something different).</p></li><li><p>Notebook cell boundaries can affect reader behavior, because the reader
stops at the end of each cell. Thus a module formed by simply concatenating cell
contents might behave differently.</p></li><li><p>When IRacket processes a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang iracket/lang</span><span class="hspace"></span></span> declaration, it does
not reset parameters like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-readtable%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-readtable</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-accept-dot%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read-accept-dot</a></span>,
etc. In contrast, Racket generally uses a fixed set of parameter values for
reading modules (see <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=module-helpers.html%23%2528mod-path._syntax%252Fmodread%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">syntax/modread</span></a>).</p></li></ul></div></p><p class="SHistory">Added in version 1.2 of package <span class="stt">iracket</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/iracket/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:01:55 GMT -->
</html>