<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/beeswax/raco-beeswax.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:26:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;raco beeswax render</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="additional.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Beeswax:<span class="mywbr"> &nbsp;</span> a Pollen-<wbr></wbr>friendly template language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Using_Beeswax_in_a_Pollen_project.html" class="tocviewlink" data-pltdoc="x">Using Beeswax in a Pollen project</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Beeswax_Reference.html" class="tocviewlink" data-pltdoc="x">Beeswax Reference</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x"><span class="stt">raco beeswax render</span></a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Acknowledgements_and_License.html" class="tocviewlink" data-pltdoc="x">Acknowledgements and License</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x"><span class="stt">raco beeswax render</span></a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._.Optimizing_renders%29" class="tocviewlink" data-pltdoc="x">Optimizing renders</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Optimizing_renders%29" class="tocsubseclink" data-pltdoc="x">Optimizing renders</a></td></tr><tr><td><span class="tocsublinknumber">3.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Use_raco_make_on_your_templates%29" class="tocsubseclink" data-pltdoc="x">Use <span class="stt">raco make</span> on your templates</a></td></tr><tr><td><span class="tocsublinknumber">3.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Example_benchmarks%29" class="tocsubseclink" data-pltdoc="x">Example benchmarks</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Beeswax_Reference.html" title="backward to &quot;2 Beeswax Reference&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Beeswax: a Pollen-friendly template language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Acknowledgements_and_License.html" title="forward to &quot;4 Acknowledgements and License&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;beeswax/scribblings/beeswax.scrbl&quot;)" x-source-pkg="beeswax" x-part-tag="&quot;raco-beeswax&quot;">3<tt>&nbsp;</tt><a name="(part._raco-beeswax)"></a><span class="stt">raco beeswax render</span></h3><p>This command renders a Pollen source (or any file that provides Pollen&#8217;s <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=pollen&amp;rel=File_formats.html%23%2528part._.Standard_exports%2529&amp;version=8.6" class="Sq" data-pltdoc="x">standard identifiers</a> <span class="RktVar">doc</span> and
<span class="RktVar">metas</span>) using the appropriate Beeswax template.</p><p>Use <span class="stt">raco beeswax render</span> in preference to <span class="stt">raco pollen render</span> when you want speed over
convenience. This command is stupid but fast.</p><div class="terminal" style="color: #663399"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="prompt" style="color: #666666"><span class="stt">&gt; </span><span class="stt">raco beeswax render </span><span style="font-style: italic">source</span><span class="stt"> ...</span></span></p></td></tr></table></div></div><p>As with Pollen:</p><ul><li><p>The optional <span class="stt">-t</span> or <span class="stt">--target</span> switch specifies the target file type to use for
multi-output source files and ambiguously-named files. (Files that specify a specific output target
will still be rendered as usual.) Like Pollen, this defaults to whatever appears first in
<span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=pollen&amp;rel=Setup.html%23%2528def._%2528%2528lib._pollen%252Fsetup..rkt%2529._setup%7E3apoly-targets%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">setup:poly-targets</a></span><span class="RktPn">)</span>. </p></li><li><p>This command makes use of <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=pollen&amp;rel=Cache.html&amp;version=8.6" class="Sq" data-pltdoc="x">Pollen&#8217;s <span class="emph">compile</span> cache</a>; if the source file has not been
compiled, it will be compiled and cached; if it has already been compiled, the cached copy is used.</p></li></ul><p>Unlike Pollen:</p><ul><li><p>You can only specify <span class="emph">source files</span> &#8212;<wbr></wbr> not directories and not output files. If you want
to render a bunch of files, list them out separately or use wildcards. In any case, each output
filename is derived from the source filename, incorporating the <span class="stt">--target</span> value to get the
extension when necessary. </p></li><li><p>You cannot specify <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=pollen&amp;rel=File_formats.html%23%2528part._.Preprocessor___pp_extension_%2529&amp;version=8.6" class="Sq" data-pltdoc="x">Preprocessor (.pp extension)</a> files or <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=scribble&amp;rel=index.html&amp;version=8.6" class="Sq" data-pltdoc="x">Scribble files</a> with this command.</p></li><li><p>There is not (yet) a parallel rendering option. All the files are rendered in sequence using a
single core. On my personal (not very new) laptop, this method can still produce 75 HTML files in
3&#8211;4 seconds. This is fast enough that I haven&#8217;t bothered with the additional complexity of offering
full use of all available cores.</p></li><li><p>This command does not use Pollen&#8217;s (or any) <span class="emph">render</span> caching; it will always write the
output file to disk, even if none of its dependencies have changed. If the output file exists, it
will always be silently overwritten.</p></li></ul><h4 x-source-module="(lib &quot;beeswax/scribblings/beeswax.scrbl&quot;)" x-source-pkg="beeswax" x-part-tag="&quot;Optimizing_renders&quot;">3.1<tt>&nbsp;</tt><a name="(part._.Optimizing_renders)"></a>Optimizing renders</h4><h5 x-source-module="(lib &quot;beeswax/scribblings/beeswax.scrbl&quot;)" x-source-pkg="beeswax" x-part-tag="&quot;Use_raco_make_on_your_templates&quot;">3.1.1<tt>&nbsp;</tt><a name="(part._.Use_raco_make_on_your_templates)"></a>Use <span class="stt">raco make</span> on your templates</h5><p>You will get a noticeable speed increase by precompiling your Beeswax template with
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=raco&amp;rel=make.html&amp;version=8.6" class="Sq" data-pltdoc="x"><span class="stt">raco make</span></a>:</p><div class="terminal" style="color: #663399"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="prompt" style="color: #666666"><span class="stt">&gt; raco make template.html.rkt</span></span></p></td></tr></table></div></div><p>This will speed things up no matter what method you use to apply your Beeswax templates &#8212;<wbr></wbr> whether
that is <span class="stt">raco beeswax render</span>, Pollen, or some custom scheme of your own.</p><p>Perhaps Beeswax will do this for you at some point, but for now, it doesn&#8217;t. You can either do it
manually, or automate it along with the rest of your build by using a
<a href="https://www.gnu.org/software/make/manual/html_node/Simple-Makefile.html">makefile</a>.</p><h5 x-source-module="(lib &quot;beeswax/scribblings/beeswax.scrbl&quot;)" x-source-pkg="beeswax" x-part-tag="&quot;Example_benchmarks&quot;">3.1.2<tt>&nbsp;</tt><a name="(part._.Example_benchmarks)"></a>Example benchmarks</h5><p>Here we compare three render times for the same source document: one using Pollen (with a Pollen
template), one using <span class="stt">raco beeswax render</span>, and another using <span class="stt">raco beeswax render</span> with a
precompiled template. The source document and Pollen and Beeswax templates used are the same ones
shown in the tutorial.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The commands shown are actually run each time this documentation is built, so the time
measurements reflect the performance of whatever environment was used to built this copy of this
document.</p><p>If you are viewing this document from a local Racket installation, these are <span class="emph">your</span> computer&#8217;s
numbers! They depend not only on the hardware, but also the nature of other workloads running at the
same time in that environment. The times reflected on <span class="stt">docs.racket-lang.org</span> are generally going
to be slower than those measured on your local computer.</p></blockquote></blockquote></blockquote><div class="terminal" style="color: #663399"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="RktCmt"># Reset the compile cache</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="prompt" style="color: #666666"><span class="stt">&gt; raco pollen reset</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">pollen: resetting cache ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="RktCmt"># "Preheat the cache"</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="prompt" style="color: #666666"><span class="stt">&gt; raco pollen setup</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">pollen: preheating cache ...</span></p></td></tr><tr><td><p><span class="stt">pollen: caching: fleas.html.pm</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="RktCmt"># Pollen render (without the Beeswax external-renderer)</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="prompt" style="color: #666666"><span class="stt">&gt; raco pollen render fleas.html</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">pollen: rendering fleas.html</span></p></td></tr><tr><td><p><span class="stt">pollen: rendering /fleas.html.pm</span></p></td></tr><tr><td><p><span class="stt">pollen: rendered /fleas.html (338 ms)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="RktCmt"># Beeswax render</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="prompt" style="color: #666666"><span class="stt">&gt; raco beeswax render fleas.html.pm</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">beeswax: rendered /fleas.html.pm &#8594; /fleas.html (63ms)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="RktCmt"># Make Beeswax go even faster by precompiling the template</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="prompt" style="color: #666666"><span class="stt">&gt; raco make template.html.rkt</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="prompt" style="color: #666666"><span class="stt">&gt; raco beeswax render fleas.html.pm</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">beeswax: rendered /fleas.html.pm &#8594; /fleas.html (45ms)</span></p></td></tr></table></div></div><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Beeswax_Reference.html" title="backward to &quot;2 Beeswax Reference&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Beeswax: a Pollen-friendly template language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Acknowledgements_and_License.html" title="forward to &quot;4 Acknowledgements and License&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/beeswax/raco-beeswax.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:26:17 GMT -->
</html>