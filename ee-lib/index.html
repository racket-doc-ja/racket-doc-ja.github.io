<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/ee-lib/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:07:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>ee-lib: Library Support for DSL Macro Expanders</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">ee-<wbr></wbr>lib:<span class="mywbr"> &nbsp;</span> Library Support for DSL Macro Expanders</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Scope__binding__and_hygiene_operations_for_.D.S.L_expanders%29" class="tocviewlink" data-pltdoc="x">Scope, binding, and hygiene operations for DSL expanders</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Defining_literals%29" class="tocviewlink" data-pltdoc="x">Defining literals</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">ee-<wbr></wbr>lib:<span class="mywbr"> &nbsp;</span> Library Support for DSL Macro Expanders</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Scope__binding__and_hygiene_operations_for_.D.S.L_expanders%29" class="tocsubseclink" data-pltdoc="x">Scope, binding, and hygiene operations for DSL expanders</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Scope%29" class="tocsubseclink" data-pltdoc="x">Scope</a></td></tr><tr><td><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._with-scope%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">with-<wbr></wbr>scope</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._scope-tagger~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">scope-<wbr></wbr>tagger?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._add-scope%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>scope</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._splice-from-scope%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">splice-<wbr></wbr>from-<wbr></wbr>scope</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._syntax-local-introduce-splice%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>introduce-<wbr></wbr>splice</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Binding%29" class="tocsubseclink" data-pltdoc="x">Binding</a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">bind!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._lookup%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">lookup</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.Hygiene_for_expander_definitions%29" class="tocsubseclink" data-pltdoc="x">Hygiene for expander definitions</a></td></tr><tr><td><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._define%2Fhygienic%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define/<span class="mywbr"> &nbsp;</span>hygienic</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._define%2Fhygienic-metafunction%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define/<span class="mywbr"> &nbsp;</span>hygienic-<wbr></wbr>metafunction</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Hygiene_for_macro_application%29" class="tocsubseclink" data-pltdoc="x">Hygiene for macro application</a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._apply-as-transformer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">apply-<wbr></wbr>as-<wbr></wbr>transformer</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._.Transformer_evaluation%29" class="tocsubseclink" data-pltdoc="x">Transformer evaluation</a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._eval-transformer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">eval-<wbr></wbr>transformer</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part._.Integrating_with_.Racket_s_expander%29" class="tocsubseclink" data-pltdoc="x">Integrating with Racket&rsquo;s expander</a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._current-def-ctx%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>def-<wbr></wbr>ctx</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._current-ctx-id%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>ctx-<wbr></wbr>id</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._racket-var%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">racket-<wbr></wbr>var</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._racket-var~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">racket-<wbr></wbr>var?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._.Disappeared_uses_and_bindings%29" class="tocsubseclink" data-pltdoc="x">Disappeared uses and bindings</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Defining_literals%29" class="tocsubseclink" data-pltdoc="x">Defining literals</a></td></tr><tr><td><a href="#%28form._%28%28lib._ee-lib%2Fdefine..rkt%29._define-literal-forms%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>literal-<wbr></wbr>forms</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._ee-lib)"></a>ee-lib: Library Support for DSL Macro Expanders</h2><p>Michael Ballantyne &lt;<a href="mailto:michael.ballantyne@gmail.com">michael.ballantyne@gmail.com</a>&gt;</p><p>This library provides a higher-level API to Racket&rsquo;s syntax system, designed
for implementing macro expanders for DSLs. The paper
<a href="https://dl.acm.org/doi/pdf/10.1145/3428297">"Macros for
Domain-Specific Languages"</a> serves as the guide-level explanation of the
library and associated programming patterns. This page provides reference
documentation.</p><h3 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Scope__binding__and_hygiene_operations_for_DSL_expanders&quot;">1<tt>&nbsp;</tt><a name="(part._.Scope__binding__and_hygiene_operations_for_.D.S.L_expanders)"></a><a name="(mod-path._ee-lib)"></a>Scope, binding, and hygiene operations for DSL expanders</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._ee-lib%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">ee-lib</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/ee-lib" title="Install this package using `raco pkg install ee-lib`"><span class="stt">ee-lib</span></a></span></td></tr></table></p><p>Import at phase 1.</p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Scope&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Scope)"></a>Scope</h4><p>Intuitively, a scope is a region of program text in which certain bindings are
available, determined by scoping forms such as <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let</a></span> or <span class="RktSym">block</span>.
In the context of macro expansion, syntax may be moved in and out of scopes
during the process of expansion, and some scopes aren&rsquo;t immediately evident in
the source program text. The Racket expander uses several kinds of
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">scope</span></a> values to represent regions of partially expanded
programs to implement macro hygiene. This documentation refers to these scope
values as <a name="(tech._scope._tag)"></a><span style="font-style: italic">scope tags</span>, and reserves the word "scope" for the intuitive
notion.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ee-lib/main..rkt)._with-scope))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._with-scope%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">with-scope</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Introduces the elements needed to implement a scope: an
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._outside._edge._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">outside-edge scope</span></a> tag, an <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._inside._edge._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">inside-edge scope</span></a>
tag, and a new <a href="#%28tech._binding._context._segment%29" class="techoutside" data-pltdoc="x"><span class="techinside">binding context segment</span></a>.</div></p><p>The two scope tags are encapsulated in a <a name="(tech._scope._tagger)"></a><span style="font-style: italic">scope tagger</span> value
accessible via <span class="RktVar">id</span>. The new <a href="#%28tech._binding._context._segment%29" class="techoutside" data-pltdoc="x"><span class="techinside">binding context segment</span></a> is added to
the <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a> for the dynamic extent of the
evaluation of the <span class="RktVar">body</span> forms.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._scope-tagger~3f))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><span class="RktSymDef RktSym">scope-tagger?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a <a href="#%28tech._scope._tagger%29" class="techoutside" data-pltdoc="x"><span class="techinside">scope tagger</span></a> created by
<span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._with-scope%29%29" class="RktStxLink" data-pltdoc="x">with-scope</a></span> and <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._add-scope))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._add-scope%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-scope</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span><span class="RktVar">tagger</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tagger</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">scope-tagger?</span></td></tr></table></blockquote></div><div class="SIntrapara">Annotates the <span class="RktVar">stx</span> with the <a href="#%28tech._scope._tag%29" class="techoutside" data-pltdoc="x"><span class="techinside">scope tags</span></a> represented by the
<span class="RktVar">tagger</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._splice-from-scope))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._splice-from-scope%29%29" class="RktValDef RktValLink" data-pltdoc="x">splice-from-scope</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">tagger</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tagger</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">scope-tagger?</span></td></tr></table></blockquote></div><div class="SIntrapara">Removes the the <a href="#%28tech._scope._tag%29" class="techoutside" data-pltdoc="x"><span class="techinside">scope tags</span></a> represented by the <span class="RktVar">tagger</span> from the
<span class="RktVar">id</span>.</div></p><p>Useful for implementing splicing forms like <span class="RktSym">splicing-let</span> where certain
bindings that initially appear to be within a scope in fact splice outside of
it.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._syntax-local-introduce-splice))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._syntax-local-introduce-splice%29%29" class="RktValDef RktValLink" data-pltdoc="x">syntax-local-introduce-splice</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Flips the current <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._macro._introduction._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">macro-introduction scope</span></a> and removes any
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._use._site._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">use-site scope</span></a> tags created for the current expansion context.</div></p><p>Useful when moving syntax out of the context of a given macro expansion, as
when lifting a definition to a surrounding context.</p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Binding&quot;">1.2<tt>&nbsp;</tt><a name="(part._.Binding)"></a>Binding</h4><p>This library implicitly maintains a <a name="(tech._library._local._binding._context)"></a><span style="font-style: italic">library local binding context</span>
with entries that map bindings to values, similar to the core expander&rsquo;s
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._local._binding._context%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">local binding context</span></a>. See <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._current-def-ctx%29%29" class="RktValLink" data-pltdoc="x">current-def-ctx</a></span> for a way
to access the library local binding context as a first-class definition context
that can be used with the core expander&rsquo;s API.</p><p>The library local binding context consists of nested <a name="(tech._binding._context._segment)"></a><span style="font-style: italic">binding context
segments</span> corresponding to the nested dynamic extents of <span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._with-scope%29%29" class="RktStxLink" data-pltdoc="x">with-scope</a></span>
uses. The <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="RktValLink" data-pltdoc="x">bind!</a></span> operation adds new entries to the innermost segment.
The binding context may be <a name="(tech._sealed)"></a><span style="font-style: italic">sealed</span>, preventing further bindings within
the context until a new segment is added. All operations that use syntax to
create or lookup bindings in the binding context first annotate the syntax with
the <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._inside._edge._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">inside-edge scope</span></a> tag for the scope corresponding to the
innermost binding context segment.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._bind!))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">bind!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">bind!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ids</span><span class="hspace">&nbsp;</span><span class="RktVar">vs</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ids</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">vs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._binding%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">binding</span></a> for the given <span class="RktVar">id</span> and extends the
current <a href="#%28tech._binding._context._segment%29" class="techoutside" data-pltdoc="x"><span class="techinside">binding context segment</span></a> with an entry mapping the binding to the
value <span class="RktVar">v</span>. The scope set for the binding always includes the current
scope&rsquo;s <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._inside._edge._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">inside-edge scope</span></a> tag. Also records a
<a href="#%28tech._disappeared._binding%29" class="techoutside" data-pltdoc="x"><span class="techinside">disappeared binding</span></a> for <span class="RktVar">id</span>.</div></p><p>This operation is legal only in a <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a> with an
<a href="#%28tech._sealed%29" class="techoutside" data-pltdoc="x"><span class="techinside">unsealed</span></a> segment.</p><p>The second form works like the first, but for lists of corresponding
<span class="RktVar">ids</span> and <span class="RktVar">vs</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._lookup))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._lookup%29%29" class="RktValDef RktValLink" data-pltdoc="x">lookup</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">predicate</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Looks for a binding and corresponding entry in the <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding
context</span></a> for <span class="RktVar">id</span>. If the binding exists, has an value in the
<a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a>, and the value satisfies
<span class="RktVar">predicate</span>, the value is returned and a <a href="#%28tech._disappeared._use%29" class="techoutside" data-pltdoc="x"><span class="techinside">disappeared use</span></a> is
recorded for <span class="RktVar">id</span>. Otherwise returns <span class="RktVal">#f</span>.</div></p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Hygiene_for_expander_definitions&quot;">1.3<tt>&nbsp;</tt><a name="(part._.Hygiene_for_expander_definitions)"></a>Hygiene for expander definitions</h4><p>As an expander traverses syntax, it needs to enter new
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528part._expand-context-model%2529&amp;version=8.6" class="Sq" data-pltdoc="x">expansion contexts</a>
and adjust the <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a>. And hygiene should treat
syntax constructed introduced by templates in the expander similarly to syntax
introduced by a macro. The following forms define expand functions with these
behaviors.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ee-lib/main..rkt)._define/hygienic))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._define%2Fhygienic%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define/hygienic</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">ctx-type</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">arg</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">ctx-type</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:expression</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:definition</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a function <span class="RktVar">id</span> with positional arguments <span class="RktVar">arg</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span> and
body <span class="RktVar">body</span>. Invocations of the function enter a new
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528part._expand-context-model%2529&amp;version=8.6" class="Sq" data-pltdoc="x">expansion context</a>
of the type specified the <span class="RktVar">ctx-type</span>: an expression context, or an
internal-definition context. Entering an expression context <a href="#%28tech._sealed%29" class="techoutside" data-pltdoc="x"><span class="techinside">seals</span></a> the <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a>; entering an
internal-definition context does not.</div></p><p>Invocations of the function are hygienic in the same way macro applications are
hygienic: for syntax-valued arguments and returns, arguments are tagged by a
fresh <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._use._site._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">use-site scope</span></a> tag, and syntax returned from the
function that was not part of one of the arguments is tagged with a fresh
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._macro._introduction._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">macro-introduction scope</span></a> tag.</p><p>The expansion context type determines the treatment of
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._use._site._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">use-site scope</span></a> tags at uses of <span class="RktSym">bind</span>,
<span class="RktSym">syntax-local-identfier-as-binding</span>, and
<span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._syntax-local-introduce-splice%29%29" class="RktValLink" data-pltdoc="x">syntax-local-introduce-splice</a></span> within. During expansion in an
internal-definition context, the expansion context tracks a set of use-site
scopes created during expansion of the context. The operations just mentioned
remove use-site scopes present in that set. Entering an expression context
resets the set to empty.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ee-lib/main..rkt)._define/hygienic-metafunction))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._define%2Fhygienic-metafunction%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define/hygienic-metafunction</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">ctx-type</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._define%2Fhygienic%29%29" class="RktStxLink" data-pltdoc="x">define/hygienic</a></span>, but wrapped as a template metafunction.</div></p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Hygiene_for_macro_application&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Hygiene_for_macro_application)"></a>Hygiene for macro application</h4><p>Expanders also need to apply macro hygiene when invoking macros, via
<span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._apply-as-transformer%29%29" class="RktValLink" data-pltdoc="x">apply-as-transformer</a></span>. Macros should expand to forms such as
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span> rather than directly extending the binding context with
<span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="RktValLink" data-pltdoc="x">bind!</a></span>, so <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._apply-as-transformer%29%29" class="RktValLink" data-pltdoc="x">apply-as-transformer</a></span> <a href="#%28tech._sealed%29" class="techoutside" data-pltdoc="x"><span class="techinside">seals</span></a>
the binding context.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._apply-as-transformer))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._apply-as-transformer%29%29" class="RktValDef RktValLink" data-pltdoc="x">apply-as-transformer</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">binding-id</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">ctx-type</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">binding-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ctx-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">definition</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Calls the function <span class="RktVar">proc</span> with the same expansion context and hygiene
behavior as calling a function defined by <span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fmain..rkt%29._define%2Fhygienic%29%29" class="RktStxLink" data-pltdoc="x">define/hygienic</a></span>, except that
the <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a> is always <a href="#%28tech._sealed%29" class="techoutside" data-pltdoc="x"><span class="techinside">sealed</span></a>.</div></p><p>The <span class="RktVar">binding-id</span> argument specifies a binding associated with the
<span class="RktVar">proc</span>, which the expander uses to determine whether to add
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._use._site._scope%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">use-site scopes</span></a> and which <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=modprotect.html%23%2528tech._code._inspector%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">code inspector</span></a>
to use during expansion.</p><p class="SHistory">Changed in version 1.0 of package <span class="stt">ee-lib</span>: Added the <span class="RktVar">binding-id</span> argument.</p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Transformer_evaluation&quot;">1.5<tt>&nbsp;</tt><a name="(part._.Transformer_evaluation)"></a>Transformer evaluation</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._eval-transformer))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._eval-transformer%29%29" class="RktValDef RktValLink" data-pltdoc="x">eval-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Evaluates <span class="RktVar">stx</span> at phase 1 in the <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a>.</div></p><p>Useful for implementing forms like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let-syntax</a></span> for a DSL.</p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Integrating_with_Racket_s_expander&quot;">1.6<tt>&nbsp;</tt><a name="(part._.Integrating_with_.Racket_s_expander)"></a>Integrating with Racket&rsquo;s expander</h4><p>When a DSL&rsquo;s syntax has Racket subexpression positions, the DSL expander needs
to call the Racket expander via <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._local-expand%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">local-expand</a></span>. The following operations
help connect the Racket expansion with the library-managed binding context.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._current-def-ctx))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._current-def-ctx%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-def-ctx</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._internal-definition-context%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">internal-definition-context?</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._internal._definition._context%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">internal-definition context</span></a> value corresponding to
the current <a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a>, or <span class="RktVal">#f</span> when the
<a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a> corresponds to the core
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._local._binding._context%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">local binding context</span></a>. The return value is suitable as the
<span class="RktVar">intdef-ctx</span> argument to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._local-expand%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">local-expand</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._current-ctx-id))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._current-ctx-id%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-ctx-id</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a value suitable for use as the <span class="RktVar">context-v</span> argument to
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._local-expand%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">local-expand</a></span> for <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=syntax-model.html%23%2528tech._internal._definition._context%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">internal-definition context</span></a>
expansion.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._racket-var))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._racket-var%29%29" class="RktValDef RktValLink" data-pltdoc="x">racket-var</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._racket-var~3f%29%29" class="RktValLink" data-pltdoc="x">racket-var?</a></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ee-lib/main..rkt)._racket-var~3f))"></a><span title="Provided from: ee-lib | Package: ee-lib"><span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._racket-var~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">racket-var?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">DSL syntax may bind variables that should be accessible from Racket syntax. Use
the <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._racket-var%29%29" class="RktValLink" data-pltdoc="x">racket-var</a></span> datatype to represent Racket variable bindings in the
<a href="#%28tech._library._local._binding._context%29" class="techoutside" data-pltdoc="x"><span class="techinside">library local binding context</span></a> via <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="RktValLink" data-pltdoc="x">bind!</a></span>.</div></p><h4 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Disappeared_uses_and_bindings&quot;">1.7<tt>&nbsp;</tt><a name="(part._.Disappeared_uses_and_bindings)"></a>Disappeared uses and bindings</h4><p>For DrRacket to provide behaviors such as binding arrows, it needs to know
which identifiers act as bindings and references. In the case of DSL code these
identifiers may not be present as bindings and references in the program&rsquo;s
compilation to Racket. The <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._bind%21%29%29" class="RktValLink" data-pltdoc="x">bind!</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._ee-lib%2Fmain..rkt%29._lookup%29%29" class="RktValLink" data-pltdoc="x">lookup</a></span> operations
automatically record such <a name="(tech._disappeared._use)"></a><span style="font-style: italic">disappeared uses</span> and <a name="(tech._disappeared._binding)"></a><span style="font-style: italic">disappeared
bindings</span>.</p><p>DrRacket looks for information about disappeared uses and bindings on syntax in
fully-expanded modules (see
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=tools&amp;rel=Check_Syntax.html%23%2528part._.Syntax_.Properties_that_.Check_.Syntax_.Looks_.For%2529&amp;version=8.6" class="Sq" data-pltdoc="x">Syntax Properties that Check Syntax Looks For</a>). This library inserts extra syntax without
runtime meaning into the expanded module to carry this information.</p><h3 x-source-module="(lib &quot;ee-lib/scribblings/ee-lib.scrbl&quot;)" x-source-pkg="ee-lib" x-part-tag="&quot;Defining_literals&quot;">2<tt>&nbsp;</tt><a name="(part._.Defining_literals)"></a><a name="(mod-path._ee-lib/define)"></a>Defining literals</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._ee-lib%2Fdefine%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">ee-lib/define</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/ee-lib" title="Install this package using `raco pkg install ee-lib`"><span class="stt">ee-lib</span></a></span></td></tr></table></p><p>Import at phase 0.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._ee-lib/define..rkt)._define-literal-forms))"></a><span title="Provided from: ee-lib/define | Package: ee-lib"><span class="RktSym"><a href="#%28form._%28%28lib._ee-lib%2Fdefine..rkt%29._define-literal-forms%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-literal-forms</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">literal-set-id</span><span class="hspace">&nbsp;</span><span class="RktVar">message</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">form-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Binds each <span class="RktVar">form-id</span> as a macro that raises a syntax error with message
<span class="RktVar">message</span>. Binds <span class="RktVar">literal-set-id</span> as a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Literal_Sets_and_Conventions.html%23%2528tech._literal._set%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">literal set</span></a> containing the
<span class="RktVar">form-id</span>s.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/ee-lib/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:07:37 GMT -->
</html>