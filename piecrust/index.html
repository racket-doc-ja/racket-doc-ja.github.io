<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/piecrust/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:04:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Pie Crust</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Pie Crust</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Quick_.Start%29" class="tocviewlink" data-pltdoc="x">Quick Start</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.A.P.I_.Documentation%29" class="tocviewlink" data-pltdoc="x">API Documentation</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Pie Crust</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Quick_.Start%29" class="tocsubseclink" data-pltdoc="x">Quick Start</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Minimal_.Example%29" class="tocsubseclink" data-pltdoc="x">Minimal Example</a></td></tr><tr><td><span class="tocsublinknumber">1.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Generated_endpoints_and_request_formats%29" class="tocsubseclink" data-pltdoc="x">Generated endpoints and request formats</a></td></tr><tr><td><span class="tocsublinknumber">1.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Notes_on_the_generated_.A.P.I%29" class="tocsubseclink" data-pltdoc="x">Notes on the generated API</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Extended_.Example%29" class="tocsubseclink" data-pltdoc="x">Extended Example</a></td></tr><tr><td><span class="tocsublinknumber">1.2.1<tt>&nbsp;</tt></span><a href="#%28part._hooks%29" class="tocsubseclink" data-pltdoc="x">API hooks</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.A.P.I_.Documentation%29" class="tocsubseclink" data-pltdoc="x">API Documentation</a></td></tr><tr><td><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._crud-op%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">crud-<wbr></wbr>op/<span class="mywbr"> &nbsp;</span>c</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">create-<wbr></wbr>api-<wbr></wbr>manager</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._join-spec%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">join-<wbr></wbr>spec/<span class="mywbr"> &nbsp;</span>c</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">api-<wbr></wbr>dispatcher</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-db%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">api-<wbr></wbr>db</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._exn~3afail~3aapi~3aerror%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">exn:<span class="mywbr"> &nbsp;</span>fail:<span class="mywbr"> &nbsp;</span>api:<span class="mywbr"> &nbsp;</span>error</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Pie_.Crust)"></a><a name="(mod-path._piecrust)"></a>Pie Crust</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Nadeem Abdul Hamid &lt;<a href="mailto:nadeem@acm.org">nadeem@acm.org</a>&gt;</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">piecrust</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/piecrust" title="Install this package using `raco pkg install piecrust`"><span class="stt">piecrust</span></a></span></td></tr></table></p><p>Pie Crust is an automated (RESTful)
<a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" target="_blank">CRUD</a>
API generator for use with the library for
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=index.html&amp;version=8.6" class="Sq" data-pltdoc="x">Web Applications in Racket</a>.</p><p><span style="font-weight: bold">Warning:</span>
This library should be treated as an <span class="emph">alpha</span> release. It has not been stress-tested or
bullet-proofed. Bug reports, feature requests, and pull requests are welcomed at the
<a href="https://github.com/nadeemabdulhamid/piecrust" target="_blank">Github repo</a>.</p><p><div class="SIntrapara">In particular:
</div><div class="SIntrapara"><ul><li><p>This library has only been tested/used with small SQLite databases.</p></li><li><p>It assumes either <span class="stt">TEXT</span> or <span class="stt">INTEGER</span> fields.
Conversion to and from JSON and SQL data types is minimal to non-existent at this point.</p></li><li><p>Although there shouldn&rsquo;t be any (i.e. properly parameterized queries are generated and
used), it has not been thoroughly vetted for safety from injection attacks.</p></li><li><p>The first time you try to use it, something&rsquo;s bound to not work. (One cannot be
too pessimistic.)</p></li></ul></div></p><p>With all that said, feel free to try it out and <span style="font-weight: bold">have fun</span>! Use cases and ideas for
improvement are welcome, as noted above.</p><h3 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;Quick_Start&quot;">1<tt>&nbsp;</tt><a name="(part._.Quick_.Start)"></a>Quick Start</h3><p>Pie Crust provides a lightweight way to bind an SQL database table(s) to a REST-based API
providing responses in JSON format. It enables you to generate API endpoints for creating,
reading/querying, updating, and deleting data in the underlying table(s) by defining a
dispatching function (based on <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=dispatch.html%23%2528form._%2528%2528lib._web-server%252Fdispatch..rkt%2529._dispatch-rules%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">dispatch-rules</a></span>) that can be used with <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span>.</p><h4 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;Minimal_Example&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Minimal_.Example)"></a>Minimal Example</h4><p>(Running code for this example is in the <span class="stt">piecrust/tests/minimal-example.rkt</span> file.)</p><p>Consider an SQLite database set up like this:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt;</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">CREATE TABLE Stores ( Store_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Name TEXT NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Address TEXT);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Stores (Store_id, Name, Address) VALUES (1, 'Adli', '123 Main');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Stores (Store_id, Name, Address) VALUES (2, 'BeeJays', '456 First');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Stores (Store_id, Name) VALUES (3, 'Warmalt');</span></p></td></tr></table></p><p>The following code will launch a JSON-based API on <span class="stt">http://localhost:8000</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">piecrust</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dbc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sqlite3-connect</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">store-api</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/api-endpoint"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">dbc</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">database connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Stores"</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">table name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">table column schema</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">"Store_id"</span><span class="hspace">&nbsp;</span><span class="RktVal">id</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">integer</span><span class="hspace">&nbsp;</span><span class="RktVal">"Internal ID"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"Name"</span><span class="hspace">&nbsp;</span><span class="RktVal">text</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">"Store name"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"Address"</span><span class="hspace">&nbsp;</span><span class="RktVal">text</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Store_id"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">primary key</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="RktValLink" data-pltdoc="x">api-dispatcher</a></span><span class="hspace">&nbsp;</span><span class="RktSym">store-api</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:servlet-regexp</span><span class="hspace">&nbsp;</span><span class="RktVal">#rx""</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:servlet-path</span><span class="hspace">&nbsp;</span><span class="RktVal">"/"</span><span class="RktPn">)</span></td></tr></table></blockquote><p>There are several overloaded forms to specifying the column schema. See the full documentation
for <span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span> below for details.</p><h5 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;Generated_endpoints_and_request_formats&quot;">1.1.1<tt>&nbsp;</tt><a name="(part._.Generated_endpoints_and_request_formats)"></a>Generated endpoints and request formats</h5><p>With the server above running, the follow endpoints are provided:</p><ul><li><p><span style="background-color: cyan">(GET)<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">/api-endpoint</span></span> <br/>
      Retrieves all data records in the table as a list of JSON dictionaries.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td colspan="2"><p><span style="font-weight: bold">Query Parameters</span></p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Name and value pattern</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Example</span></p></td></tr><tr><td><p><span class="stt">_fields=&lt;field-name&gt;,...</span></p></td><td><p><span class="stt">/api-endpoint?_fields=id,name</span></p></td></tr><tr><td colspan="2"><p>Retrieves only the specified fields from each record. Field names
                              are case-sensitive. If only one field is specified, then a list
                              of values is returned (rather than a list of dictionaries).</p></td></tr><tr><td colspan="2"><p>&#160;</p></td></tr><tr><td><p><span class="stt">_distinct=1</span></p></td><td><p><span class="stt">/api-endpoint?_distinct=1</span></p></td></tr><tr><td colspan="2"><p>Retrieves only unique records with the selected set of
                             fields (i.e. does not include duplicates).</p></td></tr><tr><td colspan="2"><p>&#160;</p></td></tr><tr><td><p><span class="stt">_sort=&lt;field-name&gt;</span></p></td><td><p><span class="stt">/api-endpoint?_sort=address</span></p></td></tr><tr><td><p><span class="stt">_order=[asc|desc]</span></p></td><td><p><span class="stt">/api-endpoint?_sort=address&amp;_order=desc</span></p></td></tr><tr><td colspan="2"><p>Sorts records by the specified field in ascending/descending order.</p></td></tr><tr><td colspan="2"><p>&#160;</p></td></tr><tr><td><p><span class="stt">*=&lt;data&gt;</span></p></td><td><p><span class="stt">/api-endpoint?*=street</span></p></td></tr><tr><td colspan="2"><p>Searches for the specified data in any of the fields of each record.
                             If &lt;data&gt; contains an asterisk (*), it is treated as a wildcard
                             (corresponding to % in SQL syntax). The asterisk is used because
                             escaping % in a URL can be annoying.</p></td></tr><tr><td colspan="2"><p>&#160;</p></td></tr><tr><td><p><span class="stt">&lt;field-name&gt;=&lt;data&gt;</span></p></td><td><p><span class="stt">/api-endpoint?name=LLC</span></p></td></tr><tr><td colspan="2"><p>Searches for the specified data in the named field. If multiple fields
                              are specified as separate query parameters, the criteria are combined
                              with AND. If a * query parameter is specified, any named fields
                              are ignored. See the note above about the wildcard character in
                              &lt;data&gt;.</p></td></tr><tr><td colspan="2"><p>&#160;</p></td></tr><tr><td><p><span class="stt">_joins=1</span></p></td><td><p><span class="stt">/api-endpoint?_joins=1</span></p></td></tr><tr><td colspan="2"><p>Includes nested data from joined tables in the output. By
default, joins are not performed and included.
See <a href="#%28part._joins-details%29" data-pltdoc="x">Details on the <span class="RktPn">#:joins</span> clause</a>.</p></td></tr></table></div><div class="SIntrapara"><br/></div></p></li><li><p><span style="background-color: cyan">(GET)<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">/api-endpoint/&lt;id&gt;</span></span>
      <br/>
      Retrieves the single data record with the given primary key value (<span class="stt">&lt;id&gt;</span>
      as a JSON dictionary. Nested data from joined tables is included in the output.
      See <a href="#%28part._joins-details%29" data-pltdoc="x">Details on the <span class="RktPn">#:joins</span> clause</a>.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td colspan="2"><p><span style="font-weight: bold">Query Parameters</span></p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Name and value pattern</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Example</span></p></td></tr><tr><td><p><span class="stt">_fields=&lt;field-name&gt;,...</span></p></td><td><p><span class="stt">/api-endpoint/42?_fields=name,address</span></p></td></tr><tr><td colspan="2"><p>Retrieves only the specified fields. Field names
                              are case-sensitive.</p></td></tr></table></div><div class="SIntrapara"><br/></div></p></li><li><p><div class="SIntrapara"><span style="background-color: cyan">(POST)<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">/api-endpoint</span></span>
      <br/>
      Adds a new row to the database table. A JSON dictionary must be provided
      in the <span style="font-weight: bold">body</span> of the <span class="stt">POST</span> request. For example:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">{ "name" : "CoCost", "address" : "987 Center Lane" }</span></p></td></tr></table></div></p><p>Upon success, responds with a dictionary containing the primary key field and
     value of the newly added row.
<br/></p></li><li><p><span style="background-color: cyan">(PUT)<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">/api-endpoint/&lt;id&gt;</span></span>
      <br/>
      Updates the row identified by the specified primary key value (<span class="stt">&lt;id&gt;</span>).
      A JSON dictionary must be provided in the <span style="font-weight: bold">body</span> of the <span class="stt">POST</span> request with
      the fields and values that are to be updated.
<br/></p></li><li><p><span style="background-color: cyan">(DELETE)<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">/api-endpoint/&lt;id&gt;</span></span>
      <br/>
      Deletes the row identified by the specified primary key value (<span class="stt">&lt;id&gt;</span>).
<br/></p></li></ul><h5 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;Notes_on_the_generated_API&quot;">1.1.2<tt>&nbsp;</tt><a name="(part._.Notes_on_the_generated_.A.P.I)"></a>Notes on the generated API</h5><ul><li><p>The default for the JSON keys generated and used for query parameters is to
lowercase the specified SQL column names (e.g. <span class="stt">Address</span> becomes <span class="stt">address</span>).</p></li><li><p>On a <span class="stt">POST</span> request to create a new record, the primary key field and its value
is ignored if it is specified in the JSON dictionary in the body of the request.</p></li><li><p>Use <span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="RktValLink" data-pltdoc="x">api-dispatcher</a></span> procedure to extract a request handling function from the
API generated by <span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span>, suitable for use to launch a server.</p></li></ul><h4 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;Extended_Example&quot;">1.2<tt>&nbsp;</tt><a name="(part._.Extended_.Example)"></a>Extended Example</h4><p>(Running code for this example is in the <span class="stt">piecrust/tests/shopping-list-example.rkt</span> file.)</p><p>Consider an SQLite database set up with two tables like this:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt;</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">CREATE TABLE Stores ( Store_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Name TEXT NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Address TEXT);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">CREATE TABLE Items ( ID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Store_id INTEGER NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Name TEXT NOT NULL,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">Brand TEXT,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">FOREIGN KEY (Store_id) REFERENCES Stores (Store_id));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Stores (Store_id, Name, Address) VALUES (1, 'Adli', '123 Main');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Stores (Store_id, Name, Address) VALUES (2, 'BeeJays', '456 First');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Stores (Store_id, Name) VALUES (3, 'Warmalt');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Items (ID, Store_id, Name, Brand) VALUES (101, 2, 'Chips', "Louie's");</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Items (ID, Store_id, Name, Brand) VALUES (102, 1, 'Donuts', 'Delites');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Items (ID, Store_id, Name, Brand) VALUES (103, 1, 'Eggs', 'Fresh');</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Items (ID, Store_id, Name, Brand) VALUES (104, 3, 'Flour', "Baker's");</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">INSERT INTO Items (ID, Store_id, Name) VALUES (105, 2, 'Grapes');</span></p></td></tr></table></p><p>The following code will set up and
launch a JSON-based API on <span class="stt">http://localhost:8000</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">piecrust</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dbc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sqlite3-connect</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A default generic request handler for root path "/" requests</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">main-servlet</span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path/param-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">url-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request-uri</span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/xexpr</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Shopping List - API Endpoints"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktVal">"/api/stores"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Stores"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">br</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktVal">"/api/v1/items"</span><span class="RktVal">]</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Items"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">next-dispatcher</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">hand everything else off to the next dispatcher</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Stores API endpoint</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">store-api</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"api/stores"</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">API endpoint</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">dbc</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">database connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Stores"</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">table name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">"Store_id"</span><span class="hspace">&nbsp;</span><span class="RktVal">id</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">integer</span><span class="hspace">&nbsp;</span><span class="RktVal">"Internal ID"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"Name"</span><span class="hspace">&nbsp;</span><span class="RktVal">text</span><span class="hspace">&nbsp;</span><span class="RktVal">"Store name"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"Address"</span><span class="hspace">&nbsp;</span><span class="RktVal">text</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">table columns</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Store_id"</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">primary key</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:request-wrapper</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">req</span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op</span><span class="hspace">&nbsp;</span><span class="RktSym">api-handler</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">match</span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">delete</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/jsexpr</span><span class="hspace">&nbsp;</span><span class="RktVal">"not supported"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:code</span><span class="hspace">&nbsp;</span><span class="RktVal">400</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">api-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">req</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fallback-request-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">main-servlet</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Items API endpoint</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">items-api</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"api/v1/items"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">dbc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Items"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">"ID"</span><span class="hspace">&nbsp;</span><span class="RktVal">integer</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">"Store_id"</span><span class="hspace">&nbsp;</span><span class="RktVal">store-id</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">integer</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">"Store ID"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"Name"</span><span class="hspace">&nbsp;</span><span class="RktVal">text</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">must be non-null</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"Brand"</span><span class="hspace">&nbsp;</span><span class="RktVal">text</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"ID"</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:response-wrapper</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">js</span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/jsexpr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-immutable-hasheq%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-immutable-hasheq</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">meta</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">#hasheq</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">endpoint</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">"api/v1/items"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">data</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">js</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:error-wrapper</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn</a></span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op</span><span class="hspace">&nbsp;</span><span class="RktSym">resp-code</span><span class="hspace">&nbsp;</span><span class="RktSym">jsexpr</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response/jsexpr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-immutable-hasheq%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-immutable-hasheq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">operation</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">message</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktRdr">,</span><span class="RktSym">jsexpr</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:code</span><span class="hspace">&nbsp;</span><span class="RktSym">resp-code</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:fallback-request-handler</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="RktValLink" data-pltdoc="x">api-dispatcher</a></span><span class="hspace">&nbsp;</span><span class="RktSym">store-api</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="RktValLink" data-pltdoc="x">api-dispatcher</a></span><span class="hspace">&nbsp;</span><span class="RktSym">items-api</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:servlet-regexp</span><span class="hspace">&nbsp;</span><span class="RktVal">#rx""</span><span class="hspace">&nbsp;</span><span class="RktPn">#:servlet-path</span><span class="hspace">&nbsp;</span><span class="RktVal">"/"</span><span class="hspace">&nbsp;</span><span class="RktPn">#:launch-browser?</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote><h5 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;hooks&quot;">1.2.1<tt>&nbsp;</tt><a name="(part._hooks)"></a>API hooks</h5><p>The extended example above demonstrates several hooks that are supplied with
the <span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span> form.</p><ul><li><p>Request handling functions can be chained together using the
 <span class="RktPn">#:fallback-request-handler</span>. In this case, the <span class="stt">Items</span> API endpoint path is
handled first. If the request URL path does not match that, it will be delegated to the
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="RktValLink" data-pltdoc="x">api-dispatcher</a></span><span class="stt"> </span><span class="RktSym">store-api</span><span class="RktPn">)</span> handler. If the request URL path does not match
 <span class="RktVal">"api/stores"</span> either, then <span class="RktSym">main-servlet</span> will be used to handle the request.</p></li><li><p>The <span class="RktPn">#:request-wrapper</span> option provides a hook to install a function that can
 examine and build a response to the request prior to the generated API handlers. The supplied
function takes the original request instance, a <span class="RktSym">crud-op/c</span> symbol, and a callback
 function (which is the one generated by the API to handle that type of request). The supplied
function may decide to either (1) produce its own response (perhaps based on authentication results, or,
like in this example, to deny access to the <span class="RktVal">'</span><span class="RktVal">delete</span> functionality of the <span class="stt">Stores</span>
API), (2) construct a modified request object, or (3) pass the request as it on to the
default API handler function.</p></li><li><p>In a similar vein, the <span class="RktPn">#:response-wrapper</span> hook allows one to supply a function
that can examine the final JSON result produced by the API and decide how to modify it, if
desired, to produce the final <span class="RktSym">response?</span>. In the example, the <span class="stt">Items</span> API wraps all
responses to the CRUD operations in another layer of JSON with some additional metadata.</p></li><li><p>The generated API will handle <span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._exn~3afail~3aapi~3aerror%29%29" class="RktValLink" data-pltdoc="x">exn:fail:api:error</a></span> and <span class="RktSym">exn:fail:sql</span>
exceptions with a generic response (and a 400 or 500 code, respectively). To construct an
alternate error response, the <span class="RktPn">#:error-wrapper</span> option allows the user to supply
a function that takes the exception object, the CRUD operation that was being handled,
and the response code and message that the API generated, and can decide how to construct
and produce their own response.</p></li></ul><h3 x-source-module="(lib &quot;piecrust/scribblings/piecrust.scrbl&quot;)" x-source-pkg="piecrust" x-part-tag="&quot;API_Documentation&quot;">2<tt>&nbsp;</tt><a name="(part._.A.P.I_.Documentation)"></a>API Documentation</h3><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><a name="(def._((lib._piecrust/main..rkt)._crud-op/c))"></a><span title="Provided from: piecrust | Package: piecrust"><span class="RktSym"><span class="RktSymDef RktSym">crud-op/c</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">contract?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbols</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">create</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">query</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">read</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">update</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">delete</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._piecrust/main..rkt)._create-api-manager))"></a><span title="Provided from: piecrust | Package: piecrust"><span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">create-api-manager</a></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">endpoint-path</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">database-conn</span><span class="hspace">&nbsp;</span><span class="RktVar">connection?</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">columns</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">col-schema</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">primary-key</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">joins-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">fallback-handler-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">request-wrapper-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">response-wrapper-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">error-wrapper-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">field-name-generator-clause</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">col-schema</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">json-key</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;</span><span class="RktVar">null-ok?</span><span class="hspace">&nbsp;</span><span class="RktVar">col-description</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;</span><span class="RktVar">null-ok?</span><span class="hspace">&nbsp;</span><span class="RktVar">col-description</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">json-key</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;</span><span class="RktVar">col-description</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">json-key</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;</span><span class="RktVar">null-ok?</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;</span><span class="RktVar">col-description</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;</span><span class="RktVar">null-ok?</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">col-name</span><span class="hspace">&nbsp;</span><span class="RktVar">sql-type</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">joins-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:joins</span><span class="hspace">&nbsp;</span><span class="RktVar">joins-list</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">fallback-handler-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:fallback-request-handler</span><span class="hspace">&nbsp;</span><span class="RktVar">disp-fun</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">request-wrapper-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:request-wrapper</span><span class="hspace">&nbsp;</span><span class="RktVar">pre-fun</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">response-wrapper-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:response-wrapper</span><span class="hspace">&nbsp;</span><span class="RktVar">post-fun</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">error-wrapper-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:error-wrapper</span><span class="hspace">&nbsp;</span><span class="RktVar">err-fun</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">field-name-generator-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:field-name-generator</span><span class="hspace">&nbsp;</span><span class="RktVar">gen-fun</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">col-name</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">string?</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">json-key</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">sql-type</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">integer</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">null-ok?</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">col-description</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">string?</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">joins-list</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktSym">join-spec/c</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">disp-fun</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">request?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">any</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">pre-fun</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">request?</span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">response?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">response?</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">post-fun</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">jsexpr?</span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op/c</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">response?</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">err-fun</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">crud-op/c</span><span class="hspace">&nbsp;</span><span class="RktSym">response-code/c</span><span class="hspace">&nbsp;</span><span class="RktSym">jsexpr?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">response?</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">gen-fun</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Produces an API manager instance.</div></p><p>The <span class="RktSym">endpoint-path</span><span class="RktMeta"></span> should be a slash-separated path string specifying the base
 endpoint from which the API will be served, for example, <span class="RktVal">"/myapi/v1"</span>.</p><p><div class="SIntrapara">The most comprehensive form of the column schema is:
 </div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"sql-column-name"</span><span class="hspace">&nbsp;</span><span class="RktVar">json-key</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">sql-type</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">null-ok?</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"col-description"</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div></p><p><span class="emph">sql-column-name</span> should be the name of the column in the SQL table. <span class="emph">json-key-name</span>
 will be used as the key label for matching fields in the JSON output. Requests to create,
 update, or query data must also use the JSON key name, as the SQL column name is only used
 internally in the API to bind to the database. If a <span class="emph">json-key-name</span> is not specified,
 the function supplied to the <span class="RktPn">#:field-name-generator</span> option is used to build the JSON
 key name from the SQL column name. The default generator is
 <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._compose%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">compose</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-downcase%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-downcase</a></span><span class="RktPn">)</span>. The <span class="emph">null-ok?</span> parameter corresponds
 to (the absence of) a
 <span class="stt">NOT NULL</span> constraint in the SQL table. If not specified, it is assumed to be <span class="RktVal">#t</span>.
 The column description is only used for metadata purposes, and if not specified is just the
 column name.</p><p>See the <a href="#%28part._hooks%29" data-pltdoc="x">API hooks</a> section for descriptions of the optional keyword arguments.</p><p><span class="SSubSubSubSection"><a name="(part._joins-details)"></a>Details on the <span class="RktPn">#:joins</span> clause</span></p><p>The <span class="RktPn">#:joins</span> clause specifies additional tables to which the primary one may be
 joined, based on its primary key. It supports three scenarios, described in the next
 paragraph. In the description that follows, "primary table" refers to the table declared in the
 <span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span> clause. The "secondary table" is the one from which associated
 data is nested in the primary JSON output.
 Example code for each of the three scenarios is provided in the
 <span class="stt">piecrust/tests/book-author-example.rkt</span> file of the Github repo.)</p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><a name="(def._((lib._piecrust/main..rkt)._join-spec/c))"></a><span title="Provided from: piecrust | Package: piecrust"><span class="RktSym"><span class="RktSymDef RktSym">join-spec/c</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">contract?</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">col-schema</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">col-schema</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">col-schema</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list/c</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote><ul><li><p><div class="SIntrapara"><span style="font-weight: bold">One-to-many</span> <span class="emph">(where a foreign key in the secondary table links to the primary
key of the primary table)</span> Specify the JSON key with which the joined data will be associated
 (as a nested JSON list in the returned dictionary for each row of data), the name of
 the foreign table, a list of columns to include from matching rows in the foreign table,
 and the name of the foreign key.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">json-key</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">"sec-tbl"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">col-schema</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">"for-key/sec-tbl"</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div></p></li><li><p><div class="SIntrapara"><span style="font-weight: bold">Many-to-one</span> <span class="emph">(where a foreign key in the primary table links to the primary
key of a secondary table)</span> Specify the JSON key with which the joined data will be associated
(as a nested dictionary - not a list), the name of the foreign table, its list of columns to
include, and its primary key; then, the foreign key in the primary table.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">json-key</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">"sec-tbl"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">col-schema</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"pri-key/sec-tbl"</span><span class="RktVal">]</span><span class="hspace">&nbsp;</span><span class="RktVal">"for-key/prim-tbl"</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div></p></li><li><p><div class="SIntrapara"><span style="font-weight: bold">Many-to-many</span> <span class="emph">(where a junction table is used to associate pairs of rows from
the primary and a secondary table)</span> Provide the JSON key with which the data will
be associated in the output; the name of the secondary table, its list of columns to select, and
the primary key of the secondary table; and then the name of the junction table and the foreign
key in the junction table that corresponds to the primary key of the secondary table; and, finally,
the name of the (second) foreign key in the junction table that corresponds to the primary key of the
primary table.
 </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">json-key</span><span class="hspace">&nbsp;</span><span class="RktVal">[</span><span class="RktVal">"sec-tbl"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">col-schema</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"pri-key/sec-tbl"</span><span class="RktVal">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">[</span><span class="RktVal">"j-tbl"</span><span class="hspace">&nbsp;</span><span class="RktVal">"for-key-of-sec-tbl/j-tbl"</span><span class="RktVal">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"for-key-of-prim-tbl/j-tbl"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div></p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._piecrust/main..rkt)._api-dispatcher))"></a><span title="Provided from: piecrust | Package: piecrust"><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-dispatcher%29%29" class="RktValDef RktValLink" data-pltdoc="x">api-dispatcher</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">an-api-manager</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">request?</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">any</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">an-api-manager</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">api?</span></td></tr></table></blockquote></div><div class="SIntrapara">Produces the dispatch function for the given API manager instance (generated by
 <span class="RktSym"><a href="#%28form._%28%28lib._piecrust%2Fmain..rkt%29._create-api-manager%29%29" class="RktStxLink" data-pltdoc="x">create-api-manager</a></span>), suitable for use with <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=web-server&amp;rel=run.html%23%2528def._%2528%2528lib._web-server%252Fservlet-env..rkt%2529._serve%252Fservlet%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">serve/servlet</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._piecrust/main..rkt)._api-db))"></a><span title="Provided from: piecrust | Package: piecrust"><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._api-db%29%29" class="RktValDef RktValLink" data-pltdoc="x">api-db</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">an-api-manager</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">an-api-manager</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">api?</span></td></tr></table></blockquote></div><div class="SIntrapara">Produces the database connection to which the given API manager instance is bound. </div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._piecrust/main..rkt)._make-exn~3afail~3aapi~3aerror))"></a><a name="(def._((lib._piecrust/main..rkt)._exn~3afail~3aapi~3aerror~3f))"></a><a name="(def._((lib._piecrust/main..rkt)._struct~3aexn~3afail~3aapi~3aerror))"></a><a name="(def._((lib._piecrust/main..rkt)._exn~3afail~3aapi~3aerror))"></a><span title="Provided from: piecrust | Package: piecrust"><span class="RktSym"><a href="#%28def._%28%28lib._piecrust%2Fmain..rkt%29._exn~3afail~3aapi~3aerror%29%29" class="RktValDef RktValLink" data-pltdoc="x">exn:fail:api:error</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym">make-exn:fail:api:error</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Represents an API error, for example, a missing field name in the body of a request, or an
invalid parameter.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/piecrust/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:04:19 GMT -->
</html>