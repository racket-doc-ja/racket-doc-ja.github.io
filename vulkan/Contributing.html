<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/vulkan/Contributing.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5&nbsp;Contributing</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Vulkan API Integration</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Setup.html" class="tocviewlink" data-pltdoc="x">Setup</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Controlling_the_Vulkan_Specification.html" class="tocviewlink" data-pltdoc="x">Controlling the Vulkan Specification</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Unsafe_Bindings.html" class="tocviewlink" data-pltdoc="x">Unsafe Bindings</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="ravk__Vulkan_Ecosystem_Controls.html" class="tocviewlink" data-pltdoc="x"><span class="stt">ravk</span>:<span class="mywbr"> &nbsp;</span> Vulkan Ecosystem Controls</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Contributing</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>5&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Contributing</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="#%28part._.What_s_.Needed_.Right_.Now%29" class="tocviewlink" data-pltdoc="x">What&rsquo;s Needed Right Now</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="#%28part._.Maintenance_.Guide%29" class="tocviewlink" data-pltdoc="x">Maintenance Guide</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">5.1<tt>&nbsp;</tt></span><a href="#%28part._.What_s_.Needed_.Right_.Now%29" class="tocsubseclink" data-pltdoc="x">What&rsquo;s Needed Right Now</a></td></tr><tr><td><span class="tocsublinknumber">5.2<tt>&nbsp;</tt></span><a href="#%28part._.Maintenance_.Guide%29" class="tocsubseclink" data-pltdoc="x">Maintenance Guide</a></td></tr><tr><td><span class="tocsublinknumber">5.2.1<tt>&nbsp;</tt></span><a href="#%28part._.System_.Design%29" class="tocsubseclink" data-pltdoc="x">System Design</a></td></tr><tr><td><span class="tocsublinknumber">5.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Maintenance_.Tasks%29" class="tocsubseclink" data-pltdoc="x">Maintenance Tasks</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="ravk__Vulkan_Ecosystem_Controls.html" title="backward to &quot;4 ravk: Vulkan Ecosystem Controls&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Vulkan API Integration&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3 x-source-module="(lib &quot;vulkan/scribblings/vulkan.scrbl&quot;)" x-source-pkg="vulkan" x-part-tag="&quot;Contributing&quot;">5<tt>&nbsp;</tt><a name="(part._.Contributing)"></a>Contributing</h3><p>The official repository <a href="https://github.com/zyrolasting/racket-vulkan">is on GitHub</a>.
The source code tracks the <a href="https://www.khronos.org/registry/vulkan/">Vulkan Registry</a>.</p><h4 x-source-module="(lib &quot;vulkan/scribblings/vulkan.scrbl&quot;)" x-source-pkg="vulkan" x-part-tag="&quot;What_s_Needed_Right_Now&quot;">5.1<tt>&nbsp;</tt><a name="(part._.What_s_.Needed_.Right_.Now)"></a>What&rsquo;s Needed Right Now</h4><p>This collection depends on contributions of code or funding to keep up
with the rapid development of Vulkan. The GitHub README shows funding
oppurtunities, while this document focuses on technical contributions.</p><p><span style="font-weight: bold">Right now the project has a strong need for example Vulkan
applications.</span> You can make an impact by porting C programs to Racket.
Each such application acts as a functional test for continuous
integration purposes, which covers far more than unit tests
ever could.</p><h4 x-source-module="(lib &quot;vulkan/scribblings/vulkan.scrbl&quot;)" x-source-pkg="vulkan" x-part-tag="&quot;Maintenance_Guide&quot;">5.2<tt>&nbsp;</tt><a name="(part._.Maintenance_.Guide)"></a>Maintenance Guide</h4><p>This section is only meant to aid high-level understanding
of the project and its technical needs. It is not a reference
for implementation details.</p><h5 x-source-module="(lib &quot;vulkan/scribblings/vulkan.scrbl&quot;)" x-source-pkg="vulkan" x-part-tag="&quot;System_Design&quot;">5.2.1<tt>&nbsp;</tt><a name="(part._.System_.Design)"></a>System Design</h5><p>This project&rsquo;s job is to generate Racket code that uses Vulkan
according to an end user&rsquo;s assumptions.</p><p>The system must remain flexible in the face of any change to a
machine-readable Vulkan specification. It does this by giving an
<span style="font-style: italic">end user</span> the means to keep their Racket code up to date with
Vulkan, even if the source code of this project is <span style="font-style: italic">out of
date</span>.</p><p>This is possible because the specification and code generators can
change independently, and are accessible through a public API.</p><p><span class="stt">vk.xml</span> in particular acts as input to all code generators in the
project. Each generator lazily produces a sequence of code from a
specification according to its own assumptions. You have to know how
to apply generators together to do something meaningful. I did it this
way because even backwards-compatible changes to a Vulkan
specification can break a model of it, so having a collection of
specialized generators makes it easier to manage assumptions.</p><h5 x-source-module="(lib &quot;vulkan/scribblings/vulkan.scrbl&quot;)" x-source-pkg="vulkan" x-part-tag="&quot;Maintenance_Tasks&quot;">5.2.2<tt>&nbsp;</tt><a name="(part._.Maintenance_.Tasks)"></a>Maintenance Tasks</h5><p>This project maintains its own mirror of <span class="stt">vk.xml</span> so it can
function offline, and the built-in code generators track its
contents. To update the project, maintainers should periodically write
a new version of the XML mirror, regenerate a Vulkan integration, and
run all relevant tests.</p><p>Here is a session I normally use to update the project, assuming the
package is installed on the system using <span class="RktInBG"><span class="hspace"></span><span class="RktIn">raco pkg install --link</span><span class="hspace"></span></span>. I use fake paths to relevant files in the below snippet in
case the actual files move around the project.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># Download the latest vk.xml and replace the local mirror</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">ravk --latest show spec &gt; /path/to/vk.xml</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># Regenerate the unsafe FFI bindings.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># If this errors out, a code generator hit a runtime error</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># and is likely incompatible with the XML update.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">ravk generate unsafe &gt; /path/to/unsafe.rkt</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># Recompile the project.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># If this errors out, the unsafe bindings contain</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># incorrect Racket code. This points to a logic</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># error in a code generator.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">raco setup vulkan</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># Run unit tests</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">raco test --jobs 8 --drdr -p vulkan</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># If Vulkan is actually installed on the system,</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># use Racket or GRacket to use example</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"># applications as functional tests.</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">racket /path/to/examples/app1.rkt</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">racket /path/to/examples/app2.rkt</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr></table></p><p>Going through this script creates confidence in the package
and a Vulkan specification upgrade.</p><p>Should a new <span class="stt">vk.xml</span> undergo a backwards-incompatible change, the
code generators should be archived such that they apply to prior
versions. A new set of code generators should henceforth process
the local mirror. There is not yet a way to pick only relevant
code generators given a spec version, but the implementation
will come when it&rsquo;s needed.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="ravk__Vulkan_Ecosystem_Controls.html" title="backward to &quot;4 ravk: Vulkan Ecosystem Controls&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Vulkan API Integration&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/vulkan/Contributing.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:47 GMT -->
</html>