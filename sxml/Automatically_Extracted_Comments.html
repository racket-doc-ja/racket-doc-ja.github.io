<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/sxml/Automatically_Extracted_Comments.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>6&nbsp;Automatically Extracted Comments</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">SXML:<span class="mywbr"> &nbsp;</span> S-<wbr></wbr>Expression Representation of XML</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="SXML.html" class="tocviewlink" data-pltdoc="x">SXML</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="ssax.html" class="tocviewlink" data-pltdoc="x">SAX Parsing</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="srl.html" class="tocviewlink" data-pltdoc="x">Serialization</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="sxpath.html" class="tocviewlink" data-pltdoc="x">Search (SXPath)</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="sxslt.html" class="tocviewlink" data-pltdoc="x">SXML Transformation (SXSLT)</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Automatically Extracted Comments</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Raw_Lists_of_Exported_Identifiers.html" class="tocviewlink" data-pltdoc="x">Raw Lists of Exported Identifiers</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>6&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Automatically Extracted Comments</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="#%28part._ssax_ss%29" class="tocviewlink" data-pltdoc="x">ssax.ss</a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="#%28part._input-parse_ss%29" class="tocviewlink" data-pltdoc="x">input-<wbr></wbr>parse.ss</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="#%28part._sxml-tree-trans_ss%29" class="tocviewlink" data-pltdoc="x">sxml-<wbr></wbr>tree-<wbr></wbr>trans.ss</a></td></tr><tr><td align="right">6.4&nbsp;</td><td><a href="#%28part._sxml-to-html_ss%29" class="tocviewlink" data-pltdoc="x">sxml-<wbr></wbr>to-<wbr></wbr>html.ss</a></td></tr><tr><td align="right">6.5&nbsp;</td><td><a href="#%28part._sxml-to-html-ext_ss%29" class="tocviewlink" data-pltdoc="x">sxml-<wbr></wbr>to-<wbr></wbr>html-<wbr></wbr>ext.ss</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#%28part._ssax_ss%29" class="tocsubseclink" data-pltdoc="x">ssax.ss</a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._make-xml-token%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>xml-<wbr></wbr>token</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._xml-token~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xml-<wbr></wbr>token?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._xml-token-kind%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xml-<wbr></wbr>token-<wbr></wbr>kind</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._xml-token-head%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xml-<wbr></wbr>token-<wbr></wbr>head</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-markup-token%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>markup-<wbr></wbr>token</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-pi-body-as-string%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>pi-<wbr></wbr>body-<wbr></wbr>as-<wbr></wbr>string</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3askip-internal-dtd%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>skip-<wbr></wbr>internal-<wbr></wbr>dtd</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-cdata-body%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>cdata-<wbr></wbr>body</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-char-ref%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>char-<wbr></wbr>ref</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3ahandle-parsed-entity%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>handle-<wbr></wbr>parsed-<wbr></wbr>entity</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._make-empty-attlist%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>empty-<wbr></wbr>attlist</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._attlist-add%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">attlist-<wbr></wbr>add</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._attlist-null~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">attlist-<wbr></wbr>null?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._attlist-remove-top%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">attlist-<wbr></wbr>remove-<wbr></wbr>top</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._attliast-~3ealist%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">attliast-<wbr></wbr>&gt;alist</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._attlist-fold%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">attlist-<wbr></wbr>fold</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-attributes%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>attributes</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3auri-string-~3esymbol%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>uri-<wbr></wbr>string-<wbr></wbr>&gt;symbol</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3acomplete-start-tag%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>complete-<wbr></wbr>start-<wbr></wbr>tag</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-external-id%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>external-<wbr></wbr>id</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aread-char-data%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>read-<wbr></wbr>char-<wbr></wbr>data</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3aassert-token%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>assert-<wbr></wbr>token</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3amake-pi-parser%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>make-<wbr></wbr>pi-<wbr></wbr>parser</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3amake-elem-parser%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>make-<wbr></wbr>elem-<wbr></wbr>parser</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3amake-parser%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">ssax:<span class="mywbr"> &nbsp;</span>make-<wbr></wbr>parser</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._ssax~3areverse-collect-str%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">ssax:<span class="mywbr"> &nbsp;</span>reverse-<wbr></wbr>collect-<wbr></wbr>str</span></a></td></tr><tr><td><span class="tocsublinknumber">6.2<tt>&nbsp;</tt></span><a href="#%28part._input-parse_ss%29" class="tocsubseclink" data-pltdoc="x">input-<wbr></wbr>parse.ss</a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._parser-error%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">parser-<wbr></wbr>error</span></a></td></tr><tr><td><span class="tocsublinknumber">6.3<tt>&nbsp;</tt></span><a href="#%28part._sxml-tree-trans_ss%29" class="tocsubseclink" data-pltdoc="x">sxml-<wbr></wbr>tree-<wbr></wbr>trans.ss</a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._.S.R.V~3asend-reply%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">SRV:<span class="mywbr"> &nbsp;</span>send-<wbr></wbr>reply</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._post-order%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">post-<wbr></wbr>order</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._replace-range~3a~3a%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">replace-<wbr></wbr>range:<span class="mywbr"> &nbsp;</span>:</span></a></td></tr><tr><td><span class="tocsublinknumber">6.4<tt>&nbsp;</tt></span><a href="#%28part._sxml-to-html_ss%29" class="tocsubseclink" data-pltdoc="x">sxml-<wbr></wbr>to-<wbr></wbr>html.ss</a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._.S.X.M.L-~3e.H.T.M.L%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">SXML-<wbr></wbr>&gt;HTML</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._entag%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">entag</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._enattr%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">enattr</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._string-~3egood.H.T.M.L%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">string-<wbr></wbr>&gt;good<span class="mywbr"> &nbsp;</span>HTML</span></a></td></tr><tr><td><span class="tocsublinknumber">6.5<tt>&nbsp;</tt></span><a href="#%28part._sxml-to-html-ext_ss%29" class="tocsubseclink" data-pltdoc="x">sxml-<wbr></wbr>to-<wbr></wbr>html-<wbr></wbr>ext.ss</a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._make-header%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>header</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._make-navbar~3a%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>navbar:</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._make-footer%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">make-<wbr></wbr>footer</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._universal-conversion-rules%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">universal-<wbr></wbr>conversion-<wbr></wbr>rules</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._universal-protected-rules%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">universal-<wbr></wbr>protected-<wbr></wbr>rules</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._sxml%2Fmain..rkt%29._alist-conv-rules%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">alist-<wbr></wbr>conv-<wbr></wbr>rules</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="sxslt.html" title="backward to &quot;5 SXML Transformation (SXSLT)&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;SXML: S-Expression Representation of XML&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Raw_Lists_of_Exported_Identifiers.html" title="forward to &quot;7 Raw Lists of Exported Identifiers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;sxml/scribblings/sxml.scrbl&quot;)" x-source-pkg="sxml" x-part-tag="&quot;Automatically_Extracted_Comments&quot;">6<tt>&nbsp;</tt><a name="(part._.Automatically_.Extracted_.Comments)"></a>Automatically Extracted Comments</h3><p>The following "documentation" was generated automatically, using
a script that I believe is due to Mike Sperber. This documentation
has not been read or formatted for scribble,
and should be considered only as raw material
for use in creating actual documentation.</p><h4 x-source-module="(lib &quot;sxml/scribblings/sxml.scrbl&quot;)" x-source-pkg="sxml" x-part-tag="&quot;ssax_ss&quot;">6.1<tt>&nbsp;</tt><a name="(part._ssax_ss)"></a>ssax.ss</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._make-xml-token))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">make-xml-token</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">KIND</span><span class="hspace">&nbsp;</span><span class="RktVar">HEAD</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">KIND</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktVar">KIND</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">HEAD</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktVar">HEAD</span></td></tr></table></blockquote></div><div class="SIntrapara">This creates an XML token.</div></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._xml-token~3f))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">xml-token?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">THING</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">THING</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._xml-token-kind))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">xml-token-kind</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">XML-TOKEN</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">XML-TOKEN</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._xml-token-head))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">xml-token-head</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">XML-TOKEN</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">XML-TOKEN</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-markup-token))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-markup-token</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This procedure starts parsing of a markup token. The current position
in the stream must be #\&lt;. This procedure scans enough of the input stream
to figure out what kind of a markup token it is seeing. The procedure returns
an xml-token structure describing the token. Note, generally reading
of the current markup is not finished! In particular, no attributes of
the start-tag token are scanned.</div></p><p>Here&rsquo;s a detailed break out of the return values and the position in the PORT
when that particular value is returned:
PI-token:	only PI-target is read.
                To finish the Processing Instruction and disregard it,
                call ssax:skip-pi. ssax:read-attributes may be useful
                as well (for PIs whose content is attribute-value
                pairs)
END-token:	The end tag is read completely; the current position
                is right after the terminating #\&gt; character.
COMMENT		is read and skipped completely. The current position
                is right after "&ndash;&gt;" that terminates the comment.
CDSECT		The current position is right after "&lt;!CDATA["
                Use ssax:read-cdata-body to read the rest.
DECL		We have read the keyword (the one that follows "&lt;!")
                identifying this declaration markup. The current
                position is after the keyword (usually a
                whitespace character)</p><p>START-token	We have read the keyword (GI) of this start tag.
                No attributes are scanned yet. We don&rsquo;t know if this
                tag has an empty content either.
                Use ssax:complete-start-tag to finish parsing of
                the token.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-pi-body-as-string))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-pi-body-as-string</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The current position is right after reading the PITarget. We read the
body of PI and return is as a string. The port will point to the
character right after &rsquo;?&gt;&rsquo; combination that terminates PI.
[16] PI ::= &rsquo;&lt;?&rsquo; PITarget (S (Char* - (Char* &rsquo;?&gt;&rsquo; Char*)))? &rsquo;?&gt;&rsquo;</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3askip-internal-dtd))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:skip-internal-dtd</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The current pos in the port is inside an internal DTD subset
(e.g., after reading #\[ that begins an internal DTD subset)
Skip until the "]&gt;" combination that terminates this DTD</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-cdata-body))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-cdata-body</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span><span class="RktVar">STR-HANDLER</span><span class="hspace">&nbsp;</span><span class="RktVar">SEED</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">STR-HANDLER</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">SEED</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktVar">SEED</span></td></tr></table></blockquote></div><div class="SIntrapara">This procedure must be called after we have read a string "&lt;![CDATA["
that begins a CDATA section. The current position must be the first
position of the CDATA body. This function reads _lines_ of the CDATA
body and passes them to a STR-HANDLER, a character data consumer.</div></p><p>The str-handler is a STR-HANDLER, a procedure STRING1 STRING2 SEED.
The first STRING1 argument to STR-HANDLER never contains a newline.
The second STRING2 argument often will. On the first invocation of
the STR-HANDLER, the seed is the one passed to ssax:read-cdata-body
as the third argument. The result of this first invocation will be
passed as the seed argument to the second invocation of the line
consumer, and so on. The result of the last invocation of the
STR-HANDLER is returned by the ssax:read-cdata-body.  Note a
similarity to the fundamental &rsquo;fold&rsquo; iterator.</p><p>Within a CDATA section all characters are taken at their face value,
with only three exceptions:
CR, LF, and CRLF are treated as line delimiters, and passed
as a single #\newline to the STR-HANDLER
"]]&gt;" combination is the end of the CDATA section.
&amp;gt; is treated as an embedded #\&gt; character
Note, &amp;lt; and &amp;amp; are not specially recognized (and are not expanded)!</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-char-ref))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-char-ref</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">[66]  CharRef ::=  &rsquo;&amp;#&rsquo; [0-9]+ &rsquo;;&rsquo;
                 | &rsquo;&amp;#x&rsquo; [0-9a-fA-F]+ &rsquo;;&rsquo;</div></p><p>This procedure must be called after we we have read "&amp;#"
that introduces a char reference.
The procedure reads this reference and returns the corresponding char
The current position in PORT will be after ";" that terminates
the char reference
Faults detected:
WFC: XML-Spec.html#wf-Legalchar</p><p>According to Section "4.1 Character and Entity References"
of the XML Recommendation:
 "[Definition: A character reference refers to a specific character
  in the ISO/IEC 10646 character set, for example one not directly
  accessible from available input devices.]"
Therefore, we use a ucscode-&gt;char function to convert a character
code into the character &ndash; *regardless* of the current character
encoding of the input stream.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3ahandle-parsed-entity))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:handle-parsed-entity</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">PORT</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">NAME</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">ENTITIES</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">???</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">NAME</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ENTITIES</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">CONTENT-HANDLER [STR-HANDLER procedure?] SEED</div></p><p>Expand and handle a parsed-entity reference
port - a PORT
name - the name of the parsed entity to expand, a symbol
entities - see ENTITIES
content-handler &ndash; procedure PORT ENTITIES SEED
that is supposed to return a SEED
str-handler - a STR-HANDLER. It is called if the entity in question
turns out to be a pre-declared entity</p><p>The result is the one returned by CONTENT-HANDLER or STR-HANDLER
Faults detected:
WFC: XML-Spec.html#wf-entdeclared
WFC: XML-Spec.html#norecursion</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._make-empty-attlist))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">make-empty-attlist</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The ATTLIST Abstract Data Type
Currently is implemented as an assoc list sorted in the ascending
order of NAMES.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._attlist-add))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">attlist-add</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ATTLIST</span><span class="hspace">&nbsp;</span><span class="RktVar">NAME-VALUE-PAIR</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ATTLIST</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">NAME-VALUE-PAIR</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Add a name-value pair to the existing attlist preserving the order
Return the new list, in the sorted ascending order.
Return #f if a pair with the same name already exists in the attlist</div></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._attlist-null~3f))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">attlist-null?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ATTLIST</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ATTLIST</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._attlist-remove-top))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">attlist-remove-top</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ATTLIST</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ATTLIST</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Given an non-null attlist, return a pair of values: the top and the rest</div></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._attliast-~3ealist))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">attliast-&gt;alist</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr></table></blockquote><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._attlist-fold))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">attlist-fold</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-attributes))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-attributes</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span><span class="RktVar">ENTITIES</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ENTITIES</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">This procedure reads and parses a production Attribute*
[41] Attribute ::= Name Eq AttValue
[10] AttValue ::=  &rsquo;"&rsquo; ([^&lt;&amp;"] | Reference)* &rsquo;"&rsquo;
                | "&rsquo;" ([^&lt;&amp;&rsquo;] | Reference)* "&rsquo;"
[25] Eq ::= S? &rsquo;=&rsquo; S?</div></p><p>The procedure returns an ATTLIST, of Name (as UNRES-NAME), Value (as string)
pairs. The current character on the PORT is a non-whitespace character
that is not an ncname-starting character.</p><p>Note the following rules to keep in mind when reading an &rsquo;AttValue&rsquo;
"Before the value of an attribute is passed to the application
or checked for validity, the XML processor must normalize it as follows:
- a character reference is processed by appending the referenced
  character to the attribute value
- an entity reference is processed by recursively processing the
  replacement text of the entity [see ENTITIES]
  [named entities amp lt gt quot apos are assumed pre-declared]
- a whitespace character (#x20, #xD, #xA, #x9) is processed by appending #x20
  to the normalized value, except that only a single #x20 is appended for a
  "#xD#xA" sequence that is part of an external parsed entity or the
  literal entity value of an internal parsed entity
- other characters are processed by appending them to the normalized value "</p><p>Faults detected:
WFC: XML-Spec.html#CleanAttrVals
WFC: XML-Spec.html#uniqattspec</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3auri-string-~3esymbol))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:uri-string-&gt;symbol</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">URI-STR</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">URI-STR</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Convert a URI-STR to an appropriate symbol</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3acomplete-start-tag))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:complete-start-tag</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">TAG</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">PORT</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">ELEMS</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">ENTITIES</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">NAMESPACES</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">???</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">TAG</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ELEMS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ENTITIES</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">NAMESPACES</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">This procedure is to complete parsing of a start-tag markup. The
procedure must be called after the start tag token has been
read. TAG is an UNRES-NAME. ELEMS is an instance of xml-decl::elems;
it can be #f to tell the function to do _no_ validation of elements
and their attributes.</div></p><p>This procedure returns several values:
 ELEM-GI: a RES-NAME.
 ATTRIBUTES: element&rsquo;s attributes, an ATTLIST of (RES-NAME . STRING)
pairs. The list does NOT include xmlns attributes.
 NAMESPACES: the input list of namespaces amended with namespace
(re-)declarations contained within the start-tag under parsing
 ELEM-CONTENT-MODEL</p><p>On exit, the current position in PORT will be the first character after
#\&gt; that terminates the start-tag markup.</p><p>Faults detected:
VC: XML-Spec.html#enum
VC: XML-Spec.html#RequiredAttr
VC: XML-Spec.html#FixedAttr
VC: XML-Spec.html#ValueType
WFC: XML-Spec.html#uniqattspec (after namespaces prefixes are resolved)
VC: XML-Spec.html#elementvalid
WFC: REC-xml-names/#dt-NSName</p><p>Note, although XML Recommendation does not explicitly say it,
xmlns and xmlns: attributes don&rsquo;t have to be declared (although they
can be declared, to specify their default value)</p><p>Procedure:  ssax:complete-start-tag tag-head port elems entities namespaces</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-external-id))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-external-id</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">PORT</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This procedure parses an ExternalID production:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[75] ExternalID ::= 'SYSTEM' S SystemLiteral</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| 'PUBLIC' S PubidLiteral S SystemLiteral</span></p></td></tr><tr><td><p><span class="stt">[11] SystemLiteral ::= ('"' [^"]* '"') | ("'" [^']* "'")</span></p></td></tr><tr><td><p><span class="stt">[12] PubidLiteral ::=</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">'"' PubidChar* '"' | "'" (PubidChar - "'")* "'"</span></p></td></tr><tr><td><p><span class="stt">[13] PubidChar ::=</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#x20 | #xD | #xA | [a-zA-Z0-9]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| [-'()+,./:=?;!*#@$_%]</span></p></td></tr></table></div><div class="SIntrapara">This procedure is supposed to be called when an ExternalID is expected;
that is, the current character must be either #\S or #\P that start
correspondingly a SYSTEM or PUBLIC token. This procedure returns the
SystemLiteral as a string. A PubidLiteral is disregarded if present.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aread-char-data))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:read-char-data</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">PORT</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">EXPECT-EOF?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">STR-HANDLER</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">SEED</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">???</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">EXPECT-EOF?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">STR-HANDLER</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">SEED</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">This procedure is to read the character content of an XML document
or an XML element.
[43] content ::=
(element | CharData | Reference | CDSect | PI
        | Comment)*
To be more precise, the procedure reads CharData, expands CDSect
and character entities, and skips comments. The procedure stops
at a named reference, EOF, at the beginning of a PI or a start/end tag.</div></p><p>port
a PORT to read
expect-eof?
a boolean indicating if EOF is normal, i.e., the character
data may be terminated by the EOF. EOF is normal
while processing a parsed entity.
str-handler
a STR-HANDLER
seed
an argument passed to the first invocation of STR-HANDLER.</p><p>The procedure returns two results: SEED and TOKEN.
The SEED is the result of the last invocation of STR-HANDLER, or the
original seed if STR-HANDLER was never called.</p><p>TOKEN can be either an eof-object (this can happen only if
expect-eof? was #t), or:
    - an xml-token describing a START tag or an END-tag;
For a start token, the caller has to finish reading it.
    - an xml-token describing the beginning of a PI. It&rsquo;s up to an
application to read or skip through the rest of this PI;
    - an xml-token describing a named entity reference.</p><p>CDATA sections and character references are expanded inline and
never returned. Comments are silently disregarded.</p><p>As the XML Recommendation requires, all whitespace in character data
must be preserved. However, a CR character (#xD) must be disregarded
if it appears before a LF character (#xA), or replaced by a #xA character
otherwise. See Secs. 2.10 and 2.11 of the XML Recommendation. See also
the canonical XML Recommendation.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3aassert-token))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:assert-token</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">TOKEN</span><span class="hspace">&nbsp;</span><span class="RktVar">KIND</span><span class="hspace">&nbsp;</span><span class="RktVar">GI</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">TOKEN</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">KIND</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">GI</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Make sure that TOKEN is of anticipated KIND and has anticipated GI
Note GI argument may actually be a pair of two symbols, Namespace
URI or the prefix, and of the localname.
If the assertion fails, error-cont is evaluated by passing it
three arguments: token kind gi. The result of error-cont is returned.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3amake-pi-parser))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:make-pi-parser</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">my-pi-handlers</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">my-pi-handlers</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Create a parser to parse and process one Processing Element (PI).</div></p><p>my-pi-handlers
An assoc list of pairs (PI-TAG . PI-HANDLER)
where PI-TAG is an NCName symbol, the PI target, and
PI-HANDLER is a procedure PORT PI-TAG SEED
where PORT points to the first symbol after the PI target.
The handler should read the rest of the PI up to and including
the combination &rsquo;?&gt;&rsquo; that terminates the PI. The handler should
return a new seed.
One of the PI-TAGs may be the symbol *DEFAULT*. The corresponding
handler will handle PIs that no other handler will. If the
*DEFAULT* PI-TAG is not specified, ssax:make-pi-parser will assume
the default handler that skips the body of the PI</p><p>The output of the ssax:make-pi-parser is a procedure
PORT PI-TAG SEED
that will parse the current PI according to the user-specified handlers.</p><p><div class="SIntrapara">The previous version of ssax:make-pi-parser was a low-level macro:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-macro</span><span class="hspace">&nbsp;</span><span class="RktSym">ssax:make-pi-parser</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">my-pi-handlers</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">lambda</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">port</span><span class="hspace">&nbsp;</span><span class="RktVal">target</span><span class="hspace">&nbsp;</span><span class="RktVal">seed</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">case</span><span class="hspace">&nbsp;</span><span class="RktVal">target</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,@</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">pi-handlers</span><span class="hspace">&nbsp;</span><span class="RktVar">my-pi-handlers</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">default</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">else</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktSym">default</span><span class="hspace">&nbsp;</span><span class="RktVal">port</span><span class="hspace">&nbsp;</span><span class="RktVal">target</span><span class="hspace">&nbsp;</span><span class="RktVal">seed</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">ssax:warn</span><span class="hspace">&nbsp;</span><span class="RktVal">port</span><span class="hspace">&nbsp;</span><span class="RktVal">"Skipping PI: "</span><span class="hspace">&nbsp;</span><span class="RktVal">target</span><span class="hspace">&nbsp;</span><span class="RktVal">nl</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">ssax:skip-pi</span><span class="hspace">&nbsp;</span><span class="RktVal">port</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">seed</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">*DEFAULT*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._caar%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">caar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdar%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cdar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cons%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._caar%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">caar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdar%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cdar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">port</span><span class="hspace">&nbsp;</span><span class="RktVal">target</span><span class="hspace">&nbsp;</span><span class="RktVal">seed</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pi-handlers</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">default</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3amake-elem-parser))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:make-elem-parser</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">my-new-level-seed</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">my-finish-element</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">???</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">my-new-level-seed</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">my-finish-element</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">my-char-data-handler my-pi-handlers</div></p><p>Create a parser to parse and process one element, including its
character content or children elements. The parser is typically
applied to the root element of a document.</p><p>my-new-level-seed
procedure ELEM-GI ATTRIBUTES NAMESPACES EXPECTED-CONTENT SEED
        where ELEM-GI is a RES-NAME of the element
        about to be processed.
This procedure is to generate the seed to be passed
to handlers that process the content of the element.
This is the function identified as &rsquo;fdown&rsquo; in the denotational
semantics of the XML parser given in the title comments to this
file.</p><p>my-finish-element
procedure ELEM-GI ATTRIBUTES NAMESPACES PARENT-SEED SEED
This procedure is called when parsing of ELEM-GI is finished.
The SEED is the result from the last content parser (or
from my-new-level-seed if the element has the empty content).
PARENT-SEED is the same seed as was passed to my-new-level-seed.
The procedure is to generate a seed that will be the result
of the element parser.
This is the function identified as &rsquo;fup&rsquo; in the denotational
semantics of the XML parser given in the title comments to this
file.</p><p>my-char-data-handler
A STR-HANDLER</p><p>my-pi-handlers
See ssax:make-pi-handler above</p><p>The generated parser is a
procedure START-TAG-HEAD PORT ELEMS ENTITIES
NAMESPACES PRESERVE-WS? SEED
The procedure must be called after the start tag token has been
read. START-TAG-HEAD is an UNRES-NAME from the start-element tag.
ELEMS is an instance of xml-decl::elems.
See ssax:complete-start-tag::preserve-ws?</p><p>Faults detected:
VC: XML-Spec.html#elementvalid
WFC: XML-Spec.html#GIMatch</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3amake-parser))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><a href="ssax.html#%28form._%28%28lib._sxml%2Fmain..rkt%29._ssax~3amake-parser%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">ssax:make-parser</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">user-handler-tag</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">user-handler-proc</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">???</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">user-handler-tag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">user-handler-proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Create an XML parser, an instance of the XML parsing framework.
This will be a SAX, a DOM, or a specialized parser depending
on the supplied user-handlers.</div></p><p>user-handler-tag is a symbol that identifies a procedural expression
that follows the tag. Given below are tags and signatures of the
corresponding procedures. Not all tags have to be specified. If some
are omitted, reasonable defaults will apply.</p><p>tag: DOCTYPE
handler-procedure: PORT DOCNAME SYSTEMID INTERNAL-SUBSET? SEED
If internal-subset? is #t, the current position in the port
is right after we have read #\[ that begins the internal DTD subset.
We must finish reading of this subset before we return
(or must call skip-internal-subset if we aren&rsquo;t interested in reading it).
The port at exit must be at the first symbol after the whole
DOCTYPE declaration.
The handler-procedure must generate four values:
ELEMS ENTITIES NAMESPACES SEED
See xml-decl::elems for ELEMS. It may be #f to switch off the validation.
NAMESPACES will typically contain USER-PREFIXes for selected URI-SYMBs.
The default handler-procedure skips the internal subset,
if any, and returns (values #f &rsquo;() &rsquo;() seed)</p><p>tag: UNDECL-ROOT
handler-procedure: ELEM-GI SEED
where ELEM-GI is an UNRES-NAME of the root element. This procedure
is called when an XML document under parsing contains _no_ DOCTYPE
declaration.
The handler-procedure, as a DOCTYPE handler procedure above,
must generate four values:
ELEMS ENTITIES NAMESPACES SEED
The default handler-procedure returns (values #f &rsquo;() &rsquo;() seed)</p><p>tag: DECL-ROOT
handler-procedure: ELEM-GI SEED
where ELEM-GI is an UNRES-NAME of the root element. This procedure
is called when an XML document under parsing does contains the DOCTYPE
declaration.
The handler-procedure must generate a new SEED (and verify
that the name of the root element matches the doctype, if the handler
so wishes).
The default handler-procedure is the identity function.</p><p>tag: NEW-LEVEL-SEED
handler-procedure: see ssax:make-elem-parser, my-new-level-seed</p><p>tag: FINISH-ELEMENT
handler-procedure: see ssax:make-elem-parser, my-finish-element</p><p>tag: CHAR-DATA-HANDLER
handler-procedure: see ssax:make-elem-parser, my-char-data-handler</p><p>tag: PI
handler-procedure: see ssax:make-pi-parser
The default value is &rsquo;()</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._ssax~3areverse-collect-str))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">ssax:reverse-collect-str</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">LIST-OF-FRAGS</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">LIST-OF-FRAGS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">given the list of fragments (some of which are text strings)
reverse the list and concatenate adjacent text strings.
We can prove from the general case below that if LIST-OF-FRAGS
has zero or one element, the result of the procedure is equal?
to its argument. This fact justifies the shortcut evaluation below.</div></p><h4 x-source-module="(lib &quot;sxml/scribblings/sxml.scrbl&quot;)" x-source-pkg="sxml" x-part-tag="&quot;input-parse_ss&quot;">6.2<tt>&nbsp;</tt><a name="(part._input-parse_ss)"></a>input-parse.ss</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._parser-error))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">parser-error</span></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">PORT</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">MESSAGE</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">SPECIALISING-MSG*</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">???</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">PORT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">MESSAGE</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">SPECIALISING-MSG*</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Many procedures of this package call parser-error to report a parsing
error.  The first argument is a port, which typically points to the
offending character or its neighborhood. Most of the Scheme systems
let the user query a PORT for the current position. MESSAGE is the
description of the error. Other arguments supply more details about
the problem.</div></p><h4 x-source-module="(lib &quot;sxml/scribblings/sxml.scrbl&quot;)" x-source-pkg="sxml" x-part-tag="&quot;sxml-tree-trans_ss&quot;">6.3<tt>&nbsp;</tt><a name="(part._sxml-tree-trans_ss)"></a>sxml-tree-trans.ss</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._.S.R.V~3asend-reply))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">SRV:send-reply</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">FRAGMENT</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">FRAGMENT</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Output the &rsquo;fragments&rsquo;
The fragments are a list of strings, characters,
numbers, thunks, #f, #t &ndash; and other fragments.
The function traverses the tree depth-first, writes out
strings and characters, executes thunks, and ignores
#f and &rsquo;().
The function returns #t if anything was written at all;
otherwise the result is #f
If #t occurs among the fragments, it is not written out
but causes the result of SRV:send-reply to be #t</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._post-order))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">post-order</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">TREE</span><span class="hspace">&nbsp;</span><span class="RktVar">BINDINGS</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">TREE</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">BINDINGS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">post-order is a strict subset of pre-post-order without *preorder*
(let alone *macro*) traversals.
Now pre-post-order is actually faster than the old post-order.
The function post-order is deprecated and is aliased below for
backward compatibility.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._replace-range~3a~3a))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">replace-range::</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">BEG-PRED</span><span class="hspace">&nbsp;</span><span class="RktVar">END-PRED</span><span class="hspace">&nbsp;</span><span class="RktVar">FOREST</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">BEG-PRED</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">END-PRED</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">FOREST</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Traverse a forest depth-first and cut/replace ranges of nodes.</div></p><p>The nodes that define a range don&rsquo;t have to have the same immediate
parent, don&rsquo;t have to be on the same level, and the end node of a
range doesn&rsquo;t even have to exist. A replace-range procedure removes
nodes from the beginning node of the range up to (but not including)
the end node of the range.  In addition, the beginning node of the
range can be replaced by a node or a list of nodes. The range of
nodes is cut while depth-first traversing the forest. If all
branches of the node are cut a node is cut as well.  The procedure
can cut several non-overlapping ranges from a forest.</p><p>replace-range:: BEG-PRED x END-PRED x FOREST -&gt; FOREST
where
type FOREST = (NODE ...)
type NODE = Atom | (Name . FOREST) | FOREST</p><p>The range of nodes is specified by two predicates, beg-pred and end-pred.
beg-pred:: NODE -&gt; #f | FOREST
end-pred:: NODE -&gt; #f | FOREST
The beg-pred predicate decides on the beginning of the range. The node
for which the predicate yields non-#f marks the beginning of the range
The non-#f value of the predicate replaces the node. The value can be a
list of nodes. The replace-range procedure then traverses the tree and skips
all the nodes, until the end-pred yields non-#f. The value of the end-pred
replaces the end-range node. The new end node and its brothers will be
re-scanned.
The predicates are evaluated pre-order. We do not descend into a node that
is marked as the beginning of the range.</p><h4 x-source-module="(lib &quot;sxml/scribblings/sxml.scrbl&quot;)" x-source-pkg="sxml" x-part-tag="&quot;sxml-to-html_ss&quot;">6.4<tt>&nbsp;</tt><a name="(part._sxml-to-html_ss)"></a>sxml-to-html.ss</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._.S.X.M.L-~3e.H.T.M.L))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">SXML-&gt;HTML</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">TREE</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">TREE</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">The following procedure is the most generic transformation of SXML
into the corresponding HTML document. The SXML tree is traversed
post-oder (depth-first) and transformed into another tree, which,
written in a depth-first fashion, results in an HTML document.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._entag))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">entag</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">TAG</span><span class="hspace">&nbsp;</span><span class="RktVar">ELEMS</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">TAG</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ELEMS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sxml?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Create the HTML markup for tags.
This is used in the node handlers for the post-order function, see
above.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._enattr))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">enattr</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">ATTR-KEY</span><span class="hspace">&nbsp;</span><span class="RktVar">VALUE</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ATTR-KEY</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">VALUE</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Create the HTML markup for attributes.
This and entag are being used in the node handlers for the post-order function, see
above.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._string-~3egood.H.T.M.L))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">string-&gt;goodHTML</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">STRING</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">STRING</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a string, check to make sure it does not contain characters
such as &rsquo;&lt;&rsquo; or &rsquo;&amp;&rsquo; that require encoding. Return either the original
string, or a list of string fragments with special characters
replaced by appropriate character entities.</div></p><h4 x-source-module="(lib &quot;sxml/scribblings/sxml.scrbl&quot;)" x-source-pkg="sxml" x-part-tag="&quot;sxml-to-html-ext_ss&quot;">6.5<tt>&nbsp;</tt><a name="(part._sxml-to-html-ext_ss)"></a>sxml-to-html-ext.ss</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._make-header))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">make-header</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">HEAD-PARMS</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">HEAD-PARMS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Create the &rsquo;head&rsquo; SXML/HTML tag. HEAD-PARMS is an assoc list of
(h-key h-value), where h-value is a typically string;
h-key is a symbol:
title, description, AuthorAddress, keywords,
Date-Revision-yyyymmdd, Date-Creation-yyyymmdd,
long-title
One of the h-key can be Links.
In that case, h-value is a list of
(l-key l-href (attr value) ...)
where l-key is one of the following:
start, contents, prev, next, top, home</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._make-navbar~3a))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">make-navbar:</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">HEAD-PARMS</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">HEAD-PARMS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Create a navigational bar. The argument head-parms is the same
as the one passed to make-header. We&rsquo;re only concerned with the
h-value Links</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._make-footer))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">make-footer</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">HEAD-PARMS</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">HEAD-PARMS</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">???</span></td></tr></table></blockquote></div><div class="SIntrapara">Create a footer. The argument head-parms is the same
as passed to make-header.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._universal-conversion-rules))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">universal-conversion-rules</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Bindings for the post-order function, which traverses the SXML tree
and converts it to a tree of fragments</div></p><p>The universal transformation from SXML to HTML. The following rules
work for every HTML, present and future</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._universal-protected-rules))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">universal-protected-rules</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A variation of universal-conversion-rules which keeps &rsquo;&lt;&rsquo;, &rsquo;&gt;&rsquo;, &rsquo;&amp;&rsquo;
and similar characters intact. The universal-protected-rules are
useful when the tree of fragments has to be traversed one more time.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._sxml/main..rkt)._alist-conv-rules))"></a><span title="Provided from: sxml | Package: sxml"><span class="RktSym"><span class="RktSymDef RktSym">alist-conv-rules</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">???</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The following rules define the identity transformation</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="sxslt.html" title="backward to &quot;5 SXML Transformation (SXSLT)&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;SXML: S-Expression Representation of XML&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Raw_Lists_of_Exported_Identifiers.html" title="forward to &quot;7 Raw Lists of Exported Identifiers&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/sxml/Automatically_Extracted_Comments.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:31:38 GMT -->
</html>