<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/denxi-reference/State.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:22:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>20&nbsp;State</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Denxi Reference</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Prerequisite_Knowledge.html" class="tocviewlink" data-pltdoc="x">Prerequisite Knowledge</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Command_Line_Argument_Parsers.html" class="tocviewlink" data-pltdoc="x">Command Line Argument Parsers</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Command_Line_Utilities.html" class="tocviewlink" data-pltdoc="x">Command Line Utilities</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Command_Line_Flags.html" class="tocviewlink" data-pltdoc="x">Command Line Flags</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Packages.html" class="tocviewlink" data-pltdoc="x">Packages</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Package_Definitions.html" class="tocviewlink" data-pltdoc="x">Package Definitions</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Package_Queries.html" class="tocviewlink" data-pltdoc="x">Package Queries</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Launchers.html" class="tocviewlink" data-pltdoc="x">Launchers</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Subprograms.html" class="tocviewlink" data-pltdoc="x">Subprograms</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Artifacts.html" class="tocviewlink" data-pltdoc="x">Artifacts</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Messages.html" class="tocviewlink" data-pltdoc="x">Messages</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Package_Inputs.html" class="tocviewlink" data-pltdoc="x">Package Inputs</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Package_Outputs.html" class="tocviewlink" data-pltdoc="x">Package Outputs</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Integrity_Checking.html" class="tocviewlink" data-pltdoc="x">Integrity Checking</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Signature_Checking.html" class="tocviewlink" data-pltdoc="x">Signature Checking</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Digs.html" class="tocviewlink" data-pltdoc="x">Digs</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Reader_Extension.html" class="tocviewlink" data-pltdoc="x">Reader Extension</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="Sources.html" class="tocviewlink" data-pltdoc="x">Sources</a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="versions.html" class="tocviewlink" data-pltdoc="x">Versions</a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">State</a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="settings.html" class="tocviewlink" data-pltdoc="x">Settings</a></td></tr><tr><td align="right">22&nbsp;</td><td><a href="Formatting.html" class="tocviewlink" data-pltdoc="x">Formatting</a></td></tr><tr><td align="right">23&nbsp;</td><td><a href="URLs.html" class="tocviewlink" data-pltdoc="x">URLs</a></td></tr><tr><td align="right">24&nbsp;</td><td><a href="Strings.html" class="tocviewlink" data-pltdoc="x">Strings</a></td></tr><tr><td align="right">25&nbsp;</td><td><a href="Localization.html" class="tocviewlink" data-pltdoc="x">Localization</a></td></tr><tr><td align="right">26&nbsp;</td><td><a href="Printer.html" class="tocviewlink" data-pltdoc="x">Printer</a></td></tr><tr><td align="right">27&nbsp;</td><td><a href="Archives.html" class="tocviewlink" data-pltdoc="x">Archives</a></td></tr><tr><td align="right">28&nbsp;</td><td><a href="System.html" class="tocviewlink" data-pltdoc="x">System</a></td></tr><tr><td align="right">29&nbsp;</td><td><a href="Monads.html" class="tocviewlink" data-pltdoc="x">Monads</a></td></tr><tr><td align="right">30&nbsp;</td><td><a href="Files.html" class="tocviewlink" data-pltdoc="x">Files</a></td></tr><tr><td align="right">31&nbsp;</td><td><a href="Cryptography.html" class="tocviewlink" data-pltdoc="x">Cryptography</a></td></tr><tr><td align="right">32&nbsp;</td><td><a href="Ports.html" class="tocviewlink" data-pltdoc="x">Ports</a></td></tr><tr><td align="right">33&nbsp;</td><td><a href="Security.html" class="tocviewlink" data-pltdoc="x">Security</a></td></tr><tr><td align="right">34&nbsp;</td><td><a href="rktmod.html" class="tocviewlink" data-pltdoc="x">Racket Module Operations</a></td></tr><tr><td align="right">35&nbsp;</td><td><a href="Codec.html" class="tocviewlink" data-pltdoc="x">Codec</a></td></tr><tr><td align="right">36&nbsp;</td><td><a href="Notaries.html" class="tocviewlink" data-pltdoc="x">Notaries</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>20&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">State</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">20.1&nbsp;</td><td><a href="#%28part._.Workspaces%29" class="tocviewlink" data-pltdoc="x">Workspaces</a></td></tr><tr><td align="right">20.2&nbsp;</td><td><a href="#%28part._.Databases%29" class="tocviewlink" data-pltdoc="x">Databases</a></td></tr><tr><td align="right">20.3&nbsp;</td><td><a href="#%28part._.Garbage_.Collection%29" class="tocviewlink" data-pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">20.4&nbsp;</td><td><a href="#%28part._.Content_.Addressing%29" class="tocviewlink" data-pltdoc="x">Content Addressing</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">20.1<tt>&nbsp;</tt></span><a href="#%28part._.Workspaces%29" class="tocsubseclink" data-pltdoc="x">Workspaces</a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._workspace-directory%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">workspace-<wbr></wbr>directory/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">DENXI_<span class="mywbr"> &nbsp;</span>WORKSPACE</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-workspace-path%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">build-<wbr></wbr>workspace-<wbr></wbr>path</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._call-with-ephemeral-workspace%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>ephemeral-<wbr></wbr>workspace</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-in-workspace~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">path-<wbr></wbr>in-<wbr></wbr>workspace?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-file%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>addressable-<wbr></wbr>file</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-directory%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>addressable-<wbr></wbr>directory</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-link%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>addressable-<wbr></wbr>link</span></span></a></td></tr><tr><td><span class="tocsublinknumber">20.2<tt>&nbsp;</tt></span><a href="#%28part._.Databases%29" class="tocsubseclink" data-pltdoc="x">Databases</a></td></tr><tr><td><span class="tocsublinknumber">20.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Record_.Types%29" class="tocsubseclink" data-pltdoc="x">Record Types</a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._provider-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">provider-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._package-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">package-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._edition-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">edition-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">revision-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-name-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">revision-<wbr></wbr>name-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">path-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-key-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">path-<wbr></wbr>key-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">output-<wbr></wbr>record</span></span></a></td></tr><tr><td><span class="tocsublinknumber">20.2.2<tt>&nbsp;</tt></span><a href="#%28part._.High-.Level_.Queries%29" class="tocsubseclink" data-pltdoc="x">High-<wbr></wbr>Level Queries</a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-all-installed%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">in-<wbr></wbr>all-<wbr></wbr>installed</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._declare-link%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">declare-<wbr></wbr>link</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._declare-output%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">declare-<wbr></wbr>output</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._find-path-record%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">find-<wbr></wbr>path-<wbr></wbr>record</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._call-with-reused-output%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>with-<wbr></wbr>reused-<wbr></wbr>output</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-denxi-objects%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">in-<wbr></wbr>denxi-<wbr></wbr>objects</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-denxi-outputs%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">in-<wbr></wbr>denxi-<wbr></wbr>outputs</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._start-transaction%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">start-<wbr></wbr>transaction!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-object-path%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">build-<wbr></wbr>object-<wbr></wbr>path</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-addressable-path%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">build-<wbr></wbr>addressable-<wbr></wbr>path</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-issued-links%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">in-<wbr></wbr>issued-<wbr></wbr>links</span></span></a></td></tr><tr><td><span class="tocsublinknumber">20.3<tt>&nbsp;</tt></span><a href="#%28part._.Garbage_.Collection%29" class="tocsubseclink" data-pltdoc="x">Garbage Collection</a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._~24finished-collecting-garbage%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">$finished-<wbr></wbr>collecting-<wbr></wbr>garbage</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._denxi-collect-garbage%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">denxi-<wbr></wbr>collect-<wbr></wbr>garbage</span></span></a></td></tr><tr><td><span class="tocsublinknumber">20.4<tt>&nbsp;</tt></span><a href="#%28part._.Content_.Addressing%29" class="tocsubseclink" data-pltdoc="x">Content Addressing</a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-content-address%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>content-<wbr></wbr>address</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._current-content-scanner%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>content-<wbr></wbr>scanner</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._scan-all-filesystem-content%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">scan-<wbr></wbr>all-<wbr></wbr>filesystem-<wbr></wbr>content</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._~24no-content-to-address%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">$no-<wbr></wbr>content-<wbr></wbr>to-<wbr></wbr>address</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="versions.html" title="backward to &quot;19 Versions&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Denxi Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="settings.html" title="forward to &quot;21 Settings&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;State&quot;">20<tt>&nbsp;</tt><a name="(part._.State)"></a><a name="(mod-path._denxi/state)"></a>State</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">denxi/state</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/denxi" title="Install this package using `raco pkg install denxi`"><span class="stt">denxi</span></a></span></td></tr></table></p><p>Denxi&rsquo;s <a name="(tech._state)"></a><span style="font-style: italic">state</span> consists of the contents of a filesystem
directory, and a <a href="#%28tech._database%29" class="techoutside" data-pltdoc="x"><span class="techinside">database</span></a> in that
directory. <a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">denxi/state</span></a> encapsulates state I/O.</p><p>Denxi implicitly trusts a state, so <span style="font-weight: bold">directly tampering with
state is a bad idea.</span> Only use <a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">denxi/state</span></a> to interact
with a <a href="#%28tech._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">state</span></a>.</p><h4 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;Workspaces&quot;">20.1<tt>&nbsp;</tt><a name="(part._.Workspaces)"></a>Workspaces</h4><p>A <a name="(tech._workspace)"></a><span style="font-style: italic">workspace</span> is a directory on the filesystem that holds a
<a href="#%28tech._database%29" class="techoutside" data-pltdoc="x"><span class="techinside">database</span></a> and all installed software. A workspace&rsquo;s path must
match the <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._workspace-directory%2Fc%29%29" class="RktValLink" data-pltdoc="x">workspace-directory/c</a></span> contract. A <a name="(tech._target._workspace)"></a><span style="font-style: italic">target
workspace</span> is the directory referenced by the value of
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E%29%29" class="RktValLink" data-pltdoc="x">DENXI_WORKSPACE</a></span><span class="RktPn">)</span>. Target workspaces are affected by all
filesystem writes in a Denxi process.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._denxi/state..rkt)._workspace-directory/c))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._workspace-directory%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">workspace-directory/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._file-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._link-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">link-exists?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A contract for a valid workspace directory path.</div></p><p>That is, a complete path that either refers to an existing
directory, or a location on the filesystem where nothing exists.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>setting</p></div></div><p class="RForeground"><a name="(def._((lib._denxi/state..rkt)._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E%29%29" class="RktValDef RktValLink" data-pltdoc="x">DENXI_WORKSPACE</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._workspace-directory%2Fc%29%29" class="RktValLink" data-pltdoc="x">workspace-directory/c</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">CLI Flags: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--w/--workspace</span><span class="hspace"></span></span></div></p><p>The directory in which Denxi reads and writes files. If the directory
does not exist, then it will be created when Denxi writes a file.</p><p>Defaults to <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._build-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">build-path</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._find-system-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">find-system-path</a></span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">home-dir</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">".denxi"</span><span class="RktPn">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._build-workspace-path))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-workspace-path%29%29" class="RktValDef RktValLink" data-pltdoc="x">build-workspace-path</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path-element</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path-element</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._build-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">build-path</a></span>, but the base of the returned path is
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E%29%29" class="RktValLink" data-pltdoc="x">DENXI_WORKSPACE</a></span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._call-with-ephemeral-workspace))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._call-with-ephemeral-workspace%29%29" class="RktValDef RktValLink" data-pltdoc="x">call-with-ephemeral-workspace</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Calls <span class="RktVar">proc</span> in a <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=eval-model.html%23%2528tech._parameterization%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">parameterization</span></a> where
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E%29%29" class="RktValLink" data-pltdoc="x">DENXI_WORKSPACE</a></span><span class="RktPn">)</span> is a temporary directory. The same path
is passed as the first argument to <span class="RktVar">proc</span>. That directory and
its contents will be deleted when control leaves <span class="RktVar">proc</span>, if it
still exists.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._path-in-workspace~3f))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-in-workspace~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">path-in-workspace?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">path</span>, when simplified, has
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._.D.E.N.X.I_.W.O.R.K.S.P.A.C.E%29%29" class="RktValLink" data-pltdoc="x">DENXI_WORKSPACE</a></span><span class="RktPn">)</span> as a prefix.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._make-addressable-file))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-file%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-addressable-file</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">transfer-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">in</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">est-size</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:on-status</span><span class="hspace">&nbsp;</span><span class="RktVar">on-status</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-size</span><span class="hspace">&nbsp;</span><span class="RktVar">max-size</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:buffer-size</span><span class="hspace">&nbsp;</span><span class="RktVar">buffer-size</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:timeout-ms</span><span class="hspace">&nbsp;</span><span class="RktVar">timeout-ms</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:cache-key</span><span class="hspace">&nbsp;</span><span class="RktVar">cache-key</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">transfer-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">est-size</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">on-status</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Messages.html#%28def._%28%28lib._denxi%2Fmessage..rkt%29._~24message~3f%29%29" class="RktValLink" data-pltdoc="x">$message?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-size</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">+inf.0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">buffer-size</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">timeout-ms</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._%7E3e%7E3d%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&gt;=/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cache-key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Called for effect. Returns a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> for a file.</div></p><p>Effect: Atomically create OR reuse a file in the <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a>.</p><p>If <span class="RktVar">cache-key</span> is not <span class="RktVal">#f</span>, then
<span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-file%29%29" class="RktValLink" data-pltdoc="x">make-addressable-file</a></span> first attempts to find an existing
<span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> using <span class="RktVar">cache-key</span>.  If one is found,
<span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-file%29%29" class="RktValLink" data-pltdoc="x">make-addressable-file</a></span> will return that record.</p><p>In the event of a cache miss, a file is created under the context of
several safety limits. An output port <span class="RktSym">to-file</span> is then given
bytes under the context of</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="Ports.html#%28def._%28%28lib._denxi%2Fport..rkt%29._transfer%29%29" class="RktValLink" data-pltdoc="x">transfer</a></span><span class="hspace">&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span><span class="RktSym">to-file</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:on-status</span><span class="hspace">&nbsp;</span><span class="RktVar">on-status</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transfer-name</span><span class="hspace">&nbsp;</span><span class="RktVar">transfer-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:max-size</span><span class="hspace">&nbsp;</span><span class="RktVar">max-size</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:buffer-size</span><span class="hspace">&nbsp;</span><span class="RktVar">buffer-size</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:timeout-ms</span><span class="hspace">&nbsp;</span><span class="RktVar">timeout-ms</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:est-size</span><span class="hspace">&nbsp;</span><span class="RktVar">est-size</span><span class="RktPn">)</span></td></tr></table></blockquote><p>In the event of any error, the created file is deleted if it exists,
and the database will not be affected. If the file is created
successfully, then the database will gain a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span>. If
<span class="RktVar">cache-key</span> is not <span class="RktVal">#f</span>, the database will also gain a
<span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-key-record%29%29" class="RktValLink" data-pltdoc="x">path-key-record</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._make-addressable-directory))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-directory%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-addressable-directory</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">directory</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">directory</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Called for effect. Returns a record for a created directory.</div></p><p>Effect: Atomically move <span class="RktVar">directory</span> to a path named after the
Base32 encoding of a digest. The digest is created using the
directory&rsquo;s own name and contents, discovered recursively. The
database will gain a record of the new directory path, which will be
returned.</p><p><span style="font-weight: bold">Warning:</span> Any digests that are already computed for a path are
preferred over creating new digests from contents on disk. In the
event a file is directly modified in the <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a>, a digest
for a directory containing that file may be incorrect.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._make-addressable-link))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-link%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-addressable-link</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">target-path-record</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">link-path</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">target-path-record</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">link-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Called for effect. Returns a record for a created link.</div></p><p>Effect: Creates the directory path before the file name in
<span class="RktVar">link-path</span> (if necessary), then creates a link at
<span class="RktVar">link-path</span>.  The net operation is performed non-atomically.</p><p>The target path must come from a valid <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> because
the links may only point to files and directories created by Denxi.</p><h4 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;Databases&quot;">20.2<tt>&nbsp;</tt><a name="(part._.Databases)"></a>Databases</h4><p>Each <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a> may contain a <a name="(tech._database)"></a><span style="font-style: italic">database</span> as a SQLite
file called <span class="RktInBG"><span class="hspace"></span><span class="RktIn">db</span><span class="hspace"></span></span>.  The database tracks the other contents of
a <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a>, and holds the state of any caches.</p><h5 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;Record_Types&quot;">20.2.1<tt>&nbsp;</tt><a name="(part._.Record_.Types)"></a>Record Types</h5><p>This section covers the Racket structures representing parsed records
in a relation. To inspect the underlying database schema, run
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">sqlite3 ./path/to/db</span><span class="hspace"></span></span> in your shell, then <span class="RktInBG"><span class="hspace"></span><span class="RktIn">.schema</span><span class="hspace"></span></span>
in SQLite&rsquo;s REPL.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._denxi/state..rkt)._record-id))"></a><a name="(def._((lib._denxi/state..rkt)._make-record))"></a><a name="(def._((lib._denxi/state..rkt)._record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3arecord))"></a><a name="(def._((lib._denxi/state..rkt)._record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValDef RktValLink" data-pltdoc="x">record</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym">make-record</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym">sql-null?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Represents an identifiable database record.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._provider-record-name))"></a><a name="(def._((lib._denxi/state..rkt)._provider-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3aprovider-record))"></a><a name="(def._((lib._denxi/state..rkt)._provider-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._provider-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">provider-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a known provider. One <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._provider-record%29%29" class="RktValLink" data-pltdoc="x">provider-record</a></span> has many <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._package-record%29%29" class="RktValLink" data-pltdoc="x">package-record</a></span>s.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._package-record-provider-id))"></a><a name="(def._((lib._denxi/state..rkt)._package-record-name))"></a><a name="(def._((lib._denxi/state..rkt)._package-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3apackage-record))"></a><a name="(def._((lib._denxi/state..rkt)._package-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._package-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">package-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">provider-id</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">provider-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a known installed package. One <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._package-record%29%29" class="RktValLink" data-pltdoc="x">package-record</a></span> has many <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._edition-record%29%29" class="RktValLink" data-pltdoc="x">edition-record</a></span>s.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._edition-record-package-id))"></a><a name="(def._((lib._denxi/state..rkt)._edition-record-name))"></a><a name="(def._((lib._denxi/state..rkt)._edition-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3aedition-record))"></a><a name="(def._((lib._denxi/state..rkt)._edition-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._edition-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">edition-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">package-id</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">package-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a known edition. One <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._edition-record%29%29" class="RktValLink" data-pltdoc="x">edition-record</a></span> has many
<span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-record%29%29" class="RktValLink" data-pltdoc="x">revision-record</a></span>s.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._revision-record-edition-id))"></a><a name="(def._((lib._denxi/state..rkt)._revision-record-number))"></a><a name="(def._((lib._denxi/state..rkt)._revision-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3arevision-record))"></a><a name="(def._((lib._denxi/state..rkt)._revision-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">revision-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">number</span><span class="stt"> </span><span class="RktSym">edition-id</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">number</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="versions.html#%28def._%28%28lib._denxi%2Fversion..rkt%29._revision-number~3f%29%29" class="RktValLink" data-pltdoc="x">revision-number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">edition-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a known revision number under an edition. One
<span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-record%29%29" class="RktValLink" data-pltdoc="x">revision-record</a></span> has many <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-name-record%29%29" class="RktValLink" data-pltdoc="x">revision-name-record</a></span>s.</div></p><p><span class="RktSym">number</span> is a <a href="versions.html#%28tech._revision._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">revision number</span></a>, not a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span>.
<span class="RktSym">edition-id</span> is a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for an <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._edition-record%29%29" class="RktValLink" data-pltdoc="x">edition-record</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._revision-name-record-revision-id))"></a><a name="(def._((lib._denxi/state..rkt)._revision-name-record-name))"></a><a name="(def._((lib._denxi/state..rkt)._revision-name-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3arevision-name-record))"></a><a name="(def._((lib._denxi/state..rkt)._revision-name-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-name-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">revision-name-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">revision-id</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">revision-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a name for a revision number.</div></p><p><span class="RktSym">name</span> need not be unique in the relation.</p><p><span class="RktSym">revision-id</span> is unique, and represents the <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span>
of a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._revision-record%29%29" class="RktValLink" data-pltdoc="x">revision-record</a></span>, <span style="font-style: italic">not</span> a <a href="versions.html#%28tech._revision._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">revision number</span></a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._denxi/state..rkt)._path-record-target-id))"></a><a name="(def._((lib._denxi/state..rkt)._path-record-digest))"></a><a name="(def._((lib._denxi/state..rkt)._path-record-path))"></a><a name="(def._((lib._denxi/state..rkt)._make-path-record))"></a><a name="(def._((lib._denxi/state..rkt)._path-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3apath-record))"></a><a name="(def._((lib._denxi/state..rkt)._path-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">path-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="stt"> </span><span class="RktSym">digest</span><span class="stt"> </span><span class="RktSym">target-id</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym">make-path-record</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">digest</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">target-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a>-relative path that is expected to follow
these invariants:</div></p><ul><li><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-workspace-path%29%29" class="RktValLink" data-pltdoc="x">build-workspace-path</a></span><span class="stt"> </span><span class="RktSym">path</span><span class="RktPn">)</span> exists.</p></li><li><p>The file, directory, or link referenced by <span class="RktSym">path</span> was created by a Denxi process.</p></li><li><p>The <span class="RktSym">digest</span> was computed in terms of the contents of the corresponding file or directory.</p></li><li><p>If <span class="RktSym">path</span> refers to a link, then <span class="RktSym">target-id</span> matches the <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> for the target of the link.</p></li></ul><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> has many <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-key-record%29%29" class="RktValLink" data-pltdoc="x">path-key-record</a></span>s.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._path-key-record-path-id))"></a><a name="(def._((lib._denxi/state..rkt)._path-key-record-key))"></a><a name="(def._((lib._denxi/state..rkt)._path-key-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3apath-key-record))"></a><a name="(def._((lib._denxi/state..rkt)._path-key-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-key-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">path-key-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">key</span><span class="stt"> </span><span class="RktSym">path-id</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">path-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents a cached path used by <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-addressable-file%29%29" class="RktValLink" data-pltdoc="x">make-addressable-file</a></span>.</div></p><p><span class="RktSym">key</span> must be unique.</p><p><span class="RktSym">path-id</span> is a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> of a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._output-record-name))"></a><a name="(def._((lib._denxi/state..rkt)._output-record-path-id))"></a><a name="(def._((lib._denxi/state..rkt)._output-record-revision-id))"></a><a name="(def._((lib._denxi/state..rkt)._output-record~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3aoutput-record))"></a><a name="(def._((lib._denxi/state..rkt)._output-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">output-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record%29%29" class="RktValLink" data-pltdoc="x">record</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">revision-id</span><span class="stt"> </span><span class="RktSym">path-id</span><span class="stt"> </span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">revision-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">path-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Represents an installed package output. <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record%29%29" class="RktValLink" data-pltdoc="x">output-record</a></span>s have a
1-to-1 relationship with <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span>s, and can be used to
query all other record types that identify an installed package.</div></p><p><span class="RktSym">path-id</span> refers to the <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> for the package
output.  It must be unique.</p><p><span class="RktSym">name</span> refers to the name of the output. It need not be unique.</p><h5 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;High-Level_Queries&quot;">20.2.2<tt>&nbsp;</tt><a name="(part._.High-.Level_.Queries)"></a>High-Level Queries</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._in-all-installed))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-all-installed%29%29" class="RktValDef RktValLink" data-pltdoc="x">in-all-installed</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._sequence%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a 12-value sequence representing discovery information and
file location information for all package outputs installed in the
<a href="#%28tech._target._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">target workspace</span></a>.</div></p><ul><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a provider name</p></li><li><p>A provider name</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a package name</p></li><li><p>A package name</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for an edition name</p></li><li><p>An edition name</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a revision number</p></li><li><p>A revision number</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a package output</p></li><li><p>A package output name</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a path</p></li><li><p>A path</p></li></ul><p>The values are always correct together, but do not guarentee the
existence of a path on disk. Ignoring the <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span>s, each
set of values represents a path to a named package output for a
specific revision, edition, package, and provider.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._declare-link))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._declare-link%29%29" class="RktValDef RktValLink" data-pltdoc="x">declare-link</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">link-path</span><span class="hspace">&nbsp;</span><span class="RktVar">target-record</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">link-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">target-record</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Saves an existing link at <span class="RktVar">link-path</span> as pointing to the
(presumably existing) path in <span class="RktVar">target-record</span>. If the link
already exists in the database, the existing record is returned.</div></p><p>After using <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._declare-link%29%29" class="RktValLink" data-pltdoc="x">declare-link</a></span>, the path in <span class="RktVar">target-record</span>
becomes eligible for garbage collection when <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._link-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">link-exists?</a></span><span class="stt"> </span><span class="RktVar">link-path</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._declare-output))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._declare-output%29%29" class="RktValDef RktValLink" data-pltdoc="x">declare-output</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">provider-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">package-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">edition-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">revision-number</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">revision-names</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">output-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">output-path-record</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record~3f%29%29" class="RktValLink" data-pltdoc="x">output-record?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">provider-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">package-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">edition-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">revision-number</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="versions.html#%28def._%28%28lib._denxi%2Fversion..rkt%29._revision-number~3f%29%29" class="RktValLink" data-pltdoc="x">revision-number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">revision-names</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fstring..rkt%2529._non-empty-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">output-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">output-path-record</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Saves the relationship between the package output named
<span class="RktVar">output-name</span>, the given discovery and version information, and
the given path record.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._find-path-record))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._find-path-record%29%29" class="RktValDef RktValLink" data-pltdoc="x">find-path-record</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hint</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record~3f%29%29" class="RktValLink" data-pltdoc="x">path-record?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hint</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Return a <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record%29%29" class="RktValLink" data-pltdoc="x">path-record</a></span> produced from searching the database
using the given hint, or <span class="RktVal">#f</span> if no record was found.</div></p><p>The database query used depends on the type of <span class="RktVar">hint</span>.</p><ul><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span>: Use <span class="RktVar">hint</span> as an expected primary key value.</p></li><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span>: Use <span class="RktVar">hint</span> as an expected value for a path field in the database.</p></li><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span>: Use <span class="RktVar">hint</span> as an expected value for a digest field in the database.</p></li><li><p>Anything else: Ignore hint and return <span class="RktVal">#f</span>.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._call-with-reused-output))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._call-with-reused-output%29%29" class="RktValDef RktValLink" data-pltdoc="x">call-with-reused-output</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">query</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">output-name</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">continue</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Package_Queries.html#%28def._%28%28lib._denxi%2Fquery..rkt%29._package-query-variant~3f%29%29" class="RktValLink" data-pltdoc="x">package-query-variant?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">output-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">continue</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record~3f%29%29" class="RktValLink" data-pltdoc="x">output-record?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktPn">(</span><span class="RktVar">continue</span><span class="stt"> </span><span class="RktSym">variant</span><span class="RktPn">)</span>, where <span class="RktSym">variant</span> comes from
a search for an output named <span class="RktVar">output-name</span> for a package
matching <span class="RktVar">query</span>. The exact package used has the highest
<a href="versions.html#%28tech._revision._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">revision number</span></a> available in the database.</div></p><p>If <span class="RktSym">variant</span> is <span class="RktVal">#f</span>, then the named output is not installed.</p><p>If <span class="RktSym">variant</span> is an <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record~3f%29%29" class="RktValLink" data-pltdoc="x">output-record?</a></span>, then the named
output is installed with that information.</p><p>If <span class="RktSym">variant</span> is an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exn%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn?</a></span>, then an error was encountered
in preparing or executing a SQL query.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._in-denxi-objects))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-denxi-objects%29%29" class="RktValDef RktValLink" data-pltdoc="x">in-denxi-objects</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">query</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528def._%2528%2528lib._racket%252Fsequence..rkt%2529._sequence%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="versions.html#%28def._%28%28lib._denxi%2Fversion..rkt%29._revision-number~3f%29%29" class="RktValLink" data-pltdoc="x">revision-number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Package_Queries.html#%28def._%28%28lib._denxi%2Fquery..rkt%29._package-query-variant~3f%29%29" class="RktValLink" data-pltdoc="x">package-query-variant?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a 5-value <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528tech._sequence%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">sequence</span></a> representing known
installed outputs of packages matching <span class="RktVar">query</span> on the file
system.</div></p><ul><li><p>An output name</p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a revision number</p></li><li><p>A <a href="versions.html#%28tech._revision._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">revision number</span></a></p></li><li><p>A <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._record-id%29%29" class="RktValLink" data-pltdoc="x">record-id</a></span> for a path</p></li><li><p>A relative path (w.r.t. the <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a> containing the database) to a directory containing package output</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._in-denxi-outputs))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-denxi-outputs%29%29" class="RktValDef RktValLink" data-pltdoc="x">in-denxi-outputs</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span><span class="RktVar">output-name</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528def._%2528%2528lib._racket%252Fsequence..rkt%2529._sequence%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record~3f%29%29" class="RktValLink" data-pltdoc="x">output-record?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Package_Queries.html#%28def._%28%28lib._denxi%2Fquery..rkt%29._package-query-variant~3f%29%29" class="RktValLink" data-pltdoc="x">package-query-variant?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">output-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a sequence of <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._output-record%29%29" class="RktValLink" data-pltdoc="x">output-record</a></span> for outputs of the given
<span class="RktVar">output-name</span>, for all installed packages matching
<span class="RktVar">query</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._start-transaction!))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._start-transaction%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">start-transaction!</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Called for effect. Returns two procedures also called for effect,
discussed below.</div></p><p>Effect: <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._start-transaction%21%29%29" class="RktValLink" data-pltdoc="x">start-transaction!</a></span> instructs SQLite to start a
transaction against the database. If a transaction is already
underway, <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._start-transaction%21%29%29" class="RktValLink" data-pltdoc="x">start-transaction!</a></span> will handle the corresponding
error from SQLite by using the existing transaction.</p><p>The first returned procedure ends the transaction, atomically
committing any changes to the database.</p><p>The second returned procedure rolls back the transaction, atomically
undoing any changes to the database.</p><p>Failure to call either procedure will leave the transaction open.  For
safety, use the returned procedures such that the program cannot help
but invoke one.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._build-object-path))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-object-path%29%29" class="RktValDef RktValLink" data-pltdoc="x">build-object-path</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path-el</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path-el</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-workspace-path%29%29" class="RktValLink" data-pltdoc="x">build-workspace-path</a></span><span class="stt"> </span><span class="RktVal">"objects"</span><span class="stt"> </span><span class="RktVar">path-el</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._build-addressable-path))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-addressable-path%29%29" class="RktValDef RktValLink" data-pltdoc="x">build-addressable-path</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">digest</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._complete-path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">complete-path?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">digest</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._build-object-path%29%29" class="RktValLink" data-pltdoc="x">build-object-path</a></span>, but the file name is
<span class="RktPn">(</span><span class="RktSym"><a href="Codec.html#%28def._%28%28lib._denxi%2Fcodec..rkt%29._encoded-file-name%29%29" class="RktValLink" data-pltdoc="x">encoded-file-name</a></span><span class="stt"> </span><span class="RktVar">digest</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._in-issued-links))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._in-issued-links%29%29" class="RktValDef RktValLink" data-pltdoc="x">in-issued-links</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sequences.html%23%2528def._%2528%2528lib._racket%252Fsequence..rkt%2529._sequence%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a sequence of two values.</div></p><p>The first is a <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a>-relative path to a symbolic link
created by Denxi.</p><p>The second is a <a href="#%28tech._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">workspace</span></a>-relative path to the file referenced
by the link.</p><h4 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;Garbage_Collection&quot;">20.3<tt>&nbsp;</tt><a name="(part._.Garbage_.Collection)"></a>Garbage Collection</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><table cellspacing="0" cellpadding="0" class="RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._denxi/state..rkt)._~24finished-collecting-garbage-bytes-recovered))"></a><a name="(def._((lib._denxi/state..rkt)._~24finished-collecting-garbage~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3a~24finished-collecting-garbage))"></a><a name="(def._((lib._denxi/state..rkt)._~24finished-collecting-garbage))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._~24finished-collecting-garbage%29%29" class="RktValDef RktValLink" data-pltdoc="x">$finished-collecting-garbage</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Messages.html#%28def._%28%28lib._denxi%2Fmessage..rkt%29._~24message%29%29" class="RktValLink" data-pltdoc="x">$message</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bytes-recovered</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prefab</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">bytes-recovered</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A <a href="Messages.html#%28tech._message%29" class="techoutside" data-pltdoc="x"><span class="techinside">message</span></a> for reporting the number of bytes freed from disk
using <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._denxi-collect-garbage%29%29" class="RktValLink" data-pltdoc="x">denxi-collect-garbage</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._denxi-collect-garbage))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._denxi-collect-garbage%29%29" class="RktValDef RktValLink" data-pltdoc="x">denxi-collect-garbage</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-nonnegative-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-nonnegative-integer?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Deletes all records of links that do not actually exist on disk, then
deletes any installed files or directories in the <a href="#%28tech._target._workspace%29" class="techoutside" data-pltdoc="x"><span class="techinside">target
workspace</span></a> with no known links.</div></p><p>Returns the estimated number of bytes recovered from disk. Empty
directories and links are assumed to have no size.</p><h4 x-source-module="(lib &quot;denxi/docs/reference/denxi-reference.scrbl&quot;)" x-source-pkg="denxi" x-part-tag="&quot;Content_Addressing&quot;">20.4<tt>&nbsp;</tt><a name="(part._.Content_.Addressing)"></a>Content Addressing</h4><p>Denxi addresses arbitrary data using digests. One may override how
data appears when computing new addresses.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._make-content-address))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._make-content-address%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-content-address</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._file-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">file-exists?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._link-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">link-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a digest suitable for use in <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._path-record-digest%29%29" class="RktValLink" data-pltdoc="x">path-record-digest</a></span>.</div></p><p>The digest always uses <span class="RktPn">(</span><span class="RktSym"><a href="Integrity_Checking.html#%28def._%28%28lib._denxi%2Fintegrity%2Fbase..rkt%29._get-default-chf%29%29" class="RktValLink" data-pltdoc="x">get-default-chf</a></span><span class="RktPn">)</span>, but the bytes used
to produce the digest depend on <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._current-content-scanner%29%29" class="RktValLink" data-pltdoc="x">current-content-scanner</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._denxi/state..rkt)._current-content-scanner))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._current-content-scanner%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-content-scanner</a></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._parameter%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parameter/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A parameter used to store a procedure.</div></p><p>The procedure must accept a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span> and return an input
port. The input port yields bytes that act as representitive content
for whatever exists at that location.</p><p>Defaults to <span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._scan-all-filesystem-content%29%29" class="RktValLink" data-pltdoc="x">scan-all-filesystem-content</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._denxi/state..rkt)._scan-all-filesystem-content))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._scan-all-filesystem-content%29%29" class="RktValDef RktValLink" data-pltdoc="x">scan-all-filesystem-content</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns an input port that draws all accessible data (including some
platform-specific data) from an existing file, directory, or link at
<span class="RktVar">path</span> according to the rules below. The rules are checked in
the order shown.</div></p><p><span style="font-weight: bold">Warning:</span> Large directories and files may take a long time to
process. Only use when change detection is more important than
performance.</p><p><span style="font-weight: bold">Note:</span> When this definition refers to a &#8220;name&#8221;, it means the
bytes in <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3ebytes%252Futf-8%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;bytes/utf-8</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fformat..rkt%2529._%7E7ea%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">~a</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=More_Path_Utilities.html%23%2528def._%2528%2528lib._racket%252Fpath..rkt%2529._file-name-from-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">file-name-from-path</a></span><span class="stt"> </span><span class="RktVar">path</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p><p>If <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._link-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">link-exists?</a></span><span class="stt"> </span><span class="RktVar">path</span><span class="RktPn">)</span>, then return a port that yields bytes
from the link&rsquo;s name. The link is not followed.</p><p>If <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._file-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">file-exists?</a></span><span class="stt"> </span><span class="RktVar">path</span><span class="RktPn">)</span>, then return a port that yields bytes
from the file&rsquo;s name, permissions, and contents.</p><p>If <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span><span class="stt"> </span><span class="RktVar">path</span><span class="RktPn">)</span>, then return a port that yields
bytes from the directory&rsquo;s name, permissions, and contents. Contents
are processed recursively without tail-call optimization.</p><p>Otherwise, raise <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._~24no-content-to-address%29%29" class="RktValLink" data-pltdoc="x">$no-content-to-address</a></span><span class="stt"> </span><span class="RktVar">path</span><span class="RktPn">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._denxi/state..rkt)._~24no-content-to-address-path))"></a><a name="(def._((lib._denxi/state..rkt)._~24no-content-to-address~3f))"></a><a name="(def._((lib._denxi/state..rkt)._struct~3a~24no-content-to-address))"></a><a name="(def._((lib._denxi/state..rkt)._~24no-content-to-address))"></a><span title="Provided from: denxi/state | Package: denxi"><span class="RktSym"><a href="#%28def._%28%28lib._denxi%2Fstate..rkt%29._~24no-content-to-address%29%29" class="RktValDef RktValLink" data-pltdoc="x">$no-content-to-address</a></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Messages.html#%28def._%28%28lib._denxi%2Fmessage..rkt%29._~24message%29%29" class="RktValLink" data-pltdoc="x">$message</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">path</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">When trying to create a digest to address content, <span class="RktSym">path</span> did not
point to an existing file, directory, or link.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="versions.html" title="backward to &quot;19 Versions&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Denxi Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="settings.html" title="forward to &quot;21 Settings&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/denxi-reference/State.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:22:16 GMT -->
</html>