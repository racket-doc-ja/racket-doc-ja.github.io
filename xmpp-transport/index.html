<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/xmpp-transport/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:06:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>XMPP Connection</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">XMPP Connection</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Creating_and_managing_connections%29" class="tocviewlink" data-pltdoc="x">Creating and managing connections</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Sending_data%29" class="tocviewlink" data-pltdoc="x">Sending data</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Receiving_data%29" class="tocviewlink" data-pltdoc="x">Receiving data</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Asynchronous_operation%29" class="tocviewlink" data-pltdoc="x">Asynchronous operation</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._callbacks%29" class="tocviewlink" data-pltdoc="x">Callbacks</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._interact%29" class="tocviewlink" data-pltdoc="x">Responding to remote interactions</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._contracts%29" class="tocviewlink" data-pltdoc="x">Contracts</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">XMPP Connection</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Creating_and_managing_connections%29" class="tocsubseclink" data-pltdoc="x">Creating and managing connections</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-connect-client%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>connect-<wbr></wbr>client</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-connect-component%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>connect-<wbr></wbr>component</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-stop%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>stop!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Sending_data%29" class="tocsubseclink" data-pltdoc="x">Sending data</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>send</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Receiving_data%29" class="tocsubseclink" data-pltdoc="x">Receiving data</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>receive</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive-blocking%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>receive-<wbr></wbr>blocking</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Asynchronous_operation%29" class="tocsubseclink" data-pltdoc="x">Asynchronous operation</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-handler%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>set-<wbr></wbr>handler</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-stop-handler%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>stop-<wbr></wbr>handler</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-handler%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>handler</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._callbacks%29" class="tocsubseclink" data-pltdoc="x">Callbacks</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>set-<wbr></wbr>callback</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%2Fonce%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>set-<wbr></wbr>callback/<span class="mywbr"> &nbsp;</span>once</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-unset-callback%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>unset-<wbr></wbr>callback</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callbacks%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>callbacks</span></span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._interact%29" class="tocsubseclink" data-pltdoc="x">Responding to remote interactions</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%2Fcallback%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>send/<span class="mywbr"> &nbsp;</span>callback</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%2Fawait%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>send/<span class="mywbr"> &nbsp;</span>await</span></span></a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._contracts%29" class="tocsubseclink" data-pltdoc="x">Contracts</a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._stanza%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">stanza/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-handler%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">xmpp-<wbr></wbr>handler/<span class="mywbr"> &nbsp;</span>c</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>callback/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fonce%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xmpp-<wbr></wbr>callback/<span class="mywbr"> &nbsp;</span>once/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.X.M.P.P_.Connection)"></a><a name="(mod-path._xmpp/transport)"></a>XMPP Connection</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Navlost &lt;racket at navlost dot eu&gt;</p></span></div><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="Smaller">Find the source at <a href="https://gitlab.com/navlost.eu/xmpp/libraries/racket/xmpp"><span class="url">https://gitlab.com/navlost.eu/xmpp/libraries/racket/xmpp</span></a>.</span></p></blockquote></blockquote></blockquote><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">xmpp/transport</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/XMPP" title="Install this package using `raco pkg install XMPP`"><span class="stt">XMPP</span></a></span></td></tr></table></p><p>This package implements functions to connect and authenticate with an
<a href="https://xmpp.org/">XMPP</a> server.</p><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xmpp/transport</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._string-%7E3ejid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;jid</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"user@example.net"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pass</span><span class="hspace">&nbsp;</span><span class="RktVal">"s3cret!"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-connect-client%29%29" class="RktValLink" data-pltdoc="x">xmpp-connect-client</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pass</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%29%29" class="RktValLink" data-pltdoc="x">xmpp-send</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">presence</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>After connecting, the library assigns a
unique JID resource automatically:</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktSym">conn</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><span class="RktRes"><span class="hspace">&nbsp;&nbsp;</span></span><span class="RktRes">"user@example.net/racket-1547"</span></div></p><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Creating_and_managing_connections&quot;">1<tt>&nbsp;</tt><a name="(part._.Creating_and_managing_connections)"></a>Creating and managing connections</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-connect-client))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-connect-client%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-connect-client</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span><span class="RktVar">passwd</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktVar">host</span><span class="hspace">&nbsp;</span><span class="RktVar">port</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jid</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">passwd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">host</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-domainpart%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-domainpart</a></span><span class="hspace">&nbsp;</span><span class="RktVar">jid</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._port-number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port-number?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">XMPP-C2S-PORT</span></td></tr></table></blockquote></div><div class="SIntrapara">This method:
</div><div class="SIntrapara"><ul><li><p>Creates a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection</a></span> object;</p></li><li><p>connects to the server, either <span class="RktVar">host</span> if provided
or else <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-domainpart%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-domainpart</a></span><span class="stt"> </span><span class="RktVar">jid</span><span class="RktPn">)</span>, either on the default
XMPP port (5222) or on <span class="RktVar">port</span>;</p></li><li><p>upgrades the connection to <a href="https://www.rfc-editor.org/rfc/rfc7590.html">TLS</a>;</p></li><li><p>authenticates the user with the provided <span class="RktVar">jid</span> and
<span class="RktVar">passwd</span>;</p></li><li><p>randomises the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-resourcepart%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-resourcepart</a></span> and binds it; and</p></li><li><p>returns the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection</a></span> object, which is used by
every other function needing to interact with the server.</p></li></ul></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-connect-component))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-connect-component%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-connect-component</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">host</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">port</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">domain</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">secret</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">host</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">port</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=tcp.html%23%2528def._%2528%2528lib._racket%252Ftcp..rkt%2529._port-number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">port-number?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">domain</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">secret</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This method creates an
<a href="https://xmpp.org/extensions/xep-0114.html">XEP-0114</a>
component connection.</div></p><ul><li><p><span class="RktVar">host</span> is the hostname of the XMPP server to connect to</p></li><li><p><span class="RktVar">port</span> is the port number to connect to, according to the
server configuration (there is no standard port number or range for
components).</p></li><li><p><span class="RktVar">domain</span> is the domain name for the component itself.
Technically, this is a JID without either a local part or a resource part.</p></li><li><p><span class="RktVar">secret</span> is the shared secret between the XMPP server and the
component, used during the handshake.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-stop!))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-stop%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-stop!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Closes the connection to the server.</div></p><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Sending_data&quot;">2<tt>&nbsp;</tt><a name="(part._.Sending_data)"></a>Sending data</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-send))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-send</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVar">stanza</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stanza</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sends a stanza.</div></p><p>Example:</p><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%29%29" class="RktValLink" data-pltdoc="x">xmpp-send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">presence</span><span class="RktVal">)</span><span class="RktPn">)</span></p></blockquote><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Receiving_data&quot;">3<tt>&nbsp;</tt><a name="(part._.Receiving_data)"></a>Receiving data</h3><p>There are a number of approaches to receiving data. Incoming stanzas
may be processed synchronously (either blocking the execution thread
or not) or via callbacks. Callbacks may be one-off or repeating.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-receive))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-receive</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Gets the next available stanza from the connection buffer.</div></p><p>Returns <span class="RktVal">#f</span> if no stanzas are available.</p><p>Example:</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive%29%29" class="RktValLink" data-pltdoc="x">xmpp-receive</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"><span class="RktRes">#f</span></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-receive-blocking))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive-blocking%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-receive-blocking</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Gets the next available stanza from the connection buffer.
If the buffer is empty, block until a new stanza is received
or the connection is lost.</div></p><p>Example:</p><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive-blocking%29%29" class="RktValLink" data-pltdoc="x">xmpp-receive-blocking</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span></p></blockquote><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;Asynchronous_operation&quot;">4<tt>&nbsp;</tt><a name="(part._.Asynchronous_operation)"></a>Asynchronous operation</h3><p>A common way to interact with XMPP is by registering callbacks.
These must conform to the contract <span class="RktSym">xmpp-handler/c</span> and
get called whenever a stanza arrives.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-set-handler))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-handler%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-set-handler</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktVar">handler</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">handler</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xmpp-handler/c</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym">default-handler</span></td></tr></table></blockquote></div><div class="SIntrapara">Sets a handler that gets called every time a new stanza arrives.</div></p><p>If called with no arguments, the default handler is installed, which is
<span class="emph">required</span> when using the functions in the <a href="#%28part._callbacks%29" data-pltdoc="x">Callbacks</a> section.</p><p>Otherwise, the argument must be a function taking a stanza (<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span>)
and a <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><span class="RktSym">connnection</span><span class="RktPn">)</span> as arguments. The return value is ignored.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Only one handler may be set per connection.
However, it is possible to have arbitrarily many callbacks.</p></blockquote></blockquote></blockquote><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-handler%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-handler</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stanza</span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">"Received a new stanza of type "</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._car%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stanza</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-stop-handler))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-stop-handler%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-stop-handler</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Remove any previously installed handler for <span class="RktVar">conn</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-handler))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-handler%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-handler</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xmpp-handler/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Return the installed handler for <span class="RktVar">conn</span>, if any.
Otherwise, return <span class="RktVal">#f</span>.</div></p><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;callbacks&quot;">5<tt>&nbsp;</tt><a name="(part._callbacks)"></a>Callbacks</h3><p>For the procedures in this section to operate as intended, the default
handler must be installed on the target connection, via
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-handler%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-handler</a></span><span class="stt"> </span><span class="RktSym">conn</span><span class="RktPn">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-set-callback))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-set-callback</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVar">callback</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="RktValLink" data-pltdoc="x">xmpp-callback/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Install a callback on <span class="RktVar">conn</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-set-callback/once))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%2Fonce%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-set-callback/once</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVar">callback</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fonce%2Fc%29%29" class="RktValLink" data-pltdoc="x">xmpp-callback/once/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Install a callback that uninstalls itself when it signals to the
handler that it&rsquo;s done by returning <span class="RktVal">#t</span>. These callbacks
are the basis for the interactions described in <a href="#%28part._interact%29" data-pltdoc="x">Responding to remote interactions</a>.</div></p><p>Example: <span class="refelem"><span class="refcolumn"><span class="refcontent">Remember to install the default handler.</span></span></span></p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-handler%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-handler</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Callback that matches any IQ stanzas of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">type "result", prints a message and returns #t.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">iq-result-handler-once</span><span class="hspace">&nbsp;</span><span class="RktSym">stanza</span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">match</span><span class="hspace">&nbsp;</span><span class="RktSym">stanza</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">iq</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-no-order</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">type</span><span class="hspace">&nbsp;</span><span class="RktVal">"result"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"An IQ of type result has been seen."</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-callback</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktSym">iq-result-handler-once</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Two pings are sent, but only the first response to arrive</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will cause the callback to run.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%29%29" class="RktValLink" data-pltdoc="x">xmpp-send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">iq</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">from</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-domainpart%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-domainpart</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-id%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-id</a></span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">ping</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">xmlns</span><span class="hspace">&nbsp;</span><span class="RktVal">"urn:xmpp:ping"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%29%29" class="RktValLink" data-pltdoc="x">xmpp-send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">iq</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">from</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-domainpart%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-domainpart</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-id%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-id</a></span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">ping</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">xmlns</span><span class="hspace">&nbsp;</span><span class="RktVal">"urn:xmpp:ping"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktRes">"An IQ of type result has been seen."</span></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-unset-callback))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-unset-callback%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-unset-callback</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVar">callback</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="RktValLink" data-pltdoc="x">xmpp-callback/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">If installed, <span class="RktVar">callback</span> will be removed from this
connection. It doesn&rsquo;t matter if the callback was installed
by <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-callback</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%2Fonce%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-callback/once</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-callbacks))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callbacks%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-callbacks</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="RktValLink" data-pltdoc="x">xmpp-callback/c</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Return the list of callbacks currently installed in this
connection.</div></p><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;interact&quot;">6<tt>&nbsp;</tt><a name="(part._interact)"></a>Responding to remote interactions</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-send/callback))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%2Fcallback%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-send/callback</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVar">stanza</span><span class="hspace">&nbsp;</span><span class="RktVar">callback</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stanza</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="RktValLink" data-pltdoc="x">xmpp-callback/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Send a stanza and call <span class="RktVar">callback</span> when a response
is received.</div></p><p>A response is defined as an incoming stanza of the same
type and with the same <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-id%2529%2529&amp;version=8.6" class="Sq" data-pltdoc="x">id</a>.</p><p>This is implemented by wrapping <span class="RktVar">callback</span> with
the right logic to detect responses and registering the
new function via <span class="RktSym">xmpp-callback/once</span>.</p><p>Example:</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">ping</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">iq</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">from</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._jid-domainpart%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">jid-domainpart</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection-jid%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection-jid</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-id%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-id</a></span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">ping</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">xmlns</span><span class="hspace">&nbsp;</span><span class="RktVal">"urn:xmpp:ping"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%2Fcallback%29%29" class="RktValLink" data-pltdoc="x">xmpp-send/callback</a></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktSym">ping</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">response</span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"PONG!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktRes">"PONG!"</span></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xmpp/transport..rkt)._xmpp-send/await))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%2Fawait%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-send/await</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span><span class="RktVar">stanza</span><span class="hspace">&nbsp;</span><span class="RktVar">callback</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">conn</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stanza</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="RktValLink" data-pltdoc="x">xmpp-callback/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Send a stanza and wait for the result of <span class="RktVar">callback</span>.</div></p><p>This is similar to <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-send%2Fcallback%29%29" class="RktValLink" data-pltdoc="x">xmpp-send/callback</a></span> except that
the call will block until <span class="RktVar">callback</span> returns.</p><h3 x-source-module="(lib &quot;xmpp/transport/xmpp-transport.scrbl&quot;)" x-source-pkg="XMPP" x-part-tag="&quot;contracts&quot;">7<tt>&nbsp;</tt><a name="(part._contracts)"></a>Contracts</h3><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="Larger">&#128073;&#127997;</span>
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=contracts.html&amp;version=8.6" class="Sq" data-pltdoc="x">Contracts</a>
 in <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=index.html&amp;version=8.6" class="Sq" data-pltdoc="x">The Racket Guide</a>
 introduces contracts.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>contract</p></div></div><p class="RForeground"><a name="(def._((lib._xmpp/transport..rkt)._stanza/c))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._stanza%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">stanza/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defined as:</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></p></blockquote><p>The return value of <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive%29%29" class="RktValLink" data-pltdoc="x">xmpp-receive</a></span> (but not
<span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-receive-blocking%29%29" class="RktValLink" data-pltdoc="x">xmpp-receive-blocking</a></span> which always returns
an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr/c</a></span>).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>contract</p></div></div><p class="RForeground"><a name="(def._((lib._xmpp/transport..rkt)._xmpp-handler/c))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><span class="RktSymDef RktSym">xmpp-handler/c</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defined as:</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._stanza%2Fc%29%29" class="RktValLink" data-pltdoc="x">stanza/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote><p>A procedure suitable for <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-handler%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-handler</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>contract</p></div></div><p class="RForeground"><a name="(def._((lib._xmpp/transport..rkt)._xmpp-callback/c))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-callback/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defined as:</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._stanza%2Fc%29%29" class="RktValLink" data-pltdoc="x">stanza/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span></p></blockquote><p>A procedure suitable for <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-callback</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>contract</p></div></div><p class="RForeground"><a name="(def._((lib._xmpp/transport..rkt)._xmpp-callback/once/c))"></a><span title="Provided from: xmpp/transport | Package: XMPP"><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-callback%2Fonce%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">xmpp-callback/once/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defined as:</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._stanza%2Fc%29%29" class="RktValLink" data-pltdoc="x">stanza/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xmpp-core&amp;rel=index.html%23%2528def._%2528%2528lib._xmpp%252Fcore..rkt%2529._xmpp-connection%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xmpp-connection?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></p></blockquote><p>A procedure suitable for <span class="RktSym"><a href="#%28def._%28%28lib._xmpp%2Ftransport..rkt%29._xmpp-set-callback%2Fonce%29%29" class="RktValLink" data-pltdoc="x">xmpp-set-callback/once</a></span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/xmpp-transport/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:06:58 GMT -->
</html>