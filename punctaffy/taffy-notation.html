<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/punctaffy/taffy-notation.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5&nbsp;Defining Hyperbracket Notations for Racket</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Punctaffy</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="intro.html" class="tocviewlink" data-pltdoc="x">Introduction to Punctaffy</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="motivation.html" class="tocviewlink" data-pltdoc="x">Motivation for Punctaffy</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="hypersnippet-data.html" class="tocviewlink" data-pltdoc="x">Representation of Hypersnippet Data</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="token-of-syntax.html" class="tocviewlink" data-pltdoc="x">Tokens of Syntax Object Tree Content</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Defining Hyperbracket Notations for Racket</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="baseline-notations.html" class="tocviewlink" data-pltdoc="x">Baseline Punctaffy Hyperbracket Notations</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="hyperbracketed-util.html" class="tocviewlink" data-pltdoc="x">Hyperbracketed Operations</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">taffy-<wbr></wbr>notation?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-impl~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">taffy-<wbr></wbr>notation-<wbr></wbr>impl?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> &nbsp;</span>taffy-<wbr></wbr>notation</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._make-taffy-notation-impl%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>taffy-<wbr></wbr>notation-<wbr></wbr>impl</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">taffy-<wbr></wbr>notation-<wbr></wbr>akin-<wbr></wbr>to-<wbr></wbr>^&lt;&gt;d?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-impl~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">taffy-<wbr></wbr>notation-<wbr></wbr>akin-<wbr></wbr>to-<wbr></wbr>^&lt;&gt;d-<wbr></wbr>impl?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation-akin-to-~5e~3c~3ed%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> &nbsp;</span>taffy-<wbr></wbr>notation-<wbr></wbr>akin-<wbr></wbr>to-<wbr></wbr>^&lt;&gt;d</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-parse%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">taffy-<wbr></wbr>notation-<wbr></wbr>akin-<wbr></wbr>to-<wbr></wbr>^&lt;&gt;d-<wbr></wbr>parse</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._make-taffy-notation-akin-to-~5e~3c~3ed-impl%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>taffy-<wbr></wbr>notation-<wbr></wbr>akin-<wbr></wbr>to-<wbr></wbr>^&lt;&gt;d-<wbr></wbr>impl</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._makeshift-taffy-notation-akin-to-~5e~3c~3ed%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">makeshift-<wbr></wbr>taffy-<wbr></wbr>notation-<wbr></wbr>akin-<wbr></wbr>to-<wbr></wbr>^&lt;&gt;d</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="token-of-syntax.html" title="backward to &quot;4 Tokens of Syntax Object Tree Content&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Punctaffy&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="baseline-notations.html" title="forward to &quot;6 Baseline Punctaffy Hyperbracket Notations&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;punctaffy/scribblings/punctaffy.scrbl&quot;)" x-source-pkg="punctaffy-doc" x-part-tag="&quot;taffy-notation&quot;">5<tt>&nbsp;</tt><a name="(part._taffy-notation)"></a><a name="(mod-path._punctaffy/taffy-notation)"></a>Defining Hyperbracket Notations for Racket</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">punctaffy/taffy-notation</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/punctaffy-lib" title="Install this package using `raco pkg install punctaffy-lib`"><span class="stt">punctaffy-lib</span></a></span></td></tr></table></p><p>In order to use higher-dimensional <a href="hypersnippet-data.html#%28tech._hypernest%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypernests</span></a> for syntax in Racket, we supply some new notations that augment Racket&rsquo;s low-dimensional lexical structure. We do this not by replacing Racket&rsquo;s existing reader and macro system, but by letting each Racket macro that cares about higher-dimensional structure do its own parsing of that structure when it needs to. Before this parsing occurs, we represent the structure in Racket syntax in the form of what we call <a name="(tech._hyperbracket)"></a><span style="font-style: italic">hyperbrackets</span>.</p><p>Punctaffy hasn&rsquo;t been put to the test yet, and there may still be some uncertainty about what the best notation for hypernest-structured programs will be. We may augment Punctaffy with new ideas in the future, and not all possible paths will necessarily lead to the same feature set.</p><p>With this in mind, we define our most basic hyperbracket notation keywords in such a way that they have no innate functionality but can instead be assigned meanings (hopefully consistent enough ones) by multiple external DSL implementations.</p><p>This is a pretty typical scenario in Racket. Racket has identifiers like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">else</a></span>, and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span> that are only assigned meaning by some external DSL.</p><p>Typically these DSLs recognize these special identifiers using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxcmp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._free-identifier%7E3d%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">free-identifier=?</a></span>. This approach allows new keywords to be added over time by exporting them from new (module path, symbol) pairs.</p><p>We take a different approach: We treat the identity as part of the functionality of the macro itself, not of the identifier. For each new piece of hyperbracket notation that should be identifiable, we provide some innate way to identify it, essentially treating it as a small macro DSL of its very own. As various experimental DSL implementations based on Punctaffy&rsquo;s hyperbracket notation mature and stabilize their macro calling conventions, we expect hyperbrackets to be a patchwork of multiple DSLs anyway, so we embrace that from the start.</p><p>Note that the term "hyperbracket" could be generalized beyond our Racket-specific use here. Punctaffy&rsquo;s own <span class="RktSym"><a href="hypernest.html#%28def._%28%28lib._punctaffy%2Fhypersnippet%2Fhypernest..rkt%29._hypernest-bracket~3f%29%29" class="RktValLink" data-pltdoc="x">hypernest-bracket?</a></span> values are an abstract syntax representation of 0-dimensional hyperbrackets with labels in certain places. The ones we&rsquo;re talking about here are instead a concrete (indeed, <span class="emph">unparsed</span>) representation of 1-dimensional hyperbrackets with no labels. We&rsquo;re using the generic term "hyperbracket" for the latter because it&rsquo;s the one that&rsquo;s most likely to be relevant most often in the context of Punctaffy&rsquo;s use as a Racket library, since Racket already has 1-dimensional hypernest <a href="hypersnippet-data.html#%28tech._bump%29" class="techoutside" data-pltdoc="x"><span class="techinside">bumps</span></a> (namely, paren matchings) to attach hyperbrackets to.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._taffy-notation~3f))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">taffy-notation?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._taffy-notation-impl~3f))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-impl~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">taffy-notation-impl?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._punctaffy/taffy-notation..rkt)._prop~3ataffy-notation))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValDef RktValLink" data-pltdoc="x">prop:taffy-notation</a></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Structure_Type_Property_Contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract..rkt%2529._struct-type-property%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">struct-type-property/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-impl~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-impl?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Structure type property operations for <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> notation keywords. Every macro that needs to be recognized as part of the hyperbracket notation by a hyperbracket parser should implement this property. That way, non-hyperbracket identifiers can be recognized as such, thus allowing hyperbrackets to coexist with existing Racket notations without the risk of making the user&rsquo;s intent ambiguous.</div></p><p>A structure type that implements this property should generally also implement <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prop%7E3aprocedure%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prop:procedure</a></span> to display an informative error message when the notation is used in a position where a Racket expression is expected.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._make-taffy-notation-impl))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._make-taffy-notation-impl%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-taffy-notation-impl</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-impl~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-impl?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns something a struct can use to implement the <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation</a></span> interface.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._taffy-notation-akin-to-~5e~3c~3ed~3f))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._taffy-notation-akin-to-~5e~3c~3ed-impl~3f))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-impl~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d-impl?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._punctaffy/taffy-notation..rkt)._prop~3ataffy-notation-akin-to-~5e~3c~3ed))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation-akin-to-~5e~3c~3ed%29%29" class="RktValDef RktValLink" data-pltdoc="x">prop:taffy-notation-akin-to-^&lt;&gt;d</a></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Structure_Type_Property_Contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract..rkt%2529._struct-type-property%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">struct-type-property/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-impl~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d-impl?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Structure type property operations for <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> keywords that behave similarly to <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span>, or <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span> when invoked in prefix position.</div></p><p>A structure type that implements this property should generally also implement <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation</a></span> to signify the fact that it&rsquo;s a hyperbracket notation.</p><p>A structure type that implements this property should generally also implement <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prop%7E3aprocedure%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prop:procedure</a></span> to display an informative error message when the notation is used in a position where a Racket expression is expected.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._taffy-notation-akin-to-~5e~3c~3ed-parse))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-parse%29%29" class="RktValDef RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d-parse</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">op</span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash-equal?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fdc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">hash/dc</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">direction</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">degree</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">contents</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=match.html%23%2528form._%2528%2528lib._racket%252Fmatch..rkt%2529._match%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">match</a></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">direction</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&gt;</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">degree</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._syntax%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">natural?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">contents</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="token-of-syntax.html#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-with-free-vars~3c~3d%2Fc%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-with-free-vars&lt;=/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sets.html%23%2528def._%2528%2528lib._racket%252Fset..rkt%2529._set%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">set</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">degree</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">contents</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">op</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Uses the given <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d?</a></span> instance to parse the given syntax term. The term should be a syntax list which begins with an identifier that&rsquo;s bound to the given notation.</div></p><p>The result is an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>-based hash that represents several components parsed from the term:</p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">'</span><span class="RktVal">lexical-context</span></td></tr></table></blockquote><p>An identifier that may refer to certain information Punctaffy needs to keep track of about the <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a>-nesting depth that this <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> interacts with. Currently, this identifier is not actually used (TODO), but we intend to use this identifier&rsquo;s lexical information to prevent a macro call&rsquo;s macro-introduced uses of hyperstacks from interacting unintentionally with the macro caller&rsquo;s uses of hyperbrackets. A hyperbracket-nesting depth is more than a number and will likely be represented by a <a href="hyperstack.html#%28tech._hyperstack%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperstack</span></a>, possibly together with information about variables that are in scope at the various depths.</p><p>Hyperbracket notations implementing this method may differ about how they determine the <span class="RktVal">'</span><span class="RktVal">lexical-context</span> identifier, but when the user doesn&rsquo;t specify it explicitly in the hyperbracket&rsquo;s syntax, the usual default will be an identifier whose name is the symbol <span class="RktVal">'</span><span class="RktVal">#%lexical-context</span> and whose lexical information matches that of <span class="RktVar">stx</span>.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">'</span><span class="RktVal">direction</span></td></tr></table></blockquote><p>A representation of whether this call site of this notation represents an opening hyperbracket or a closing hyperbracket. If it&rsquo;s an opening hyperbracket like <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span> or <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span>, this is the symbol <span class="RktVal">'</span><span class="RktVal">&lt;</span>. Otherwise, it&rsquo;s a closing hyperbracket like <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span> or <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span>, and this is the symbol <span class="RktVal">'</span><span class="RktVal">&gt;</span>.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">'</span><span class="RktVal">degree</span></td></tr></table></blockquote><p>A syntax object containing a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">natural?</a></span> number, representing the <a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a> of the <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a>. This corresponds to the degree the user would specify explicitly when using <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span> or <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span>.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">'</span><span class="RktVal">contents</span></td></tr></table></blockquote><p>A list of syntax objects. This <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> usage site only takes up some outermost part of <span class="RktVar">stx</span>, and some unconsumed region of syntax remains beyond that, which is what this represents.</p><p>If this use site is an opening hyperbracket, this remaining syntax begins inside it, but it may contain its own closing hyperbrackets that continue into syntax that&rsquo;s outside again. If this use site is a closing bracket, this remaining syntax begins outside it, but it may contain closing hyperbrackets that close this one and continue into syntax that&rsquo;s inside again. Calling it the "contents" is somewhat of a misnomer. (TODO: Rename <span class="RktVal">'</span><span class="RktVal">contents</span> to use a term like "tail," "rest," "beyond," or "remainder" instead, ideally referring to its role as a piece of the given <span class="RktVar">stx</span> rather than a piece of the hyperbracket we parsed out.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span></td></tr></table></blockquote><p>A <a href="token-of-syntax.html#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> value representing the concrete syntax of the <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> usage site itself, possibly separated from the specific values of <span class="RktVal">'</span><span class="RktVal">lexical-context</span>, <span class="RktVal">'</span><span class="RktVal">degree</span>, and <span class="RktVal">'</span><span class="RktVal">contents</span> so that these can be replaced with new values.</p><p>The token may have free variables named <span class="RktVal">'</span><span class="RktVal">lexical-context</span>, <span class="RktVal">'</span><span class="RktVal">degree</span>, and <span class="RktVal">'</span><span class="RktVal">contents</span>. If the token is converted to a list of trees using <span class="RktSym"><a href="token-of-syntax.html#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-~3esyntax-list%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-&gt;syntax-list</a></span>, it should result in a single tree that closely resembles <span class="RktVar">stx</span>, particularly if the free variables are substituted with the corresponding information that this method call parsed out.</p><p>Specifically, since the substitution takes lists of syntax as input, the <span class="RktVal">'</span><span class="RktVal">lexical-context</span> and <span class="RktVal">'</span><span class="RktVal">degree</span> parts of the parsed hash need to be wrapped in singleton lists to perform the substitution that most faithfully reproduces <span class="RktVar">stx</span>. The <span class="RktVal">'</span><span class="RktVal">contents</span> part of the parsed hash is already a list and can be substituted in without wrapping it.</p><p>The reason this <span class="RktVal">'</span><span class="RktVal">token-of-syntax</span> entry exists in the parse result is to support usage scenarios that involve parsing a program, transforming parts of it, and reconstructing it with the new parts. For instance, <span class="RktSym"><a href="hyperbracketed-util.html#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote%29%29" class="RktStxLink" data-pltdoc="x">taffy-quote</a></span> uses this so that it can process interpolated expressions without disrupting the syntax of hyperbrackets that appear in the quoted region of code.</p></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._make-taffy-notation-akin-to-~5e~3c~3ed-impl))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._make-taffy-notation-akin-to-~5e~3c~3ed-impl%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-taffy-notation-akin-to-^&lt;&gt;d-impl</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">parse</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-impl~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d-impl?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">parse</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash-equal?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fdc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">hash/dc</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">direction</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">degree</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">contents</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=match.html%23%2528form._%2528%2528lib._racket%252Fmatch..rkt%2529._match%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">match</a></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">direction</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&gt;</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">degree</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._syntax%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">natural?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">contents</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="token-of-syntax.html#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-with-free-vars~3c~3d%2Fc%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-with-free-vars&lt;=/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sets.html%23%2528def._%2528%2528lib._racket%252Fset..rkt%2529._set%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">set</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">degree</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">contents</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Given an implementation for <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-parse%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d-parse</a></span>, returns something a struct can use to implement the <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation-akin-to-~5e~3c~3ed%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation-akin-to-^&lt;&gt;d</a></span> interface.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/taffy-notation..rkt)._makeshift-taffy-notation-akin-to-~5e~3c~3ed))"></a><span title="Provided from: punctaffy/taffy-notation | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._makeshift-taffy-notation-akin-to-~5e~3c~3ed%29%29" class="RktValDef RktValLink" data-pltdoc="x">makeshift-taffy-notation-akin-to-^&lt;&gt;d</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">parse</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d?</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">parse</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash-equal?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fdc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">hash/dc</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktVar">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">direction</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">degree</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">contents</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=match.html%23%2528form._%2528%2528lib._racket%252Fmatch..rkt%2529._match%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">match</a></span><span class="hspace">&nbsp;</span><span class="RktVar">k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">direction</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">&gt;</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">degree</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._syntax%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">natural?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">'</span><span class="RktVal">contents</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">token-of-syntax</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="token-of-syntax.html#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-with-free-vars~3c~3d%2Fc%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-with-free-vars&lt;=/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sets.html%23%2528def._%2528%2528lib._racket%252Fset..rkt%2529._set%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">set</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lexical-context</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">degree</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">contents</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Given an implementation for <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation-akin-to-~5e~3c~3ed-parse%29%29" class="RktValLink" data-pltdoc="x">taffy-notation-akin-to-^&lt;&gt;d-parse</a></span>, returns a macro implementation value that can be used with <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-syntax</a></span> to define a prefix <a href="#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> notation similar to <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span>, or <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span>.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="token-of-syntax.html" title="backward to &quot;4 Tokens of Syntax Object Tree Content&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Punctaffy&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="baseline-notations.html" title="forward to &quot;6 Baseline Punctaffy Hyperbracket Notations&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/punctaffy/taffy-notation.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
</html>