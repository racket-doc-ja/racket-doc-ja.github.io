<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/punctaffy/token-of-syntax.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4&nbsp;Tokens of Syntax Object Tree Content</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Punctaffy</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="intro.html" class="tocviewlink" data-pltdoc="x">Introduction to Punctaffy</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="motivation.html" class="tocviewlink" data-pltdoc="x">Motivation for Punctaffy</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="hypersnippet-data.html" class="tocviewlink" data-pltdoc="x">Representation of Hypersnippet Data</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Tokens of Syntax Object Tree Content</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="taffy-notation.html" class="tocviewlink" data-pltdoc="x">Defining Hyperbracket Notations for Racket</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="baseline-notations.html" class="tocviewlink" data-pltdoc="x">Baseline Punctaffy Hyperbracket Notations</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="hyperbracketed-util.html" class="tocviewlink" data-pltdoc="x">Hyperbracketed Operations</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-with-free-vars~3c~3d%2Fc%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>with-<wbr></wbr>free-<wbr></wbr>vars&lt;=/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">singular-<wbr></wbr>token-<wbr></wbr>of-<wbr></wbr>syntax?</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>splice</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>splice?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice-elements%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>splice-<wbr></wbr>elements</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>assert-<wbr></wbr>singular</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>assert-<wbr></wbr>singular?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular-body%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>assert-<wbr></wbr>singular-<wbr></wbr>body</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>splicing-<wbr></wbr>free-<wbr></wbr>var</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>splicing-<wbr></wbr>free-<wbr></wbr>var?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var-var%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>splicing-<wbr></wbr>free-<wbr></wbr>var-<wbr></wbr>var</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>syntax</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>syntax?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax-stx-example%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>syntax-<wbr></wbr>stx-<wbr></wbr>example</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax-e%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>syntax-<wbr></wbr>e</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>box</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>box?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box-element%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>box-<wbr></wbr>element</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>vector</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>vector?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector-elements%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>vector-<wbr></wbr>elements</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>prefab-<wbr></wbr>struct</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>prefab-<wbr></wbr>struct?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct-prefab-struct-example%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>prefab-<wbr></wbr>struct-<wbr></wbr>prefab-<wbr></wbr>struct-<wbr></wbr>example</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct-elements%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>prefab-<wbr></wbr>struct-<wbr></wbr>elements</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>list*</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>list*?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A-elements%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>list*-<wbr></wbr>elements</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A-tail%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>list*-<wbr></wbr>tail</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>other-<wbr></wbr>value</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>other-<wbr></wbr>value?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value-value%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>beginning-<wbr></wbr>with-<wbr></wbr>other-<wbr></wbr>value-<wbr></wbr>value</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._list-~3etoken-of-syntax%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">list-<wbr></wbr>&gt;token-<wbr></wbr>of-<wbr></wbr>syntax</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-substitute%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>substitute</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-~3esyntax-list%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>&gt;syntax-<wbr></wbr>list</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._syntax-~3etoken-of-syntax%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>&gt;token-<wbr></wbr>of-<wbr></wbr>syntax</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-autoquote%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">token-<wbr></wbr>of-<wbr></wbr>syntax-<wbr></wbr>autoquote</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="hyperstack.html" title="backward to &quot;3.5 Hyperstacks: The State of a Text-to-Hypernest Parser&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Punctaffy&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="taffy-notation.html" title="forward to &quot;5 Defining Hyperbracket Notations for Racket&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;punctaffy/scribblings/punctaffy.scrbl&quot;)" x-source-pkg="punctaffy-doc" x-part-tag="&quot;token-of-syntax&quot;">4<tt>&nbsp;</tt><a name="(part._token-of-syntax)"></a><a name="(mod-path._punctaffy/syntax-object/token-of-syntax)"></a>Tokens of Syntax Object Tree Content</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">punctaffy/syntax-object/token-of-syntax</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/punctaffy-lib" title="Install this package using `raco pkg install punctaffy-lib`"><span class="stt">punctaffy-lib</span></a></span></td></tr></table></p><p>Traditionally, a bracket appears as text in a text stream, and this token can be pulled out of the text stream and treated as a string. In Punctaffy, when we recognize <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._taffy-notation~3f%29%29" class="RktValLink" data-pltdoc="x">taffy-notation?</a></span> <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbracket</span></a> notations, we need to pull a token out of a program represented by a Racket syntax object. This results in a list of adjacent syntax objects, where each syntax object can have holes in it. Punctaffy supplies a data structure to represent this kind of data, which we call a token of syntax object tree content, or a <a name="(tech._token._of._syntax)"></a><span style="font-style: italic">token of syntax</span> for short.</p><p>The holes in a token of syntax are given mutually unique labels, and the labels are part of the token&rsquo;s representation. We call these labels the token&rsquo;s free variables. They can be arbitrary values identified by <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>, but usually, they&rsquo;re interned symbols.</p><p>In our representation, a token of syntax can also have nodes in it that represent assertions that they have only one subform once the holes are filled in. At the moment, these assertions are checked only when the token is converted into a list of syntax objects.</p><p>(In Punctaffy&rsquo;s <a href="hypersnippet-data.html#%28tech._hypersnippet%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypersnippet</span></a> terminology, a token of syntax is a <a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a>-2 hypersnippet of the textual code, as opposed to a string token, which is a degree-1 hypersnippet. We could represent tokens of syntax in a way that&rsquo;s generalizable to arbitrarily high degrees by using <a href="hypersnippet-data.html#%28tech._hypernest%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypernests</span></a>, but instead we dedicate some unique attention to this data structure so we can manipulate it efficiently.)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether the value is a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-with-free-vars~3c~3d/c))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-with-free-vars~3c~3d%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-with-free-vars&lt;=/c</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">free-vars-set</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._flat-contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flat-contract?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">free-vars-set</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sets.html%23%2528def._%2528%2528lib._racket%252Fset..rkt%2529._set-equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">set-equal?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flat contract which recognizes any <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> whose set of free variables is the same as or a subset of the given set.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._singular-token-of-syntax~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether the value is a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> that has a single syntax object or a single hole at its root.</div></p><p>Note that if the token has a single hole at its root, that hole could be filled with more than one (or fewer than one) syntax object. What <span class="stt">singular-token-of-syntax?</span> checks for has to do with representation details of the token of syntax itself, not what its shape is when it&rsquo;s embedded in a syntax object tree.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-splice))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-splice</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-splice</a></span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">elements</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-splice</a></span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-splice~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splice?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-splice-elements))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice-elements%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splice-elements</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._list%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splice?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> consisting of a sequence of fewer than one or more than one syntax object or hole.</div></p><p>The element list is a list of <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span> values. This just prevents <span class="stt">token-of-syntax-beginning-with-splice?</span> values from being nested, which would otherwise be an unnecessary source of variation between token values.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-assert-singular))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular</a></span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">body</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular</a></span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-assert-singular~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-assert-singular-body))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular-body%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular-body</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which carries an assertion that once it&rsquo;s used to build a list of syntax objects, that list will have a single element.</div></p><p>This node type makes up for the fact that all compositions of tokens of syntax are splicing compositions in the sense of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote-splicing</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._unsyntax-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unsyntax-splicing</a></span>. Using this, it&rsquo;s possible to assert that a certain use site actually only admits a single element, as would be the case with a non-splicing <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._unsyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unsyntax</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-splicing-free-var))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-splicing-free-var</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-splicing-free-var</a></span><span class="hspace">&nbsp;</span><span class="RktVar">var</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-splicing-free-var</a></span><span class="hspace">&nbsp;</span><span class="RktVar">var</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-splicing-free-var~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splicing-free-var?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-splicing-free-var-var))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var-var%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splicing-free-var-var</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splicing-free-var~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splicing-free-var?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which consists of nothing but a single hole.</div></p><p>The hole is labeled with an arbitrary object to use as a free variable name, which will be identified using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>.</p><p>When this token is converted to a list of syntax objects, the caller performing that conversion will specify some list of syntax objects to substitute for the variable, and that list will be the result. In the name of the node type, we specifically refer to this a "splicing" free variable occurrence, since the way it deals with a list of trees makes it more analogous to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote-splicing</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._unsyntax-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unsyntax-splicing</a></span> than to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._unsyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unsyntax</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-syntax))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktVar">stx-example</span><span class="hspace">&nbsp;</span><span class="RktVar">e</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">stx-example</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">e</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktVar">stx-example</span><span class="hspace">&nbsp;</span><span class="RktVar">e</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-syntax~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-syntax-stx-example))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax-stx-example%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax-stx-example</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-syntax-e))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax-e%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax-e</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-syntax?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has a syntax object wrapper at its root.</div></p><p>When this token is converted to a list of trees, it asserts that the given <span class="RktVar">e</span> token results in a single value, and then it invokes <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._datum-%7E3esyntax%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">datum-&gt;syntax</a></span> to wrap that value as a syntax object. The the lexical information, source location, and syntax properties of the wrapper are copied from the given <span class="RktVar">stx-example</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-box))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-box</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-box</a></span><span class="hspace">&nbsp;</span><span class="RktVar">element</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">element</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-box</a></span><span class="hspace">&nbsp;</span><span class="RktVar">element</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-box~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-box?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-box-element))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box-element%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-box-element</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-box?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has an immutable box at its root.</div></p><p>When this token is converted to a list of trees, it asserts that the given <span class="RktVar">element</span> token results in a single value, and then it wraps that value in an immutable box.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-vector))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-vector</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-vector</a></span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">elements</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-vector</a></span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-vector~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-vector?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-vector-elements))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector-elements%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-vector-elements</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-vector~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-vector?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has an immutable vector at its root.</div></p><p>When this token is converted to a list of trees, it takes the list of trees that result from the given <span class="RktVar">elements</span> token and wraps them as the elements of an immutable vector.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-prefab-struct))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct</a></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktSym">prefab-example</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=lathe-comforts&amp;rel=struct.html%23%2528def._%2528%2528lib._lathe-comforts%252Fstruct..rkt%2529._immutable-prefab-struct%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable-prefab-struct?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">elements</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prefab-struct-example</span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-prefab-struct~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-prefab-struct-prefab-struct-example))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct-prefab-struct-example%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct-prefab-struct-example</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=lathe-comforts&amp;rel=struct.html%23%2528def._%2528%2528lib._lathe-comforts%252Fstruct..rkt%2529._immutable-prefab-struct%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable-prefab-struct?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-prefab-struct-elements))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct-elements%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct-elements</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-prefab-struct~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-prefab-struct?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has an immutable prefab struct at its root.</div></p><p>When this token is converted to a list of trees, it takes the list of trees that result from the given <span class="RktVar">elements</span> token and wraps them as the fields of an immutable prefab struct with the same <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._prefab-struct-key%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prefab-struct-key</a></span> as <span class="RktVar">prefab-struct-example</span>. If the prefab key isn&rsquo;t consistent with the computed number of fields, this raises an error. For now, this error is reported in terms of an internal call to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-prefab-struct%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-prefab-struct</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-list*))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-list*</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-list*</a></span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="hspace">&nbsp;</span><span class="RktVar">tail</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">elements</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">tail</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-list*</a></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">elements</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-list*~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-list*?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-list*-elements))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A-elements%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-list*-elements</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-list*?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-list*-tail))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A-tail%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-list*-tail</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-list%2A~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-list*?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has a possibly improper list its root.</div></p><p>When this token is converted to a list of trees, it asserts that the given <span class="RktVar">tail</span> token results in a single value, and then it invokes <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list*</a></span> to wrap that as the tail of a possibly improper list beginning with the elements obtained from the result of <span class="RktVar">elements</span>.</p><p>If <span class="RktVar">tail</span> results in a single tree that&rsquo;s a proper list, the result will also be a single tree that&rsquo;s a proper list.</p><p>If <span class="RktVar">elements</span> results in a list of zero trees, the result will just be the result of <span class="RktVar">tail</span>, even if that&rsquo;s not a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._pair%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">pair?</a></span>.</p><p>Unlike with <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-splice~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-splice?</a></span> nodes, we make no attempt to enforce that two <span class="stt">token-of-syntax-beginning-with-list*?</span> nodes aren&rsquo;t nested in a way that could be combined into a single node. (TODO: Should we?)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-other-value))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value</a></span><span class="hspace">&nbsp;</span><span class="RktVar">value</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">value</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=boxes.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._box%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=lathe-comforts&amp;rel=struct.html%23%2528def._%2528%2528lib._lathe-comforts%252Fstruct..rkt%2529._immutable-prefab-struct%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable-prefab-struct?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._pair%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">pair?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>match expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value</a></span><span class="hspace">&nbsp;</span><span class="RktVar">value</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-other-value~3f))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-beginning-with-other-value-value))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value-value%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value-value</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">token</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=boxes.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._box%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">box?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">vector?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._immutable%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=lathe-comforts&amp;rel=struct.html%23%2528def._%2528%2528lib._lathe-comforts%252Fstruct..rkt%2529._immutable-prefab-struct%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">immutable-prefab-struct?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._pair%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">pair?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Struct-like operations which construct and deconstruct a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has a miscellaneous value at its root.</div></p><p>When this token is converted to a list of trees, it results in just one tree, namely the given value.</p><p>The value must not be a syntax object, an immutable box, an immutable vector, an immutable prefab struct, or a pair. This just prevents <span class="stt">token-of-syntax-beginning-with-other-value?</span> values from being represented in alternative ways using the other token of syntax constructors, which would be an unnecessary source of variation between token values.</p><p>(TODO: What if Racket&rsquo;s syntax supports more values in the future? In <span class="RktSym"><a href="hyperbracketed-util.html#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="RktStxLink" data-pltdoc="x">taffy-let</a></span> and our other hyperbracketed operations, we defensively disallow certain values that people might want hypersnippets to reach into someday, like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span> values. Maybe we should disallow those here too. Alternatively, maybe we should just allow every type of value here, a policy which might be good for performance so that we don&rsquo;t traverse into certain data instances further than necessary.)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._list-~3etoken-of-syntax))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._list-~3etoken-of-syntax%29%29" class="RktValDef RktValLink" data-pltdoc="x">list-&gt;token-of-syntax</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tokens</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tokens</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Given any number of <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">tokens of syntax</span></a>, returns a single token of syntax that converts to the same list of syntaxes they all do when their resulting lists are concatenated together.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-substitute))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-substitute%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-substitute</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">prefix</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">suffixes</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prefix</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">suffixes</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash-equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Transforms a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> by substituting other tokens of syntax for its free variables.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-~3esyntax-list))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-~3esyntax-list%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-&gt;syntax-list</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">prefix</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">suffixes</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prefix</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">suffixes</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash-equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Converts a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> into a list of syntax objects by substituting other lists of syntax objects for its free variables.</div></p><p>This operation may fail if assertions in the token are unmet, such as the assertions of single-element intermediate results made by nodes like <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-assert-singular~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-assert-singular?</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-box~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-box?</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._syntax-~3etoken-of-syntax))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._syntax-~3etoken-of-syntax%29%29" class="RktValDef RktValLink" data-pltdoc="x">syntax-&gt;token-of-syntax</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has the given syntax object at its root.</div></p><p>This is like <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value%29%29" class="RktStxLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value</a></span>, but it also traverses into syntax objects, immutable boxes, immutable vectors, immutable prefab structs, and pairs to construct the appropriate token nodes.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._punctaffy/syntax-object/token-of-syntax..rkt)._token-of-syntax-autoquote))"></a><span title="Provided from: punctaffy/syntax-object/token-of-syntax | Package: punctaffy-lib"><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-autoquote%29%29" class="RktValDef RktValLink" data-pltdoc="x">token-of-syntax-autoquote</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">quote-expr</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">datum-&gt;result--id</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">token</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._singular-token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">singular-token-of-syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">quote-expr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">datum-&gt;result--id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fstx..rkt%2529._identifier%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">token</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a <a href="#%28tech._token._of._syntax%29" class="techoutside" data-pltdoc="x"><span class="techinside">token of syntax</span></a> which has the same free variables as <span class="RktVar">token</span> and essentially serves as its quoted form.</div></p><p>We&rsquo;ll call the resulting token <span class="RktVar">quotation-token</span>.</p><p>When <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-~3esyntax-list%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-&gt;syntax-list</a></span> converts <span class="RktVar">quotation-token</span> to a list of trees, the result is a list containing some number of Racket expressions which, when run, result in lists of trees. When these lists of trees are appended, they form the result of a simulated invocation of <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-~3esyntax-list%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-&gt;syntax-list</a></span> on <span class="RktVar">token</span>.</p><p>The substitutions this simulated call supplies for <span class="RktVar">token</span>&rsquo;s free variables are obtained from the substitutions of <span class="RktVar">quotation-token</span>&rsquo;s corresponding free variables. In particular, the substitution of each of <span class="RktVar">quotation-token</span>&rsquo;s free variables should be a list of Racket expressions, each of which should return a list of trees when it&rsquo;s run. The concatenation of these lists of trees is the substitution for <span class="RktVar">token</span>&rsquo;s corresponding free variable.</p><p>The <span class="RktVar">quote-expr</span> argument should be a function that takes a Racket syntax object and returns another Racket syntax object that represents an expression which quotes it. This is applied to <span class="RktSym"><a href="#%28def._%28%28lib._punctaffy%2Fsyntax-object%2Ftoken-of-syntax..rkt%29._token-of-syntax-beginning-with-other-value~3f%29%29" class="RktValLink" data-pltdoc="x">token-of-syntax-beginning-with-other-value?</a></span> nodes of the token, and it effectively determines what kind of quoting is performed. For instance, <span class="RktVar">quote-expr</span> could be <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">expr</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktMeta">#`'#,</span><span class="RktVar">expr</span><span class="RktPn">)</span> to do the usual kind of quoting of values, which preserves many values but converts several types of mutable data structures into immutable ones. (TODO: Test with multiple choices of <span class="RktVar">quote-expr</span> to be sure it works, and see if we can explain better.)</p><p>The <span class="RktVar">datum-&gt;result--id</span> argument should be an identifier bound to a syntax that can be used like <span class="RktPn">(</span><span class="RktVar">datum-&gt;result</span><span class="stt"> </span><span class="RktVar">stx-example</span><span class="stt"> </span><span class="RktVar">datum-expr</span><span class="RktPn">)</span> to transfer a syntax wrapper. For instance, the following syntax would create syntax wrappers that carry over the lexical information of the original syntax wrappers, but not their source locations or syntax properties:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=Defining_Simple_Macros.html%23%2528form._%2528%2528lib._syntax%252Fparse%252Fdefine..rkt%2529._define-syntax-parse-rule%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-syntax-parse-rule</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">datum-&gt;result</span><span class="hspace">&nbsp;</span><span class="RktVar">stx-example</span><span class="hspace">&nbsp;</span><span class="RktVar">datum</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax-%7E3edatum%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax-&gt;datum</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Syntax_Quoting__quote-syntax.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quote-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktVar">stx-example</span><span class="hspace">&nbsp;</span><span class="RktPn">#:local</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>(TODO: Test with multiple choices of <span class="RktVar">datum-&gt;result--id</span> to be sure it works, and see if we can explain better.)</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="hyperstack.html" title="backward to &quot;3.5 Hyperstacks: The State of a Text-to-Hypernest Parser&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Punctaffy&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="taffy-notation.html" title="forward to &quot;5 Defining Hyperbracket Notations for Racket&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/punctaffy/token-of-syntax.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
</html>