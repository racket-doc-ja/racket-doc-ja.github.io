<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/punctaffy/hyperbracketed-util.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>7&nbsp;Hyperbracketed Operations</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Punctaffy</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="intro.html" class="tocviewlink" data-pltdoc="x">Introduction to Punctaffy</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="motivation.html" class="tocviewlink" data-pltdoc="x">Motivation for Punctaffy</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="hypersnippet-data.html" class="tocviewlink" data-pltdoc="x">Representation of Hypersnippet Data</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="token-of-syntax.html" class="tocviewlink" data-pltdoc="x">Tokens of Syntax Object Tree Content</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="taffy-notation.html" class="tocviewlink" data-pltdoc="x">Defining Hyperbracket Notations for Racket</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="baseline-notations.html" class="tocviewlink" data-pltdoc="x">Baseline Punctaffy Hyperbracket Notations</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Hyperbracketed Operations</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>7&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Hyperbracketed Operations</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">7.1&nbsp;</td><td><a href="#%28part._quote%29" class="tocviewlink" data-pltdoc="x">Hyperbracketed Quotation Operators</a></td></tr><tr><td align="right">7.2&nbsp;</td><td><a href="#%28part._let%29" class="tocviewlink" data-pltdoc="x">Hyperbracketed Binding Operators</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">7.1<tt>&nbsp;</tt></span><a href="#%28part._quote%29" class="tocsubseclink" data-pltdoc="x">Hyperbracketed Quotation Operators</a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">taffy-<wbr></wbr>quote</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote-syntax%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">taffy-<wbr></wbr>quote-<wbr></wbr>syntax</span></span></a></td></tr><tr><td><span class="tocsublinknumber">7.2<tt>&nbsp;</tt></span><a href="#%28part._let%29" class="tocsubseclink" data-pltdoc="x">Hyperbracketed Binding Operators</a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">taffy-<wbr></wbr>let</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-map%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">list-<wbr></wbr>taffy-<wbr></wbr>map</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-bind%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">list-<wbr></wbr>taffy-<wbr></wbr>bind</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="baseline-notations.html" title="backward to &quot;6 Baseline Punctaffy Hyperbracket Notations&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Punctaffy&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3 x-source-module="(lib &quot;punctaffy/scribblings/punctaffy.scrbl&quot;)" x-source-pkg="punctaffy-doc" x-part-tag="&quot;hyperbracketed-util&quot;">7<tt>&nbsp;</tt><a name="(part._hyperbracketed-util)"></a>Hyperbracketed Operations</h3><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._quote%29" class="toclink" data-pltdoc="x">7.1<span class="hspace">&nbsp;</span>Hyperbracketed Quotation Operators</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._let%29" class="toclink" data-pltdoc="x">7.2<span class="hspace">&nbsp;</span>Hyperbracketed Binding Operators</a></p></td></tr></table><h4 x-source-module="(lib &quot;punctaffy/scribblings/punctaffy.scrbl&quot;)" x-source-pkg="punctaffy-doc" x-part-tag="&quot;quote&quot;">7.1<tt>&nbsp;</tt><a name="(part._quote)"></a><a name="(mod-path._punctaffy/quote)"></a>Hyperbracketed Quotation Operators</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._punctaffy%2Fquote%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">punctaffy/quote</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/punctaffy-lib" title="Install this package using `raco pkg install punctaffy-lib`"><span class="stt">punctaffy-lib</span></a></span></td></tr></table></p><p>Quasiquotation is perhaps the most widespread example of an operation with a subterm of the shape that&rsquo;s known in Punctaffy as a "<a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a>-2 <a href="hypersnippet-data.html#%28tech._hypersnippet%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypersnippet</span></a>." It may not be the absolute best example of hypersnippet syntax, since quotation is a complex problem domain with additional concerns around escape sequences and round-tripping, but it is the example that motivates the Punctaffy library.</p><p>The <a href="#%28mod-path._punctaffy%2Fquote%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">punctaffy/quote</span></a> module is for variations of Racket&rsquo;s own quotation forms that have been redesigned to use Punctaffy&rsquo;s <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbrackets</span></a> for their syntax. This allows them to gracefully support nesting, as in the quotation of code that is itself performing quotation, without requiring that code to be modified with escape sequences. Furthermore, since each of these quotation operators will use the <span class="emph">same</span> hyperbracket syntax to represent its nesting structure, they can each gracefully nest within each other.</p><p>This design leads to a more consistent experience than the current situation in Racket: At the time of writing, Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasiquote</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span> can accommodate nested occurrences of themselves but not of each other. Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%252Floc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax/loc</a></span> can accommodate nested occurrences of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span> but not of itself.</p><p>For instance, <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-map%29%29" class="RktStxLink" data-pltdoc="x">list-taffy-map</a></span> can accommodate nested occurrences of <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote%29%29" class="RktStxLink" data-pltdoc="x">taffy-quote</a></span>, as demonstrated in <a href="intro.html" data-pltdoc="x">Introduction to Punctaffy</a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._punctaffy/quote..rkt)._taffy-quote))"></a><span title="Provided from: punctaffy/quote | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">taffy-quote</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">content-and-splices</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">content-and-splices</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">atom</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">content-and-splices</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#&amp;</span><span class="RktVal">content-and-splices</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">spliced-list-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">spliced-list-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A variant of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quote</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasiquote</a></span> that uses <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbrackets</span></a> to delimit a quoted <a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a>-2 <a href="hypersnippet-data.html#%28tech._hypersnippet%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypersnippet</span></a> of datum values. Expressions can be supplied within the degree-1 <a href="hypersnippet-data.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">holes</span></a> of this hypersnippet to cause their resulting lists to be spliced into the surrounding datum content.</div></p><p>Specifically, the holes behave like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote-splicing</a></span>. It&rsquo;s possible to achieve the behavior of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span> by wrapping the expression in a call to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span>.</p><p>The <span class="RktVar">content-and-splices</span> is converted to a list of datum values as follows:</p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">atom</span></td></tr></table></blockquote><p>Produces a single datum: Itself.</p><p>The <span class="RktVar">atom</span> value must be an instance of one of a specific list of types. Generally, we intend to support exactly those values which are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> to some immutable value that can appear in Racket code. Some of these values can accommodate internal s-expressions, including spliced expressions, and they&rsquo;re covered by the other cases of this grammar (<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=boxes.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._box%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">box?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._pair%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">pair?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">vector?</a></span>, and instances of immutable prefab structure types). The <span class="RktVar">atom</span> case is a catch-all for those values which are unlikely to ever accommodate internal s-expressions.</p><p>Values supported:</p><ul><li><p>This operation supports quoting <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=characters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._char%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">char?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=keywords.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._keyword%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">keyword?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">number?</a></span>, and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=extflonums.html%23%2528def._%2528%2528lib._racket%252Fextflonum..rkt%2529._extflonum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">extflonum?</a></span> values. These are immutable values with reader syntaxes, so they fit the description exactly.</p></li><li><p>This operation supports quoting <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span> values. If the value is a mutable string, it is converted to its immutable equivalent.</p></li><li><p>This operation supports quoting interned <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span> values that aren&rsquo;t bound to hyperbracket notation in the sense of <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation</a></span>. This exclusion of hyperbracket notation ensures that such identifiers can be given special-case meanings in the future without breaking code that expected them to be processed like non-hyperbracket syntax. Note that some uses of hyperbracket notation may appear not to be excluded the same way as others, and that&rsquo;s because as long as nested hyperbrackets are properly matched up, the way this operation processes them tends to have results that explicitly simulate what would have happened if the same identifiers hadn&rsquo;t been bound to hyperbracket notation in the first place.</p></li><li><p>This operation supports quoting uninterned and unreadable symbols, just like it supports interned symbols. (The same exclusion of hyperbracket notation applies.) Unlike the other values supported here, uninterned and unreadable symbols don&rsquo;t have a reader syntax and hence don&rsquo;t appear in textual Racket code, but they do oftentimes appear in macro-generated and dynamically generated Racket code.</p></li></ul><p>Notable exclusions:</p><ul><li><p>Out of caution, this operation does not yet support quoting <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span> values. There are several places where the design of this support could go wrong: If interpolated expressions were allowed in hashes, their evaluation order would be hard to make guarantees about. If they were allowed in hash keys, expressions that were syntactically identical might end up counting as duplicate keys at read time or expansion time even if their run-time results would have been distinct. As for allowing interpolated expressions to appear in hash entries&rsquo; associated values, there isn&rsquo;t a consistent precedent; Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasiquote</a></span> seems to support <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span> there, but <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span> leave that location alone, processing neither template variables nor <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._unsyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unsyntax</a></span>. To ensure that we don&rsquo;t implement a behavior prematurely that turns out to be surprising in practice, we don&rsquo;t allow hashes to be quoted at all.</p></li><li><p>Out of caution, this operation does not yet support quoting <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=eval.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._compiled-expression%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">compiled-expression?</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span> values. These values&rsquo; reader syntaxes are complex languages, and it&rsquo;s easy to conceive of the idea that they may someday be extended in in ways that support internal s-expressions.</p></li><li><p>Out of caution, this operation does not yet support quoting <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=flonums.html%23%2528def._%2528%2528lib._racket%252Fflonum..rkt%2529._flvector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flvector?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=fixnums.html%23%2528def._%2528%2528lib._racket%252Ffixnum..rkt%2529._fxvector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fxvector?</a></span>, or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span> values. These are mutable values, and it&rsquo;s possible Racket will someday introduce immutable equivalents that are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> to them.</p></li></ul></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Produces a single datum: Itself, an empty list.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktVar">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">content-and-splices</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Produces a single datum by combining some datum values using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list*</a></span>. The first <span class="RktVar">content-and-splices</span> produces any number of leading arguments for the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list*</a></span> call. The second <span class="RktVar">content-and-splices</span> must produce a single datum, and that datum serves as the final <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list*</a></span> argument, namely the tail.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">#&amp;</span><span class="RktVal">content-and-splices</span></td></tr></table></blockquote><p>Produces a single datum: An immutable box which contains the datum value produced by the given <span class="RktVar">content-and-splices</span> term. The given <span class="RktVar">content-and-splices</span> term must produce a single datum.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr></table></blockquote><p>Produces a single datum: An immutable vector which contains all the datum values produced by each of the given <span class="RktVar">content-and-splices</span> terms.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr></table></blockquote><p>Produces a single datum: A prefab struct which contains all the datum values produced by each of the given <span class="RktVar">content-and-splices</span> terms. The prefab struct&rsquo;s key is given by <span class="RktVar">prefab-key-datum</span>, which must be a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._prefab-key%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prefab-key?</a></span> value which specifies no mutable fields.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Parses as an opening hyperbracket, and produces datum values which denote a similar opening hyperbracket.</p><p>Within the <span class="RktVar">deeper-content-and-splices</span> of an opening hyperbracket like this of some degree N, the same grammar as <span class="RktVar">content-and-splices</span> applies except that occurrences of <span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span><span class="stt"> </span><span class="RktVar">degree</span><span class="stt"> </span><span class="RktVar">shallower-content-and-splices</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> for degree less than N instead serve as hyperbrackets that close this opening hyperbracket.</p><p>Within the <span class="RktVar">shallower-content-and-splices</span> of a closing hyperbracket of some degree N, the same grammar applies that did at the location of the corresponding opening bracket, except that occurrences of <span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span><span class="stt"> </span><span class="RktVar">degree</span><span class="stt"> </span><span class="RktVar">deeper-content-and-splices</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> for degree less than N instead serve as hyperbrackets that close this closing hyperbracket (resuming the body of the opening hyperbracket again).</p><p>(TODO: That&rsquo;s a mouthful. Can we reword this?)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">spliced-list-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Evaluates the expressions <span class="RktVar">spliced-list-expr</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span> and produces whatever datum values they return. Each expression must return a list; the elements of the lists, appended together, are the datum values to return. The elements can be any type of value, even types that this operation doesn&rsquo;t allow in the quoted content.</p></blockquote><p>Each intermediate <span class="RktVar">content-and-splices</span> may result in any number of datum values, but the overall <span class="RktVar">content-and-splices</span> must result in exactly one datum. If it results in some other number of datum values, an error is raised.</p><p>Graph structure in the input is not necessarily preserved. If the input contains a reference cycle, this operation will not necessarily finish expanding. This situation may be accommodated better in the future, either by making sure this graph structure is preserved or by producing a more informative error message.</p><p>This operation parses hyperbracket notation in its own way. It supports all the individual notations currently exported by Punctaffy (including the <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span>, and <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span> notations mentioned here), and it also supports some user-defined operations if they&rsquo;re defined using <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation-akin-to-~5e~3c~3ed%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation-akin-to-^&lt;&gt;d</a></span>. Other <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation</a></span> notations are not yet supported but may be supported in the future.</p><p>For examples of using <span class="stt">taffy-quote</span>, see <a href="intro.html" data-pltdoc="x">Introduction to Punctaffy</a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._punctaffy/quote..rkt)._taffy-quote-syntax))"></a><span title="Provided from: punctaffy/quote | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote-syntax%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">taffy-quote-syntax</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-local</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">content-and-splices</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-local</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:local</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">content-and-splices</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">atom</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">content-and-splices</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#&amp;</span><span class="RktVal">content-and-splices</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-content-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">spliced-list-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">spliced-list-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote%29%29" class="RktStxLink" data-pltdoc="x">taffy-quote</a></span>, but instead of producing a datum, produces a syntax object.</div></p><p>If the <span class="RktPn">#:local</span> option is not supplied, the scope sets of the quoted content are pruned using the same method as <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Syntax_Quoting__quote-syntax.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quote-syntax</a></span> to omit the scope for local bindings that surround the <span class="stt">taffy-quote-syntax</span> expression. The only syntax objects in the result that are pruned this way are the ones that correspond to the quoted content; syntax objects that are spliced into the result are left alone.</p><p>Note that the result values of spliced expressions must still be non-syntax lists. The <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax-&gt;list</a></span> function may come in handy.</p><p>Whereas <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote%29%29" class="RktStxLink" data-pltdoc="x">taffy-quote</a></span> imitates <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quote</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasiquote</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Fquote..rkt%29._taffy-quote-syntax%29%29" class="RktStxLink" data-pltdoc="x">taffy-quote-syntax</a></span> imitates <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Syntax_Quoting__quote-syntax.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quote-syntax</a></span>.</p><p>It may be tempting to compare the splicing support of <span class="stt">taffy-quote-syntax</span> to the splicing support of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span>. However, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span> supports template variables and ellispes, and <span class="stt">taffy-quote-syntax</span> does not. In the future, Punctaffy may offer a <span class="stt">taffy-syntax</span> operation that works more like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span>. For a little more in-depth exploration of what <span class="stt">taffy-syntax</span> would hypothetically look like, see <a href="motivation.html#%28part._potential-use-case-ellipsis-unsyntax%29" data-pltdoc="x">Potential Application: Interactions Between <span class="RktSym"><span class="RktStxLink">unsyntax</span></span> and Ellipses</a>.</p><h4 x-source-module="(lib &quot;punctaffy/scribblings/punctaffy.scrbl&quot;)" x-source-pkg="punctaffy-doc" x-part-tag="&quot;let&quot;">7.2<tt>&nbsp;</tt><a name="(part._let)"></a><a name="(mod-path._punctaffy/let)"></a>Hyperbracketed Binding Operators</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._punctaffy%2Flet%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">punctaffy/let</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/punctaffy-lib" title="Install this package using `raco pkg install punctaffy-lib`"><span class="stt">punctaffy-lib</span></a></span></td></tr></table></p><p>This module uses the higher-dimensional lexical structure afforded by <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbrackets</span></a> to define operations that use a kind of higher-dimensional lexical scope.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._punctaffy/let..rkt)._taffy-let))"></a><span title="Provided from: punctaffy/let | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">taffy-let</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">val-expr</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">body-expr-and-splices</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">atomic-form</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#&amp;</span><span class="RktVal">body-expr-and-splices</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">spliced-expr</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A variant of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let</a></span> that uses <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbrackets</span></a> to delimit a lexical scope in the shape of a <a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a>-2 <a href="hypersnippet-data.html#%28tech._hypersnippet%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypersnippet</span></a>. Expressions supplied in the degree-1 <a href="hypersnippet-data.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">holes</span></a> of this hypersnippet behave just as they would normally but without the variable bindings in scope.</div></p><p>The <span class="RktVar">body-expr-and-splices</span> is converted to a syntax object as follows:</p><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVar">atomic-form</span></td></tr></table></blockquote><p>Produces itself.</p><p>The <span class="RktVar">atomic-form</span> expression must be represented by an instance of one of a specific list of types. Generally, we intend to support exactly those representations which can appear in Racket code. Some of these values can accommodate internal s-expressions, including spliced expressions, and they&rsquo;re covered by the other cases of this grammar (<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=boxes.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._box%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">box?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._pair%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">pair?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=vectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._vector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">vector?</a></span>, and instances of immutable prefab structure types). The <span class="RktVar">atomic-form</span> case is a catch-all for those values which are unlikely to ever accommodate internal s-expressions.</p><p>Values supported:</p><ul><li><p>This operation accommodates subforms represented by <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=flonums.html%23%2528def._%2528%2528lib._racket%252Fflonum..rkt%2529._flvector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flvector?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=fixnums.html%23%2528def._%2528%2528lib._racket%252Ffixnum..rkt%2529._fxvector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fxvector?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=characters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._char%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">char?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=bytestrings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._bytes%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">bytes?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=keywords.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._keyword%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">keyword?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">number?</a></span>, and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=extflonums.html%23%2528def._%2528%2528lib._racket%252Fextflonum..rkt%2529._extflonum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">extflonum?</a></span> values. These are representations with reader syntaxes, so they fit the description exactly.</p></li><li><p>This operation accommodates subforms represented by interned <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span> values that aren&rsquo;t bound to hyperbracket notation in the sense of <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation</a></span>. This exclusion of hyperbracket notation ensures that such identifiers can be given special-case meanings in the future without breaking code that expected them to be processed like non-hyperbracket syntax. Note that some uses of hyperbracket notation may appear not to be excluded the same way as others, and that&rsquo;s because as long as nested hyperbrackets are properly matched up, the way this operation processes them tends to have results that explicitly simulate what would have happened if the same identifiers hadn&rsquo;t been bound to hyperbracket notation in the first place.</p></li><li><p>This operation also accommodates subforms represented by uninterned and unreadable symbols, just like it supports interned symbols. (The same exclusion of hyperbracket notation applies.) Unlike the other values supported here, uninterned and unreadable symbols don&rsquo;t have a reader syntax and hence don&rsquo;t appear in textual Racket code, but they do oftentimes appear in macro-generated and dynamically generated Racket code.</p></li></ul><p>Notable exclusions:</p><ul><li><p>Out of caution, this operation does not yet accommodate subforms represented by <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash?</a></span> values. If interpolated expressions were allowed in hashes, their evaluation order would be hard to make guarantees about. If they were allowed in hash keys, expressions that were syntactically identical might end up counting as duplicate keys at read time or expansion time even if their run-time results would have been distinct. As for allowing interpolated expressions to appear in hash entries&rsquo; associated values, there isn&rsquo;t a consistent precedent; Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasiquote</a></span> seems to support <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unquote</a></span> there, but <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._quasisyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quasisyntax</a></span> leave that location alone, processing neither template variables nor <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fqqstx..rkt%2529._unsyntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unsyntax</a></span>. To ensure that we don&rsquo;t implement a behavior prematurely that turns out to be surprising in practice, we don&rsquo;t allow hashes to appear as subforms here.</p></li><li><p>Out of caution, this operation does not yet support quoting <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=eval.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._compiled-expression%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">compiled-expression?</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span> values. These values&rsquo; reader syntaxes are complex languages, and it&rsquo;s easy to conceive of the idea that they may someday be extended in in ways that support internal s-expressions. (TODO: Reconsider this.)</p></li></ul><p>(TODO: Currently, we actually let all kinds of representations through, including the ones we&rsquo;ve listed as being excluded here. Let&rsquo;s fix this.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Produces itself, a syntax value represented by an empty list.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktVar">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Produces a syntax value similar to itself, but with the pair&rsquo;s head and tail processed recursively.</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">#&amp;</span><span class="RktVal">body-expr-and-splices</span></td></tr></table></blockquote><p>Produces a syntax value similar to itself, but with the box&rsquo;s value processed recursively. The box must be immutable.</p><p>(TODO: Actually, we don&rsquo;t enforce immutability yet.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr></table></blockquote><p>Produces a syntax value similar to itself, but with the vector&rsquo;s elements each processed recursively. The vector must be immutable.</p><p>(TODO: Actually, we don&rsquo;t enforce immutability yet.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr></table></blockquote><p>Produces a syntax value similar to itself, but with the prefab struct&rsquo;s field values each processed recursively. The prefab struct must not have any mutable fields.</p><p>(TODO: Actually, we don&rsquo;t enforce immutability yet.)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Parses as an opening hyperbracket, and produces a syntax object which denotes a similar opening hyperbracket. The exact way the hyperbracket is re-encoded as syntax is unspecified.</p><p>Within the <span class="RktVar">deeper-body-expr-and-splices</span> of an opening hyperbracket like this of some degree N, the same grammar as <span class="RktVar">body-expr-and-splices</span> applies except that occurrences of <span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span><span class="stt"> </span><span class="RktVar">degree</span><span class="stt"> </span><span class="RktVar">shallower-body-expr-and-splices</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> for degree less than N instead serve as hyperbrackets that close this opening hyperbracket.</p><p>Within the <span class="RktVar">shallower-body-expr-and-splices</span> of a closing hyperbracket of some degree N, the same grammar applies that did at the location of the corresponding opening bracket, except that occurrences of <span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span><span class="stt"> </span><span class="RktVar">degree</span><span class="stt"> </span><span class="RktVar">deeper-body-expr-and-splices</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> for degree less than N instead serve as hyperbrackets that close this closing hyperbracket (resuming the body of the opening hyperbracket again).</p><p>(TODO: That&rsquo;s a mouthful. Can we reword this?)</p></blockquote><blockquote class="leftindent"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">spliced-expr</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Produces an expression which, when evaluated, is equivalent to <span class="RktVar">spliced-expr</span>.</p><p>When this syntax object appears in a context where it&rsquo;s quoted, like as a subform of an expression that&rsquo;s a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">quote</a></span> form, a box, a vector, or a prefab struct, the result is unspecified.</p></blockquote><p>As noted, all boxes, vectors, and prefab structs that are encountered in the body must be immutable. Racket&rsquo;s reader usually produces immutable boxes and immutable vectors as syntax anyway, and it usually refuses to produce mutable prefab structs as syntax, so the presence of mutability indicates a devoted effort is underway somewhere. If this operation cloned the object to process its elements, the fact that the result was a different mutable object than the original might interfere with whatever that devoted effort was meant to accomplish. Instead, out of caution, the presence of a mutable box, vector, or prefab struct is currently treated as an error.</p><p>Graph structure in the input is not necessarily preserved. If the input contains a reference cycle, this operation will not necessarily finish expanding. This situation may be accommodated better in the future, either by making sure this graph structure is preserved or by producing a more informative error message.</p><p>This operation parses hyperbracket notation in its own way. It supports all the individual notations currently exported by Punctaffy (including the <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3ed%29%29" class="RktStxLink" data-pltdoc="x">^&gt;d</a></span>, <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span>, and <span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span> notations mentioned here), and it also supports some user-defined operations if they&rsquo;re defined using <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation-akin-to-~5e~3c~3ed%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation-akin-to-^&lt;&gt;d</a></span>. Other <span class="RktSym"><a href="taffy-notation.html#%28def._%28%28lib._punctaffy%2Ftaffy-notation..rkt%29._prop~3ataffy-notation%29%29" class="RktValLink" data-pltdoc="x">prop:taffy-notation</a></span> notations are not yet supported but may be supported in the future.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=parendown&amp;rel=index.html%23%2528form._%2528%2528lib._parendown%252Fmain..rkt%2529._pd%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">pd</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="RktStxLink" data-pltdoc="x">taffy-let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">35</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=parendown&amp;rel=index.html%23%2528form._%2528%2528lib._parendown%252Fmain..rkt%2529._pd%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">pd</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="RktStxLink" data-pltdoc="x">taffy-let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._error%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"whoops"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"whew"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"whew"</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._punctaffy/let..rkt)._list-taffy-map))"></a><span title="Provided from: punctaffy/let | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-map%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">list-taffy-map</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">body-expr-and-splices</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">atomic-form</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#&amp;</span><span class="RktVal">body-expr-and-splices</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">lst-expr</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">lst-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A variant of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> that uses <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbrackets</span></a> to delimit the transformation code in a <a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a>-2 <a href="hypersnippet-data.html#%28tech._hypersnippet%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypersnippet</span></a>. Expressions supplied in the degree-1 <a href="hypersnippet-data.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">holes</span></a> of this hypersnippet are evaluated first, and they supply the lists to iterate over. There must be at least one list given to iterate over, and all the lists must be of the same length.</div></p><p>Per <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span>, the result of the body on each iteration must be a single value. The overall result is a list of the body&rsquo;s results in the order they were generated.</p><p>The body hypersnippet is parsed according to the same rules as <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="RktStxLink" data-pltdoc="x">taffy-let</a></span>.</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=parendown&amp;rel=index.html%23%2528form._%2528%2528lib._parendown%252Fmain..rkt%2529._pd%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">pd</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-map%29%29" class="RktStxLink" data-pltdoc="x">list-taffy-map</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a, ~a!"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Goodnight"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"world"</span><span class="hspace">&nbsp;</span><span class="RktVal">"everybody"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'("Hello, world!" "Goodnight, everybody!")</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._punctaffy/let..rkt)._list-taffy-bind))"></a><span title="Provided from: punctaffy/let | Package: punctaffy-lib"><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-bind%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">list-taffy-bind</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">body-expr-and-splices</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">atomic-form</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktVar">body-expr-and-splices</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#&amp;</span><span class="RktVal">body-expr-and-splices</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#s</span><span class="RktVal">(</span><span class="RktVal">prefab-key-datum</span><span class="hspace">&nbsp;</span><span class="RktVal">body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3cd%29%29" class="RktStxLink" data-pltdoc="x">^&lt;d</a></span><span class="hspace">&nbsp;</span><span class="RktVar">degree</span><span class="hspace">&nbsp;</span><span class="RktVar">deeper-body-expr-and-splices</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">lst-expr</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">lst-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A variant of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Flist..rkt%2529._append-map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">append-map</a></span> (named like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=lathe-comforts&amp;rel=list.html%23%2528def._%2528%2528lib._lathe-comforts%252Flist..rkt%2529._list-bind%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list-bind</a></span> from Lathe Comforts) that uses <a href="taffy-notation.html#%28tech._hyperbracket%29" class="techoutside" data-pltdoc="x"><span class="techinside">hyperbrackets</span></a> to delimit the transformation code in a <a href="hypersnippet-data.html#%28tech._degree%29" class="techoutside" data-pltdoc="x"><span class="techinside">degree</span></a>-2 <a href="hypersnippet-data.html#%28tech._hypersnippet%29" class="techoutside" data-pltdoc="x"><span class="techinside">hypersnippet</span></a>. Expressions supplied in the degree-1 <a href="hypersnippet-data.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">holes</span></a> of this hypersnippet are evaluated first, and they supply the lists to iterate over. There must be at least one list given to iterate over, and all the lists must be of the same length.</div></p><p>Per <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Flist..rkt%2529._append-map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">append-map</a></span>, the result of the body on each iteration must be a list. The overall result is the concatenation of the body&rsquo;s list results in the order they were generated.</p><p>The body hypersnippet is parsed according to the same rules as <span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._taffy-let%29%29" class="RktStxLink" data-pltdoc="x">taffy-let</a></span>.</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=parendown&amp;rel=index.html%23%2528form._%2528%2528lib._parendown%252Fmain..rkt%2529._pd%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">pd</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._punctaffy%2Flet..rkt%29._list-taffy-bind%29%29" class="RktStxLink" data-pltdoc="x">list-taffy-bind</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3c%29%29" class="RktStxLink" data-pltdoc="x">^&lt;</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="baseline-notations.html#%28form._%28%28lib._punctaffy%2Fmain..rkt%29._~5e~3e%29%29" class="RktStxLink" data-pltdoc="x">^&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktVar">/</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(1 2 3 4 5 6)</span></p></td></tr></table></blockquote></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="baseline-notations.html" title="backward to &quot;6 Baseline Punctaffy Hyperbracket Notations&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Punctaffy&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/punctaffy/hyperbracketed-util.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
</html>