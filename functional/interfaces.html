<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/functional/interfaces.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:23:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Interfaces</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Functional generic interfaces</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Interfaces</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="data-types.html" class="tocviewlink" data-pltdoc="x">Data types</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Interfaces</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._functors%29" class="tocviewlink" data-pltdoc="x">Functors</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._applicatives%29" class="tocviewlink" data-pltdoc="x">Applicatives</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._monads%29" class="tocviewlink" data-pltdoc="x">Monads</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._functors%29" class="tocsubseclink" data-pltdoc="x">Functors</a></td></tr><tr><td><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">gen:<span class="mywbr"> &nbsp;</span>functor</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._functor~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">functor?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._functor%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">functor/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._map%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">map</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.1.1<tt>&nbsp;</tt></span><a href="#%28part._custom-functors%29" class="tocsubseclink" data-pltdoc="x">Implementing new functors</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._applicatives%29" class="tocsubseclink" data-pltdoc="x">Applicatives</a></td></tr><tr><td><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">gen:<span class="mywbr"> &nbsp;</span>applicative</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._applicative~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">applicative?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._applicative%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">applicative/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pure</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pure?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">pure/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.1<tt>&nbsp;</tt></span><a href="#%28part._custom-applicatives%29" class="tocsubseclink" data-pltdoc="x">Implementing new applicative functors</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._monads%29" class="tocsubseclink" data-pltdoc="x">Monads</a></td></tr><tr><td><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._gen~3amonad%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">gen:<span class="mywbr"> &nbsp;</span>monad</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">monad?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad%2Fc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">monad/<span class="mywbr"> &nbsp;</span>c</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">chain</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">do</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&lt;-</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~e2~86~90%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&#8592;</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">join</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._map%2Fm%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">map/<span class="mywbr"> &nbsp;</span>m</span></span></a></td></tr><tr><td><span class="tocsublinknumber">1.3.1<tt>&nbsp;</tt></span><a href="#%28part._custom-monads%29" class="tocsubseclink" data-pltdoc="x">Implementing new monads</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Functional generic interfaces&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Functional generic interfaces&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="data-types.html" title="forward to &quot;2 Data types&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;interfaces&quot;">1<tt>&nbsp;</tt><a name="(part._interfaces)"></a>Interfaces</h3><h4 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;functors&quot;">1.1<tt>&nbsp;</tt><a name="(part._functors)"></a><a name="(mod-path._data/functor)"></a>Functors</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._data%2Ffunctor%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">data/functor</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/functional-lib" title="Install this package using `raco pkg install functional-lib`"><span class="stt">functional-lib</span></a></span></td></tr></table></p><p>A <a name="(tech._functor)"></a><span style="font-style: italic">functor</span> can be thought of as a kind of &#8220;container&#8221;. This can be something like a list or
hash map, which actually contains values, or something like a channel, which produces values over
time. All functors work with <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span>, which allows producing a new functor with the elements
&#8220;contained&#8221; by the functor modified by the mapping function.</p><p>For example, using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> on lists simply modifies each element of the list, just like
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> from <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;stream&gt;</span></p></td></tr></table></blockquote><p>However, unlike <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> from <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/base</span></a>, this more generic <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> can also
map over things like <a href="maybe.html#%28tech._optional._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">optional values</span></a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(just 3)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._nothing%29%29" class="RktValLink" data-pltdoc="x">nothing</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;nothing&gt;</span></p></td></tr></table></blockquote><p>Functors provide a way to manipulate data in a consistent way without needing to know the data&#8217;s
underlying structure. To ensure consistency and predictability, all implementations of
<span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxLink" data-pltdoc="x">gen:functor</a></span> must conform to the <a name="(tech._functor._law)"></a><span style="font-style: italic">functor laws</span>, of which there are two:</p><blockquote><ol><li><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Ffunction..rkt%2529._identity%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identity</a></span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span> must be equivalent to <span class="RktVar">x</span>.</p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._compose%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">compose</a></span><span class="stt"> </span><span class="RktVar">f</span><span class="stt"> </span><span class="RktVar">g</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span> must be equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="stt"> </span><span class="RktVar">f</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="stt"> </span><span class="RktVar">g</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></li></ol></blockquote><p>Most reasonable definitions of a functor will satisfy these laws already, but it is possible to write
an implementation that does not, and there is no guarantee that functions in this library will work
predictably on unlawful functors.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>interface</p></div></div><p class="RForeground"><a name="(form._((lib._data/functor..rkt)._gen~3afunctor))"></a><span title="Provided from: data/functor | Package: functional-lib"><span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">gen:functor</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/functor..rkt)._functor~3f))"></a><span title="Provided from: data/functor | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._functor~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">functor?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._data/functor..rkt)._functor/c))"></a><span title="Provided from: data/functor | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._functor%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">functor/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528tech._generic._interface%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">generic interface</span></a> that specifies <a href="#%28tech._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">functors</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/functor..rkt)._map))"></a><span title="Provided from: data/functor | Package: functional-lib"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValDef Sq RktValLink" data-pltdoc="x">map</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._functor~3f%29%29" class="RktValLink" data-pltdoc="x">functor?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Ffunctor..rkt%29._functor~3f%29%29" class="RktValLink" data-pltdoc="x">functor?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">f</span> to the <a href="#%28tech._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">functor</span></a> <span class="RktVar">x</span>.</div></p><h5 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;custom-functors&quot;">1.1.1<tt>&nbsp;</tt><a name="(part._custom-functors)"></a>Implementing new functors</h5><p>To define your own functors, simply implement the <span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxLink" data-pltdoc="x">gen:functor</a></span> <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528tech._generic._interface%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">generic interface</span></a> and
implement the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> method. The only implementation requirements are that methods conform to
their associated contracts and that they follow the <a href="#%28tech._functor._law%29" class="techoutside" data-pltdoc="x"><span class="techinside">functor laws</span></a>.</p><p>Here is an example implementation of the most trivial possible functor, the identity functor:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transparent</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxLink" data-pltdoc="x">gen:functor</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(id 13)</span></p></td></tr></table></blockquote><h4 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;applicatives&quot;">1.2<tt>&nbsp;</tt><a name="(part._applicatives)"></a><a name="(mod-path._data/applicative)"></a>Applicatives</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._data%2Fapplicative%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">data/applicative</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/functional-lib" title="Install this package using `raco pkg install functional-lib`"><span class="stt">functional-lib</span></a></span></td></tr></table></p><p><a name="(tech._applicative._functor)"></a><span style="font-style: italic">Applicative functors</span> generalize function application to work with any kind of data
structure, not just procedures. This is much like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prop%7E3aprocedure%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prop:procedure</a></span>, but it is specified via a
generic interface. Additionally, all implementations of <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="RktStxLink" data-pltdoc="x">gen:applicative</a></span> should also implement
<span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxLink" data-pltdoc="x">gen:functor</a></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(just 3)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._nothing%29%29" class="RktValLink" data-pltdoc="x">nothing</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;nothing&gt;</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence-&gt;list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(13 23 14 24 30 60 40 80)</span></p></td></tr></table></blockquote><p>In addition to the implementation of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._apply%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">apply</a></span>, the <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="RktStxLink" data-pltdoc="x">gen:applicative</a></span> interface must also
implement a function called <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span>. This function &#8220;lifts&#8221; an ordinary value into the functor.
For example, the <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span> function for lists is just <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span>, but the <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span>
function for optional values is <span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span>.</p><p>Like functors, applicative functors have their own set of <a name="(tech._applicative._functor._law)"></a><span style="font-style: italic">applicative functor laws</span> which all
implementations of <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="RktStxLink" data-pltdoc="x">gen:applicative</a></span> must conform to:</p><blockquote><ol><li><p><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Ffunction..rkt%2529._identity%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identity</a></span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span> must be equivalent to <span class="RktVar">x</span>.</p></li><li><p><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._compose%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">compose</a></span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">f</span><span class="stt"> </span><span class="RktVar">g</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span> must be equivalent to <span class="RktPn">(</span><span class="RktVar">f</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">g</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></li><li><p><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktVar">f</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span> must be equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">f</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></li></ol></blockquote><p>Most reasonable definitions of an applicative functor will satisfy these laws already, but it is
possible to write an implementation that does not, and there is no guarantee that functions in this
library will work predictably on unlawful applicative functors.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>interface</p></div></div><p class="RForeground"><a name="(form._((lib._data/applicative..rkt)._gen~3aapplicative))"></a><span title="Provided from: data/applicative | Package: functional-lib"><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">gen:applicative</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/applicative..rkt)._applicative~3f))"></a><span title="Provided from: data/applicative | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._applicative~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">applicative?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._data/applicative..rkt)._applicative/c))"></a><span title="Provided from: data/applicative | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._applicative%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">applicative/c</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528tech._generic._interface%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">generic interface</span></a> that specifies <a href="#%28tech._applicative._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">applicative functors</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/applicative..rkt)._pure))"></a><span title="Provided from: data/applicative | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValDef RktValLink" data-pltdoc="x">pure</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._applicative~3f%29%29" class="RktValLink" data-pltdoc="x">applicative?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Lifts a plain value into an <a href="#%28tech._applicative._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">applicative functor</span></a>. When initially called, this function simply
places the value in a box because it cannot yet know what kind of functor it needs to produce. When
used, the value will be coerced into a functor of the appropriate type using the relevant value&#8217;s
<span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span> method.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/applicative..rkt)._pure~3f))"></a><span title="Provided from: data/applicative | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">pure?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate that determines if a value is a boxed value that is awaiting coercion into a concrete type
of <a href="#%28tech._applicative._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">applicative functor</span></a>. Ideally, you should never need to use this function, but sometimes
values cannot be immediately coerced, so this can be needed.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/applicative..rkt)._pure/c))"></a><span title="Provided from: data/applicative | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">pure/c</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">val-ctc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">val-ctc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A contract that accepts boxed values awaiting coercion into a concrete type of <a href="#%28tech._applicative._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">applicative
functor</span></a>. Ideally, you should never need to use this function, but sometimes values cannot be
immediately coerced, so this can be needed.</div></p><h5 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;custom-applicatives&quot;">1.2.1<tt>&nbsp;</tt><a name="(part._custom-applicatives)"></a>Implementing new applicative functors</h5><p>Implementing your own applicative functors is somewhat more complicated than implementing plain
functors. You must implement two methods, named <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._apply%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">apply</a></span>. The former,
<span class="emph">unlike</span> the <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span> function exported by <a href="#%28mod-path._data%2Fapplicative%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">data/applicative</span></a>, should be a
function of <span class="emph">two</span> arguments, the first of which should be ignored. This is necessary in order to
properly perform dynamic dispatch with <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket/generic</span></a>, since some value must exist to
be dispatched on. The first argument is therefore the value being used for dispatch, but there is no
guarantee about what it is, so you should always ignore it completely.</p><p>Implementing the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._apply%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">apply</a></span> method is somewhat more straightforward. It should be a function of
two arguments, this first corresponding to the functor in application position and second a list of
functors provided as arguments in the application. It should produce an applicative functor result.</p><p>Here is an example implementation of the most trivial possible applicative functor, the identity
functor:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prefix-in%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">prefix-in</a></span><span class="hspace">&nbsp;</span><span class="RktSym">base:</span><span class="hspace">&nbsp;</span><span class="RktSym">racket/base</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transparent</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxLink" data-pltdoc="x">gen:functor</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="RktStxLink" data-pltdoc="x">gen:applicative</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._apply%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">apply</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">base:apply</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">base:map</span><span class="hspace">&nbsp;</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(id 5)</span></p></td></tr></table></blockquote><h4 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;monads&quot;">1.3<tt>&nbsp;</tt><a name="(part._monads)"></a><a name="(mod-path._data/monad)"></a>Monads</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._data%2Fmonad%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">data/monad</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/functional-lib" title="Install this package using `raco pkg install functional-lib`"><span class="stt">functional-lib</span></a></span></td></tr></table></p><p>A <a name="(tech._monad)"></a><span style="font-style: italic">monad</span> is a mechanism for sequencing pure values in a context. Monads are an extremely
general concept that are notoriously difficult to explain (despite being relatively simple once you
understand them), and I will not attempt to explain them here (though perhaps I will try someday).</p><p>All monads must also be <a href="#%28tech._applicative._functor%29" class="techoutside" data-pltdoc="x"><span class="techinside">applicative functors</span></a>, but they add one more method, called
<span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span>. The <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> method, much like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span>, applies a function to a value in a
context, but unlike <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span>, the applied function must produce a new monad, not a pure value.
Monads can be used to control sequencing of computation in a very flexible way.</p><p>Using the <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> function directly can become tedious and hard to read beyond a couple of
nested applications, so the <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> form is provided to make sequencing monadic operations more
pleasant to read and write.</p><p>Like functors and applicative functors, monads have their own set of <a name="(tech._monad._law)"></a><span style="font-style: italic">monad laws</span> which all
implementations of <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._gen~3amonad%29%29" class="RktStxLink" data-pltdoc="x">gen:monad</a></span> must conform to:</p><blockquote><ol><li><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktVar">f</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span> must be equivalent to <span class="RktPn">(</span><span class="RktVar">f</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span>.</p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span> must be equivalent to <span class="RktVar">x</span>.</p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktVar">g</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">f</span><span class="stt"> </span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span> must be equivalent to
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktVar">g</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktVar">f</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></li></ol></blockquote><p>Most reasonable definitions of a monad will satisfy these laws already, but it is possible to write an
implementation that does not, and there is no guarantee that functions in this library will work
predictably on unlawful monads.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>interface</p></div></div><p class="RForeground"><a name="(form._((lib._data/monad..rkt)._gen~3amonad))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._gen~3amonad%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">gen:monad</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/monad..rkt)._monad~3f))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">monad?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._data/monad..rkt)._monad/c))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><span class="RktSymDef RktSym">monad/c</span></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528tech._generic._interface%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">generic interface</span></a> that specifies <a href="#%28tech._monad%29" class="techoutside" data-pltdoc="x"><span class="techinside">monads</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/monad..rkt)._chain))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValDef RktValLink" data-pltdoc="x">chain</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">f</span> to the value within the monadic context <span class="RktVar">x</span> and produces a new monad as the
result.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._data/monad..rkt)._do))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">do</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">expr-or-clauses</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">expr-or-clauses</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">monad-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">do-clause</span><span class="hspace">&nbsp;</span><span class="RktVar">expr-or-clauses</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">do-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">match-pattern</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktVar">monad-expr</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">monad-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">internal-definition</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">monad-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Syntactic shorthand for successive, nested uses of <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span>. The <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> form allows
writing arbitrary sequential monadic operations without an excessive proliferation of lambdas and a
significant amount of rightward drift.</div></p><p>In its simplest form, <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> does nothing at all. Any <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> block containing only a single
expression is equivalent to the expression itself.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"hello, world"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"hello, world"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1 2 3 4)</span></p></td></tr></table></blockquote><p>This is obviously not particularly useful, but <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> becomes helpful when using multiple
sub-forms. Each <span class="RktVar">do-clause</span> may bind the result of a <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> operation, which may be
used in subsequent computations.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence-&gt;list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(2 4 6)</span></p></td></tr></table></blockquote><p>Specifically, any block of the form <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">x</span><span class="stt"> </span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="stt"> </span><span class="RktVar">m</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktVar">clause</span><span class="stt"> </span><span class="RktMeta">...+</span><span class="RktPn">)</span> is precisely equivalent to
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="stt"> </span><span class="RktVar">clause</span><span class="stt"> </span><span class="RktMeta">...+</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">m</span><span class="RktPn">)</span>. More generally, the binding identifier can be replaced
with a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=match.html%23%2528form._%2528%2528lib._racket%252Fmatch..rkt%2529._match%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">match</a></span> pattern, in which case the resulting code uses <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=match.html%23%2528form._%2528%2528lib._racket%252Fmatch..rkt%2529._match-lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">match-lambda</a></span> instead.</p><p>Not every <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> operation has a useful result. In that case, the binding brackets may be
omitted, simply leaving the <span class="RktVar">monad-expr</span>. In this case, a <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> call will still be
produced, but the result will not be bound anywhere.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence-&gt;list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">hello</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(hello hello hello)</span></p></td></tr></table></blockquote><p>Finally, arbitrary internal definitions may be interspersed between each <span class="RktVar">do-clause</span>. These
definitions do not produce new <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> calls, they simply create new bindings.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If a macro used within a <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> block produces a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin</a></span> form containing both internal
definitions and expressions, the whole form is spliced into the surrounding internal definition
context. All expressions will be simply evaluated for side-effects and will not result in any
additional calls to <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span>.</p></blockquote></blockquote></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence-&gt;list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">prettify</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528lib._racket%252Fformat..rkt%2529._%7E7ea%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">~a</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktVal">": "</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">prettify</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'("2: a" "2: b" "4: a" "4: b")</span></p></td></tr></table></blockquote><p>Internal definitions defined within <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span> blocks may refer to all previous bindings, but not
subsequent ones. However, multiple internal definitions directly next to one another may be mutually
recursive, so long as they are not separated by a <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calls-b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._add1%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._-%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">calls-b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">(just -12)</span></p></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._data/monad..rkt)._~3c-))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&lt;-</a></span></span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._data/monad..rkt)._~e2~86~90))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~e2~86~90%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&#8592;</a></span></span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Recognized specially within forms like <span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span>. Using either form as an expression is a syntax
error.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/monad..rkt)._join))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="RktValDef RktValLink" data-pltdoc="x">join</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Joins a nested monadic value (a monadic value embedded within another monadic value, both of the same
type) into a single value. In other words, this <span class="emph">flattens</span> a monadic value by a single layer.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence-&gt;list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="RktValLink" data-pltdoc="x">join</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1 2 3 4)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence-%7E3elist%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence-&gt;list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="RktValLink" data-pltdoc="x">join</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'()</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="RktValLink" data-pltdoc="x">join</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">hello</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(just 'hello)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="RktValLink" data-pltdoc="x">join</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._nothing%29%29" class="RktValLink" data-pltdoc="x">nothing</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;nothing&gt;</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._join%29%29" class="RktValLink" data-pltdoc="x">join</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._nothing%29%29" class="RktValLink" data-pltdoc="x">nothing</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;nothing&gt;</span></p></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._data/monad..rkt)._map/m))"></a><span title="Provided from: data/monad | Package: functional-lib"><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._map%2Fm%29%29" class="RktValDef RktValLink" data-pltdoc="x">map/m</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span><span class="RktVar">xs</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._monad~3f%29%29" class="RktValLink" data-pltdoc="x">monad?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">xs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._sequence%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sequence?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">f</span> to each element of <span class="RktVar">xs</span>, then chains the resulting monadic values from left
to right and returns the results as a single monadic value.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ascii-&gt;char</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3c%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">127</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._just%29%29" class="RktValLink" data-pltdoc="x">just</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=characters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._integer-%7E3echar%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">integer-&gt;char</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="maybe.html#%28def._%28%28lib._data%2Fmaybe..rkt%29._nothing%29%29" class="RktValLink" data-pltdoc="x">nothing</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._map%2Fm%29%29" class="RktValLink" data-pltdoc="x">map/m</a></span><span class="hspace">&nbsp;</span><span class="RktSym">ascii-&gt;char</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">76</span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(just '(#\L #\!))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._map%2Fm%29%29" class="RktValLink" data-pltdoc="x">map/m</a></span><span class="hspace">&nbsp;</span><span class="RktSym">ascii-&gt;char</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">76</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#&lt;nothing&gt;</span></p></td></tr></table></blockquote><h5 x-source-module="(lib &quot;scribblings/data/functional.scrbl&quot;)" x-source-pkg="functional-doc" x-part-tag="&quot;custom-monads&quot;">1.3.1<tt>&nbsp;</tt><a name="(part._custom-monads)"></a>Implementing new monads</h5><p>Implementing your own monads is no more complicated than implementing your own applicative functors,
you just need to provide an implementation of <span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span> that satisfies the <a href="#%28tech._monad._law%29" class="techoutside" data-pltdoc="x"><span class="techinside">monad laws</span></a>.</p><p>Here is an example implementation of the most trivial possible monad, the identity monad:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prefix-in%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">prefix-in</a></span><span class="hspace">&nbsp;</span><span class="RktSym">base:</span><span class="hspace">&nbsp;</span><span class="RktSym">racket/base</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transparent</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Ffunctor..rkt%29._gen~3afunctor%29%29" class="RktStxLink" data-pltdoc="x">gen:functor</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fapplicative..rkt%29._gen~3aapplicative%29%29" class="RktStxLink" data-pltdoc="x">gen:applicative</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=collections&amp;rel=collections-api.html%23%2528def._%2528%2528lib._data%252Fcollection..rkt%2529._apply%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">apply</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">base:apply</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">base:map</span><span class="hspace">&nbsp;</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:methods</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._gen~3amonad%29%29" class="RktStxLink" data-pltdoc="x">gen:monad</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fmonad..rkt%29._chain%29%29" class="RktValLink" data-pltdoc="x">chain</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id-val</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._do%29%29" class="RktStxLink" data-pltdoc="x">do</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._data%2Fmonad..rkt%29._~3c-%29%29" class="RktStxLink" data-pltdoc="x">&lt;-</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._data%2Fapplicative..rkt%29._pure%29%29" class="RktValLink" data-pltdoc="x">pure</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">(id 3)</span></p></td></tr></table></blockquote><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Functional generic interfaces&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Functional generic interfaces&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="data-types.html" title="forward to &quot;2 Data types&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/functional/interfaces.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:23:15 GMT -->
</html>