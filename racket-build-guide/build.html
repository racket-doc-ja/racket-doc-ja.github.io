<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/racket-build-guide/build.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:10:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Building Racket from Source</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Building, Distributing, and Contributing to Racket</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Building Racket from Source</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="distribute.html" class="tocviewlink" data-pltdoc="x">Distributing Racket Variants</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="contribute.html" class="tocviewlink" data-pltdoc="x">Contributing to Racket Development</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="zuo.html" class="tocviewlink" data-pltdoc="x">Zuo and the Racket Build System</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="bootstrap.html" class="tocviewlink" data-pltdoc="x">Bootstrapping Racket</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Building Racket from Source</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._src%29" class="tocviewlink" data-pltdoc="x">Git Repository versus Source Distribution</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._modes%29" class="tocviewlink" data-pltdoc="x">Git Repository Build Modes</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._quick-in-place%29" class="tocviewlink" data-pltdoc="x">Quick Instructions:<span class="mywbr"> &nbsp;</span> In-<wbr></wbr>Place Build</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._quick-unix-style%29" class="tocviewlink" data-pltdoc="x">Quick Instructions:<span class="mywbr"> &nbsp;</span> Unix-<wbr></wbr>Style Install</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="#%28part._more%29" class="tocviewlink" data-pltdoc="x">More Instructions:<span class="mywbr"> &nbsp;</span> Building Racket</a></td></tr><tr><td align="right">1.6&nbsp;</td><td><a href="#%28part._build-cs%29" class="tocviewlink" data-pltdoc="x">More Instructions:<span class="mywbr"> &nbsp;</span> Building Racket CS and Racket BC</a></td></tr><tr><td align="right">1.7&nbsp;</td><td><a href="#%28part._even-more%29" class="tocviewlink" data-pltdoc="x">Even More Instructions:<span class="mywbr"> &nbsp;</span> Building Racket Pieces</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._src%29" class="tocsubseclink" data-pltdoc="x">Git Repository versus Source Distribution</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._modes%29" class="tocsubseclink" data-pltdoc="x">Git Repository Build Modes</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._quick-in-place%29" class="tocsubseclink" data-pltdoc="x">Quick Instructions:<span class="mywbr"> &nbsp;</span> In-<wbr></wbr>Place Build</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._quick-unix-style%29" class="tocsubseclink" data-pltdoc="x">Quick Instructions:<span class="mywbr"> &nbsp;</span> Unix-<wbr></wbr>Style Install</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._more%29" class="tocsubseclink" data-pltdoc="x">More Instructions:<span class="mywbr"> &nbsp;</span> Building Racket</a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part._build-cs%29" class="tocsubseclink" data-pltdoc="x">More Instructions:<span class="mywbr"> &nbsp;</span> Building Racket CS and Racket BC</a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._even-more%29" class="tocsubseclink" data-pltdoc="x">Even More Instructions:<span class="mywbr"> &nbsp;</span> Building Racket Pieces</a></td></tr><tr><td><span class="tocsublinknumber">1.7.1<tt>&nbsp;</tt></span><a href="#%28part._.Building_.Minimal_.Racket%29" class="tocsubseclink" data-pltdoc="x">Building Minimal Racket</a></td></tr><tr><td><span class="tocsublinknumber">1.7.2<tt>&nbsp;</tt></span><a href="#%28part._.Installing_.Packages%29" class="tocsubseclink" data-pltdoc="x">Installing Packages</a></td></tr><tr><td><span class="tocsublinknumber">1.7.3<tt>&nbsp;</tt></span><a href="#%28part._.Linking_.Packages_for_.In-.Place_.Development_.Mode%29" class="tocsubseclink" data-pltdoc="x">Linking Packages for In-<wbr></wbr>Place Development Mode</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Building, Distributing, and Contributing to Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Building, Distributing, and Contributing to Racket&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="distribute.html" title="forward to &quot;2 Distributing Racket Variants&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;build&quot;">1<tt>&nbsp;</tt><a name="(part._build)"></a>Building Racket from Source</h3><p>In a checkout of the Racket <a href="https://github.com/racket/racket">Git repository</a>, you
could try just running</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">make</span></p><p>but we recommend that you at least consider the information in
<a href="#%28part._src%29" data-pltdoc="x">Git Repository versus Source Distribution</a> and <a href="#%28part._modes%29" data-pltdoc="x">Git Repository Build Modes</a>.</p><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;src&quot;">1.1<tt>&nbsp;</tt><a name="(part._src)"></a>Git Repository versus Source Distribution</h4><p>Instead of building from the <a href="https://github.com/racket/racket">Git repository</a>,
consider getting source for the current Racket release from</p><blockquote class="SCentered"><p><a href="https://download.racket-lang.org/"><span class="url">http://download.racket-lang.org/</span></a></p></blockquote><p>or get a source snapshot (updated daily) from</p><blockquote class="SCentered"><p><a href="http://snapshot.racket-lang.org/"><span class="url">http://snapshot.racket-lang.org/</span></a></p></blockquote><p>The <span class="ssansserif">Source + built packages</span> options from those sites will
build and install especially quickly, because platform-independent
bytecode and documentation are pre-built.</p><p>In contrast to the Git repository, release and snapshot source
distributions will work in the</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">configure --prefix=... &amp;&amp; make &amp;&amp; make install</span></p><p>way that you probably expect.</p><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;modes&quot;">1.2<tt>&nbsp;</tt><a name="(part._modes)"></a>Git Repository Build Modes</h4><p>The rest of this chapter assumes that you&rsquo;re sticking with the
<a href="https://github.com/racket/racket">source repository</a>. In that case, you still have
several options:</p><ul><li><p><span style="font-weight: bold">In-place build</span> &#8212;<wbr></wbr> This mode is the default. It creates
a build in the <span class="stt">"racket"</span> subdirectory and installs packages
that you specify (or the <span class="stt">"main-distribution"</span> plus
<span class="stt">"main-distribution-test"</span> package by default). Any package
implementations that reside in the <span class="stt">"pkgs"</span> subdirectory are
linked in-place. This is the most natural mode for developing
Racket itself or staying on the bleeding edge. See
<a href="#%28part._quick-in-place%29" data-pltdoc="x">Quick Instructions: In-Place Build</a> for more instructions.</p></li><li><p><span style="font-weight: bold">Unix-style install</span> &#8212;<wbr></wbr> This mode installs to a given
destination directory (on platforms other than Windows), leaving no
reference to the source directory. This is the most natural mode
for installing once from the source repository. See
<a href="#%28part._quick-unix-style%29" data-pltdoc="x">Quick Instructions: Unix-Style Install</a> for more instructions.</p></li><li><p><span style="font-weight: bold">Minimal</span> &#8212;<wbr></wbr> This mode is like a source distribution, and
it is described in the <span class="stt">"src"</span> subdirectory of
<span class="stt">"racket"</span> (i.e., ignore the repository&rsquo;s root directory and
<span class="stt">"pkgs"</span> subdirectory). Build a minimal Racket using the
usual <span class="stt">configure &amp;&amp; make &amp;&amp; make install</span> steps (or similar
for Windows), and then you can install packages from the catalog
server with <span class="stt">raco pkg</span>.</p></li><li><p><span style="font-weight: bold">Installers</span> &#8212;<wbr></wbr> This mode creates Racket distribution
installers for a variety of platforms by farming out work to
machines that run those platforms. This is the way that Racket
snapshots and releases are created, and you can create your own.
See <a href="distribute.html" data-pltdoc="x">Distributing Racket Variants</a> for more instructions.</p></li><li><p><span style="font-weight: bold">In-place Racket BC build</span> &#8212;<wbr></wbr> This mode builds the old
Racket implementation (where &ldquo;BC&rdquo; means &ldquo;bytecode&rdquo; or &ldquo;before
Chez Scheme&rdquo;). Final executables with names that end in
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">bc</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">BC</span><span class="hspace"></span></span> are the Racket BC variants. See
<a href="#%28part._build-cs%29" data-pltdoc="x">More Instructions: Building Racket CS and Racket BC</a> for more information.</p></li></ul><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;quick-in-place&quot;">1.3<tt>&nbsp;</tt><a name="(part._quick-in-place)"></a>Quick Instructions: In-Place Build</h4><p>On Unix (including Linux) and Mac OS, <span class="stt">make</span> (or <span class="stt">make in-place</span>)
creates a build in the <span class="stt">"racket"</span> directory.</p><p>On Windows with Microsoft Visual Studio (any version between 2008/9.0
and 2022/17.0), <span class="stt">nmake</span> creates a build in the <span class="stt">"racket"</span>
directory. If your command-prompt environment is not already
configured for Visual Studio to run programs like <span class="stt">nmake.exe</span> and
<span class="stt">cl.exe</span>, you run <span class="stt">"racket/src/worksp/msvcprep.bat"</span>
(PowerShell: <span class="stt">"racket/src/worksp/msvcprep.ps1"</span>} and provide an
argument that selects a build mode: <span class="stt">x86</span> (32-bit Intel/AMD
mode), <span class="stt">x64</span> or <span class="stt">x86_amd64</span> (64-bit Intel/AMD mode), or
<span class="stt">x64_arm64</span> (64-bit Arm mode). Any use of <span class="stt">make</span> described
in this build guide should also work with <span class="stt">nmake</span>, except as
noted.</p><p>In all cases, an in-place build includes (via links) a few packages
that are in the <span class="stt">"pkgs"</span> directory. To get new versions of
those packages, as well as the Racket core, then use <span class="stt">git pull</span>.
Afterward, or to get new versions of any other package, use <span class="stt">make
in-place</span> again, which includes a <span class="stt">raco pkg update</span> step.</p><p>See <a href="#%28part._more%29" data-pltdoc="x">More Instructions: Building Racket</a> for more information.</p><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;quick-unix-style&quot;">1.4<tt>&nbsp;</tt><a name="(part._quick-unix-style)"></a>Quick Instructions: Unix-Style Install</h4><p>On Unix (including Linux), <span class="stt">make unix-style PREFIX=<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span></span>
builds and installs into <span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>"</span> with binaries in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>/bin"</span>, packages in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>/share/racket/pkgs"</span>, documentation in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>/share/racket/doc"</span>, etc.</p><p>On Mac OS, <span class="stt">make unix-style PREFIX=<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span></span> builds and
installs into <span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>"</span> with binaries in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>/bin"</span>, packages in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>/share/pkgs"</span>, documentation in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>/doc"</span>, etc.</p><p>On Windows, Unix-style install is not supported.</p><p>A Unix-style install leaves no reference to the source directory.</p><p>To split the build and install steps of a Unix-style installation,
supply <span class="stt">DESTDIR=<span class="sroman">&#8249;<span style="font-style: italic">dest-dir</span>&#8250;</span></span> with <span class="stt">make unix-style
PREFIX=<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span></span>, which assembles the installation in
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dest-dir</span>&#8250;</span>"</span>. Then, copy or move the content of
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dest-dir</span>&#8250;</span>"</span> to the target root
<span class="stt">"<span class="sroman">&#8249;<span style="font-style: italic">dir</span>&#8250;</span>"</span>; take care to preserve file timestamps.</p><p>See <a href="#%28part._more%29" data-pltdoc="x">More Instructions: Building Racket</a> for more information.</p><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;more&quot;">1.5<tt>&nbsp;</tt><a name="(part._more)"></a>More Instructions: Building Racket</h4><p>The <span class="stt">"racket"</span> directory contains minimal Racket, which is just
enough to run <span class="stt">raco pkg</span> to install everything else. A first step
of <span class="stt">make in-place</span> or <span class="stt">make unix-style</span> is to build minimal
Racket, and you can read <span class="stt">"racket/src/README.txt"</span> for more
information, including information about dependencies. (The very first
step of a build is to compile Zuo, which is a tiny variant of Racket
that <a href="zuo.html" data-pltdoc="x">drives the rest of the build system</a>.)</p><p>If you would like to provide arguments to <span class="stt">configure</span> for the
minimal Racket build, then you can supply them with by adding
<span class="stt">CONFIGURE_ARGS="<span class="sroman">&#8249;<span style="font-style: italic">options</span>&#8250;</span>"</span> to <span class="stt">make in-place</span>
or <span class="stt">make unix-style</span>.</p><p>The <span class="stt">"pkgs"</span> directory contains packages that are tied to the
Racket core implementation and are therefore kept in the same Git
repository. A <span class="stt">make in-place</span> links to the package in-place,
while <span class="stt">make unix-style</span> copies packages out of <span class="stt">"pkgs"</span> to
install them.</p><p>To install a subset of the packages that would otherwise be installed,
supply a <span class="stt">PKGS</span> value to <span class="stt">make</span>. For example,</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">make PKGS="gui-lib readline-lib"</span></p><p>installs only the <span class="stt">"gui-lib"</span> and <span class="stt">"readline-lib"</span> packages
and their dependencies. The default value of <span class="stt">PKGS</span> is
<span class="stt">"main-distribution main-distribution-test"</span>. If you run <span class="stt">make</span>
a second time, all previously installed packages remain installed and
are updated, while new packages are added. To uninstall previously
selected package, use <span class="stt">raco pkg remove</span>.</p><p>To build anything other than the latest sources in the repository
(e.g., when building from the <span class="stt">v6.2.1</span> tag), you need a catalog
that&rsquo;s compatible with those sources. Release tags starting with
<span class="stt">v7.1</span> include a default catalog that corresponds to the release.
For earlier versions, the release distribution is configured to use a
catalog specific to that release, so you can extract the catalog&rsquo;s URL
from there.</p><p>Using <span class="stt">make</span> (or <span class="stt">make in-place</span>) sets the installation&rsquo;s
name to <span class="stt">development</span>, unless the installation has been previously
configured (i.e., unless the <span class="stt">"racket/etc/config.rktd"</span> file
exists). The installation name affects, for example, the directory
where user-specific documentation is installed. Using <span class="stt">make</span> also
sets the default package scope to <span class="stt">installation</span>, which means
that packages are installed by default into the installation&rsquo;s space
instead of user-specific space. The name and/or default-scope
configuration can be changed through <span class="stt">raco pkg config</span>.</p><p>When <span class="stt">make -j <span class="sroman">&#8249;<span style="font-style: italic">n</span>&#8250;</span></span> is used to specify parallelism, the
build system may be able to propagate that choice to intermediate
steps and the <span class="stt">raco setup</span> part. A more portable alternative is
to supply the <span class="stt">JOBS</span> variable:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">make JOBS=<span class="sroman">&#8249;<span style="font-style: italic">n</span>&#8250;</span></span></p><p>Setting <span class="stt">JOBS</span> works with other targets, including <span class="stt">make
unix-style</span>. For backward compatibility, <span class="stt">CPUS</span> is recognized as
an alias for <span class="stt">JOBS</span>.</p><p>Use <span class="stt">make as-is</span> to perform the same build actions as <span class="stt">make
in-place</span>, but without consulting any package catalogs or package
sources to install or update packages. In other words, use <span class="stt">make
as-is</span> to rebuild after local changes that could include changes to
minimal Racket. (If you change only packages, then <span class="stt">raco setup</span>
should suffice.)</p><p>If you need even more control over the build, carry on to
<a href="#%28part._even-more%29" data-pltdoc="x">Even More Instructions: Building Racket Pieces</a> further below.</p><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;build-cs&quot;">1.6<tt>&nbsp;</tt><a name="(part._build-cs)"></a>More Instructions: Building Racket CS and Racket BC</h4><p>The default build of Racket, also known as Racket CS, uses and
incorporates Chez Scheme. Chez Scheme sources are included in the
Racket repository.</p><p>Building Racket CS requires either an existing Racket or pb (portable
bytecode) boot files for Chez Scheme. By default, pb boot files are
downloaded from a separate Git repository by <span class="stt">make</span>. If you have
Racket v7.1 or later, then you can choose instead to bootstrap using
that Racket implementation with</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">make cs RACKET_FOR_BOOTFILES=racket</span></p><p>The <span class="stt">make bc</span> target (or <span class="stt">make bc-as-is</span> for a rebuild) builds an older
variant of Racket, called Racket BC, which does not use Chez Scheme.
By default, the executables for the Racket BC variant all have a
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">bc</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">BC</span><span class="hspace"></span></span> suffix, and they coexist with a Racket CS
build by keeping compiled files in a <span class="stt">"bc"</span> subdirectory of the
<span class="stt">"compiled"</span> directory. You can remove the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">bc</span><span class="hspace"></span></span> suffix
and the subdirectory in <span class="stt">"compiled"</span> by providing
<span class="stt">RACKETBC_SUFFIX=""</span> to <span class="stt">make bc</span>.</p><p>Along similar lines, you can add a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">cs</span><span class="hspace"></span></span> suffix to the Racket
CS executables and cause them to use a machine-specific subdirectory
of <span class="stt">"compiled"</span> by providing <span class="stt">RACKETCS_SUFFIX="cs"</span> to
<span class="stt">make</span> or <span class="stt">make cs</span>.</p><p>Use <span class="stt">make both</span> to build both Racket BC and Racket CS, where
packages are updated and documentation is built only once (using
Racket CS).</p><h4 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;even-more&quot;">1.7<tt>&nbsp;</tt><a name="(part._even-more)"></a>Even More Instructions: Building Racket Pieces</h4><p>Instead of just using <span class="stt">make in-place</span> or <span class="stt">make unix-style</span>, you can
take more control over the build by understanding how the pieces fit
together. You can also read <span class="stt">"Makefile"</span>, which defines and
describes many variables that can be supplied via <span class="stt">make</span>.</p><h5 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;Building_Minimal_Racket&quot;">1.7.1<tt>&nbsp;</tt><a name="(part._.Building_.Minimal_.Racket)"></a>Building Minimal Racket</h5><p>Instead of using the top-level makefile, you can go into
<span class="stt">"racket/src"</span> and follow the <span class="stt">"README.txt"</span> there,
which gives you more configuration options.</p><p>If you don&rsquo;t want any special configuration and you just want the base
build, you can use <span class="stt">make base</span> with the
top-level makefile.</p><p>Minimal Racket does not require additional native libraries to run,
but under Windows, encoding-conversion, extflonum, and SSL
functionality is hobbled until native libraries from the
<span class="stt">"racket-win32-i386"</span> or <span class="stt">"racket-win32-x86_64"</span> package
are installed.</p><p>On all platforms, from the top-level makefile, the
<span class="stt">PLT_SETUP_OPTIONS</span> makefile variable is passed on to the
<span class="stt">raco setup</span> that is used to build minimal-Racket libraries. See
the documentation for <span class="stt">raco setup</span> for information on the
options. (The <span class="stt">JOB_OPTIONS</span> makefile variable is also passed on,
but it is meant to be set by some makefile targets when <span class="stt">CPUS</span> is
non-empty.)</p><p>For cross compilation, add configuration options to
<span class="stt">CONFIGURE_ARGS="<span class="sroman">&#8249;<span style="font-style: italic">options</span>&#8250;</span>"</span> as described in the
<span class="stt">"README.txt"</span> of <span class="stt">"racket/src"</span>, but also add a
<span class="stt">RACKET=...</span> argument for the top-level makefile instead of
using  <span class="stt">--enable-racket=...</span> for <span class="stt">configure</span>.</p><p>Specify <span class="stt">SETUP_MACHINE_FLAGS=<span class="sroman">&#8249;<span style="font-style: italic">options</span>&#8250;</span></span> to set Racket
flags that control the target machine of compiled bytecode for
<span class="stt">raco setup</span> and <span class="stt">raco pkg install</span>. For example
<span class="stt">SETUP_MACHINE_FLAGS=-M</span> causes the generated bytecode to be
machine-independent, which is mainly useful when the generated
installation will be used as a template for other platforms or for
cross-compilation.</p><h5 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;Installing_Packages&quot;">1.7.2<tt>&nbsp;</tt><a name="(part._.Installing_.Packages)"></a>Installing Packages</h5><p>After you&rsquo;ve built and installed minimal Racket, you could install
packages via the package-catalog server, completely ignoring the
content of <span class="stt">"pkgs"</span>.</p><p>If you want to install packages manually out of the <span class="stt">"pkgs"</span>
directory, the <span class="stt">local-catalog</span> target creates a catalog as
<span class="stt">"racket/local/catalog"</span> that merges the currently configured
catalog&rsquo;s content with pointers to the packages in <span class="stt">"pkgs"</span>. A
Unix-style build works that way: it builds and installs minimal
Racket, and then it installs packages out of a catalog that is created
by <span class="stt">make local-catalog</span>.</p><p>To add a package catalog that is used after the content of
<span class="stt">"pkgs"</span> but before the default package catalogs, specify the
catalog&rsquo;s URL as the <span class="stt">SRC_CATALOG</span> makefile variable:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">make .... SRC_CATALOG=<span class="sroman">&#8249;<span style="font-style: italic">url</span>&#8250;</span></span></p><h5 x-source-module="(lib &quot;racket-build-guide/racket-build-guide.scrbl&quot;)" x-source-pkg="racket-build-guide" x-part-tag="&quot;Linking_Packages_for_In-Place_Development_Mode&quot;">1.7.3<tt>&nbsp;</tt><a name="(part._.Linking_.Packages_for_.In-.Place_.Development_.Mode)"></a>Linking Packages for In-Place Development Mode</h5><p>With an in-place build, you can edit packages within <span class="stt">"pkgs"</span> directly
or update those packages with <span class="stt">git pull</span> plus <span class="stt">raco setup</span>, since the
packages are installed with the equivalent of <span class="stt">raco pkg install -i
--static-link <span class="sroman">&#8249;<span style="font-style: italic">path</span>&#8250;</span></span>.</p><p>Instead of actually using <span class="stt">raco pkg install --static-link ...</span>, the
<span class="stt">pkgs-catalog</span> makefile target creates a catalog that points to the
packages in <span class="stt">"pkgs"</span>, and the catalog indicates that the packages are to
be installed as links. The <span class="stt">pkgs-catalog</span> target further configures
the new catalog as the first one to check when installing
packages. The configuration adjustment is made only if no
configuration file <span class="stt">"racket/etc/config.rktd"</span> exists already.</p><p>All other packages (as specified by <span class="stt">PKGS</span>) are installed via the
configured package catalog. They are installed in installation scope, but
the content of <span class="stt">"racket/share/pkgs"</span> is not meant to be edited. To
reinstall a package in a mode suitable for editing and manipulation
with Git tools, use</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco pkg update --clone extra-pkgs/<span class="sroman">&#8249;<span style="font-style: italic">pkg-name</span>&#8250;</span></span></p><p>The <span class="stt">"extra-pkgs"</span> directory name is a convention that is supported by a
<span class="stt">".gitignore"</span> entry in the repository root.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Building, Distributing, and Contributing to Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Building, Distributing, and Contributing to Racket&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="distribute.html" title="forward to &quot;2 Distributing Racket Variants&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/racket-build-guide/build.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:10:29 GMT -->
</html>