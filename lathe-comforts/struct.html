<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/lathe-comforts/struct.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:27:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>8&nbsp;Utilities for Structs</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Lathe Comforts</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="evergreen.html" class="tocviewlink" data-pltdoc="x">Evergreen Utilities for Binding Syntax and Pure FP</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="contract.html" class="tocviewlink" data-pltdoc="x">Utilities for Contracts</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="maybe.html" class="tocviewlink" data-pltdoc="x">Maybe Values</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="string.html" class="tocviewlink" data-pltdoc="x">Utilities for Strings</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="trivial.html" class="tocviewlink" data-pltdoc="x">Trivial Values</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="list.html" class="tocviewlink" data-pltdoc="x">Utilities for Lists and Natural Numbers</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="hash.html" class="tocviewlink" data-pltdoc="x">Utilities for Hash Tables</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Utilities for Structs</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="match.html" class="tocviewlink" data-pltdoc="x">Utilities for Match Expanders</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="own-contract.html" class="tocviewlink" data-pltdoc="x">A Framework for Declaring Contracts Alongside Functions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._prefab-struct~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">prefab-<wbr></wbr>struct?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._immutable-prefab-struct~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">immutable-<wbr></wbr>prefab-<wbr></wbr>struct?</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-easy%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">struct-<wbr></wbr>easy</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-predicate%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">struct-<wbr></wbr>predicate</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-accessor-by-name%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">struct-<wbr></wbr>accessor-<wbr></wbr>by-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._istruct%2Fc%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">istruct/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-length%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler-<wbr></wbr>length</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler%2Fc%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler/<span class="mywbr"> &nbsp;</span>c</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-pred~3f-fn%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler-<wbr></wbr>pred?-<wbr></wbr>fn</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-ref-fn%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler-<wbr></wbr>ref-<wbr></wbr>fn</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-proj-fns%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler-<wbr></wbr>proj-<wbr></wbr>fns</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-make-fn%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tupler-<wbr></wbr>make-<wbr></wbr>fn</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-imitation-simple-struct%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>imitation-<wbr></wbr>simple-<wbr></wbr>struct</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-syntax-and-value-imitation-simple-struct%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>syntax-<wbr></wbr>and-<wbr></wbr>value-<wbr></wbr>imitation-<wbr></wbr>simple-<wbr></wbr>struct</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-write%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">auto-<wbr></wbr>write</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-equal%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">auto-<wbr></wbr>equal</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-imitation-simple-generics%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>imitation-<wbr></wbr>simple-<wbr></wbr>generics</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="hash.html" title="backward to &quot;7 Utilities for Hash Tables&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Lathe Comforts&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="match.html" title="forward to &quot;9 Utilities for Match Expanders&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;lathe-comforts/scribblings/lathe-comforts.scrbl&quot;)" x-source-pkg="lathe-comforts-doc" x-part-tag="&quot;struct&quot;">8<tt>&nbsp;</tt><a name="(part._struct)"></a><a name="(mod-path._lathe-comforts/struct)"></a>Utilities for Structs</h3><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">lathe-comforts/struct</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/lathe-comforts-lib" title="Install this package using `raco pkg install lathe-comforts-lib`"><span class="stt">lathe-comforts-lib</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._lathe-comforts/struct..rkt)._prefab-struct~3f))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._prefab-struct~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">prefab-struct?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether the given value is an instance of a prefab struct type.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._lathe-comforts/struct..rkt)._immutable-prefab-struct~3f))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._immutable-prefab-struct~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">immutable-prefab-struct?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether the given value is an instance of a prefab struct type and has no mutable fields.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._struct-easy))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-easy%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">struct-easy</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">name-id</span><span class="hspace">&nbsp;</span><span class="RktVar">slot-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">rest</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This is a convenience layer over <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span>, which has some features to automate the implementation of the struct&rsquo;s print behavior and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> behavior.</div></p><p>The interface is rather unstable at this point. It&rsquo;s not even clear at this point which pieces of the behavior here are by design and which are temporary kludges.</p><p>Here are some non-normative examples of how it can be used:</p><p>The definition <span class="RktPn">(</span><span class="stt">struct-easy</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktVar">field-one</span><span class="stt"> </span><span class="RktVar">field-two</span><span class="RktPn">)</span><span class="RktPn">)</span> behaves the same way as <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">field-one</span><span class="stt"> </span><span class="RktVar">field-two</span><span class="RktPn">)</span><span class="RktPn">)</span> except that it also implements a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3acustom-write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:custom-write</a></span> behavior based on <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528lib._racket%252Fstruct..rkt%2529._make-constructor-style-printer%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-constructor-style-printer</a></span>.</p><p>In the <span class="RktVar">rest</span> section, the first occurrence of the <span class="RktPn">#:other</span> keyword begins passing the rest of the subforms through to the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span> form. To illustrate, this means the definition <span class="RktPn">(</span><span class="stt">struct-easy</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktVar">field-one</span><span class="stt"> </span><span class="RktVar">field-two</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">#:other</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> behaves the same way as <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">field-one</span><span class="stt"> </span><span class="RktVar">field-two</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span>, aside from that custom write behavior.</p><p>If <span class="RktPn">#:equal</span> appears in the <span class="RktVar">rest</span> section (before any occurrence of  <span class="RktPn">#:other</span>), then an implementation of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3aequal%252Bhash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:equal+hash</a></span> will be generated so that the resulting structure type&rsquo;s instances are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> if their corresponding fields are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>.</p><p>If a list of the form <span class="RktPn">(</span><span class="RktPn">#:guard-easy</span><span class="stt"> </span><span class="RktVar">body-expr</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> appears in the <span class="RktVar">rest</span> section (before any occurrence of  <span class="RktPn">#:other</span>), then the resulting structure type runs each <span class="RktVar">body-expr</span> when an instance is constructed. In those expressions, local variables corresponding to each field (e.g. <span class="RktVar">field-one</span> and <span class="RktVar">field-two</span>) are bound to the values that instance is being constructed with. The results of each <span class="RktVar">body-expr</span> are ignored; they&rsquo;re expected to raise exceptions if the field values are unacceptable.</p><p>If <span class="RktPn">#:write</span> followed by an expression appears, then whenever an instance of this structure type would have its <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3acustom-write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:custom-write</a></span> behavior invoked, it runs that expression with local variables in scope corresponding to each field name (e.g. <span class="RktVar">field-one</span> and <span class="RktVar">field-two</span>), each bound to the instance&rsquo;s respective field value. The expression is expected to return a procedure that takes the instance value itself and returns a list of values to be printed. (Since these are redundant, typically the expression will either ignore the field variables or ignore the instance value.) The resulting list of values is printed according to the behavior of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528lib._racket%252Fstruct..rkt%2529._make-constructor-style-printer%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-constructor-style-printer</a></span>.</p><p>If <span class="RktPn">#:error-message-phrase</span> followed by an expression appears, then that expression will be evaluated as the structure type is defined, and its result will be used in certain error messages of the generated <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3acustom-write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:custom-write</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3aequal%252Bhash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:equal+hash</a></span> implementations, particularly the errors that occur when these methods are called with a value that isn&rsquo;t actually an instance of this structure type. The errors are of the form "expected &lt;this&gt; to be &lt;phrase&gt;", and the default "&lt;phrase&gt;" is "an instance of the &lt;name&gt; structure type". For certain structure types, it may make sense to use <span class="RktPn">#:error-message-phrase</span> to change this to a more pithy phrase, like "an RGB color" rather than "an instance of the rgb-color structure type." (However, is it even possible for clients of <span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-easy%29%29" class="RktStxLink" data-pltdoc="x">struct-easy</a></span> to observe these errors in their programs? This feature might not make any visible difference.)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._struct-predicate))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-predicate%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">struct-predicate</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">struct-name-id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Expands to the predicate identifier associated with the given structure type name.</div></p><p>For instance, if a struct is defined as <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">field-one</span><span class="stt"> </span><span class="RktVar">field-two</span><span class="RktPn">)</span><span class="RktPn">)</span>, then traditionally we can recognize instances of the struct using <span class="RktPn">(</span><span class="RktVar">my-data?</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span>, and now we can also recognize them using <span class="RktPn">(</span><span class="RktPn">(</span><span class="stt">struct-predicate</span><span class="stt"> </span><span class="RktVar">my-data</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span>.</p><p>This comes in handy mostly when defining other syntax transformers that deal with structure type names. Sometimes it allows those syntax transformers to be written using simple syntax templates, saving the trouble of making manual calls to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax-local-value%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax-local-value</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structinfo.html%23%2528def._%2528%2528lib._racket%252Fstruct-info..rkt%2529._extract-struct-info%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">extract-struct-info</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._struct-accessor-by-name))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._struct-accessor-by-name%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">struct-accessor-by-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">struct-name-id</span><span class="hspace">&nbsp;</span><span class="RktVar">field-name-id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Expands to the struct field accessor identifier associated with the given structure type name and field name.</div></p><p>For instance, if a struct is defined as <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">field-one</span><span class="stt"> </span><span class="RktVar">field-two</span><span class="RktPn">)</span><span class="RktPn">)</span>, then traditionally we can extract the first field using <span class="RktPn">(</span><span class="RktVar">my-data-field-one</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span>, and now we can also extract it using <span class="RktPn">(</span><span class="RktPn">(</span><span class="stt">struct-accessor-by-name</span><span class="stt"> </span><span class="RktVar">my-data</span><span class="stt"> </span><span class="RktVar">field-one</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">x</span><span class="RktPn">)</span>.</p><p>This comes in handy mostly when defining other syntax transformers that deal with structure type names. Sometimes it allows those syntax transformers to be written using simple syntax templates, saving the trouble of making manual calls to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stxtrans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax-local-value%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">syntax-local-value</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structinfo.html%23%2528def._%2528%2528lib._racket%252Fstruct-info..rkt%2529._extract-struct-info%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">extract-struct-info</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._istruct/c))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._istruct%2Fc%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">istruct/c</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name-id</span><span class="hspace">&nbsp;</span><span class="RktVar">field/c-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">field/c-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">contract?</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Returns a contract that recognizes an instance of structure type <span class="RktVar">name-id</span> where the fields abide by the respective <span class="RktVar">field/c-expr</span> contracts.</div></p><p>Unlike <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fstruct-dc..rkt%2529._struct%252Fc%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct/c</a></span> (but like <span class="RktSym"><a href="match.html#%28form._%28%28lib._lathe-comforts%2Fmatch..rkt%29._match%2Fc%29%29" class="RktStxLink" data-pltdoc="x">match/c</a></span>), this works even when <span class="RktVar">name-id</span> is an immutable structure type name and the <span class="RktVar">field/c-expr</span> contracts contain one or more impersonator contracts.</p><p>However, this comes at the price of some quirks. This operation works by reconstructing the struct altogether when a higher-order projection is taken. This means the projection of this struct isn&rsquo;t necessarily <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>, or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=chaperones.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._impersonator-of%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">impersonator-of?</a></span> to the original value. In fact, the projection becomes an instance of the structure type <span class="RktVar">name-id</span>, even when the original value is an instance of a distinct structure subtype of <span class="RktVar">name-id</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler~3f))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether the given value is a tupler.</div></p><p>A tupler is an object that carries the constructor, predicate, and positional accessor functionality of an immutable tagged tuple type that&rsquo;s distinct from the type manipulated by any other tupler. Essentially, a tupler carries most of the functionality an immutable <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span> definition creates except for its structure type descriptor. A tupler can only be created by <span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-syntax-and-value-imitation-simple-struct%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-and-value-imitation-simple-struct</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler-length))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-length%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler-length</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">natural?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="RktValLink" data-pltdoc="x">tupler?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the number of projections the given tupler has. This is the number of projections can be accessed from a tuple value and the number of projection values that must be supplied to the tupler&rsquo;s constructor.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler/c))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler%2Fc%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler/c</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">length/c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._flat-contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flat-contract?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">length/c</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=contract-utilities.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fguts..rkt%2529._flat-contract%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">flat-contract?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flat contract that recognizes a tupler whose length abides by the given flat contract.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">((</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler-pred~3f-fn))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-pred~3f-fn%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler-pred?-fn</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="RktValLink" data-pltdoc="x">tupler?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether the given value is recognized by the given tupler as one of its tuple values.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">((</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler-ref-fn))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-ref-fn%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler-ref-fn</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span><span class="RktVar">i</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="RktValLink" data-pltdoc="x">tupler?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-pred~3f-fn%29%29" class="RktValLink" data-pltdoc="x">tupler-pred?-fn</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">i</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">natural?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._%7E3c%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&lt;/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-length%29%29" class="RktValLink" data-pltdoc="x">tupler-length</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the projection at the given index in the given tuple value as observed by the given tupler.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler-proj-fns))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-proj-fns%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler-proj-fns</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-pred~3f-fn%29%29" class="RktValLink" data-pltdoc="x">tupler-pred?-fn</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="RktValLink" data-pltdoc="x">tupler?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a list of projection procedures based on the given tupler.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">((</span><a name="(def._((lib._lathe-comforts/struct..rkt)._tupler-make-fn))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-make-fn%29%29" class="RktValDef RktValLink" data-pltdoc="x">tupler-make-fn</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">proj</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler-pred~3f-fn%29%29" class="RktValLink" data-pltdoc="x">tupler-pred?-fn</a></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._lathe-comforts%2Fstruct..rkt%29._tupler~3f%29%29" class="RktValLink" data-pltdoc="x">tupler?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proj</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a tuple value using the given tupler. There should be as many <span class="RktVar">proj</span> arguments as the tupler&rsquo;s length.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._define-imitation-simple-struct))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-imitation-simple-struct%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-imitation-simple-struct</a></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">inst?-id</span><span class="hspace">&nbsp;</span><span class="RktVar">inst-field-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">inst-id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reflection-name-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">inspector-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._define-syntax-and-value-imitation-simple-struct))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-syntax-and-value-imitation-simple-struct%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-syntax-and-value-imitation-simple-struct</a></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">inst?-id</span><span class="hspace">&nbsp;</span><span class="RktVar">inst-field-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">inst-id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tupler-id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">reflection-name-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">inspector-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-val-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktPn">#:gen</span><span class="hspace">&nbsp;</span><span class="RktVar">gen:name</span><span class="hspace">&nbsp;</span><span class="RktVar">method-definition</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-write%29%29" class="RktStxLink" data-pltdoc="x">auto-write</a></span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-equal%29%29" class="RktStxLink" data-pltdoc="x">auto-equal</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">inspector-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=inspectors.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._inspector%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">inspector?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">prefab</span><span class="RktPn">)</span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">reflection-name-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">prop-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structprops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._struct-type-property%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">struct-type-property?</a></span></td></tr></table></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates a new structure type, and defines struct-like operations which construct and deconstruct an actual structure value of that type.</div></p><p>The variable <span class="RktVar">inst?-id</span> is defined to be a predicate that detects these structures.</p><p>Each variable <span class="RktVar">inst-field-id</span> is defined to be a procedure that accesses the corresponding positional field of any given one of these structures.</p><p>The variable <span class="RktVar">inst-id</span> is defined to be a match expander that can be used to construct or match these structures.</p><p>The variable <span class="RktVar">tupler-id</span> (when using <span class="stt">define-syntax-and-value-imitation-simple-struct</span>) is defined to be a first-class tupler object that can be used to construct or match these structures.</p><p>The structure type is created with the given reflection name, the given inspector, a number of fields equal to the number of <span class="RktVar">inst-field-id</span> variables specified, and structure type property bindings determined by the given <span class="RktVar">option</span> entries.</p><p>The reflection name is used for certain reflective operations.</p><p>If the inspector is the value <span class="RktVal">'</span><span class="RktVal">prefab</span>, this accesses a prefab structure type instead of creating a new one, and there must be no <span class="RktVar">option</span> entries specified.</p><p>An <span class="RktVar">option</span> of the form <span class="RktPn">(</span><span class="RktPn">#:prop</span><span class="stt"> </span><span class="RktVar">prop-expr</span><span class="stt"> </span><span class="RktVar">prop-val-expr</span><span class="RktPn">)</span> is like providing the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span> option <span class="RktPn">#:property</span><span class="stt"> </span><span class="RktVar">prop-expr</span><span class="stt"> </span><span class="RktVar">prop-val-expr</span>. It specifies a binding of the <span class="RktVar">prop-expr</span> structure type property to the value <span class="RktVar">prop-val-expr</span>.</p><p>An <span class="RktVar">option</span> of the form <span class="RktPn">(</span><span class="RktPn">#:gen</span><span class="stt"> </span><span class="RktVar">gen:name</span><span class="stt"> </span><span class="RktVar">method-definition</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> is like providing the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span> option <span class="RktPn">#:methods</span><span class="stt"> </span><span class="RktVar">gen:name</span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">method-definition</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">]</span>. The <span class="RktVar">gen:name</span> must be an identifier with a transformer binding that specifies a generic interface as defined by <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528form._%2528%2528lib._racket%252Fgeneric..rkt%2529._define-generics%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-generics</a></span>. The <span class="RktVar">method-definition</span> forms define the implementation of this interface&rsquo;s methods for this new structure type just as they do in <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span>.</p><p>An <span class="RktVar">option</span> of the form <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-write%29%29" class="RktStxLink" data-pltdoc="x">auto-write</a></span><span class="RktPn">)</span> specifies implementations of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3acustom-write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:custom-write</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._prop%7E3acustom-print-quotable%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prop:custom-print-quotable</a></span> which use <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528lib._racket%252Fstruct..rkt%2529._make-constructor-style-printer%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-constructor-style-printer</a></span> to display the value.</p><p>An <span class="RktVar">option</span> of the form <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-equal%29%29" class="RktStxLink" data-pltdoc="x">auto-equal</a></span><span class="RktPn">)</span> specifies an implementation of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3aequal%252Bhash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:equal+hash</a></span> which treats any two of these structures as <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> if their fields are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>.</p><p>Note that unlike <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span>, this has no support for creating structure types that have supertypes, subtypes, guard procedures, mutable fields, or automatic fields. For the most part, all these features except supertypes and subtypes can be simulated: Mutable fields can be simulated with immutable fields that contain mutable boxes, while guard procedures and automatic fields can be simulated by defining another procedure to call instead of calling the defined constructor directly.</p><p>To have more complete control over the structure type created, use <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span>. However, that will not produce a tupler value.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>structure type property expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._auto-write))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-write%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">auto-write</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A syntax which is only useful as an option to <span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-imitation-simple-struct%29%29" class="RktStxLink" data-pltdoc="x">define-imitation-simple-struct</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-syntax-and-value-imitation-simple-struct%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-and-value-imitation-simple-struct</a></span>. In that context, it specifies that the created structure type should have implementations of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3acustom-write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:custom-write</a></span> and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._prop%7E3acustom-print-quotable%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prop:custom-print-quotable</a></span> which use <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structutils.html%23%2528def._%2528%2528lib._racket%252Fstruct..rkt%2529._make-constructor-style-printer%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-constructor-style-printer</a></span> to display a structure value.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>structure type property expander</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._auto-equal))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._auto-equal%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">auto-equal</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A syntax which is only useful as an option to <span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-imitation-simple-struct%29%29" class="RktStxLink" data-pltdoc="x">define-imitation-simple-struct</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-syntax-and-value-imitation-simple-struct%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-and-value-imitation-simple-struct</a></span>. In that context, it specifies that the created structure type should have an implementation of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._gen%7E3aequal%252Bhash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gen:equal+hash</a></span> which treats any two of the structure values as <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> if their fields are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._lathe-comforts/struct..rkt)._define-imitation-simple-generics))"></a><span title="Provided from: lathe-comforts/struct | Package: lathe-comforts-lib"><span class="RktSym"><a href="#%28form._%28%28lib._lathe-comforts%2Fstruct..rkt%29._define-imitation-simple-generics%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-imitation-simple-generics</a></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">inst?-id</span><span class="hspace">&nbsp;</span><span class="RktVar">inst-impl?-id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">#:method</span><span class="hspace">&nbsp;</span><span class="RktVar">method-id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">#:this</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop:inst-id</span><span class="hspace">&nbsp;</span><span class="RktVar">build-inst-impl-id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">prop-name-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">inst-impl-reflection-name-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">supers-expr</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">prop-name-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">inst-impl-reflection-name-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">supers-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._cons%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structprops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._struct-type-property%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">struct-type-property?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktVar">inst-impl?</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Creates a new structure type property, creates a new structure type for use as the type of implementations of that property, and defines generic-interface-like operations for using these things.</div></p><p>The variable <span class="RktVar">inst?-id</span> is defined to be a predicate which determines whether the given value implements the property. Usually a value is considered to implement the property if its structure type has an implementation associated with the property. A structure type descriptor is special; it&rsquo;s considered to implement the property if the structure type it&rsquo;s a descriptor for has an implementation associated with the property.</p><p>The variable <span class="RktVar">inst-impl?-id</span> is defined to be a predicate which recognizes values of the structure type created for representing implementations of this property.</p><p>Each variable <span class="RktVar">method-id</span> is defined to be a procedure of the indicated number of arguments. Each <span class="RktPn">(</span><span class="RktPn">)</span> occurrence represents one argument, and the occurrence of <span class="RktPn">(</span><span class="RktPn">#:this</span><span class="RktPn">)</span> represents one argument which receives special treatment. The argument in the <span class="RktPn">(</span><span class="RktPn">#:this</span><span class="RktPn">)</span> position is expected to be a value which implements the property. Its implementation for the property determines the rest of the procedure&rsquo;s behavior.</p><p>The variable <span class="RktVar">prop:inst-id</span> is defined to a structure type property descriptor. When a structure type has an implementation associated with the descriptor <span class="RktVar">prop:inst-id</span>, that implementation is also associated with the property the rest of these operations interact with. (In fact, for now this is the descriptor of the property itself.)</p><p>The variable <span class="RktVar">build-inst-impl-id</span> is defined to be a procedure which constructs a value which represents an implementation of this property from N arguments, where N is the number of <span class="RktPn">#:method</span> clauses in this definition. Each argument must be an implementation to use for the corresponding method.</p><p>The symbol resulting from <span class="RktVar">prop-name-expr</span> is used for certain reflective operations on the structure type property descriptor.</p><p>The symbol resulting from <span class="RktVar">inst-impl-reflection-name-expr</span> is used for certain reflective operations on instances of the structure type of implementations.</p><p>The list resulting from <span class="RktVar">supers-expr</span> has the same meaning as the <span class="RktVar">supers</span> argument to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structprops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-struct-type-property%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-struct-type-property</a></span>. It&rsquo;s an association list mapping a structure type property to a function which transform the implementation of this property into the implementation of that one. When a structure type has an implementation of this property, it has an implementation of all of those as well, generated by the given functions.</p><p>When composing a <span class="RktVar">supers</span> argument to pass in, keep in mind that the values representing the implementation of this property are very opaque. Usually the only way to use them is by incorporating them into the creation of another structure type. Most <span class="RktVar">supers</span> arguments will simply use constant values or call the generic methods, ignoring the implementation value they receive altogether.</p><p>Note that unlike <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528form._%2528%2528lib._racket%252Fgeneric..rkt%2529._define-generics%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-generics</a></span>, this has no support for creating generic interface information that can be used with the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span> <span class="RktPn">#:method</span> syntax; it has no support for giving methods optional arguments, keyword arguments, rest arguments, or non-dispatching fast paths; it has no support for letting instances implement some methods but not others; and it does not define a contract combinator.</p><p>Some of these drawbacks are tricky to work around, but not all of them. Methods which take complex argument lists or which have fast paths can be defined as wrapper procedures. The idea of an unimplemented method can be approximated by adding a second method that returns a boolean saying whether the first is implemented.</p><p>The <span class="RktPn">#:method</span> syntax is not especially feasible. It&rsquo;s possible to use it by writing a separate <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528form._%2528%2528lib._racket%252Fgeneric..rkt%2529._define-generics%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-generics</a></span> interface with a <span class="RktPn">#:derive-property</span> option that populates this property. However, users should be discouraged from calling that wrapper interface&rsquo;s methods directly or using its contract combinator, since those things will look at the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=struct-generics.html%23%2528form._%2528%2528lib._racket%252Fgeneric..rkt%2529._define-generics%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-generics</a></span> interface, not this property it&rsquo;s intended to populate. Instead of using the <span class="RktPn">#:method</span> syntax, it&rsquo;s recommended to define various procedures and macros that make calls to <span class="RktVar">build-inst-impl-id</span> with the desired combinations of functionality.</p><p>Even the contract combinator can be simulated in a more big-picture sense: Higher-order contracts for structure type properties will tend to need to replace a property&rsquo;s implementation with an instrumented version. Not all structure types that implement a properly will do so in a way that&rsquo;s easily decoupled from their other functionality, much less swapped out for another whole implementation. That means the ability to swap something out is essentially another method that structure type can implement, and it can be designed as such.</p><p>When writing contracts for values whose design isn&rsquo;t easy to change, another approach is to intercept those values at the boundaries of a program and convert them into a custom structure type whose design is easier to control.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="hash.html" title="backward to &quot;7 Utilities for Hash Tables&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Lathe Comforts&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="match.html" title="forward to &quot;9 Utilities for Match Expanders&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/lathe-comforts/struct.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:27:23 GMT -->
</html>