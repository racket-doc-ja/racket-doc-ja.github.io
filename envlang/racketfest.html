<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/envlang/racketfest.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:26:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Envlang @ racketfest</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">envlang:<span class="mywbr"> &nbsp;</span> an experimental language with first-<wbr></wbr>class environments</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="test-tiny.html" class="tocviewlink" data-pltdoc="x">Tests and examples for <span class="RktModLink"><span class="RktSym">envlang/<span class="mywbr"> &nbsp;</span>tiny</span></span></a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="demo-rkt.html" class="tocviewlink" data-pltdoc="x">Tests and examples for <span class="RktModLink"><span class="RktSym">envlang/<span class="mywbr"> &nbsp;</span>rkt</span></span></a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Envlang @ racketfest</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Envlang @ racketfest</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._.Use_cases_for_macros%29" class="tocviewlink" data-pltdoc="x">Use cases for macros</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._.Overview_of_the_semantics%29" class="tocviewlink" data-pltdoc="x">Overview of the semantics</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._.First-class_solutions%29" class="tocviewlink" data-pltdoc="x">First-<wbr></wbr>class solutions</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="#%28part._.Compile-time_transformations%29" class="tocviewlink" data-pltdoc="x">Compile-<wbr></wbr>time transformations</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="#%28part._.Code_analysis%29" class="tocviewlink" data-pltdoc="x">Code analysis</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="#%28part._.Example_use%29" class="tocviewlink" data-pltdoc="x">Example use</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Use_cases_for_macros%29" class="tocsubseclink" data-pltdoc="x">Use cases for macros</a></td></tr><tr><td><span class="tocsublinknumber">3.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Environment_manipulation%29" class="tocsubseclink" data-pltdoc="x">Environment manipulation</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-bindings~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-bindings&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Control_flow%29" class="tocsubseclink" data-pltdoc="x">Control flow</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-order~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-order&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Syntactic_sugar%29" class="tocsubseclink" data-pltdoc="x">Syntactic sugar</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-syntactic-sugar~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-syntactic-sugar&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.1.4<tt>&nbsp;</tt></span><a href="#%28part._.Optimisations%29" class="tocsubseclink" data-pltdoc="x">Optimisations</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-optimisations~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-optimisations&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.1.5<tt>&nbsp;</tt></span><a href="#%28part._.Code_analysis%29" class="tocsubseclink" data-pltdoc="x">Code analysis</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-annotations~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-annotations&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Overview_of_the_semantics%29" class="tocsubseclink" data-pltdoc="x">Overview of the semantics</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cpromise~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;promise&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cvariables~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;variables&#187;<span style="vertical-align: sub; font-size: 80%">1</span></a></span></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._.First-class_solutions%29" class="tocsubseclink" data-pltdoc="x">First-<wbr></wbr>class solutions</a></td></tr><tr><td><span class="tocsublinknumber">3.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Environment_manipulation%29" class="tocsubseclink" data-pltdoc="x">Environment manipulation</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cmy-let~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;my-let&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-return%2Bwhere~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-return+where&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3creturn%2Bwhere~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;return+where&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Control_flow%29" class="tocsubseclink" data-pltdoc="x">Control flow</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cmy-if~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;my-if&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.3.3<tt>&nbsp;</tt></span><a href="#%28part._.Syntactic_sugar%29" class="tocsubseclink" data-pltdoc="x">Syntactic sugar</a></td></tr><tr><td><span class="tocsublinknumber">3.3.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Identifiers_with_different_meanings%29" class="tocsubseclink" data-pltdoc="x">Identifiers with different meanings</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cvariables~3e~3a2~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;variables&#187;<span style="vertical-align: sub; font-size: 80%">2</span></a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3clet-in-usage~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-in-usage&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3clet-in~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-in&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cfor-in-usage~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;for-in-usage&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cfor-in~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;for-in&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.3.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Extra_parentheses%29" class="tocsubseclink" data-pltdoc="x">Extra parentheses</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-let-paren~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-let-paren&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3clet-paren~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-paren&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.3.3.3<tt>&nbsp;</tt></span><a href="#%28part._.Infix%29" class="tocsubseclink" data-pltdoc="x">Infix</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cexample-infix~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;example-infix&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.3.3.4<tt>&nbsp;</tt></span><a href="#%28part._.Manipulating_identifiers%29" class="tocsubseclink" data-pltdoc="x">Manipulating identifiers</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cexample-postfix-ids~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;example-postfix-ids&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cpostfix-ids~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;postfix-ids&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._.Compile-time_transformations%29" class="tocsubseclink" data-pltdoc="x">Compile-<wbr></wbr>time transformations</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3ccompile-time-proposal~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;compile-time-proposal&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3ccompile-time-proposal-equivalent~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;compile-time-proposal-equivalent&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._.Code_analysis%29" class="tocsubseclink" data-pltdoc="x">Code analysis</a></td></tr><tr><td><span class="tocsublinknumber">3.5.1<tt>&nbsp;</tt></span><a href="#%28part._.Type_checking%29" class="tocsubseclink" data-pltdoc="x">Type checking</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3crow-type-example~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;row-type-example&#187;</a></span></td></tr><tr><td><span class="tocsublinknumber">3.5.2<tt>&nbsp;</tt></span><a href="#%28part._.Implemented_within_the_language%29" class="tocsubseclink" data-pltdoc="x">Implemented within the language</a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#%28part._.Example_use%29" class="tocsubseclink" data-pltdoc="x">Example use</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cprogram~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;program&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3cenv%2Bprogram~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;env+program&#187;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28prefixable._chunk~3a~3c%2A~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;*&#187;</a></span></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="demo-rkt.html" title="backward to &quot;2 Tests and examples for envlang/rkt&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;envlang: an experimental language with first-class environments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;racketfest&quot;">3<tt>&nbsp;</tt><a name="(part._racketfest)"></a>Envlang @ racketfest</h3><h4 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Use_cases_for_macros&quot;">3.1<tt>&nbsp;</tt><a name="(part._.Use_cases_for_macros)"></a>Use cases for macros</h4><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Environment_manipulation&quot;">3.1.1<tt>&nbsp;</tt><a name="(part._.Environment_manipulation)"></a>Environment manipulation</h5><p>Adding bindings to the environment, getting bindings from the environment:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-case-bindings~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-bindings~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-bindings&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; env += {var = val}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-struct</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">field</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; env += {"$name-$field" = accessor-fn} &#8230;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">aif</span><span class="hspace">&nbsp;</span><span class="RktSym">condition</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; env += {it = condition}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">match</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; env += {a = (car v)} {b = (cdr v)}</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Control_flow&quot;">3.1.2<tt>&nbsp;</tt><a name="(part._.Control_flow)"></a>Control flow</h5><p>Changing the order of execution:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-case-order~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-order~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-order&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">condition</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">; can be expressed as:</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">condition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">match</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">null</span><span class="hspace">&nbsp;</span><span class="RktSym">if-null</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-cons</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">; can be expressed as:</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-null</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-cons</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">for/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-list</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">; can be expressed as</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Syntactic_sugar&quot;">3.1.3<tt>&nbsp;</tt><a name="(part._.Syntactic_sugar)"></a>Syntactic sugar</h5><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-case-syntactic-sugar~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-syntactic-sugar~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-syntactic-sugar&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; infix</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">for/list</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">x:int</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Optimisations&quot;">3.1.4<tt>&nbsp;</tt><a name="(part._.Optimisations)"></a>Optimisations</h5><p>Optimisations are semantics-preserving compile-time transformations of the program.</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-case-optimisations~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-optimisations~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-optimisations&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">pre-calculated</span><span class="hspace">&nbsp;</span><span class="RktSym">hash</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span></td></tr><tr><td><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktSym">unrolling</span></td></tr><tr><td><span class="RktSym">&#8230;</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Code_analysis&quot;">3.1.5<tt>&nbsp;</tt><a name="(part._.Code_analysis)"></a>Code analysis</h5><p>Tracking and propagating annotations on the code:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-case-annotations~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-case-annotations~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-case-annotations&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">typed/racket</span></td></tr><tr><td><span class="RktSym">source</span><span class="hspace">&nbsp;</span><span class="RktSym">locations</span></td></tr><tr><td><span class="RktSym">tooltips</span></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Overview_of_the_semantics&quot;">3.2<tt>&nbsp;</tt><a name="(part._.Overview_of_the_semantics)"></a>Overview of the semantics</h4><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cpromise~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cpromise~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;promise&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">; is sugar for:</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">@</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cvariables~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cvariables~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;variables&#187;<span style="vertical-align: sub; font-size: 80%">1</span></a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">x</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">; is sugar for:</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;First-class_solutions&quot;">3.3<tt>&nbsp;</tt><a name="(part._.First-class_solutions)"></a>First-class solutions</h4><p>Adding bindings to the environment, getting bindings from the environment:</p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Environment_manipulation&quot;">3.3.1<tt>&nbsp;</tt><a name="(part._.Environment_manipulation)"></a>Environment manipulation</h5><p>User-defined let:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cmy-let~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cmy-let~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;my-let&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; evaluate body in outer env + var=val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-set</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; var name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">; evaluate val in outer env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>User-defined let with different order for the arguments:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-return+where~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-return%2Bwhere~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-return+where&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">return</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">123</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3creturn+where~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3creturn%2Bwhere~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;return+where&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-where</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-=</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assert</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string=?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-where</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"where"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assert</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string=?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-=</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"="</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">@</span><span class="hspace">&nbsp;</span><span class="RktSym">my-let</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Control_flow&quot;">3.3.2<tt>&nbsp;</tt><a name="(part._.Control_flow)"></a>Control flow</h5><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cmy-if~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cmy-if~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;my-if&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">condition</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">condition</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Syntactic_sugar&quot;">3.3.3<tt>&nbsp;</tt><a name="(part._.Syntactic_sugar)"></a>Syntactic sugar</h5><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Identifiers_with_different_meanings&quot;">3.3.3.1<tt>&nbsp;</tt><a name="(part._.Identifiers_with_different_meanings)"></a>Identifiers with different meanings</h5><p>Bindings in the environment point to a table associating
meanings to values. See <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=polysemy&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">polysemy</span></a>.</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cvariables~3e~3a2~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cvariables~3e~3a2~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;variables&#187;<span style="vertical-align: sub; font-size: 80%">2</span></a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">x</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">; becomes sugar for:</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"variable"</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><span class="RktSym">in</span> keyword used in different contexts:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3clet-in-usage~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3clet-in-usage~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-in-usage&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3clet-in~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3clet-in~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-in&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-=</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-in</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assert</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-=</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"let-in keyword"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">let-in-=</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assert</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-in</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"let-in keyword"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">let-in-in</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">@</span><span class="hspace">&nbsp;</span><span class="RktSym">my-let</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cfor-in-usage~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cfor-in-usage~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;for-in-usage&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">for/list</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cfor-in~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cfor-in~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;for-in&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-in</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assert</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-in</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"for keyword"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">for-in</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">@</span><span class="hspace">&nbsp;</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>It&rsquo;s easy to rename just the <span class="RktVal">"let-in keyword"</span> part
without renaming the <span class="RktVal">"for keyword"</span> part.</p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Extra_parentheses&quot;">3.3.3.2<tt>&nbsp;</tt><a name="(part._.Extra_parentheses)"></a>Extra parentheses</h5><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cuse-let-paren~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cuse-let-paren~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;use-let-paren&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3clet-paren~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3clet-paren~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-paren&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">binding</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">varval</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hash-set</span><span class="hspace">&nbsp;</span><span class="RktVal">"#%app"</span><span class="hspace">&nbsp;</span><span class="RktSym">cons</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">binding</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">@</span><span class="hspace">&nbsp;</span><span class="RktSym">my-let</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">varval</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">varval</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Infix&quot;">3.3.3.3<tt>&nbsp;</tt><a name="(part._.Infix)"></a>Infix</h5><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cexample-infix~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cexample-infix~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;example-infix&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></p></blockquote></div></p><p>Needs external support in the language (or overloading
<span class="RktSym">#%app</span>). WIP prototype using
<a href="http://www.cse.chalmers.se/~nad/publications/danielsson-norell-mixfix.pdf">mixfix</a>
on <a href="https://repl.it/@envlang/env">repl.it</a> and
<a href="https://github.com/envlang/env">github</a>.</p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Manipulating_identifiers&quot;">3.3.3.4<tt>&nbsp;</tt><a name="(part._.Manipulating_identifiers)"></a>Manipulating identifiers</h5><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cexample-postfix-ids~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cexample-postfix-ids~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;example-postfix-ids&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">x:int</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cpostfix-ids~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cpostfix-ids~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;postfix-ids&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#10741;</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-=</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">kw-in</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">forced-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">force</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">when</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ends-with</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">promise-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">":int"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assert</span><span class="hspace">&nbsp;</span><span class="RktSym">int?</span><span class="hspace">&nbsp;</span><span class="RktSym">forced-val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">@</span><span class="hspace">&nbsp;</span><span class="RktSym">my-let</span><span class="hspace">&nbsp;</span><span class="RktSym">outer-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Compile-time_transformations&quot;">3.4<tt>&nbsp;</tt><a name="(part._.Compile-time_transformations)"></a>Compile-time transformations</h4><p>Wrap parts to be evaluated at compile-time, the wrapper acts
like <span class="RktSym">unquote</span> where the whole program is in a
<span class="RktSym">quasiquote</span>.</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3ccompile-time-proposal~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3ccompile-time-proposal~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;compile-time-proposal&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">run-time</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compile-time</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3ccompile-time-proposal-equivalent~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3ccompile-time-proposal-equivalent~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;compile-time-proposal-equivalent&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">let</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">[</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktVal">]</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">*</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div></p><p>Semantics-preserving: removing the <span class="RktSym">run-time</span> and
<span class="RktSym">compile-time</span> markers must give an equivalent
program.</p><h4 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Code_analysis&quot;">3.5<tt>&nbsp;</tt><a name="(part._.Code_analysis)"></a>Code analysis</h4><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Type_checking&quot;">3.5.1<tt>&nbsp;</tt><a name="(part._.Type_checking)"></a>Type checking</h5><p>These environment manipulations can be modeled with row types:</p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3crow-type-example~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3crow-type-example~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;row-type-example&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">&#955;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">foo</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">bar</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">string</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">&#961;</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">struct</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">foo</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">quux</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">&#961;</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">without</span><span class="hspace">&nbsp;</span><span class="RktSym">.bar</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">with</span><span class="hspace">&nbsp;</span><span class="RktSym">.quux</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">x.foo</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-&gt;int</span><span class="hspace">&nbsp;</span><span class="RktSym">x.bar</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Implemented_within_the_language&quot;">3.5.2<tt>&nbsp;</tt><a name="(part._.Implemented_within_the_language)"></a>Implemented within the language</h5><p>&#8230; to be explored?</p><h4 x-source-module="(lib &quot;envlang/scribblings/envlang.scrbl&quot;)" x-source-pkg="envlang" x-part-tag="&quot;Example_use&quot;">3.6<tt>&nbsp;</tt><a name="(part._.Example_use)"></a>Example use</h4><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cprogram~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cprogram~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;program&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">my-let</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-paren</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-postfix</span><span class="hspace">&nbsp;</span><span class="RktSym">x:int</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">return</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for/list</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktSym">in</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compile-time</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3cenv+program~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3cenv%2Bprogram~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;env+program&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">let*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">my-let</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28prefixable._chunk~3a~3cmy-let~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;my-let&#187;</a><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">return</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28prefixable._chunk~3a~3creturn%2Bwhere~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;return+where&#187;</a><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">my-if</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28prefixable._chunk~3a~3cmy-if~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;my-if&#187;</a><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">let-paren</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28prefixable._chunk~3a~3clet-paren~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;let-paren&#187;</a><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">let-postfix</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28prefixable._chunk~3a~3cpostfix-ids~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;postfix-ids&#187;</a><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="#%28elem._%28prefixable._chunk~3a~3cprogram~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;program&#187;</a><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><a name="(elem._(prefixable._chunk~3a~3c*~3e~3a1~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28prefixable._chunk~3a~3c%2A~3e~3a1~3a1%29%29" class="plainlink" data-pltdoc="x">&#171;*&#187;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktCmt">;</span><span class="RktCmt">;&lt;env+program&gt;</span></p></blockquote></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="demo-rkt.html" title="backward to &quot;2 Tests and examples for envlang/rkt&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;envlang: an experimental language with first-class environments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/envlang/racketfest.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:26:27 GMT -->
</html>