<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/plisqin/Read_Me_First.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Read Me First</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="PStyles.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="PScripts.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Plisqin</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Read Me First</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="using-define-schema.html" class="tocviewlink" data-pltdoc="x">Using define-<wbr></wbr>schema</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Aggregates.html" class="tocviewlink" data-pltdoc="x">Aggregates</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Nullability.html" class="tocviewlink" data-pltdoc="x">Nullability</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Refactoring_Recipes.html" class="tocviewlink" data-pltdoc="x">Refactoring Recipes</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Reference.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="research-language.html" class="tocviewlink" data-pltdoc="x">Plisqin as a Research Language</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Read Me First</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._.What_is_.Plisqin_%29" class="tocviewlink" data-pltdoc="x">What is Plisqin?</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._.Installation%29" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._.Motivation%29" class="tocviewlink" data-pltdoc="x">Motivation</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._.Project_.Scope%29" class="tocviewlink" data-pltdoc="x">Project Scope</a></td></tr><tr><td align="right">1.5&nbsp;</td><td><a href="#%28part._.Variants%29" class="tocviewlink" data-pltdoc="x">Variants</a></td></tr><tr><td align="right">1.6&nbsp;</td><td><a href="#%28part._.Usage_.Patterns%29" class="tocviewlink" data-pltdoc="x">Usage Patterns</a></td></tr><tr><td align="right">1.7&nbsp;</td><td><a href="#%28part._.What_.Should_.I_.Read_.Next_%29" class="tocviewlink" data-pltdoc="x">What Should I Read Next?</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.What_is_.Plisqin_%29" class="tocsubseclink" data-pltdoc="x">What is Plisqin?</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Installation%29" class="tocsubseclink" data-pltdoc="x">Installation</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.Motivation%29" class="tocsubseclink" data-pltdoc="x">Motivation</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Project_.Scope%29" class="tocsubseclink" data-pltdoc="x">Project Scope</a></td></tr><tr><td><span class="tocsublinknumber">1.5<tt>&nbsp;</tt></span><a href="#%28part._.Variants%29" class="tocsubseclink" data-pltdoc="x">Variants</a></td></tr><tr><td><span class="tocsublinknumber">1.6<tt>&nbsp;</tt></span><a href="#%28part._.Usage_.Patterns%29" class="tocsubseclink" data-pltdoc="x">Usage Patterns</a></td></tr><tr><td><span class="tocsublinknumber">1.7<tt>&nbsp;</tt></span><a href="#%28part._.What_.Should_.I_.Read_.Next_%29" class="tocsubseclink" data-pltdoc="x">What Should I Read Next?</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Plisqin&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Plisqin&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="using-define-schema.html" title="forward to &quot;2 Using define-schema&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;Read_Me_First&quot;">1<tt>&nbsp;</tt><a name="(part._.Read_.Me_.First)"></a>Read Me First</h3><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;What_is_Plisqin_&quot;">1.1<tt>&nbsp;</tt><a name="(part._.What_is_.Plisqin_)"></a>What is Plisqin?</h4><ul><li><p>Plisqin is a Racket library that helps you rearrange fragments of
SQL queries in a coherent way.</p></li><li><p>Plisqin is a query language for relational databases that offers
better semantics than SQL.</p></li></ul><p>Both of these statements are a valid mental model.
If you are very familiar with SQL, you might prefer the former;
if not, you will probably prefer the latter.
Eventually you will find both mental models useful.</p><p><div class="SIntrapara">Also: </div><div class="SIntrapara"><ul><li><p>Plisqin is a <a href="research-language.html" data-pltdoc="x">research language.</a></p></li></ul></div></p><p>As far as I know, my ideal query language has not yet been developed.
Plisqin is a step in the right direction.</p><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;Installation&quot;">1.2<tt>&nbsp;</tt><a name="(part._.Installation)"></a>Installation</h4><p><div class="SIntrapara"><ol><li><p>Intall Racket. If you&rsquo;ve never used Racket before, follow
<a href="../quick/index.html">these instructions</a>
to install Racket and learn the basics</p></li><li><p>From your shell, run <span class="stt">raco pkg install plisqin</span></p></li><li><p>Using <span class="stt">#lang racket</span>, verify that the following code works:</p></li></ol></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">plisqin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._prefix-in%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">prefix-in</a></span><span class="hspace">&nbsp;</span><span class="RktSym">aw:</span><span class="hspace">&nbsp;</span><span class="RktSym">plisqin-examples/adventure-works</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">plisqin-examples/adventure-works/schema</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SubFlow"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-examples_adventure-works.html#%28def._%28%28lib._plisqin-examples%2Fadventure-works..rkt%29._show-table%29%29" class="RktValLink" data-pltdoc="x">aw:show-table</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib.html#%28form._%28%28lib._plisqin-lib%2Fmain..rkt%29._from%29%29" class="RktStxLink" data-pltdoc="x">from</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">Product</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib.html#%28def._%28%28lib._plisqin-lib%2Fmain..rkt%29._limit%29%29" class="RktValLink" data-pltdoc="x">limit</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib_strict.html#%28def._%28%28lib._plisqin-lib%2Fstrict..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ProductName</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib_strict.html#%28def._%28%28lib._plisqin-lib%2Fstrict..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">CategoryName</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib_strict.html#%28def._%28%28lib._plisqin-lib%2Fstrict..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">TotalSales</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib_strict.html#%28def._%28%28lib._plisqin-lib%2Fstrict..rkt%29._order-by%29%29" class="RktValLink" data-pltdoc="x">order-by</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">desc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">TotalSales</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="PTableContainer"><tr><td><table cellspacing="0" cellpadding="0" class="PTableWrapper show-results"><tr><td><p><span class="PShowTable">Show Table</span><span class="PShowSql">Show SQL</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="PSql"><tr><td><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">select p.Name as ProductName</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">, cat.Name as CategoryName</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">, round(detailsG.__INJECT1, 2) as TotalSales</span></p></td></tr><tr><td><p><span class="stt">from Product p</span></p></td></tr><tr><td><p><span class="stt">left join (</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">select detailsG.ProductID as __INJECT0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">, sum(detailsG.LineTotal) as __INJECT1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">from SalesOrderDetail detailsG</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">group by detailsG.ProductID</span></p></td></tr><tr><td><p><span class="stt">) detailsG</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">on (detailsG.__INJECT0 = p.ProductID)</span></p></td></tr><tr><td><p><span class="stt">left join ProductSubcategory subcat</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">on (p.ProductSubcategoryID is not null and (subcat.ProductSubcategoryID = p.ProductSubcategoryID))</span></p></td></tr><tr><td><p><span class="stt">left join ProductCategory cat</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">on (subcat.ProductCategoryID is not null and (cat.ProductCategoryID = subcat.ProductCategoryID))</span></p></td></tr><tr><td><p><span class="stt">order by round(detailsG.__INJECT1, 2) desc</span></p></td></tr><tr><td><p><span class="stt">limit 3</span></p></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="PQueryResults"><tr><td><p>ProductName</p></td><td><p>CategoryName</p></td><td><p>TotalSales</p></td></tr><tr><td><p>Mountain-200 Black, 38</p></td><td><p>Bikes</p></td><td><p>4400592.8</p></td></tr><tr><td><p>Mountain-200 Black, 42</p></td><td><p>Bikes</p></td><td><p>4009494.76</p></td></tr><tr><td><p>Mountain-200 Silver, 38</p></td><td><p>Bikes</p></td><td><p>3693678.03</p></td></tr></table></td></tr></table></td></tr></table></div></p></blockquote></div></p><p>Click on "Show SQL" and you might be surprised!
The generated SQL is much larger than the Plisqin query.
This may seem like "too much magic" right now, but once you learn how it works
it is actually pretty formulaic.</p><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;Motivation&quot;">1.3<tt>&nbsp;</tt><a name="(part._.Motivation)"></a>Motivation</h4><p><div class="SIntrapara">During my software development career, many of my tasks could be described
as "fetch data from an SQL database and display that data."
Some tasks have very little display logic, such as a report that simply
shows an SQL result set verbatim.
Other tasks have more complicated display logic, such as a web page that shows
a musical artist, their albums, and the track listings for each album.
But regardless of how complex the display logic might be, I found that my favorite
strategy for these tasks is usually
</div><div class="SIntrapara"><ol><li><p>Imagine the ideal result set(s) for the task.</p></li><li><p>Use SQL to produce those result sets.</p></li><li><p>Use something else to display the results.</p></li></ol></div></p><p>It is step 2 that Plisqin aims to improve.
SQL and all the SQL alternatives I have tried are lacking in some way.
I always end up duplicating fragments of queries and joins all over the place.
Using Plisqin allows me to reduce duplication to what I suspect is the theoretical minimum.</p><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;Project_Scope&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Project_.Scope)"></a>Project Scope</h4><p>Plisqin is now stable but incomplete.</p><p>Plisqin&rsquo;s ideal scope includes all "application-level SQL", basically equivalent
to the CRUD operations (create, read, update, delete).
All "DBA-level SQL", such as creating tables, indexes, logins, etc... is
explicitly a non-goal.</p><p>Right now Plisqin only supports queries.
Create, update, and delete operations are not provided yet.
If you have an urgent need, please
<a href="https://github.com/default-kramer/plisqin">open an issue</a>.</p><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;Variants&quot;">1.5<tt>&nbsp;</tt><a name="(part._.Variants)"></a>Variants</h4><p><div class="SIntrapara">Plisqin has two <a name="(tech._variant)"></a><span style="font-style: italic">variants</span>.
The <a name="(tech._unsafe)"></a><span style="font-style: italic">unsafe</span> variant does very little argument validation and may
allow SQL injection if you are not careful.
The <a name="(tech._strict)"></a><span style="font-style: italic">strict</span> variant does much more argument validation and protects
against SQL injection.
By convention, everything that is unsafe is <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span>d with the prefix
<span class="RktSym">%%</span>, for example <span class="RktSym"><a href="plisqin-lib_unsafe.html#%28def._%28%28lib._plisqin-lib%2Funsafe..rkt%29._join-on%29%29" class="RktValLink" data-pltdoc="x">%%join-on</a></span> or <span class="RktSym"><a href="plisqin-lib_unsafe.html#%28def._%28%28lib._plisqin-lib%2Funsafe%2Foperators..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">%%+</a></span>.
You can mix and match variants at will, as the following example demonstrates:
</div><div class="SIntrapara"><blockquote class="SubFlow"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-examples_adventure-works.html#%28def._%28%28lib._plisqin-examples%2Fadventure-works..rkt%29._show-table%29%29" class="RktValLink" data-pltdoc="x">aw:show-table</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib.html#%28form._%28%28lib._plisqin-lib%2Fmain..rkt%29._from%29%29" class="RktStxLink" data-pltdoc="x">from</a></span><span class="hspace">&nbsp;</span><span class="RktSym">cat</span><span class="hspace">&nbsp;</span><span class="RktSym">ProductCategory</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib_strict.html#%28def._%28%28lib._plisqin-lib%2Fstrict..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Name</span><span class="hspace">&nbsp;</span><span class="RktSym">cat</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="plisqin-lib_unsafe.html#%28def._%28%28lib._plisqin-lib%2Funsafe..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">%%select</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"substr("</span><span class="RktPn">(</span><span class="RktSym">Name</span><span class="hspace">&nbsp;</span><span class="RktSym">cat</span><span class="RktPn">)</span><span class="RktVal">", 2) as SubstringDemo"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="PTableContainer"><tr><td><table cellspacing="0" cellpadding="0" class="PTableWrapper show-results"><tr><td><p><span class="PShowTable">Show Table</span><span class="PShowSql">Show SQL</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="PSql"><tr><td><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">select cat.Name as Name</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">, substr(cat.Name, 2) as SubstringDemo</span></p></td></tr><tr><td><p><span class="stt">from ProductCategory cat</span></p></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="PQueryResults"><tr><td><p>Name</p></td><td><p>SubstringDemo</p></td></tr><tr><td><p>Bikes</p></td><td><p>ikes</p></td></tr><tr><td><p>Components</p></td><td><p>omponents</p></td></tr><tr><td><p>Clothing</p></td><td><p>lothing</p></td></tr><tr><td><p>Accessories</p></td><td><p>ccessories</p></td></tr></table></td></tr></table></td></tr></table></div></p></blockquote></div></p><p>I suggest that you use the strict variant most of the time, and resort to the
unsafe variant only when the strict variant fails you.
But using only the unsafe variant is also a valid approach, especially in
situations where SQL injection is impossible such as static SQL generation.</p><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;Usage_Patterns&quot;">1.6<tt>&nbsp;</tt><a name="(part._.Usage_.Patterns)"></a>Usage Patterns</h4><p><div class="SIntrapara">When and how does Plisqin generate SQL?
What am I supposed to do with the SQL after it is generated?
Plisqin is flexible, and can be used:
</div><div class="SIntrapara"><ul><li><p>As a static SQL generator.
Simply use Plisqin&rsquo;s <span class="RktSym"><a href="plisqin-lib.html#%28def._%28%28lib._plisqin-lib%2Fmain..rkt%29._to-sql%29%29" class="RktValLink" data-pltdoc="x">to-sql</a></span> and Racket&rsquo;s file IO to generate SQL files,
then do whatever you want with those SQL files.
Any application that consumes the SQL isn&rsquo;t even aware that Plisqin exists.</p></li><li><p>As a "Racket-aware" static SQL generator.
Use <span class="RktSym"><a href="plisqin-lib.html#%28form._%28%28lib._plisqin-lib%2Fmain..rkt%29._compile-statements%29%29" class="RktStxLink" data-pltdoc="x">compile-statements</a></span> to generate the SQL and hide it inside a
normal Racket procedure. This procedure cooperates with the
<a href="../db/index.html">db module</a>
so that your Racket application can fetch data at runtime.</p></li><li><p>As a dynamic SQL generator.
In this situation, you construct queries and call <span class="RktSym"><a href="plisqin-lib.html#%28def._%28%28lib._plisqin-lib%2Fmain..rkt%29._to-sql%29%29" class="RktValLink" data-pltdoc="x">to-sql</a></span> at runtime.
I have not tested this usage pattern and don&rsquo;t recommend it,
but sometimes it is unavoidable.
Be very careful &ndash; even using the <a href="#%28tech._strict%29" class="techoutside" data-pltdoc="x"><span class="techinside">strict</span></a> variant to avoid SQL injection
does not guarantee that you are safe.
For example, an attacker might be able to construct a computationally expensive
query that renders your database unresponsive.</p></li></ul></div></p><h4 x-source-module="(lib &quot;plisqin-doc/scribblings/plisqin.scrbl&quot;)" x-source-pkg="plisqin" x-part-tag="&quot;What_Should_I_Read_Next_&quot;">1.7<tt>&nbsp;</tt><a name="(part._.What_.Should_.I_.Read_.Next_)"></a>What Should I Read Next?</h4><p>You might want to peek at <a href="Reference.html#%28part._modules-and-prefixes%29" data-pltdoc="x">Modules and Prefixes</a> to get the lay of
the land and see some other prefix conventions that this documentation uses.
Then continue reading at <a href="using-define-schema.html" data-pltdoc="x">Using define-schema</a>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Plisqin&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Plisqin&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="using-define-schema.html" title="forward to &quot;2 Using define-schema&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/plisqin/Read_Me_First.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:45 GMT -->
</html>