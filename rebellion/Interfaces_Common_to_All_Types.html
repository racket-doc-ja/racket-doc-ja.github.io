<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/rebellion/Interfaces_Common_to_All_Types.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:25:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2.1&nbsp;Interfaces Common to All Types</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Rebellion</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Base_Libraries.html" class="tocviewlink" data-pltdoc="x">Base Libraries</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Data_Types.html" class="tocviewselflink" data-pltdoc="x">Data Types</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Streaming_Computations.html" class="tocviewlink" data-pltdoc="x">Streaming Computations</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Collections.html" class="tocviewlink" data-pltdoc="x">Collections</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Concurrency.html" class="tocviewlink" data-pltdoc="x">Concurrency</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Binary_Data.html" class="tocviewlink" data-pltdoc="x">Binary Data</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Module_Utilities.html" class="tocviewlink" data-pltdoc="x">Module Utilities</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Other_Libraries.html" class="tocviewlink" data-pltdoc="x">Other Libraries</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="Data_Types.html" class="tocviewlink" data-pltdoc="x">Data Types</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Interfaces Common to All Types</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="Tuple_Types.html" class="tocviewlink" data-pltdoc="x">Tuple Types</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="Record_Types.html" class="tocviewlink" data-pltdoc="x">Record Types</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="Enum_Types.html" class="tocviewlink" data-pltdoc="x">Enum Types</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="Singleton_Types.html" class="tocviewlink" data-pltdoc="x">Singleton Types</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="Wrapper_Types.html" class="tocviewlink" data-pltdoc="x">Wrapper Types</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="Object_Types.html" class="tocviewlink" data-pltdoc="x">Object Types</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="Struct_Descriptors.html" class="tocviewlink" data-pltdoc="x">Struct Descriptors</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Interfaces Common to All Types</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1.1&nbsp;</td><td><a href="#%28part._nominal%29" class="tocviewlink" data-pltdoc="x">Nominal v.s. Structural Types</a></td></tr><tr><td align="right">2.1.2&nbsp;</td><td><a href="#%28part._.Struct-.Based_.Types_and_.Struct_.Type_.Properties%29" class="tocviewlink" data-pltdoc="x">Struct-<wbr></wbr>Based Types and Struct Type Properties</a></td></tr><tr><td align="right">2.1.3&nbsp;</td><td><a href="#%28part._.Type_.Implementations_and_.Generativity%29" class="tocviewlink" data-pltdoc="x">Type Implementations and Generativity</a></td></tr><tr><td align="right">2.1.4&nbsp;</td><td><a href="#%28part._.Defining_.Types%29" class="tocviewlink" data-pltdoc="x">Defining Types</a></td></tr><tr><td align="right">2.1.5&nbsp;</td><td><a href="#%28part._.Compile-.Time_.Type_.Information%29" class="tocviewlink" data-pltdoc="x">Compile-<wbr></wbr>Time Type Information</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1.1<tt>&nbsp;</tt></span><a href="#%28part._nominal%29" class="tocsubseclink" data-pltdoc="x">Nominal v.s. Structural Types</a></td></tr><tr><td><span class="tocsublinknumber">2.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Struct-.Based_.Types_and_.Struct_.Type_.Properties%29" class="tocsubseclink" data-pltdoc="x">Struct-<wbr></wbr>Based Types and Struct Type Properties</a></td></tr><tr><td><span class="tocsublinknumber">2.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Type_.Implementations_and_.Generativity%29" class="tocsubseclink" data-pltdoc="x">Type Implementations and Generativity</a></td></tr><tr><td><span class="tocsublinknumber">2.1.4<tt>&nbsp;</tt></span><a href="#%28part._.Defining_.Types%29" class="tocsubseclink" data-pltdoc="x">Defining Types</a></td></tr><tr><td><span class="tocsublinknumber">2.1.5<tt>&nbsp;</tt></span><a href="#%28part._.Compile-.Time_.Type_.Information%29" class="tocsubseclink" data-pltdoc="x">Compile-<wbr></wbr>Time Type Information</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Data_Types.html" title="backward to &quot;2 Data Types&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Data_Types.html" title="up to &quot;2 Data Types&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Tuple_Types.html" title="forward to &quot;2.2 Tuple Types&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Interfaces_Common_to_All_Types&quot;">2.1<tt>&nbsp;</tt><a name="(part._.Interfaces_.Common_to_.All_.Types)"></a>Interfaces Common to All Types</h4><p>The <a href="Data_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type</span></a> module is broken down into a collection of
modules, such as <a href="Record_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type/record</span></a> and <a href="Tuple_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type/tuple</span></a>. Each module is meant for working with a specific kind of
data type. However, all of these modules have a few things in common.</p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;nominal&quot;">2.1.1<tt>&nbsp;</tt><a name="(part._nominal)"></a>Nominal v.s. Structural Types</h5><p>Any type created in <a href="Data_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type</span></a> is a <a name="(tech._nominal._type)"></a><span style="font-style: italic">nominal type</span>,
not a <a name="(tech._structural._type)"></a><span style="font-style: italic">structural type</span>. This means creating a new type, such as with
<span class="RktSym"><a href="Record_Types.html#%28form._%28%28lib._rebellion%2Ftype%2Frecord..rkt%29._define-record-type%29%29" class="RktStxLink" data-pltdoc="x">define-record-type</a></span>, creates a new named unique type that is distinct
from all other types. The functions created by one use of <span class="RktSym"><a href="Record_Types.html#%28form._%28%28lib._rebellion%2Ftype%2Frecord..rkt%29._define-record-type%29%29" class="RktStxLink" data-pltdoc="x">define-record-type</a></span> will not work on instances created via another use of
<span class="RktSym"><a href="Record_Types.html#%28form._%28%28lib._rebellion%2Ftype%2Frecord..rkt%29._define-record-type%29%29" class="RktStxLink" data-pltdoc="x">define-record-type</a></span>, even if both types are named the same and have
exactly the same fields.</p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Struct-Based_Types_and_Struct_Type_Properties&quot;">2.1.2<tt>&nbsp;</tt><a name="(part._.Struct-.Based_.Types_and_.Struct_.Type_.Properties)"></a>Struct-Based Types and Struct Type Properties</h5><p>All types are created using Racket <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structures.html%23%2528tech._structure._type%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">structure types</span></a>, and the
created struct types can have <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=structprops.html%23%2528tech._structure._type._property%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">structure type properties</span></a>
attached to them. Each module typically provides default structure type
properties for the types it creates, based on how its types are typically used.
These defaults can be freely overriden when desired.</p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Type_Implementations_and_Generativity&quot;">2.1.3<tt>&nbsp;</tt><a name="(part._.Type_.Implementations_and_.Generativity)"></a>Type Implementations and Generativity</h5><p>The structure, or <a name="(tech._shape)"></a><span style="font-style: italic">shape</span> of a type is distinct from an <a name="(tech._implementation)"></a><span style="font-style: italic">implementation</span> of that type. Each <a href="Data_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type</span></a> module
reflects this distinction by providing two different interfaces for shapes and
implementations. A <a href="Data_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type</span></a> module for working with <span class="RktVar">kind</span> types provides:</p><ul><li><p>A <span class="RktVar">kind</span><span class="RktSym">-type?</span> type which describes the shape of a
<span class="RktVar">kind</span> type but does not provide any constructors, accessors, or
predicates. Two <span class="RktVar">kind</span><span class="RktSym">-type?</span> values are equal whenever
the names, field counts, etc. of the types they describe are equivalent. That
is, <span class="RktVar">kind</span><span class="RktSym">-type?</span> values are compared using structural
equality. The term <a name="(tech._shape._of._a._type)"></a><span style="font-style: italic">shape of a type</span> or simply <a href="#%28tech._shape%29" class="techoutside" data-pltdoc="x"><span class="techinside">shape</span></a>, refers
to a <span class="RktVar">kind</span><span class="RktSym">-type?</span> value. When used without any
qualification, the term <a href="Data_Types.html#%28tech._type%29" class="techoutside" data-pltdoc="x"><span class="techinside">type</span></a> typically refers to such a value as
well.</p></li><li><p>A <span class="RktVar">kind</span><span class="RktSym">-descriptor?</span> type which provides an actual
implementation of a <span class="RktVar">kind</span> type, including a predicate and any
relevant constructors and accessors. Such an implementation is called a
<a name="(tech._type._descriptor)"></a><span style="font-style: italic">type descriptor</span>, and allows generically operating on unknown types
at runtime. At runtime, the term <a name="(tech._implementation._of._a._type)"></a><span style="font-style: italic">implementation of a type</span>, or
simply <a href="#%28tech._implementation%29" class="techoutside" data-pltdoc="x"><span class="techinside">implementation</span></a>, refers to a type descriptor.</p></li></ul><p>A <span class="RktVar">kind</span> descriptor can be created for a type using the
<span class="RktSym">make-</span><span class="RktVar">kind</span><span class="RktSym">-implementation</span> function
provided by the corresponding <span class="RktMod">rebellion/type/</span><span class="RktVar">kind</span>
module. Multiple calls to such a function with the same type will produce
distinct implementations that are not <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> to each other, meaning
that the <a href="Data_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type</span></a> modules create <a name="(tech._generative._type)"></a><span style="font-style: italic">generative
types</span>.</p><p>Type descriptors may be <span class="emph">uninitialized</span>. An uninitialized type descriptor
cannot be used to create or interact with instances of the type until after
initialization is complete. Uninitialized type descriptors are fairly rare: they
can only be obtained via the <span class="RktPn">#:property-maker</span> mechanism for specifying
structure type properties of created types. This is because the property-making
function needs to receive the type descriptor in order to return implementations
of type properties, but this happens <span class="emph">before</span> the type is created. Property
makers can&rsquo;t use the descriptor&rsquo;s constructor and accessor immediately, but they
can refer to them in implementations of properties such as
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Printer_Extension.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._prop%7E3acustom-write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">prop:custom-write</a></span> (since by the time the constructor or accessor is
actually used, the type is created and the descriptor is initialized). This
delayed initialization step is necessary to allow property makers to be defined
without mutual recursion and in separate modules from the type definitions
they&rsquo;re used for, allowing reuse of generic property makers.</p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Defining_Types&quot;">2.1.4<tt>&nbsp;</tt><a name="(part._.Defining_.Types)"></a>Defining Types</h5><p>Each <span class="RktMod">rebellion/type/</span><span class="RktVar">kind</span> module provides a
<span class="RktSym">define-</span><span class="RktVar">kind</span><span class="RktSym">-type</span> form that creates a new
type and binds its constructor, predicate, and accessors to variables. These
forms are how most users of the <a href="Data_Types.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/type</span></a> modules are
expected to create types, similar to how most Racket struct types are created
with the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span> form rather than the dynamic <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=creatingmorestructs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-struct-type%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-struct-type</a></span>
function.</p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Compile-Time_Type_Information&quot;">2.1.5<tt>&nbsp;</tt><a name="(part._.Compile-.Time_.Type_.Information)"></a>Compile-Time Type Information</h5><p>Some types encapsulate compile-time information about their name, size, fields,
and other properties inside a <a name="(tech._type._binding)"></a><span style="font-style: italic">type binding</span>. Type bindings are used by
macros such as <span class="RktSym"><a href="Enum_Types.html#%28form._%28%28lib._rebellion%2Ftype%2Fenum..rkt%29._enum-out%29%29" class="RktStxLink" data-pltdoc="x">enum-out</a></span> to generate code specialized to that type. Type
bindings are created by type definition macros and extracted using
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=syntax&amp;rel=stxparse-specifying.html%23%2528tech._syntax._clas%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">syntax classes</span></a>. For
example, <span class="RktSym"><a href="Enum_Types.html#%28form._%28%28lib._rebellion%2Ftype%2Fenum..rkt%29._define-enum-type%29%29" class="RktStxLink" data-pltdoc="x">define-enum-type</a></span> creates a type binding using
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define-syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-syntax</a></span> and the corresponding syntax class <span class="RktSym"><a href="Enum_Types.html#%28form._%28%28lib._rebellion%2Ftype%2Fenum%2Fbinding..rkt%29._enum-id%29%29" class="RktStxLink" data-pltdoc="x">enum-id</a></span>
extracts that binding.</p><p>At present, not all kinds of types support type bindings &#8212;<wbr></wbr> follow
<a href="https://github.com/jackfirth/rebellion/issues/179">issue #179</a> for
updates on this feature and the current status of supported type bindings. More
advanced compile-time type functionality such as a full static type system and
checker are out of scope for now, but it is hoped that such an effort can either
build on top of the Rebellion type libraries. If you are interested in such a
project please reach out to the Rebellion project owners, we&rsquo;d love to hear
more!</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Data_Types.html" title="backward to &quot;2 Data Types&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Data_Types.html" title="up to &quot;2 Data Types&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Tuple_Types.html" title="forward to &quot;2.2 Tuple Types&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/rebellion/Interfaces_Common_to_All_Types.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:25:33 GMT -->
</html>