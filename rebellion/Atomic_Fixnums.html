<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/rebellion/Atomic_Fixnums.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:25:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>5.2&nbsp;Atomic Fixnums</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Rebellion</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Base_Libraries.html" class="tocviewlink" data-pltdoc="x">Base Libraries</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Data_Types.html" class="tocviewlink" data-pltdoc="x">Data Types</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Streaming_Computations.html" class="tocviewlink" data-pltdoc="x">Streaming Computations</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Collections.html" class="tocviewlink" data-pltdoc="x">Collections</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Concurrency.html" class="tocviewselflink" data-pltdoc="x">Concurrency</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Binary_Data.html" class="tocviewlink" data-pltdoc="x">Binary Data</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Module_Utilities.html" class="tocviewlink" data-pltdoc="x">Module Utilities</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Other_Libraries.html" class="tocviewlink" data-pltdoc="x">Other Libraries</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>5&nbsp;</td><td><a href="Concurrency.html" class="tocviewlink" data-pltdoc="x">Concurrency</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="Atomic_Booleans.html" class="tocviewlink" data-pltdoc="x">Atomic Booleans</a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Atomic Fixnums</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="Locks.html" class="tocviewlink" data-pltdoc="x">Locks</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>5.2&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Atomic Fixnums</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.2.1&nbsp;</td><td><a href="#%28part._.Basic_.Atomic_.Fixnum_.Operations%29" class="tocviewlink" data-pltdoc="x">Basic Atomic Fixnum Operations</a></td></tr><tr><td align="right">5.2.2&nbsp;</td><td><a href="#%28part._.Conditional_.Atomic_.Fixnum_.Operations%29" class="tocviewlink" data-pltdoc="x">Conditional Atomic Fixnum Operations</a></td></tr><tr><td align="right">5.2.3&nbsp;</td><td><a href="#%28part._.Compound_.Atomic_.Fixnum_.Operations%29" class="tocviewlink" data-pltdoc="x">Compound Atomic Fixnum Operations</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>atomic-<wbr></wbr>fixnum</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Basic_.Atomic_.Fixnum_.Operations%29" class="tocsubseclink" data-pltdoc="x">Basic Atomic Fixnum Operations</a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>get</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-set%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>set!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>add!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-update%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>update!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Conditional_.Atomic_.Fixnum_.Operations%29" class="tocsubseclink" data-pltdoc="x">Conditional Atomic Fixnum Operations</a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-set%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>compare-<wbr></wbr>and-<wbr></wbr>set!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-exchange%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>compare-<wbr></wbr>and-<wbr></wbr>exchange!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-add%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>compare-<wbr></wbr>and-<wbr></wbr>add!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Compound_.Atomic_.Fixnum_.Operations%29" class="tocsubseclink" data-pltdoc="x">Compound Atomic Fixnum Operations</a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-set%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>get-<wbr></wbr>then-<wbr></wbr>set!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-add%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>get-<wbr></wbr>then-<wbr></wbr>add!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add-then-get%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>add-<wbr></wbr>then-<wbr></wbr>get!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-update%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>get-<wbr></wbr>then-<wbr></wbr>update!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-update-then-get%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">atomic-<wbr></wbr>fixnum-<wbr></wbr>update-<wbr></wbr>then-<wbr></wbr>get!</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Atomic_Booleans.html" title="backward to &quot;5.1 Atomic Booleans&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Concurrency.html" title="up to &quot;5 Concurrency&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Locks.html" title="forward to &quot;5.3 Locks&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Atomic_Fixnums&quot;">5.2<tt>&nbsp;</tt><a name="(part._.Atomic_.Fixnums)"></a><a name="(mod-path._rebellion/concurrency/atomic/fixnum)"></a>Atomic Fixnums</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">rebellion/concurrency/atomic/fixnum</span></a><span class="RktPn">)</span></td></tr><tr><td align="left">&nbsp;</td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/rebellion" title="Install this package using `raco pkg install rebellion`"><span class="stt">rebellion</span></a></span></td></tr></table></p><p>An <a name="(tech._atomic._fixnum)"></a><span style="font-style: italic">atomic fixnum</span> is a thread-safe, future-safe, kill-safe, break-safe,
and lock-free mutable object containing a single <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=numbers.html%23%2528tech._fixnum%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">fixnum</span></a>. The
most basic operation on an atomic fixnum is a <a name="(tech._compare._and._set)"></a><span style="font-style: italic">compare and set</span>, which
attempts to set the atomic fixnum to a new value if and only if its current
value is equal to some specific value. When Racket is compiled with support for
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=futures.html%23%2528tech._future%2529&amp;version=8.6" class="techoutside Sq" data-pltdoc="x"><span class="techinside">futures</span></a>, this operation is implemented with a single hardware
instruction.</p><p>All other operations on atomic fixnums are implemented in terms of atomic
compare and set with a retry loop. For example, <span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-add!</a></span> gets
the current value of the atomic fixnum, adds it with an input number, then
attempts to set the value to the computed result if and only if the atomic
fixnum&rsquo;s current value at the time of the compare-and-set is equal to its value
at the time the result was computed. If that isn&rsquo;t the case due to contention
with competing threads or futures, then <span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-add!</a></span> retries the
operation again. This is a form of Optimistic Concurrency Control (OCC).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum~3f))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A predicate for <a href="#%28tech._atomic._fixnum%29" class="techoutside" data-pltdoc="x"><span class="techinside">atomic fixnums</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._make-atomic-fixnum))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">initial-value</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">initial-value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Symbols.html#%28def._%28%28lib._rebellion%2Fbase%2Fsymbol..rkt%29._interned-symbol~3f%29%29" class="RktValLink" data-pltdoc="x">interned-symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#false</span></td></tr></table></blockquote></div><div class="SIntrapara">Constructs a new <a href="#%28tech._atomic._fixnum%29" class="techoutside" data-pltdoc="x"><span class="techinside">atomic fixnum</span></a> named <span class="RktVar">name</span> and set to <span class="RktVar">initial-value</span>. Providing a <span class="RktVar">name</span> is recommended for debugging and
logging purposes.</div></p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Basic_Atomic_Fixnum_Operations&quot;">5.2.1<tt>&nbsp;</tt><a name="(part._.Basic_.Atomic_.Fixnum_.Operations)"></a>Basic Atomic Fixnum Operations</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-get))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the current value of <span class="RktVar">num</span>.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-set!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-set%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-set!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVar">replacement</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replacement</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Changes the current value of <span class="RktVar">num</span> to <span class="RktVar">replacement</span>.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-set%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-set!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-add!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-add!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVar">amount</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">amount</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Adds <span class="RktVar">amount</span> to <span class="RktVar">num</span>.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-add!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">9</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-update!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-update%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-update!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVar">updater</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">updater</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">updater</span> to the current value of <span class="RktVar">num</span> and sets <span class="RktVar">num</span> to the value returned by <span class="RktVar">updater</span>.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p>Because the update may be retried, <span class="RktVar">updater</span> should be safe to
apply multiple times. Beware that any side effects in <span class="RktVar">updater</span> may be
executed more than once.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-update%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-update!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._sqr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sqr</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">25</span></p></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Conditional_Atomic_Fixnum_Operations&quot;">5.2.2<tt>&nbsp;</tt><a name="(part._.Conditional_.Atomic_.Fixnum_.Operations)"></a>Conditional Atomic Fixnum Operations</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-compare-and-set!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-set%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-set!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">num</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">expected</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replacement</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">expected</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replacement</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Attempts a <a href="#%28tech._compare._and._set%29" class="techoutside" data-pltdoc="x"><span class="techinside">compare and set</span></a> operation on <span class="RktVar">num</span>, setting
it to <span class="RktVar">replacement</span> if and only if its current value is equal to
<span class="RktVar">expected</span>. Returns a boolean indicating whether or not the operation
succeeded.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-set%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-set!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-set%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-set!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-compare-and-exchange!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-exchange%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-exchange!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">num</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">expected</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replacement</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">expected</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replacement</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Attempts a compare and exchange operation on <span class="RktVar">num</span>, setting it to
<span class="RktVar">replacement</span> if and only if its current value is equal to <span class="RktVar">expected</span>. Returns the value of <span class="RktVar">num</span> before the exchange, which will be
equal to <span class="RktVar">replacement</span> if and only if the operation suceeeded.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-exchange%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-exchange!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-exchange%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-exchange!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-compare-and-add!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-add%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-add!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">num</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">expected</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">amount</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">expected</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">amount</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Attempts a compare and add operation on <span class="RktVar">num</span>, adding <span class="RktVar">amount</span> to
it if and only if its current value is equal to <span class="RktVar">expected</span>.
Returns a boolean indicating whether or not the operation
succeeded.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-add%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-add!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-compare-and-add%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-compare-and-add!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">9</span></p></td></tr></table></blockquote></div></p><h5 x-source-module="(lib &quot;rebellion/main.scrbl&quot;)" x-source-pkg="rebellion" x-part-tag="&quot;Compound_Atomic_Fixnum_Operations&quot;">5.2.3<tt>&nbsp;</tt><a name="(part._.Compound_.Atomic_.Fixnum_.Operations)"></a>Compound Atomic Fixnum Operations</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-get-then-set!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-set%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-get-then-set!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">num</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replacement</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replacement</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sets <span class="RktVar">num</span> to <span class="RktVar">replacement</span> and returns its previous value.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-set%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get-then-set!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">10</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-get-then-add!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-add%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-get-then-add!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVar">amount</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">amount</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Adds <span class="RktVar">amount</span> to <span class="RktVar">num</span> and returns its previous value.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-add%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get-then-add!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">9</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-add-then-get!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add-then-get%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-add-then-get!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVar">amount</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">amount</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Adds <span class="RktVar">amount</span> to <span class="RktVar">num</span> and returns its new value.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-add-then-get%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-add-then-get!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">9</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-get-then-update!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-update%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-get-then-update!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">num</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">updater</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">updater</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">updater</span> to <span class="RktVar">num</span> and returns its previous value.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p>Because the update may be retried, <span class="RktVar">updater</span> should be safe to
apply multiple times. Beware that any side effects in <span class="RktVar">updater</span> may be
executed more than once.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get-then-update%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get-then-update!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._sqr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sqr</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-get%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-get</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">25</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._rebellion/concurrency/atomic/fixnum..rkt)._atomic-fixnum-update-then-get!))"></a><span title="Provided from: rebellion/concurrency/atomic/fixnum | Package: rebellion"><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-update-then-get%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">atomic-fixnum-update-then-get!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">num</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">updater</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum~3f%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">updater</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._fixnum%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">fixnum?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">updater</span> to <span class="RktVar">num</span> and returns its new value.</div></p><p>This operation is not guaranteed to terminate. The operation may be
retried if <span class="RktVar">num</span> is concurrently mutated, and there are no limits on how
many times it may be retried.</p><p>Because the update may be retried, <span class="RktVar">updater</span> should be safe to
apply multiple times. Beware that any side effects in <span class="RktVar">updater</span> may be
executed more than once.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._make-atomic-fixnum%29%29" class="RktValLink" data-pltdoc="x">make-atomic-fixnum</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rebellion%2Fconcurrency%2Fatomic%2Ffixnum..rkt%29._atomic-fixnum-update-then-get%21%29%29" class="RktValLink" data-pltdoc="x">atomic-fixnum-update-then-get!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">num</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._sqr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sqr</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">25</span></p></td></tr></table></blockquote></div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Atomic_Booleans.html" title="backward to &quot;5.1 Atomic Booleans&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Concurrency.html" title="up to &quot;5 Concurrency&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Locks.html" title="forward to &quot;5.3 Locks&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/rebellion/Atomic_Fixnums.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:25:35 GMT -->
</html>