<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/cf-manual/Concepts.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:26:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>1&nbsp;Concepts</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Elementary Continued Fraction Arithmetic Package</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Concepts</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Use.html" class="tocviewlink" data-pltdoc="x">Use</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="cf-bases-top.html" class="tocviewlink" data-pltdoc="x">Base Conversion Package</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="cf-create-top.html" class="tocviewlink" data-pltdoc="x">Custom Continued Fractions</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>1&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Concepts</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">1.1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">1.2&nbsp;</td><td><a href="#%28part._precision%29" class="tocviewlink" data-pltdoc="x">Precision</a></td></tr><tr><td align="right">1.3&nbsp;</td><td><a href="#%28part._.The_.Arithmetic_of_.Continued_.Fractions%29" class="tocviewlink" data-pltdoc="x">The Arithmetic of Continued Fractions</a></td></tr><tr><td align="right">1.4&nbsp;</td><td><a href="#%28part._.Purpose%29" class="tocviewlink" data-pltdoc="x">Purpose</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._precision%29" class="tocsubseclink" data-pltdoc="x">Precision</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.The_.Arithmetic_of_.Continued_.Fractions%29" class="tocsubseclink" data-pltdoc="x">The Arithmetic of Continued Fractions</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._.Purpose%29" class="tocsubseclink" data-pltdoc="x">Purpose</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Elementary Continued Fraction Arithmetic Package&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Elementary Continued Fraction Arithmetic Package&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Use.html" title="forward to &quot;2 Use&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;continued-fractions/cf-manual.scrbl&quot;)" x-source-pkg="continued-fractions" x-part-tag="&quot;Concepts&quot;">1<tt>&nbsp;</tt><a name="(part._.Concepts)"></a>Concepts</h3><h4 x-source-module="(lib &quot;continued-fractions/cf-manual.scrbl&quot;)" x-source-pkg="continued-fractions" x-part-tag="&quot;Introduction&quot;">1.1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h4><p>A simple continued fraction is a number of the form a+1/(b+1/(c+...)), possibly infinite.
They have the convenient property that terminating the expression at some point results
in a rational that is "close" to the whole expression, in the sense that there is no
rational closer with a smaller denominator. For instance,
<span class="nobreak">14/3 = 4 + 2/3 = 4 + 1/(3/2) = 4 + 1/(1 + 1/2).</span> When all the numerators are
1 like this, we can simply write <span class="nobreak">(4 1 2).</span> This process will always terminate
for rational numbers since it is equivalent to the Euclidean algorithm.</p><p>Real solutions to quadratic equations with integer coefficients have repeating continued
fractions. For example, <span class="nobreak">&#8730;2 = (1; 2 ...)</span> which is
<span class="nobreak">1 + 1/(2 + 1/(2 + ...))</span>. Other algebraics do not have a repeating
simple continued fraction.</p><p>Simple continued fractions are unique, given a few caveats. As you can see
from the 14/3 example, <span class="nobreak">4 + 1/(1 + 1/2) = 4 + 1/(1 + 1/(1 + 1))</span>, which is to say
that <span class="nobreak">(a b ... c)</span> is the same as <span class="nobreak">(a b ... c-1 1).</span>
Additionally, interspersed zeroes can be put in such that
<span class="nobreak">(a b 0 n c ...)</span> is the same as <span class="nobreak">(a b+n c ...).</span> Lastly, the representation
of negative numbers is not unique, either. If <span style="font-weight: bold">B</span> is a [possibly infinite]
continued fraction <span class="nobreak">(a b c ...)</span> then there are two ways to write -<span style="font-weight: bold">B</span>. The first
is <span class="nobreak">(-a -b -c ...)</span> and the second is <span class="nobreak">(-(a+1) 1 |b|-1 |c| ...).</span>
This library prefers the second form.</p><p>Many common functions or numbers have a continued fraction representation where the numerators
are not all 1s, such as the continued fraction for pi which can be written
<span class="nobreak">0 + 4/(1 + 1^2/(3 + 2^2/(5 + 3^2/(7 + ...)))).</span> Such representations are not unique.</p><h4 x-source-module="(lib &quot;continued-fractions/cf-manual.scrbl&quot;)" x-source-pkg="continued-fractions" x-part-tag="&quot;precision&quot;">1.2<tt>&nbsp;</tt><a name="(part._precision)"></a>Precision</h4><p>When considered as a regular continued fraction, terminating the continued fraction at some point
yields a rational n/d, called a "convergent." Then the absolute value of the difference between this
rational and the value of the full continued fraction is less than one divided the product of the
denominators of this convergent and the next best convergent.
This factor is a worst-case scenario, most continued fractions have convergents with much better
precision. In fact, the golden ratio <span class="nobreak">&#966; = (1+&#8730;5)/2</span> is the worst case, constantly
staying just inside the bounds. Because of this, the golden ratio is sometimes called
the "most irrational" number; that is, the number that is hardest to approximate by rationals.</p><h4 x-source-module="(lib &quot;continued-fractions/cf-manual.scrbl&quot;)" x-source-pkg="continued-fractions" x-part-tag="&quot;The_Arithmetic_of_Continued_Fractions&quot;">1.3<tt>&nbsp;</tt><a name="(part._.The_.Arithmetic_of_.Continued_.Fractions)"></a>The Arithmetic of Continued Fractions</h4><p>Continued fractions are amendable to term-at-a-time arithmetic. Suppose we have a function
<span class="nobreak">f(x) = (ax+b)/(cx+d),</span> where x is a continued fraction of the form
<span class="nobreak">x = t + 1/x&rsquo;,</span> x&rsquo; being the rest of the continued fraction. Then when
f consumes the leading term t, x goes to <span class="nobreak">t+1/x&rsquo;,</span> which after multiplication to get f back
in the same form, has updated the coefficients. If the continued fraciton x is in standard form,
then we have guarantees about every term except the first nonzero term, namely, that it will lie
somewhere between 1 and infinity (a terminated continued fraction). Then if the limits of f
as x goes to 1 and as x goes to infinity agree it does not matter what the value of x&rsquo; is as
the leading term of f is already determined. We can take a quotient term out of the function, and
f then goes to <span class="nobreak">t + 1/f&rsquo;.</span></p><p>For further details, reference the MIT HAKMEM memo 239 (Gosper).</p><h4 x-source-module="(lib &quot;continued-fractions/cf-manual.scrbl&quot;)" x-source-pkg="continued-fractions" x-part-tag="&quot;Purpose&quot;">1.4<tt>&nbsp;</tt><a name="(part._.Purpose)"></a>Purpose</h4><p>Because of the term-at-a-time aspect of continued fraction arithmetic, calculating terms and
quotients proceeds without unnecessary calculation. Because of the precision guarantees,
calculation can be terminated when the desired precision is exceeded. Combining these facts
give us a picture of exact arithmetic of rationals and irrationals which only calculate
as far as needed and yield the rational with the smallest denominator possible for the
given precision.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Elementary Continued Fraction Arithmetic Package&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Elementary Continued Fraction Arithmetic Package&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Use.html" title="forward to &quot;2 Use&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/cf-manual/Concepts.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:26:23 GMT -->
</html>