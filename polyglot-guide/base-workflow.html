<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/polyglot-guide/base-workflow.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4&nbsp;The Base Workflow</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Polyglot:<span class="mywbr"> &nbsp;</span> A Guide for Building Websites With Any Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="motivation.html" class="tocviewlink" data-pltdoc="x">Why <span style="font-style: italic">Another</span> Web Development... Thing?!</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="setup.html" class="tocviewlink" data-pltdoc="x">Get Started</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Racket_in_Markdown.html" class="tocviewlink" data-pltdoc="x">Racket in Markdown</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">The Base Workflow</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="imperative-workflow.html" class="tocviewlink" data-pltdoc="x">The Imperative Workflow</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="functional-workflow.html" class="tocviewlink" data-pltdoc="x">The Functional Workflow</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Now_What_.html" class="tocviewlink" data-pltdoc="x">Now What?</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>4&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">The Base Workflow</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="#%28part._.Markdown_.Handling____md__%29" class="tocviewlink" data-pltdoc="x">Markdown Handling (<span class="RktVal">".md"</span>)</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="#%28part._handle-rkt%29" class="tocviewlink" data-pltdoc="x">Racket Module Handling (<span class="RktVal">".rkt"</span>)</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="#%28part._.C.S.S_.Handling____css__%29" class="tocviewlink" data-pltdoc="x">CSS Handling (<span class="RktVal">".css"</span>)</a></td></tr><tr><td align="right">4.4&nbsp;</td><td><a href="#%28part._.Literal_.Path_.Handling____literal__%29" class="tocviewlink" data-pltdoc="x">Literal Path Handling (<span class="RktVal">".literal"</span>)</a></td></tr><tr><td align="right">4.5&nbsp;</td><td><a href="#%28part._.Default_.File_.Handling%29" class="tocviewlink" data-pltdoc="x">Default File Handling</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.Markdown_.Handling____md__%29" class="tocsubseclink" data-pltdoc="x">Markdown Handling (<span class="RktVal">".md"</span>)</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._handle-rkt%29" class="tocsubseclink" data-pltdoc="x">Racket Module Handling (<span class="RktVal">".rkt"</span>)</a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._.C.S.S_.Handling____css__%29" class="tocsubseclink" data-pltdoc="x">CSS Handling (<span class="RktVal">".css"</span>)</a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._.Literal_.Path_.Handling____literal__%29" class="tocsubseclink" data-pltdoc="x">Literal Path Handling (<span class="RktVal">".literal"</span>)</a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#%28part._.Default_.File_.Handling%29" class="tocsubseclink" data-pltdoc="x">Default File Handling</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Racket_in_Markdown.html" title="backward to &quot;3 Racket in Markdown&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Polyglot: A Guide for Building Websites With Any Language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="imperative-workflow.html" title="forward to &quot;5 The Imperative Workflow&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;polyglot/scribblings/guide/polyglot-guide.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;base-workflow&quot;">4<tt>&nbsp;</tt><a name="(part._base-workflow)"></a>The Base Workflow</h3><p>As mentioned, Polyglot actually doesn&rsquo;t know how to build a website.
The Base Workflow provides common logic and sensible defaults for building
websites. <a href="functional-workflow.html" data-pltdoc="x">The Functional Workflow</a> and <a href="imperative-workflow.html" data-pltdoc="x">The Imperative Workflow</a>
fill gaps in Markdown processing by extending this workflow.</p><p>To understand why the Base Workflow is important, consider what happens to a
parsed Markdown file once there are no more app or lib elements to process.  If
you convert it to HTML, you might get links to resources like
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">blah.html</span><span class="hspace"></span></span>. How does the HTML document get that name, and how do we
know the link isn&rsquo;t broken?</p><p>Once app and lib elements have been processed to produce a finished
page, the Base Workflow starts a <span style="font-style: italic">dependency discovery</span> phase
where it searches for paths to other files in <span class="stt">src</span>, <span class="stt">href</span>, and
<span class="stt">srcset</span> attributes of the HTML elements derived from your
Markdown, and in the <span class="stt">url()</span> expressions of your CSS. The Base
Workflow notices the links that are <span style="font-weight: bold">either absolute paths on
your filesystem, or paths relative to your assets directory</span>.</p><p>Consider this Markdown:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">* [Contact me](contact.md)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">* [Search the Web](https://duckduckgo.com)</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">* ![Generated Image](generate-image.rkt)</span></p></td></tr></table></p><p>During the dependency discovery phase, the Base Workflow will only pick up on
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">contact.md</span><span class="hspace"></span></span> and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">generate-image.rkt</span><span class="hspace"></span></span> because they are relative
paths to assets that are not user-facing.</p><p>Each asset referenced is processed according to the rules of their associated
workflow, but the Base Workflow offers some reasonable defaults. Each round of
processing kicks off another dependency discovery phase, and the whole cycle
will repeat until all referenced assets are crawled. The result is a working,
linked collection of HTML5 documents, complete with production-ready assets.</p><p>Let&rsquo;s cover the common and default asset processing rules provided by
the Base Workflow.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/guide/polyglot-guide.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Markdown_Handling____md__&quot;">4.1<tt>&nbsp;</tt><a name="(part._.Markdown_.Handling____md__)"></a>Markdown Handling (<span class="RktVal">".md"</span>)</h4><p>The Base Workflow does not handle all Markdown processing on its own, just the
hard parts. It analyzes the final version of content produced by either
<a href="functional-workflow.html" data-pltdoc="x">The Functional Workflow</a> or <a href="imperative-workflow.html" data-pltdoc="x">The Imperative Workflow</a>, delegates work to
resolve all dependencies, rewrites links so that they correctly point to
user-facing resources in the distribution, and writes the result as an HTML5
document.</p><p>How exactly app and lib elements modify your content before all of this
happens depends on the workflow you use.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/guide/polyglot-guide.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;handle-rkt&quot;">4.2<tt>&nbsp;</tt><a name="(part._handle-rkt)"></a>Racket Module Handling (<span class="RktVal">".rkt"</span>)</h4><p>You may depend on a Racket module to take full responsibility for
generating an asset.</p><p><span style="font-weight: bold">This section requires knowledge of <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">unlike-assets</span></a></span>,
so you don&rsquo;t have to read it now. Come back when you need to handle
an exceptional case for a single asset referenced by your page,
and you don&rsquo;t want to modify your workflow.</p><p>The Racket module must produce a path to a file in a distribution to represent
the <span style="font-style: italic">fulfilled</span> asset. The Base Workflow will trust that path is correct
and useful in a finished website.</p><p>For example, say you want to create a stylesheet using Racket. You can write
Racket code to generate optimized styles and list the module that does
it as a dependency.</p><p>To do this, write an element to depend on a Racket module.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;link rel="stylesheet" href="compute-stylesheet.rkt" /&gt;</span></p></td></tr></table></p><p>The module generates a simple style sheet with a content-hashed name for
cache-busting.</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"compute-stylesheet.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">write-dist-file</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file/sha1</span><span class="hspace">&nbsp;</span><span class="RktSym">polyglot</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">write-dist-file</span><span class="hspace">&nbsp;</span><span class="RktSym">clear</span><span class="hspace">&nbsp;</span><span class="RktSym">compiler</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">css</span><span class="hspace">&nbsp;</span><span class="RktVal">"body{font-size:20px}\n"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stringport.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._open-input-string%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">open-input-string</a></span><span class="hspace">&nbsp;</span><span class="RktSym">css</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._path-replace-extension%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-replace-extension</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._substring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">substring</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sha1</span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">For cache busting</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#".css"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=polyglot-reference&amp;rel=Projects.html%23%2528def._%2528%2528lib._polyglot%252Fpaths..rkt%2529._dist-rel%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dist-rel</a></span><span class="hspace">&nbsp;</span><span class="RktSym">file-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._close-input-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">close-input-port</a></span><span class="hspace">&nbsp;</span><span class="RktSym">port</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528lib._racket%252Ffile..rkt%2529._display-to-file%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">display-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">text</span><span class="hspace">&nbsp;</span><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">replace</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">css</span><span class="hspace">&nbsp;</span><span class="RktSym">path</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">path</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p>To integrate with the Base Workflow, the module must <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span>
<span class="RktSym">write-dist-file</span> as an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure. Notice that it
returns a complete path in a distribution using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=polyglot-reference&amp;rel=Projects.html%23%2528def._%2528%2528lib._polyglot%252Fpaths..rkt%2529._dist-rel%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dist-rel</a></span>. The
procedure writes the stylesheet in the distribution as a side-effect.</p><p>In terms of <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">unlike-assets</span></a>, the path to the stylesheet
is the fulfilled <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-asset%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-asset/c</a></span>. The base workflow will accept
this path and use it to replace the original reference to the module.</p><p>The resulting HTML will look like this:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;link rel="stylesheet" href="5f9bb103.css" /&gt;</span></p></td></tr></table></p><p>The difference between this approach and writing equivalent Racket
code in an application element is <span style="font-style: italic">when</span> the code runs. This
code runs after finding dependencies in a page, but before writing
HTML5 documents to disk.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/guide/polyglot-guide.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;CSS_Handling____css__&quot;">4.3<tt>&nbsp;</tt><a name="(part._.C.S.S_.Handling____css__)"></a>CSS Handling (<span class="RktVal">".css"</span>)</h4><p>In CSS files, the values in <span class="stt">url()</span> expressions are treated just
like the <span class="stt">href</span>, <span class="stt">src</span>, and <span class="stt">srcset</span> attribute values in HTML
elements parsed from Markdown.  The Base Workflow does <span style="font-style: italic">not</span>
inspect the <span class="stt">url()</span> expressions inside <span class="stt">&lt;style&gt;</span> elements.</p><p>You can leverage this along with Racket module dependencies to generate
assets for presentation.</p><p>Consider this stylesheet:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@font-face {</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">font-family: 'UberFont';</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">src: url('uberfont.ttf');</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">body {</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">background-image: url(generate-background.rkt);</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">font-family: UberFont;</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></p></td></tr></table></p><p>By the rules discussed, it may become:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">@font-face {</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">font-family: 'UberFont';</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">src: url('82e2ab1f.ttf');</span></p></td></tr><tr><td><p><span class="stt">}</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">body {</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">background-image: url(b7ee41cd.png);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">font-family: UberFont;</span></p></td></tr><tr><td><p><span class="stt">}</span></p></td></tr></table></p><p>Notice that this stylesheet is <span style="font-style: italic">not</span> minified, and this process does not
alter or interpret <span class="RktInBG"><span class="hspace"></span><span class="RktIn">@import</span><span class="hspace"></span></span> at-rules.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/guide/polyglot-guide.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Literal_Path_Handling____literal__&quot;">4.4<tt>&nbsp;</tt><a name="(part._.Literal_.Path_.Handling____literal__)"></a>Literal Path Handling (<span class="RktVal">".literal"</span>)</h4><p>Any dependency paths with extension <span class="stt">.literal</span> are placed as-is in the
distribution, ironically without the <span class="stt">.literal</span> extension.</p><p>This means that <span class="RktInBG"><span class="hspace"></span><span class="RktIn">[Link](doc.html.literal)</span><span class="hspace"></span></span> becomes <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;a href="doc.html"&gt;Link&lt;/a&gt;</span><span class="hspace"></span></span>.</p><p>If you need <span class="stt">.literal</span> to appear in the output, use the extension twice
(e.g. <span class="stt">doc.literal.literal</span>).</p><h4 x-source-module="(lib &quot;polyglot/scribblings/guide/polyglot-guide.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Default_File_Handling&quot;">4.5<tt>&nbsp;</tt><a name="(part._.Default_.File_.Handling)"></a>Default File Handling</h4><p>Any other files you reference are copied to the distribution such that the file
name is the first eight characters of the SHA1 hash of the file content. This
is useful for cache busting.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Racket_in_Markdown.html" title="backward to &quot;3 Racket in Markdown&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Polyglot: A Guide for Building Websites With Any Language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="imperative-workflow.html" title="forward to &quot;5 The Imperative Workflow&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/polyglot-guide/base-workflow.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:58 GMT -->
</html>