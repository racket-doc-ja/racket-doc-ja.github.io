<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/pollen/second-tutorial.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>6&nbsp;Second tutorial: Markdown, templates, &amp; pagetrees</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="mb.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Pollen:<span class="mywbr"> &nbsp;</span> the book is a program</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Installation.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="quick-tour.html" class="tocviewlink" data-pltdoc="x">Quick tour</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Backstory.html" class="tocviewlink" data-pltdoc="x">Backstory</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="big-picture.html" class="tocviewlink" data-pltdoc="x">The big picture</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="first-tutorial.html" class="tocviewlink" data-pltdoc="x">First tutorial:<span class="mywbr"> &nbsp;</span> the project server &amp; preprocessor</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Second tutorial:<span class="mywbr"> &nbsp;</span> Markdown, templates, &amp; pagetrees</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="third-tutorial.html" class="tocviewlink" data-pltdoc="x">Third tutorial:<span class="mywbr"> &nbsp;</span> Pollen markup &amp; tag functions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="fourth-tutorial.html" class="tocviewlink" data-pltdoc="x">Fourth tutorial:<span class="mywbr"> &nbsp;</span> multiple output targets</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="mini-tutorial.html" class="tocviewlink" data-pltdoc="x">Mini tutorials</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="raco-pollen.html" class="tocviewlink" data-pltdoc="x">Using <span class="stt">raco pollen</span></a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="File_formats.html" class="tocviewlink" data-pltdoc="x">File formats</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="pollen-command-syntax.html" class="tocviewlink" data-pltdoc="x">Pollen command syntax</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="programming-pollen.html" class="tocviewlink" data-pltdoc="x">Programming Pollen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Module_reference.html" class="tocviewlink" data-pltdoc="x">Module reference</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Unstable_module_reference.html" class="tocviewlink" data-pltdoc="x">Unstable module reference</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Acknowledgments.html" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="License___source_code.html" class="tocviewlink" data-pltdoc="x">License &amp; source code</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="version-notes.html" class="tocviewlink" data-pltdoc="x">Version notes (3.2.3290.1047)</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>6&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Second tutorial:<span class="mywbr"> &nbsp;</span> Markdown, templates, &amp; pagetrees</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="#%28part._tutorial-2._.Prerequisites%29" class="tocviewlink" data-pltdoc="x">Prerequisites</a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="#%28part._the-case-against-markdown%29" class="tocviewlink" data-pltdoc="x">Optional reading:<span class="mywbr"> &nbsp;</span> the case against Markdown</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="#%28part._.Markdown_in_.Pollen__two_options%29" class="tocviewlink" data-pltdoc="x">Markdown in Pollen:<span class="mywbr"> &nbsp;</span> two options</a></td></tr><tr><td align="right">6.4&nbsp;</td><td><a href="#%28part._tutorial-2._.Templates%29" class="tocviewlink" data-pltdoc="x">Templates</a></td></tr><tr><td align="right">6.5&nbsp;</td><td><a href="#%28part._tutorial-2._.Intermission%29" class="tocviewlink" data-pltdoc="x">Intermission</a></td></tr><tr><td align="right">6.6&nbsp;</td><td><a href="#%28part._tutorial-2._.Pagetrees%29" class="tocviewlink" data-pltdoc="x">Pagetrees</a></td></tr><tr><td align="right">6.7&nbsp;</td><td><a href="#%28part._.Second_tutorial_complete%29" class="tocviewlink" data-pltdoc="x">Second tutorial complete</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Prerequisites%29" class="tocsubseclink" data-pltdoc="x">Prerequisites</a></td></tr><tr><td><span class="tocsublinknumber">6.2<tt>&nbsp;</tt></span><a href="#%28part._the-case-against-markdown%29" class="tocsubseclink" data-pltdoc="x">Optional reading:<span class="mywbr"> &nbsp;</span> the case against Markdown</a></td></tr><tr><td><span class="tocsublinknumber">6.3<tt>&nbsp;</tt></span><a href="#%28part._.Markdown_in_.Pollen__two_options%29" class="tocsubseclink" data-pltdoc="x">Markdown in Pollen:<span class="mywbr"> &nbsp;</span> two options</a></td></tr><tr><td><span class="tocsublinknumber">6.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Using_.Markdown_with_the_preprocessor%29" class="tocsubseclink" data-pltdoc="x">Using Markdown with the preprocessor</a></td></tr><tr><td><span class="tocsublinknumber">6.3.2<tt>&nbsp;</tt></span><a href="#%28part._.Authoring_mode%29" class="tocsubseclink" data-pltdoc="x">Authoring mode</a></td></tr><tr><td><span class="tocsublinknumber">6.3.3<tt>&nbsp;</tt></span><a href="#%28part._.X-expressions%29" class="tocsubseclink" data-pltdoc="x">X-<wbr></wbr>expressions</a></td></tr><tr><td><span class="tocsublinknumber">6.3.4<tt>&nbsp;</tt></span><a href="#%28part._.Markdown_authoring_mode%29" class="tocsubseclink" data-pltdoc="x">Markdown authoring mode</a></td></tr><tr><td><span class="tocsublinknumber">6.3.5<tt>&nbsp;</tt></span><a href="#%28part._.Review__authoring_mode_vs__preprocessor_mode%29" class="tocsubseclink" data-pltdoc="x">Review:<span class="mywbr"> &nbsp;</span> authoring mode vs. preprocessor mode</a></td></tr><tr><td><span class="tocsublinknumber">6.4<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Templates%29" class="tocsubseclink" data-pltdoc="x">Templates</a></td></tr><tr><td><span class="tocsublinknumber">6.4.1<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.The_doc_export_and_the_-_html_function%29" class="tocsubseclink" data-pltdoc="x">The <span class="stt">doc</span> export and the <span class="stt">-<wbr></wbr>&gt;html</span> function</a></td></tr><tr><td><span class="tocsublinknumber">6.4.2<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Making_a_custom_template%29" class="tocsubseclink" data-pltdoc="x">Making a custom template</a></td></tr><tr><td><span class="tocsublinknumber">6.4.3<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Inserting_specific_source_data_into_templates%29" class="tocsubseclink" data-pltdoc="x">Inserting specific source data into templates</a></td></tr><tr><td><span class="tocsublinknumber">6.4.4<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Linking_to_an_external_.C.S.S_file%29" class="tocsubseclink" data-pltdoc="x">Linking to an external CSS file</a></td></tr><tr><td><span class="tocsublinknumber">6.5<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Intermission%29" class="tocsubseclink" data-pltdoc="x">Intermission</a></td></tr><tr><td><span class="tocsublinknumber">6.6<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Pagetrees%29" class="tocsubseclink" data-pltdoc="x">Pagetrees</a></td></tr><tr><td><span class="tocsublinknumber">6.6.1<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Pagetree_navigation%29" class="tocsubseclink" data-pltdoc="x">Pagetree navigation</a></td></tr><tr><td><span class="tocsublinknumber">6.6.2<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Using_the_automatic_pagetree%29" class="tocsubseclink" data-pltdoc="x">Using the automatic pagetree</a></td></tr><tr><td><span class="tocsublinknumber">6.6.3<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Adding_navigation_links_to_the_template_with_here%29" class="tocsubseclink" data-pltdoc="x">Adding navigation links to the template with <span class="stt">here</span></a></td></tr><tr><td><span class="tocsublinknumber">6.6.4<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Handling_navigation_boundaries_with_conditionals%29" class="tocsubseclink" data-pltdoc="x">Handling navigation boundaries with conditionals</a></td></tr><tr><td><span class="tocsublinknumber">6.6.5<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._.Making_a_pagetree_file%29" class="tocsubseclink" data-pltdoc="x">Making a&#160;pagetree file</a></td></tr><tr><td><span class="tocsublinknumber">6.6.6<tt>&nbsp;</tt></span><a href="#%28part._tutorial-2._index_ptree___the_project_server%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">index.ptree</span> &amp; the project server</a></td></tr><tr><td><span class="tocsublinknumber">6.7<tt>&nbsp;</tt></span><a href="#%28part._.Second_tutorial_complete%29" class="tocsubseclink" data-pltdoc="x">Second tutorial complete</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="first-tutorial.html" title="backward to &quot;5 First tutorial: the project server &amp; preprocessor&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pollen: the book is a program&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="third-tutorial.html" title="forward to &quot;7 Third tutorial: Pollen markup &amp; tag functions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;second-tutorial&quot;">6<tt>&nbsp;</tt><a name="(part._second-tutorial)"></a>Second tutorial: Markdown, templates, &amp; pagetrees</h3><p>In this tutorial, you&rsquo;ll use Pollen to publish a multiple-page article written in Markdown. You&rsquo;ll learn about:</p><ul><li><p>Using Markdown files with the preprocessor</p></li><li><p>X-expressions</p></li><li><p>Markdown authoring mode</p></li><li><p>Templates</p></li><li><p>Pagetrees</p></li></ul><p>If you want the shortest possible introduction to Pollen, try the <a href="quick-tour.html" data-pltdoc="x">Quick tour</a>.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Prerequisites&quot;">6.1<tt>&nbsp;</tt><a name="(part._tutorial-2._.Prerequisites)"></a>Prerequisites</h4><p>I&rsquo;ll assume you&rsquo;ve completed the <a href="first-tutorial.html" data-pltdoc="x">first tutorial</a> and you understand how to create source files in DrRacket and view them in the project server. I won&rsquo;t be spelling out those tasks as I did before.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;the-case-against-markdown&quot;">6.2<tt>&nbsp;</tt><a name="(part._the-case-against-markdown)"></a>Optional reading: the case against Markdown</h4><p>I recognize that people like Markdown. I want people to like Pollen too, so that&rsquo;s why Pollen supports Markdown.</p><p>But just to be clear about my own views:</p><p>I&rsquo;m mystified by the popularity of Markdown among writers. I can agree that it&rsquo;s a clever and readable way of notating basic HTML. And sure, that makes it great for things like web comments, where speed and simplicity are primary virtues.</p><p>In longer-form writing, however, its shortcomings become evident. Like programming languages, the best writing tools maximize expressive possibilities, and minimize constraints. But Markdown is hugely constrained. First and worst, Markdown isn&rsquo;t semantic. It only knows about formatting, and in that regard, isn&rsquo;t that much of an improvement on tools like Microsoft Word. Second, even as a formatting-notation tool, it&rsquo;s limited to a small subset of the already-small set of formatting tags permitted in HTML. Third, it can&rsquo;t be extended by an author.</p><p>An animating principle of Pollen, as explained in the <a href="Backstory.html" data-pltdoc="x">Backstory</a>, is that after 20 years, we ought to move beyond thinking of HTML as a source format. Since Markdown is just well-disguised HTML, a vote for Markdown is really a vote to continue the status quo (albeit with fewer angle brackets). For me, that&rsquo;s not good enough. I&rsquo;m ready for the tools to expand to fit my ideas. I refuse to keep cutting down my ideas to fit the tools.</p><p>All that said, if you genuinely prefer Markdown, I&rsquo;m not looking to pry it from your fingers. Pollen has great Markdown support (due entirely to Greg Hendershott&rsquo;s excellent <a href="https://github.com/greghendershott/markdown/">Markdown parser</a> for Racket). It makes Markdown more useful.</p><p>But let&rsquo;s make a deal, Markdown fans. Having met you more than halfway, will you at least consider that <a href="third-tutorial.html#%28part._pollen-vs-xml%29" data-pltdoc="x">Pollen markup</a> might be a better option for you than Markdown? Because it can notate anything that&rsquo;s in your brain, not just a subset of HTML? And if <a href="big-picture.html#%28part._the-book-is-a-program%29" data-pltdoc="x">The book is a program</a>, the source for that book should look more like your brain, and less like HTML (or XML or LaTeX or ...)?</p><p>That&rsquo;s all I ask.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Markdown_in_Pollen__two_options&quot;">6.3<tt>&nbsp;</tt><a name="(part._.Markdown_in_.Pollen__two_options)"></a>Markdown in Pollen: two options</h4><p>There are two ways to use Markdown within Pollen:</p><ol><li><p>Send Markdown files through the preprocessor.</p></li><li><p>Use Markdown authoring mode.</p></li></ol><p>The preprocessor approach is better if you want to end up with a set of Markdown files that can be passed along to a HTML converter (or other Markdown-to-______ converter) downstream.</p><p>The authoring-mode approach is better if you want to end up with something other than Markdown, e.g., finished HTML files.</p><p>But we&rsquo;ll look at both.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Using_Markdown_with_the_preprocessor&quot;">6.3.1<tt>&nbsp;</tt><a name="(part._.Using_.Markdown_with_the_preprocessor)"></a>Using Markdown with the preprocessor</h5><p>Because Markdown is a text-based format, you can use the Pollen preprocessor to add programmatic features to existing Markdown files. (See <a href="first-tutorial.html#%28part._.Working_with_the_preprocessor%29" data-pltdoc="x">Working with the preprocessor</a> in the <a href="first-tutorial.html" data-pltdoc="x">first tutorial</a> if you need a refresher.)</p><p>Suppose we have a Markdown file called <span class="stt">"brennan.md"</span> that we want to use with the preprocessor. Create this file in DrRacket, save it, and start the project server in that directory.</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"brennan.md"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">My</span><span class="hspace">&nbsp;</span><span class="RktMeta">name</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">_Brennan_,</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">enjoy:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">boring</span><span class="hspace">&nbsp;</span><span class="RktMeta">sauce</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">24</span><span class="hspace">&nbsp;</span><span class="RktMeta">fish</span><span class="hspace">&nbsp;</span><span class="RktMeta">nuggets</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>You&rsquo;ll be able to see this file in the project server, but for now, it&rsquo;s just a static file. Pollen isn&rsquo;t doing anything to it.</p><p>Let&rsquo;s change that. Consistent with the usual preprocessor practice, add <span class="stt">#lang pollen</span> as the first line, and append the <span class="stt">".pp"</span> file extension, so our new preprocessor-ready file looks like this:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"brennan.md.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">My</span><span class="hspace">&nbsp;</span><span class="RktMeta">name</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">_Brennan_,</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">enjoy:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">boring</span><span class="hspace">&nbsp;</span><span class="RktMeta">sauce</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta">24</span><span class="hspace">&nbsp;</span><span class="RktMeta">fish</span><span class="hspace">&nbsp;</span><span class="RktMeta">nuggets</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Go back to the project server and you&rsquo;ll see the new filename. When you click on it, Pollen will render a new <span class="stt">"brennan.md"</span> file, but it will look the same as the one you had before.</p><p>Now we&rsquo;ll change some of the values using Pollen commands:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"brennan.md.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">sauce-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"fancy"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">nugget-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"chicken"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">nugget-quantity</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">My</span><span class="hspace">&nbsp;</span><span class="RktMeta">name</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">_Brennan_,</span><span class="hspace">&nbsp;</span><span class="RktMeta">and</span><span class="hspace">&nbsp;</span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">enjoy:</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">sauce-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">sauce</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">+</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">nugget-quantity</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym">nugget-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta">nuggets</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>When you reload this file in the project server, <span class="stt">"brennan.md"</span> will be regenerated, and will now look like this:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">My name is _Brennan_, and I enjoy:</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">+ fancy sauce</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">+ 12 chicken nuggets</span></p></td></tr></table></div></div><p>Instead of running Markdown files through the preprocessor, you can also use Markdown authoring mode within Pollen. This is the better choice if you want to end up with rendered HTML files.</p><p>But first, let&rsquo;s pause to clarify the general concept of an authoring mode.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Authoring_mode&quot;">6.3.2<tt>&nbsp;</tt><a name="(part._.Authoring_mode)"></a>Authoring mode</h5><p>Though the preprocessor is useful, it limits you to inserting chunks of text at various positions into an existing file.</p><p>Pollen&rsquo;s <span style="font-style: italic">authoring mode</span>, by contrast, parses the whole source file into a special data structure called an <span style="font-style: italic">X-expression</span>. You can then process the whole X-expression any way you like, and output to any format you like &#8212;&#160;or multiple formats &#8212;&#160;using a <span style="font-style: italic">template</span>.</p><p>Compared to the preprocessor, authoring mode offers more abstraction and flexibility. Of course, it also requires a bit more effort to set up.</p><p>Pollen offers two authoring modes: one that uses Markdown syntax (which we&rsquo;ll cover later in this tutorial) and the other that uses a free-form markup syntax (which we&rsquo;ll cover in the <a href="third-tutorial.html" data-pltdoc="x">third tutorial</a>). In both cases, the basic process is the same: 1) compile the source into an X-expression, and then 2) convert that X-expression to the target file format using a template.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;X-expressions&quot;">6.3.3<tt>&nbsp;</tt><a name="(part._.X-expressions)"></a>X-expressions</h5><div class="noskip"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Don&#8217;t skip this section! It explains an essential Pollen concept.</p></blockquote></blockquote></blockquote></div><p>I avoid nerdy jargon when I can. But in this case, the thing is called an <span style="font-style: italic">X-expression</span> throughout the Racket documentation, for good reasons. So I use the term too. Better to acclimate you now.</p><p>An X-expression is a way of representing markup-based data in code. X-expressions are indigenous to Lisp-based languages like Pollen and Racket. They don&rsquo;t exist in Python or JavaScript or Ruby.</p><p>Let&rsquo;s start with the part you&rsquo;re familiar with. By &ldquo;markup-based data,&rdquo; I mean things like HTML and XML and SVG. The idea is that you have text-based data surrounded by <span style="font-style: italic">tags</span>. Each tag can also have its own <span style="font-style: italic">attributes</span> that are made of keys and values. Tags can contain other tags, thus creating a tree-like structure. Right? You know what I mean:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;body&gt;</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;&lt;h1&gt;Hello world&lt;/h1&gt;</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;&lt;p class="first"&gt;Nice to &lt;i&gt;see&lt;/i&gt; you.&lt;/p&gt;</span></p></td></tr><tr><td><p><span class="stt">&lt;/body&gt;</span></p></td></tr></table></div></div><p>An X-expression is just a simplified, generalized method of notation for these data structures &#8212; much like Markdown is a simplified method of notation for HTML. To see the relationship, we&rsquo;ll convert one into the other.</p><p>First, we change the angle brackets to parentheses, and only use them on the outside of tags:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(body</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(h1 Hello world /h1)</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(p class="first" Nice to (i see /i) you. /p)</span></p></td></tr><tr><td><p><span class="stt">/body)</span></p></td></tr></table></div></div><p>Then we get rid of the closing tags, which are superfluous, since each closing parenthesis suffices to mark the end of a tag:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(body</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(h1 Hello world)</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(p class="first" Nice to (i see) you.))</span></p></td></tr></table></div></div><p>However, this creates ambiguity between the name of the tag and the content. So we&rsquo;ll put the content within double quotes:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(body</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(h1 "Hello world")</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(p class="first" "Nice to" (i "see") "you."))</span></p></td></tr></table></div></div><p>As for the <span class="RktSym">class</span><span class="RktMeta"></span> attribute, we need to distinguish it from both the markup tags and the content, so we&rsquo;ll move it into another pair of parentheses:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(body</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(h1 "Hello world")</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;(p ((class "first")) "Nice to" (i "see") "you."))</span></p></td></tr></table></div></div><p>Whitespace isn&rsquo;t significant, so the X-expression can also be written without linebreaks:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(body (h1 "Hello world") (p ((class "first")) "Nice to" (i "see") "you."))</span></p></td></tr></table></div></div><p>Skipping a few boring details, that&rsquo;s basically all there is to it.</p><p>So why is it called an X-expression? Lisp languages are built out of units called S-expressions, which look like this:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(and (txexpr? x) (memq (get-tag x) (setup:block-tags)))</span></p></td></tr></table></div></div><p>S-expressions use prefix notation, where each pair of parentheses contains a list. The first element in the list names a function, and the other elements are the arguments to that function. (This is a review of <a href="first-tutorial.html#%28part._.Racket_basics__if_you_re_not_familiar_%29" data-pltdoc="x">Racket basics (if you&rsquo;re not familiar)</a>.) X-expressions just adapt S-expression notation to represent markup, hence the name (the <span style="font-style: italic">X</span> is short for <span style="font-style: italic">XML-like</span>).</p><p>For handling markup-based data, X-expressions have some clear advantages over other methods:</p><ul><li><p><span style="font-weight: bold">Readability.</span> X-expressions retain the semantics of markup-based data while dispensing with the infamous verbosity.</p></li><li><p><span style="font-weight: bold">A hybrid between a tree and a string.</span> Most programming languages represent markup-based data either as a string or as an XML tree. Neither is a good choice. The string captures none of the internal structure of the data. An XML tree captures the structure, but conceals the sequential nature of the data elements. The X-expression shows both.</p></li><li><p><span style="font-weight: bold">An ideal match for an expression-based programming language.</span> Aside from some notational details, X-expressions are just a subset of S-expressions generally, which are the building block of Racket. Processing X-expressions in Racket maximizes flexibility and minimizes <a href="https://projects.csail.mit.edu/gsb/old-archive/gsb-archive/gsb2000-02-11.html">yak-shaving</a>.</p></li></ul><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Given the close kinship between XML-ish data structures and Lisp-ish programming languages, I have no explanation why, during the Internet era, they have not been paired more often. They&rsquo;re like peanut butter and jelly.</p></blockquote></blockquote></blockquote><p>In Pollen&rsquo;s authoring modes, your source file is compiled into an X-expression, which is then injected into a template &amp; converted to output. As a first example, we&rsquo;ll look at Markdown authoring mode.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Markdown_authoring_mode&quot;">6.3.4<tt>&nbsp;</tt><a name="(part._.Markdown_authoring_mode)"></a>Markdown authoring mode</h5><p>Let&rsquo;s start putting together our multiple-page article. For simplicity, I&rsquo;m going to use unrealistically short sample texts. But you can use whatever Markdown content you want.</p><p>We want to use Markdown authoring mode to make a file that will ultimately be HTML. So consistent with Pollen file-naming conventions (see <a href="first-tutorial.html#%28part._.Saving___naming_your_source_file%29" data-pltdoc="x">Saving &amp; naming your source file</a>), we&rsquo;ll start with our desired output filename, <span class="stt">"article.html"</span>, and then append the Markdown authoring suffix, which is <span class="stt">".pmd"</span>. So in DrRacket, start a new file called <span class="stt">"article.html.pmd"</span> and put some Markdown in it:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Deep</span><span class="hspace">&nbsp;</span><span class="RktMeta">Thought</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">============</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">am</span><span class="hspace">&nbsp;</span><span class="RktMeta">**so**</span><span class="hspace">&nbsp;</span><span class="RktMeta">happy</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">writing</span><span class="hspace">&nbsp;</span><span class="RktMeta">this.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Before you preview this file in the project server, click the <span class="ssansserif">Run</span> button in DrRacket just to see what the file produces. You&rsquo;ll see something like this:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root<br/>&#160;&#160;(h1 ((id "deep-thought")) "Deep Thought")<br/>&#160;&#160;(p "I am " (strong "so") " happy to be writing this."))</span></span></p></blockquote><p>You should now be able to recognize this as an X-expression. In authoring mode, Pollen compiles your Markdown into the corresponding HTML entities, but then provides the data as an X-expression rather than finished HTML.</p><p>From what you learned in the last section, it should be evident that this X-expression will convert to HTML that looks like this:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;root&gt;</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;&lt;h1 id="deep-thought"&gt;Deep Thought&lt;/h1&gt;</span></p></td></tr><tr><td><p><span class="stt">&#160;&#160;&lt;p&gt;I am &lt;strong&gt;so&lt;/strong&gt; happy to be writing this.&lt;/p&gt;</span></p></td></tr><tr><td><p><span class="stt">&lt;/root&gt;</span></p></td></tr></table></div></div><p>&ldquo;But what&rsquo;s this <span class="RktSym">root</span><span class="RktMeta"></span> tag? That&rsquo;s not HTML.&rdquo; An X-expression that holds other X-expressions must have a root tag. So in the spirit of obviousness, every X-expression produced by Pollen in authoring mode will start with <span class="RktSym">root</span><span class="RktMeta"></span>. If you don&rsquo;t need it, you can discard it (we&rsquo;ll cover this below, in  <a href="#%28part._tutorial-2._.Templates%29" data-pltdoc="x">Templates</a>). Though as you&rsquo;ll learn in the <a href="third-tutorial.html" data-pltdoc="x">third tutorial</a>, <span class="RktSym">root</span><span class="RktMeta"></span> also creates a useful hook for further processing &#8212; it&rsquo;s not a superfluous accessory.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Review__authoring_mode_vs__preprocessor_mode&quot;">6.3.5<tt>&nbsp;</tt><a name="(part._.Review__authoring_mode_vs__preprocessor_mode)"></a>Review: authoring mode vs. preprocessor mode</h5><p>Before we proceed, let&rsquo;s quickly review how authoring mode is different from preprocessor mode. To do that, let&rsquo;s take the same Markdown content, but this time put it into a preprocessor source file called <span class="stt">"article.md.pp"</span>.</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.md.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Deep</span><span class="hspace">&nbsp;</span><span class="RktMeta">Thought</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">============</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">am</span><span class="hspace">&nbsp;</span><span class="RktMeta">**so**</span><span class="hspace">&nbsp;</span><span class="RktMeta">happy</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">writing</span><span class="hspace">&nbsp;</span><span class="RktMeta">this.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>When you run this file in DrRacket, you&rsquo;ll see:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">Deep Thought<br/>============<br/><br/>I am **so** happy to be writing this.</span></span></p></blockquote><p>This result makes sense, right? To recap: when you use Markdown source in preprocessor mode, Pollen gives you Markdown. When you use Markdown source in authoring mode, Pollen gives you an X-expression.</p><p>So how do you convert an X-expression into HTML? Read on.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Templates&quot;">6.4<tt>&nbsp;</tt><a name="(part._tutorial-2._.Templates)"></a>Templates</h4><p>In Pollen, a <span style="font-style: italic">template</span> lets you convert an X-expression to your target output format. If you&rsquo;ve used other web-publishing systems, templates are probably a familiar idea. Templates in Pollen are both similar and different.</p><p>First, the two major similarities:</p><ul><li><p>At its simplest, a template holds <span style="font-weight: bold">boilerplate material</span> that you want to reuse across multiple output files. For instance, in a set of HTML pages, you might have layout and navigation elements that stay the same, while the content changes. In that case, you could put the layout and navigation in the template, and keep the content in your Pollen source files. When you want to add a new page, you can make a new source file and just use it with the existing template. Moreover, if you want to change the layout and navigation globally, you can just change the template, rather than changing the source files.</p></li><li><p>Pollen templates, like others, can also have <span style="font-weight: bold">conditional elements</span> &#8212;&#160;meaning, you can embed simple code in your templates that allows them to change based on the content in the page. For instance, a template could show or hide &ldquo;previous page&rdquo; and &ldquo;next page&rdquo; links depending on whether there&rsquo;s actually a previous or next page. (Jump ahead to the <a href="third-tutorial.html" data-pltdoc="x">third tutorial</a> if this excites you.)</p></li></ul><p>And two major differences:</p><ul><li><p>There&rsquo;s <span style="font-weight: bold">no special template language</span> you need to learn, with magic syntax and whatnot. Instead, you can use all the same Pollen commands in a template that you can in authoring mode or preprocessor mode.</p></li><li><p>Within a template, you have to <span style="font-weight: bold">explicitly convert</span> the X-expression to the target format. This is a feature, not a bug. By avoiding assumptions about the target format, Pollen templates can be used to generate any kind of file (even binary formats like PDF). But the cost of this flexibility is that you need to tell Pollen what you want.</p></li></ul><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>&ldquo;So a template is also a Pollen source file?&rdquo; Not quite. More accurately, it&rsquo;s a fragment of Pollen source that is completed by adding the X-expression that comes out of one of your source files. Because of this, there are a few extra limitations on the code you can put in a template, though with easy workarounds.</p></blockquote></blockquote></blockquote><p>To see how this works, let&rsquo;s return to the source file we started in the last section:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Deep</span><span class="hspace">&nbsp;</span><span class="RktMeta">Thought</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">============</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">am</span><span class="hspace">&nbsp;</span><span class="RktMeta">**so**</span><span class="hspace">&nbsp;</span><span class="RktMeta">happy</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">writing</span><span class="hspace">&nbsp;</span><span class="RktMeta">this.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Last time, I had you run this file in DrRacket to see the X-expression it produced. This time, load it in the project server. You&rsquo;ll see something like this:</p><div class="browser"><div class="SIntrapara"><span style="font-weight: bold"><span class="Larger">Deep Thought</span></span><br/><br/>I am <span style="font-weight: bold">so</span> happy to be writing this.</div></div><p>Here, you&rsquo;re seeing the X-expression from your source combined with an HTML template, which adds the necessary boilerplate for the finished HTML:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;html&gt;&lt;head&gt;&lt;meta charset="UTF-8" /&gt;&lt;/head&gt;&lt;body&gt;&lt;root&gt;&lt;h1 id="my-article"&gt;Deep Thought&lt;/h1&gt;&lt;p&gt;I am &lt;strong&gt;so&lt;/strong&gt; happy to be writing this.&lt;/p&gt;&lt;/root&gt;</span></p></td></tr><tr><td><p><span class="stt">&lt;/body&gt;&lt;/html&gt;</span></p></td></tr></table></div></div><p>But wait &#8212; where did the template come from? If you try to render a file to HTML without first setting up a template, Pollen helps you out and uses its <span style="font-style: italic">fallback template</span> for HTML. The fallback template is just a minimal template that&rsquo;s used as a last resort. Under ordinary circumstances, seeing the fallback template probably signals a problem (e.g., Pollen couldn&rsquo;t find the template you asked for). For now, we can rely on it to get a preview of our file.</p><p>Still, we can learn a few things about how to make an HTML template by studying the fallback template.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;The_doc_export_and_the_-_html_function&quot;">6.4.1<tt>&nbsp;</tt><a name="(part._tutorial-2._.The_doc_export_and_the_-_html_function)"></a>The <span class="stt">doc</span> export and the <span class="stt">-&gt;html</span> function</h5><p>To understand the necessary parts of a template, let&rsquo;s look at a simple one &#8212; the fallback template that Pollen uses for HTML files, called <span class="stt">"fallback.html"</span>.</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"fallback.html"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">html</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">head</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">meta</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:charset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"UTF-8"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The fallback template has three key ingredients:</p><p>The first ingredient is an X-expression that represents a basic HTML page:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">(html</span><span class="hspace">&nbsp;</span><span class="RktMeta">(head</span><span class="hspace">&nbsp;</span><span class="RktMeta">(meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">#:charset</span><span class="hspace">&nbsp;</span><span class="RktMeta">"UTF-8"))</span><span class="hspace">&nbsp;</span><span class="RktMeta">(body))</span><span class="RktMeta"></span></td></tr></table></blockquote><p>That X-expression is equivalent to this HTML string:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;html&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;</span></p></td></tr></table></div></div><p>But how do we get from X-expression to HTML? Here&rsquo;s how: within the template, we&rsquo;ll explicitly convert this X-expression to HTML. We do this by sending the X-expression through our second key ingredient, the function <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span>:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">html</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">head</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">meta</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:charset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"UTF-8"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span> is in the <a href="Template.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/template</span></a> module, but this module is automatically imported into every template, so there&rsquo;s nothing extra we need to do.</p><p>Finally, we need to include the X-expression from our source file. By convention, every Pollen source file makes its output available through an exported variable called <span class="RktSym">doc</span><span class="RktMeta"></span>. A source file in preprocessor mode puts its text result in <span class="RktSym">doc</span><span class="RktMeta"></span>. And a source file in authoring mode puts its X-expression result in <span class="RktSym">doc</span><span class="RktMeta"></span>. So we put the third key ingredient, the variable <span class="RktSym">doc</span><span class="RktMeta"></span>, inside our <span class="RktSym">body</span><span class="RktMeta"></span> tag.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">html</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">head</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">meta</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:charset</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"UTF-8"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>To summarize: this template contains a skeletal HTML page (in X-expression format). We drop <span class="RktSym">doc</span><span class="RktMeta"></span> into the template to indicate where the X-expression of our source file should be inserted. Finally, we convert the whole X-expression to HTML with <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span>.</p><p>&ldquo;So I have to convert my HTML template to an X-expression?&rdquo; No. That&rsquo;s optional. You can also put hard-coded HTML in your template. Here&rsquo;s an equivalent way of writing <span class="stt">"fallback.html.p"</span>, with explicit HTML:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"fallback.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Notice that we still need to use the <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span> function, but this time, instead of surrounding a larger X-expression, it just goes around <span class="RktSym">doc</span><span class="RktMeta"></span>. The rest of the template code gets passed through as plain text.</p><p>What matters most is ending up with HTML. Otherwise, there is no difference between these two approaches. In the first, you&rsquo;re describing the whole template using an X-expression and converting the whole thing with <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span>. In the second, you&rsquo;re hard-coding the boilerplate HTML, so the only part that needs to be converted with <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span> is <span class="RktSym">doc</span><span class="RktMeta"></span>.</p><p>Use whichever method works best for you. I often prefer the second method, because I like to build HTML layouts by hand using placeholder content to make sure all the fiddly bits work. Then it&rsquo;s easy to replace the placeholder content with <span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="stt"> </span><span class="RktSym">doc</span><span class="RktPn">)</span>, and it becomes a template.</p><p>On the other hand, when you use X-expressions to generate HTML, the result is always perfect. You&rsquo;ll never have to comb through a template looking for a missing closing <span class="RktSym">&lt;/div&gt;</span><span class="RktMeta"></span> tag.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Making_a_custom_template&quot;">6.4.2<tt>&nbsp;</tt><a name="(part._tutorial-2._.Making_a_custom_template)"></a>Making a custom template</h5><p>Having learned about the three key template ingredients, we&rsquo;ll now make a custom template for <span class="stt">"article.html.pmd"</span>.</p><p>In general, template files can have any name you want. But by default, Pollen will first look for a file in your project directory called <span class="stt">"template.ext"</span>, where <span class="stt">"ext"</span> matches the output-file extension of the source file. So if your source file is <span class="stt">"database.xml.pmd"</span>, Pollen will look for <span class="stt">"template.xml"</span>. And for <span class="stt">"article.html.pmd"</span>, Pollen will look for <span class="stt">"template.html"</span>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If you want to use a template with a different name, or apply a special template to a particular source file, you can specify a template from within any source file by inserting the line <span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxLink" data-pltdoc="x">define-meta</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">template</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"my-template-name.html"</span><span class="RktPn">)</span><span class="RktMeta"></span>. For more, see <span class="RktSym"><a href="Render.html#%28def._%28%28lib._pollen%2Frender..rkt%29._get-template-for%29%29" class="RktValLink" data-pltdoc="x">get-template-for</a></span>.</p></blockquote></blockquote></blockquote><p>Furthermore, it&rsquo;s also fine to use a Pollen source file that will result in <span class="stt">"template.html"</span>. Following the fallback-template example above, we&rsquo;ll use the null extension and name our template <span class="stt">"template.html.p"</span>&#160;&#8212;&#160;Pollen will convert this to the <span class="stt">"template.html"</span> it needs.</p><p>Beyond that, all we need to do make sure our template has the three key ingredients we saw in the fallback template. Pollen will automatically apply it to <span class="stt">"article.html.pmd"</span> when we view it in the project server.</p><p>In your project directory, create a new file called <span class="stt">"template.html.p"</span>:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If you&rsquo;re using DrRacket on Mac OS to save this file, it may insist on adding a <span class="stt">"rkt"</span> extension to the filename. If so, you can either correct the filename after you save the file, or instead use a different text editor to create <span class="stt">"template.html.p"</span>.</p></blockquote></blockquote></blockquote><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;Custom</span><span class="hspace">&nbsp;</span><span class="RktMeta">template&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The <span class="stt">"p"</span> extension is Pollen&rsquo;s <a href="File_formats.html#%28part._.Null___p_extension_%29" data-pltdoc="x"><span style="font-style: italic">null extension</span></a>, which does what you might guess &#8212;&#160;nothing. The template would still work if it were called <span class="stt">"template.html"</span>. But using the null extension is a virtuous habit, because it keeps your templates distinct from output files (both for your sake, and your operating system, which may get flummoxed by things like <span class="stt">"template.pdf"</span>, which would be a text-based file with a binary extension.</p><p>Otherwise, this is the same as the fallback template we saw in the previous section, but written out in HTML, and with a <span class="RktSym">title</span><span class="RktMeta"></span> element added. Refresh <span class="stt">"article.html"</span> in the project server. Does it look different? No &#8212; it won&rsquo;t, because the template is basically the same. But because of the new <span class="RktSym">title</span><span class="RktMeta"></span> field, you should notice that the title shown in the browser window is <span class="ssansserif">Custom template</span>. This shows that Pollen is correctly relying on our new template file, rather than the fallback template.</p><p>Let&rsquo;s keep going, and add a <span class="RktSym">style</span><span class="RktMeta"></span> block to our custom template:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;Custom</span><span class="hspace">&nbsp;</span><span class="RktMeta">template&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;style</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">{padding:</span><span class="hspace">&nbsp;</span><span class="RktMeta">3em;</span><span class="hspace">&nbsp;</span><span class="RktMeta">font-size:</span><span class="hspace">&nbsp;</span><span class="RktMeta">20px;}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">h1</span><span class="hspace">&nbsp;</span><span class="RktMeta">{background:</span><span class="hspace">&nbsp;</span><span class="RktMeta">gray;</span><span class="hspace">&nbsp;</span><span class="RktMeta">color:</span><span class="hspace">&nbsp;</span><span class="RktMeta">white;}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">strong</span><span class="hspace">&nbsp;</span><span class="RktMeta">{color:</span><span class="hspace">&nbsp;</span><span class="RktMeta">red;}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;/style&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Refresh <span class="stt">"article.html"</span> in the project server again. Now you&rsquo;ll see that the heading has a gray background, and one word in the text is red.</p><p>Feel free to add other settings to <span class="stt">"template.html.p"</span>, or update the text in <span class="stt">"article.html.pmd"</span>, and see how the page changes in the browser. As you&rsquo;d expect, the project server keeps an eye on both your source files and your template files, and if one changes, it regenerates the output file.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Inserting_specific_source_data_into_templates&quot;">6.4.3<tt>&nbsp;</tt><a name="(part._tutorial-2._.Inserting_specific_source_data_into_templates)"></a>Inserting specific source data into templates</h5><p>In the previous example, we used <span class="RktSym">doc</span><span class="RktMeta"></span> to insert the entire content of the source file &#8212;&#160;as an X-expression &#8212;&#160;into the template.</p><p>But what if you want to only insert part of your source file into the template? For instance, you&rsquo;ll look like a dork if the title on each page is <span class="ssansserif">Custom template</span>. So let&rsquo;s fix that.</p><p>When you&rsquo;re working in a template, Pollen provides a <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> function that lets you extract the content of a specific tag, like so: <span class="RktSym">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tag-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span>, which means &ldquo;get the content of <span class="RktVar">tag-name</span> out of <span class="RktSym">doc</span><span class="RktMeta"></span> and put it here.&rdquo;</p><p>Let&rsquo;s suppose that we&rsquo;d rather use the name of the article &#8212;&#160;<span style="font-style: italic">Deep Thought</span> &#8212;&#160;as the page title. To do this, we&rsquo;ll put a <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> command inside the <span class="RktSym">&lt;title&gt;</span><span class="RktMeta"></span> tag.</p><p>To make <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> work, we also need to know the tag name that contains the title. If we have a little Markdown expertise, we might already know that this part of our Markdown source:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">Deep</span><span class="hspace">&nbsp;</span><span class="RktMeta">Thought</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">============</span><span class="RktMeta"></span></td></tr></table></blockquote><p>is going to produce a tag named <span class="RktSym">h1</span><span class="RktMeta"></span>.</p><p>What if we don&rsquo;t have all the Markdown conversions memorized? No problem. We can still figure out the tag name by running the <span class="stt">"article.html.pmd"</span> source file in DrRacket and looking at the resulting X-expression:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(root (h1 ((id "my-article")) "Deep Thought") (p "I am "<br/>(strong "so") " happy to be writing this."))</span></span></p></blockquote><p>Either way, now we know that the text <span style="font-style: italic">Deep Thought</span> lives in the <span class="RktSym">h1</span><span class="RktMeta"></span> tag. So we update our template accordingly (for brevity, I&rsquo;m going to omit the <span class="RktSym">style</span><span class="RktMeta"></span> tag in these examples, but it&rsquo;s fine to leave it in):</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>When you refresh the page in the project server, the page title will now appear as <span class="ssansserif">Deep Thought</span>. Of course, you can also combine static and dynamic elements in your template, like so:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The page title will now be <span class="ssansserif">Deep Thought, by MB</span>.</p><p>A couple notes on command syntax. We wrote the <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> and <span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span> commands in Racket style. We could also write the commands in Pollen style, like so:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">]</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktPn">[</span><span class="RktSym">doc</span><span class="RktPn">]</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>This is exactly equivalent to the previous example. Skeptics are welcome to confirm this by reloading the page in the project server.</p><p>Finally, notice that in the <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> command, the tag name <span class="RktSym">h1</span><span class="RktMeta"></span> is written with a quote mark (<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span>), whereas <span class="RktSym">doc</span><span class="RktMeta"></span> is not. This is an easy place to get tripped up, but the rule is simple: you don&rsquo;t use a quote mark when you&rsquo;re referring to an <span style="font-style: italic">identifier</span> &#8212; that is, the name of an existing function or variable (like <span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> or <span class="RktSym">doc</span><span class="RktMeta"></span>). But you do need a quote mark when you&rsquo;re using the thing as a literal value.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Racket (and hence Pollen) makes a distinction between <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=symbols.html&amp;version=8.6" class="Sq" data-pltdoc="x">Symbols</a> (e.g. <span class="RktVal">'</span><span class="RktVal">h1</span>) and <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html&amp;version=8.6" class="Sq" data-pltdoc="x">Strings</a> (e.g.  <span class="RktVal">"h1"</span>). Without getting into the weeds, just know for now that the tag of an X-expression is always a symbol, not a string. But if you write <span class="stt">&#9674;(<span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> "h1" doc)</span>, the command will still work, because Pollen will treat it as <span class="stt">&#9674;(<span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span> 'h1 doc)</span>, consistent with a general policy of not being persnickety about input types when the intention is clear.</p></blockquote></blockquote></blockquote><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Linking_to_an_external_CSS_file&quot;">6.4.4<tt>&nbsp;</tt><a name="(part._tutorial-2._.Linking_to_an_external_.C.S.S_file)"></a>Linking to an external CSS file</h5><p>If you&rsquo;re a super web hotshot, you probably don&rsquo;t put your CSS selectors in the <span class="RktSym">&lt;head&gt;</span><span class="RktMeta"></span> tag. Instead, you link to an external CSS file. So it will not surprise you that in Pollen, you can do this by adding the usual <span class="RktSym">&lt;link&gt;</span><span class="RktMeta"></span> tag to your HTML template, in this case a file called <span class="stt">"styles.css"</span>:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Fans of hand-coded CSS, I trust you to take it from here: put a <span class="stt">"styles.css"</span> file in your project directory, and enjoy the results.</p><p>But folks who paid attention during the <a href="first-tutorial.html" data-pltdoc="x">first tutorial</a> might be wondering &ldquo;Can we link to a dynamically generated <span class="stt">"styles.css.pp"</span> file?&rdquo;</p><p>Yes, of course. Here&rsquo;s the rule of thumb: when you&rsquo;re making links between files &#8212;&#160;whether CSS, HTML, or anything else &#8212;&#160;Pollen doesn&rsquo;t care whether the file is static or dynamic. You just refer to it by its ultimate name, in this case <span class="stt">"styles.css"</span>. If a static <span class="stt">"styles.css"</span> file exists, Pollen will use that. If it doesn&rsquo;t, Pollen will look for a source file it can use to make <span class="stt">"styles.css"</span>, and generate it on the spot. (You can also start with a static file, and change it to be dynamic later, and Pollen will do the right thing.)</p><p>So to use a dynamic CSS file, we don&rsquo;t need to make any changes to <span class="stt">"template.html.p"</span>. We just need to add <span class="stt">"styles.css.pp"</span> to the project directory:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"styles.css.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">h1-color</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"blue"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">strong-color</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"green"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">{padding:</span><span class="hspace">&nbsp;</span><span class="RktMeta">3em;</span><span class="hspace">&nbsp;</span><span class="RktMeta">font-size:</span><span class="hspace">&nbsp;</span><span class="RktMeta">20px;}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">h1</span><span class="hspace">&nbsp;</span><span class="RktMeta">{background:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">h1-color</span><span class="RktPn">|</span><span class="RktMeta">;</span><span class="hspace">&nbsp;</span><span class="RktMeta">color:</span><span class="hspace">&nbsp;</span><span class="RktMeta">white;}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">strong</span><span class="hspace">&nbsp;</span><span class="RktMeta">{color:</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">strong-color</span><span class="RktPn">|</span><span class="RktMeta">;}</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>This time, when you refresh <span class="stt">"article.html"</span> in the project server, Pollen will run <span class="stt">"styles.css.pp"</span> to get the <span class="stt">"styles.css"</span> file it needs, and you&rsquo;ll see the new colors in the page. As usual, if you update <span class="stt">"styles.css.pp"</span>, Pollen will notice and regenerate the CSS file when you refresh the page.</p><p>Can you add multiple dynamic style sheets? Yes.
<br/>Can you mix dynamic and static style sheets? Yes.
<br/>Can you add a dynamic JavaScript file? Yes.</p><p>You&rsquo;ve got the general idea, right? So let&rsquo;s move on.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Intermission&quot;">6.5<tt>&nbsp;</tt><a name="(part._tutorial-2._.Intermission)"></a>Intermission</h4><p>If you only need one page for your article, you can stop here. You now know everything necessary to publish a single-page article using authoring mode. You know how to create the mandatory ingredients &#8212; a source file and a template &#8212; and  you also know how to link to an optional CSS file, which can be dynamically generated.</p><p>If you want to create a multi-page article, however, you need to get through one more big idea. This might be a good time to take a break.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Pagetrees&quot;">6.6<tt>&nbsp;</tt><a name="(part._tutorial-2._.Pagetrees)"></a>Pagetrees</h4><p>A <span style="font-style: italic">pagetree</span> is a hierarchical list of Pollen pages. When you have multiple pages in your project, the pagetree establishes relationships among those pages. At its most basic, a pagetree establishes a linear sequence for the pages. But pagetrees can also establish hierarchical relationships &#8212;&#160;for instance, a book-length project can be organized into chapters, the chapters into sections, and so on. The pagetree doesn&rsquo;t impose any semantics on the organization of your project. It&rsquo;s just a tree, and it&rsquo;s up to you how many layers to establish, what those layers mean, and so on.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Pagetree_navigation&quot;">6.6.1<tt>&nbsp;</tt><a name="(part._tutorial-2._.Pagetree_navigation)"></a>Pagetree navigation</h5><p>An obvious use for a pagetree is to add navigational links to your pages. Obviously, in a multi-page article, readers need a way of getting from one page to the next. In this part of the tutorial, we&rsquo;ll expand our sample article from one page to three, and see how to create &ldquo;previous page&rdquo; and &ldquo;next page&rdquo; links in our template that are dynamically generated relative to the current page.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Using_the_automatic_pagetree&quot;">6.6.2<tt>&nbsp;</tt><a name="(part._tutorial-2._.Using_the_automatic_pagetree)"></a>Using the automatic pagetree</h5><p>You&rsquo;ve actually already been exposed to pagetrees (though I didn&rsquo;t tell you about it at the time). Recall that the dashboard of the project server is located at <a href="http://localhost:8080/index.ptree"><span class="stt">http://localhost:8080/index.ptree</span></a>. The list of files you see in the dashboard is a pagetree that Pollen generates by getting a list of files in the current directory and arranging them in alphabetical order.</p><p>Thus, if the multiple pages in your project are already ordered alphabetically by filename, then you can rely on this automatic pagetree. (More commonly, you&rsquo;ll make a separate pagetree file for the navigation &#8212;&#160;but we&rsquo;ll cover that later in this tutorial.)</p><p>From earlier in the tutorial, you have a Markdown source file called <span class="stt">"article.html.pmd"</span> that looks like this:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"article.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Deep</span><span class="hspace">&nbsp;</span><span class="RktMeta">Thought</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">============</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">I</span><span class="hspace">&nbsp;</span><span class="RktMeta">am</span><span class="hspace">&nbsp;</span><span class="RktMeta">**so**</span><span class="hspace">&nbsp;</span><span class="RktMeta">happy</span><span class="hspace">&nbsp;</span><span class="RktMeta">to</span><span class="hspace">&nbsp;</span><span class="RktMeta">be</span><span class="hspace">&nbsp;</span><span class="RktMeta">writing</span><span class="hspace">&nbsp;</span><span class="RktMeta">this.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Let&rsquo;s supplement this source file by creating two others for the project:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"barticle.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Barticle</span><span class="hspace">&nbsp;</span><span class="RktMeta">Title</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">==============</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">wonderful</span><span class="hspace">&nbsp;</span><span class="RktMeta">second</span><span class="hspace">&nbsp;</span><span class="RktMeta">part</span><span class="hspace">&nbsp;</span><span class="RktMeta">of</span><span class="hspace">&nbsp;</span><span class="RktMeta">the</span><span class="hspace">&nbsp;</span><span class="RktMeta">article.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"carticle.html.pmd"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Carticle</span><span class="hspace">&nbsp;</span><span class="RktMeta">Title</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">==============</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">terrific</span><span class="hspace">&nbsp;</span><span class="RktMeta">third</span><span class="hspace">&nbsp;</span><span class="RktMeta">part.</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>As before, you can fill these source files with any sample Markdown content you like. Moreover, you don&rsquo;t have to use the filenames <span class="stt">"barticle.html.pmd"</span> and <span class="stt">"carticle.html.pmd"</span> &#8212;&#160;the point is that the intended sequence needs to match the alphabetic sorting of the filenames.</p><p>We&rsquo;ll reuse the <span class="stt">"template.html.p"</span> and <span class="stt">"styles.css.pp"</span> files from earlier in the tutorial. Move or delete the other tutorial files so that your dashboard in the project server shows only these five files:</p><ul><li><p><span class="stt">"article.html.pmd"</span></p></li><li><p><span class="stt">"barticle.html.pmd"</span></p></li><li><p><span class="stt">"carticle.html.pmd"</span></p></li><li><p><span class="stt">"styles.css.pp"</span></p></li><li><p><span class="stt">"template.html.p"</span></p></li></ul><p>If you click on any of the three Markdown sources, you&rsquo;ll see it converted into HTML using <span class="stt">"template.html.p"</span>, with styles from the generated <span class="stt">"styles.css"</span>.</p><p>The automatic pagetree for this project is exactly what you see in the dashboard: a list of the three article files, followed by <span class="stt">"styles.css"</span> and <span class="stt">"template.html.p"</span>.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Adding_navigation_links_to_the_template_with_here&quot;">6.6.3<tt>&nbsp;</tt><a name="(part._tutorial-2._.Adding_navigation_links_to_the_template_with_here)"></a>Adding navigation links to the template with <span class="stt">here</span></h5><p>Recall from earlier in the tutorial that the content of your source file is made available in the template through the special variable <span class="RktSym">doc</span><span class="RktMeta"></span>. Likewise, the output name of the current source file is made available through the special variable <span class="RktSym">here</span><span class="RktMeta"></span>.</p><p>To make any navigation link &#8212;&#160;up, down, sideways &#8212; the general idea is that we use <span class="RktSym">here</span><span class="RktMeta"></span> as input to a pagetree-navigation function, which then looks up the answer in the current pagetree.</p><p>First, let&rsquo;s just see <span class="RktSym">here</span><span class="RktMeta"></span> on its own. Update your template as follows:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>If you refresh <span class="stt">"article.html"</span>, you&rsquo;ll now see the line &ldquo;The current page is called article.html.&rdquo; Switch to <span class="stt">"barticle.html"</span>, and you&rsquo;ll see &ldquo;The current page is called barticle.html.&rdquo; Makes sense, right?</p><p>Notice that <span class="RktSym">here</span><span class="RktMeta"></span> is always an <span style="font-style: italic">output</span> filename, on the idea that navigation naturally makes connections among output files, not source files. In this case, this conversion to output name means we lose the <span class="stt">"pmd"</span> extension. (As we&rsquo;ll see below, we&rsquo;ll also use these output filenames when we&rsquo;re <a href="#%28part._tutorial-2._.Making_a_pagetree_file%29" data-pltdoc="x">Making a&#160;pagetree file</a>.)</p><p>Now let&rsquo;s use pagetree functions to show the names of the previous and next pages. Consistent with the usual Pollen policy of obviousness, these functions are called <span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span> and <span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span>:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">previous</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">next</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Refresh <span class="stt">"barticle.html"</span>. You&rsquo;ll now see that &ldquo;The current page is called barticle.html. The previous is article.html. The next is carticle.html.&rdquo; So far, so good: we&rsquo;re correctly deriving the previous and next pages from the automatic pagetree.</p><p>All that&rsquo;s left is adding the hyperlinks:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">previous</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">next</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Refresh <span class="stt">"barticle.html"</span>, and you&rsquo;ll see that the names of the previous and next pages are now hyperlinks to those pages. Click through and convince yourself that it works.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The documentation for pagetree <a href="Pagetree.html#%28part._.Navigation%29" data-pltdoc="x">Navigation</a> will tell you about the other functions available for generating navigation links.</p></blockquote></blockquote></blockquote><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Handling_navigation_boundaries_with_conditionals&quot;">6.6.4<tt>&nbsp;</tt><a name="(part._tutorial-2._.Handling_navigation_boundaries_with_conditionals)"></a>Handling navigation boundaries with conditionals</h5><p>If you clicked through to <span class="stt">"article.html"</span> or <span class="stt">"carticle.html"</span>, you might&rsquo;ve noticed a couple problems. Because <span class="stt">"article.html"</span> is the first page in the automatic pagetree, it doesn&rsquo;t have any previous page it can link to. And the next-page link for <span class="stt">"carticle.html"</span> is <span class="stt">"styles.css"</span>, which is strictly correct &#8212;&#160;it is, in fact, the next file in the automatic pagetree &#8212;&#160;but it&rsquo;s not part of our article, so we&rsquo;d rather stop the navigation there.</p><p>One way to fix the problem would be to have three separate template files &#8212;&#160;the standard one with both previous- and next-page links, one with only a next-page link, and one with only a previous-page link.</p><p>But since we have a whole programming language available in Pollen, that&rsquo;s a weak solution. The better way is to add <span style="font-style: italic">conditionals</span> to the template to selectively change the navigation. That keeps things simple, because we&rsquo;ll still have only one <span class="stt">"template.html.p"</span> to deal with.</p><p>To handle <span class="stt">"article.html"</span>, we want to hide the previous-page navigation link when there&rsquo;s no previous page. As it turns out, if the <span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span> function can&rsquo;t find a previous page, it will return false. So we just need to wrap our previous-page navigation in the <span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span> command like so:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">previous</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">next</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The basic form of <span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span> is</p><p><span class="stt">&#9674;when/splice[</span><span class="RktVar">test-condition</span><span class="stt">]{</span><span class="RktVar">content-to-insert</span><span class="stt">}</span></p><p>We&rsquo;re writing this command in Pollen style &#8212; note the square braces around the <span class="RktVar">condition</span>, and the curly braces around the <span class="RktVar">text</span>. Using <span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span> as the condition is shorthand for &ldquo;when <span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span> does not return false...&rdquo;</p><p>Programmers in the audience might be getting anxious about the repeated use of <span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span> &#8212; you&rsquo;re welcome to store that value in a variable, and everything will work the same way:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prev-page</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span><span class="RktPn">[</span><span class="RktSym">prev-page</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">previous</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktSym">prev-page</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktSym">prev-page</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">next</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>We need a different technique for handling the end of the next-page navigation, because we&rsquo;re not reaching the actual end of the pagetree. We&rsquo;re just reaching the end of the pages we care about navigating through.</p><p>What condition will help us detect this? This time, we might notice that the names of our article pages all contain the string <span class="RktSym">article</span><span class="RktMeta"></span>. In a real project, you&rsquo;d probably want a more meaningful test condition. But in this tutorial, what we&rsquo;ll do is hide the next-page navigation if the name of the next page doesn&rsquo;t contain <span class="stt">"article"</span>. As we did before, we wrap our navigation line in the <span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span> function:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prev-page</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span><span class="RktPn">[</span><span class="RktSym">prev-page</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">previous</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktSym">prev-page</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktSym">prev-page</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"article"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">next</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>This time, the condition is <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span><span class="stt"> </span><span class="RktVal">"article"</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span>. How were you supposed to know this? You weren&rsquo;t. That&rsquo;s why this is a tutorial. Without going on a lengthy detour, the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp-match%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp-match</a></span> function is Racket&rsquo;s regular-expression matcher. It returns true if the first string (in this case, <span class="RktVal">"article"</span>) is found inside the second string (in this case, we convert <span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span> to a string by wrapping it in <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span>).</p><p>Even if some of the programmy bits went over your head just now, relax and paste the code into your template. What you&rsquo;ll see when you refresh <span class="stt">"carticle.html"</span> is that the next-page link is gone. So now our template lets us navigate among the pages of our article, and the conditionals handle the end pages correctly.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;Making_a_pagetree_file&quot;">6.6.5<tt>&nbsp;</tt><a name="(part._tutorial-2._.Making_a_pagetree_file)"></a>Making a&#160;pagetree file</h5><p>I didn&rsquo;t want to dwell on programming complications in the previous section. Why? Because the extra programming was necessary only because we made life somewhat difficult for ourselves by relying on the automatic pagetree.</p><p>A better way to solve the problem is to avoid it altogether by making a pagetree file.</p><p>Pagetree files have a different syntax and status than other Pollen source files, so they&rsquo;re compiled using their own Pollen dialect. To invoke this dialect, you just start the file with <span class="stt">#lang pollen</span> and name the file with the <span class="stt">"ptree"</span> extension, for instance <span class="stt">"my-project.ptree"</span>. While you can have as many pagetrees in your project as you want, Pollen will first look for one named <span class="stt">"index.ptree"</span>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>A pagetree file only gets one file extension, because unlike other Pollen source files, it&rsquo;s never converted into an output file.</p></blockquote></blockquote></blockquote><p>So let&rsquo;s make an <span class="stt">"index.ptree"</span> file. At its simplest, a pagetree file can just be a list of files in the intended order. In DrRacket, create a new file in your project directory as follows:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"index.ptree"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">carticle.html</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">article.html</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">barticle.html</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Now run the file. The result will be:</p><blockquote class="SubFlow"><p><span class="RktVal"><span class="stt">'(pagetree-root carticle.html article.html barticle.html)</span></span></p></blockquote><p>Pretty boring, I know. But behind the scenes, Pollen&rsquo;s pagetree compiler is making sure your tree is valid (e.g., no duplicate or malformed names). Today it&rsquo;s boring, but on the day you have a long and complicated pagetree, you&rsquo;ll be grateful.</p><p>Notice that the names in this pagetree are the names of <span style="font-style: italic">output</span> files, not source files. This is deliberate. Neither you nor Pollen has to care which files are static vs. dynamic. This next pagetree wouldn&rsquo;t be wrong in the sense of bad syntax &#8212; the pagetree compiler won&rsquo;t complain &#8212;&#160;but it would be wrong in the sense of not-what-you-want, because it refers to source names rather than output names:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"bad-index.ptree"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&#160;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">carticle.html.pmd</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">article.html.pmd</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">barticle.html.pmd</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>You also probably noticed that the files are in a different order than they were in the automatic pagetree: <span class="stt">"carticle.html"</span> is first, followed by <span class="stt">"article.html"</span> and then <span class="stt">"barticle.html"</span>. This too is deliberate, so we can see what happens with a differently ordered pagetree.</p><p>Pagetrees don&rsquo;t change as often as other source files, so as a performance optimization, the project server ignores them when deciding whether to refresh a file. Thus, after updating a pagetree, you have to manually reset your project. Go to your terminal window and stop the project server with <span class="ssansserif">ctrl+C</span>.</p><p>Then clear Pollen&rsquo;s cache of rendered pages:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen reset</span></p></td></tr></table></div></div><p>And restart the project server:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen start</span></p></td></tr></table></div></div><p>Now click on <span class="stt">"carticle.html"</span> again. You&rsquo;ll notice that the navigation links are different. You won&rsquo;t see a previous-page link &#8212; because <span class="stt">"carticle.html"</span> is now the first page in the pagetree &#8212;&#160;and the next page will show up as <span class="stt">"article.html"</span>. Click through to <span class="stt">"article.html"</span>, and you&rsquo;ll see the navigation likewise updated. Click through to <span class="stt">"barticle.html"</span>, and you&rsquo;ll see ...</p><p>BAM! An error page that says</p><blockquote class="SubFlow"><p><span class="RktErr"><span class="stt">symbol-&gt;string: contract violation<br/>expected: symbol?<br/>given: #f</span></span></p></blockquote><p>What happened? We switched to using our own pagetree file but we didn&rsquo;t update the conditions in our template. Once we reach <span class="stt">"barticle.html"</span>, the value of <span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span> is false (<span class="RktVal">#f</span>). But the <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="stt"> </span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span> command in the template needs a symbol as input. Hence the error.</p><p>So let&rsquo;s go back and fix that. Because we don&rsquo;t have extraneous files in our pagetree anymore, we can change the second conditional in the template to work the same way as the first:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"template.html.p"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;html&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;meta</span><span class="hspace">&nbsp;</span><span class="RktMeta">charset="UTF-8"&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;title&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">h1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta">,</span><span class="hspace">&nbsp;</span><span class="RktMeta">by</span><span class="hspace">&nbsp;</span><span class="RktMeta">MB&lt;/title&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktMeta">&lt;link</span><span class="hspace">&nbsp;</span><span class="RktMeta">rel="stylesheet"</span><span class="hspace">&nbsp;</span><span class="RktMeta">type="text/css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="styles.css"</span><span class="hspace">&nbsp;</span><span class="RktMeta">/&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/head&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;body&gt;</span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="Template.html#%28def._%28%28lib._pollen%2Ftemplate%2Fhtml..rkt%29._-~3ehtml%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-&gt;</span>html</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">doc</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">current</span><span class="hspace">&nbsp;</span><span class="RktMeta">page</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">called</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;|</span><span class="RktSym">here</span><span class="RktPn">|</span><span class="RktMeta">.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">prev-page</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._previous%29%29" class="RktValLink" data-pltdoc="x">previous</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span><span class="RktPn">[</span><span class="RktSym">prev-page</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">previous</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktSym">prev-page</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktSym">prev-page</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">next-page</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="Pagetree.html#%28def._%28%28lib._pollen%2Fpagetree..rkt%29._next%29%29" class="RktValLink" data-pltdoc="x">next</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">here</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="Core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span><span class="RktPn">[</span><span class="RktSym">next-page</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">The</span><span class="hspace">&nbsp;</span><span class="RktMeta">next</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta">&lt;a</span><span class="hspace">&nbsp;</span><span class="RktMeta">href="</span><span class="RktPn">&#9674;|</span><span class="RktSym">next-page</span><span class="RktPn">|</span><span class="RktMeta">"&gt;</span><span class="RktPn">&#9674;|</span><span class="RktSym">next-page</span><span class="RktPn">|</span><span class="RktMeta">&lt;/a&gt;.</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/body&gt;</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">&lt;/html&gt;</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>Refresh <span class="stt">"barticle.html"</span> &#8212; because you&rsquo;re updating the template, you don&rsquo;t need to restart the project server &#8212;&#160;and you&rsquo;ll see the right result. The previous-page link goes to <span class="stt">"article.html"</span>, and the next-page link is hidden.</p><h5 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-prefixes="(&quot;tutorial-2&quot;)" x-part-tag="&quot;index_ptree___the_project_server&quot;">6.6.6<tt>&nbsp;</tt><a name="(part._tutorial-2._index_ptree___the_project_server)"></a><span class="stt">index.ptree</span> &amp; the project server</h5><p>One more thing before we wrap up this tutorial. Remember that the dashboard of the project server is at <a href="http://localhost:8080/index.ptree"><span class="stt">http://localhost:8080/index.ptree</span></a>? By default, the project server will generate a pagetree from an alphabetical directory listing.</p><p>But if you put your own <span class="stt">"index.ptree"</span> file in that directory, the project server will use that for the dashboard instead. In fact, visit <a href="http://localhost:8080/index.ptree"><span class="stt">http://localhost:8080/index.ptree</span></a> now and you&rsquo;ll see what I mean. Consistent with the <span class="stt">"index.ptree"</span> you made, you&rsquo;ll now see <span class="stt">"carticle.html"</span>, <span class="stt">"article.html"</span>, and <span class="stt">"barticle.html"</span>, but not <span class="stt">"template.html.p"</span> nor <span class="stt">"styles.css"</span> (even though they&rsquo;re still in the project directory).</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Second_tutorial_complete&quot;">6.7<tt>&nbsp;</tt><a name="(part._.Second_tutorial_complete)"></a>Second tutorial complete</h4><p>That was a big tutorial. I commend you for your tenacity and patience. But you made a giant leap forward. Despite the silly examples, you now know everything you need to make multi-page articles &#8212; books, even &#8212;&#160;using Markdown authoring mode in Pollen. If this is all you ever use Pollen for, it&rsquo;ll be a big improvement over ordinary Markdown.</p><p>But there&rsquo;s more. We haven&rsquo;t even gotten into the more elaborate automation that&rsquo;s possible with Pollen, nor Pollen&rsquo;s own markup language. We&rsquo;ll cover that in the <a href="third-tutorial.html" data-pltdoc="x">third tutorial</a>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="first-tutorial.html" title="backward to &quot;5 First tutorial: the project server &amp; preprocessor&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pollen: the book is a program&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="third-tutorial.html" title="forward to &quot;7 Third tutorial: Pollen markup &amp; tag functions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/pollen/second-tutorial.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:50 GMT -->
</html>