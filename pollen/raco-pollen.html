<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/pollen/raco-pollen.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>10&nbsp;Using raco pollen</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="mb.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Pollen:<span class="mywbr"> &nbsp;</span> the book is a program</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Installation.html" class="tocviewlink" data-pltdoc="x">Installation</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="quick-tour.html" class="tocviewlink" data-pltdoc="x">Quick tour</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Backstory.html" class="tocviewlink" data-pltdoc="x">Backstory</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="big-picture.html" class="tocviewlink" data-pltdoc="x">The big picture</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="first-tutorial.html" class="tocviewlink" data-pltdoc="x">First tutorial:<span class="mywbr"> &nbsp;</span> the project server &amp; preprocessor</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="second-tutorial.html" class="tocviewlink" data-pltdoc="x">Second tutorial:<span class="mywbr"> &nbsp;</span> Markdown, templates, &amp; pagetrees</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="third-tutorial.html" class="tocviewlink" data-pltdoc="x">Third tutorial:<span class="mywbr"> &nbsp;</span> Pollen markup &amp; tag functions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="fourth-tutorial.html" class="tocviewlink" data-pltdoc="x">Fourth tutorial:<span class="mywbr"> &nbsp;</span> multiple output targets</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="mini-tutorial.html" class="tocviewlink" data-pltdoc="x">Mini tutorials</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Using <span class="stt">raco pollen</span></a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="File_formats.html" class="tocviewlink" data-pltdoc="x">File formats</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="pollen-command-syntax.html" class="tocviewlink" data-pltdoc="x">Pollen command syntax</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="programming-pollen.html" class="tocviewlink" data-pltdoc="x">Programming Pollen</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Module_reference.html" class="tocviewlink" data-pltdoc="x">Module reference</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Unstable_module_reference.html" class="tocviewlink" data-pltdoc="x">Unstable module reference</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Acknowledgments.html" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="License___source_code.html" class="tocviewlink" data-pltdoc="x">License &amp; source code</a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="version-notes.html" class="tocviewlink" data-pltdoc="x">Version notes (3.2.3290.1047)</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>10&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Using <span class="stt">raco pollen</span></a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.1&nbsp;</td><td><a href="#%28part._.Making_sure_raco_pollen_works%29" class="tocviewlink" data-pltdoc="x">Making sure <span class="stt">raco pollen</span> works</a></td></tr><tr><td align="right">10.2&nbsp;</td><td><a href="#%28part._raco_pollen%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen</span></a></td></tr><tr><td align="right">10.3&nbsp;</td><td><a href="#%28part._raco_pollen_help%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen help</span></a></td></tr><tr><td align="right">10.4&nbsp;</td><td><a href="#%28part._raco_pollen_start%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen start</span></a></td></tr><tr><td align="right">10.5&nbsp;</td><td><a href="#%28part._raco_pollen_render%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen render</span></a></td></tr><tr><td align="right">10.6&nbsp;</td><td><a href="#%28part._raco_pollen_publish%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen publish</span></a></td></tr><tr><td align="right">10.7&nbsp;</td><td><a href="#%28part._raco_pollen_setup%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen setup</span></a></td></tr><tr><td align="right">10.8&nbsp;</td><td><a href="#%28part._raco_pollen_reset%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen reset</span></a></td></tr><tr><td align="right">10.9&nbsp;</td><td><a href="#%28part._raco_pollen_version%29" class="tocviewlink" data-pltdoc="x"><span class="stt">raco pollen version</span></a></td></tr><tr><td align="right">10.10&nbsp;</td><td><a href="#%28part._.The_.P.O.L.L.E.N_environment_variable%29" class="tocviewlink" data-pltdoc="x">The <span class="stt">POLLEN</span> environment variable</a></td></tr><tr><td align="right">10.11&nbsp;</td><td><a href="#%28part._.Logging___the_.P.L.T.S.T.D.E.R.R_environment_variable%29" class="tocviewlink" data-pltdoc="x">Logging &amp; the <span class="stt">PLTSTDERR</span> environment variable</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">10.1<tt>&nbsp;</tt></span><a href="#%28part._.Making_sure_raco_pollen_works%29" class="tocsubseclink" data-pltdoc="x">Making sure <span class="stt">raco pollen</span> works</a></td></tr><tr><td><span class="tocsublinknumber">10.2<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen</span></a></td></tr><tr><td><span class="tocsublinknumber">10.3<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_help%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen help</span></a></td></tr><tr><td><span class="tocsublinknumber">10.4<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_start%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen start</span></a></td></tr><tr><td><span class="tocsublinknumber">10.5<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_render%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen render</span></a></td></tr><tr><td><span class="tocsublinknumber">10.6<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_publish%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen publish</span></a></td></tr><tr><td><span class="tocsublinknumber">10.7<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_setup%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen setup</span></a></td></tr><tr><td><span class="tocsublinknumber">10.8<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_reset%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen reset</span></a></td></tr><tr><td><span class="tocsublinknumber">10.9<tt>&nbsp;</tt></span><a href="#%28part._raco_pollen_version%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">raco pollen version</span></a></td></tr><tr><td><span class="tocsublinknumber">10.10<tt>&nbsp;</tt></span><a href="#%28part._.The_.P.O.L.L.E.N_environment_variable%29" class="tocsubseclink" data-pltdoc="x">The <span class="stt">POLLEN</span> environment variable</a></td></tr><tr><td><span class="tocsublinknumber">10.11<tt>&nbsp;</tt></span><a href="#%28part._.Logging___the_.P.L.T.S.T.D.E.R.R_environment_variable%29" class="tocsubseclink" data-pltdoc="x">Logging &amp; the <span class="stt">PLTSTDERR</span> environment variable</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="mini-tutorial.html" title="backward to &quot;9 Mini tutorials&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pollen: the book is a program&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="File_formats.html" title="forward to &quot;11 File formats&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco-pollen&quot;">10<tt>&nbsp;</tt><a name="(part._raco-pollen)"></a>Using <span class="stt">raco pollen</span></h3><p>Racket provides centralized command-line options through <span class="stt">raco</span> (short for <span class="stt">racket command</span>, see <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=raco&amp;rel=index.html&amp;version=8.6" class="Sq" data-pltdoc="x"><span class="stt">raco</span>: Racket Command-Line Tools</a>).</p><p>Once you install Pollen, you can access the following Pollen-specific commands through <span class="RktSym">raco</span> using the subcommand <span class="stt">raco pollen</span>.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Making_sure_raco_pollen_works&quot;">10.1<tt>&nbsp;</tt><a name="(part._.Making_sure_raco_pollen_works)"></a>Making sure <span class="stt">raco pollen</span> works</h4><p>Open a terminal window and type:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen test</span></p></td></tr></table></div></div><p>If <span class="stt">raco pollen</span> is installed correctly, you&rsquo;ll see:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">raco pollen is installed correctly</span></p></td></tr></table></div></div><p>But if you get:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">raco: Unrecognized command: pollen</span></p></td></tr></table></div></div><p>You&rsquo;ll need to fix the problem before proceeding, most likely by reinstalling Pollen (see <a href="Installation.html" data-pltdoc="x">Installation</a>).</p><p>If your error is like this:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">Unrecognized command: raco</span></p></td></tr></table></div></div><p>You have a deeper problem with your Racket installation (often a misconfiguration of <span class="RktSym">PATH</span><span class="RktMeta"></span>).</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen&quot;">10.2<tt>&nbsp;</tt><a name="(part._raco_pollen)"></a><span class="stt">raco pollen</span></h4><p>Same as <span class="stt">raco pollen help</span>.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_help&quot;">10.3<tt>&nbsp;</tt><a name="(part._raco_pollen_help)"></a><span class="stt">raco pollen help</span></h4><p>Displays a list of available commands.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_start&quot;">10.4<tt>&nbsp;</tt><a name="(part._raco_pollen_start)"></a><span class="stt">raco pollen start</span></h4><p>Start the project server from the current directory using the default port, which is the value of the parameter <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._current-server-port%29%29" class="RktValLink" data-pltdoc="x">current-server-port</a></span> (by default, port <span class="stt">8080</span>).</p><p>This command can be invoked with two optional arguments, and two optional switches.</p><p><span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">start</span><span class="stt"> </span><span class="RktVar">path</span> will start the project server from <span class="RktVar">path</span> rather than the current directory (making <span class="RktVar">path</span> its root directory).</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen start ~/path/to/project/</span></p></td></tr></table></div></div><p><span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">start</span><span class="stt"> </span><span class="RktVar">path</span><span class="stt"> </span><span class="RktVar">port</span> will start the project server in <span class="RktVar">path</span> using <span class="RktVar">port</span> rather than <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._current-server-port%29%29" class="RktValLink" data-pltdoc="x">current-server-port</a></span>. This is useful if you want to have multiple project servers running simultaneously.</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen start ~/path/to/project/</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen start ~/path/to/project/scribblings 8088</span></p></td></tr></table></div></div><p>If you want to start in the current directory but with a different port, use <span class="RktInBG"><span class="hspace"></span><span class="RktIn">.</span><span class="hspace"></span></span> as the path:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen start . 8088</span></p></td></tr></table></div></div><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Pollen defaults to port <span class="stt">8080</span> because it&rsquo;s not commonly used by other network services. But Pollen has no idea what else is running on your machine. If <span class="stt">8080</span> is already in use, you&rsquo;ll get an error when you try to start the Pollen project server. In that case, try a different port.</p></blockquote></blockquote></blockquote><p>Adding the optional <span class="stt">-l</span> or <span class="stt">--launch</span> switch will open the main project dashboard in your web browser after the project server starts.</p><p>Adding the optional <span class="stt">--local</span> switch will restrict the project server to responding to requests from localhost. (By default, the project server will respond to requests from any client.)</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_render&quot;">10.5<tt>&nbsp;</tt><a name="(part._raco_pollen_render)"></a><span class="stt">raco pollen render</span></h4><p>This command can be invoked two ways: in source mode or directory mode.</p><p>In both modes, the optional <span class="stt">--dry-run</span> or <span class="stt">-d</span> switch prints the paths that would be rendered by this command without actually doing so.</p><p>In both modes, the optional <span class="stt">--force</span> or <span class="stt">-f</span> switch forces a fresh render from source, even if the file is already cached, by updating the modification date of the file (&#224; la <span class="stt">touch</span>). Thus, if modification dates are important to you, don&rsquo;t use this option.</p><p>In both modes, the optional <span class="stt">--null</span> or <span class="stt">-n</span> switch renders as usual, but doesn&rsquo;t write any files. (Convenient if you&rsquo;re arranging special render behavior, for instance writing to a database or network server.)</p><p><span style="font-weight: bold">Source mode</span>: <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">render</span><span class="stt"> </span><span class="RktVar">source</span><span class="stt"> </span><span class="RktSym">...</span> will render only the source paths specified in <span class="RktVar">source</span><span class="stt"> </span><span class="RktSym">...</span>. Consistent with the usual command-line idiom, this can be a single path, a list of paths, or a pattern:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render foo.html.pm</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen render foo.html.pm bar.html.pm zam.css.pp</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen render *.html.pm</span></p></td></tr></table></div></div><p>Paths can also be specified as output rather than input paths, and the corresponding source paths will be discovered:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render foo.html</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen render foo.html bar.html zam.css</span></p></td></tr></table></div></div><p>If a pagetree file is included in <span class="RktVar">source</span>, all the files it lists will be rendered using the above rules.</p><p>The optional <span class="stt">--target</span> or <span class="stt">-t</span> switch specifies the render target to use for multi-output source files. (Files of other types encountered in <span class="RktVar">source</span> will still be rendered as usual.) If the target is omitted, the renderer will use whatever target appears first in <span class="RktPn">(</span><span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._setup~3apoly-targets%29%29" class="RktValLink" data-pltdoc="x">setup:poly-targets</a></span><span class="RktPn">)</span>.</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render -t pdf foo.poly.pm</span></p></td></tr></table></div></div><p>See also <a href="fourth-tutorial.html#%28part._raco-pollen-render-poly%29" data-pltdoc="x">Using <span class="stt">raco pollen render</span> with <span class="stt">poly</span> sources</a>.</p><p>The optional <span class="stt">--parallel</span> or <span class="stt">-p</span> switch creates a set of parallel rendering jobs equal to the number of processing cores on the system. On a multi-core machine, this will usually make your rendering job finish faster. The order of rendering is not guaranteed, of course, so if your project depends on a certain order of rendering, don&rsquo;t use this option.</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render -p foo.html bar.html zam.css</span></p></td></tr></table></div></div><p>The alternative <span class="stt">--jobs &lt;count&gt;</span> or <span class="stt">-j &lt;count&gt;</span> switch does the same thing, but takes one argument that creates <span class="RktSym">&lt;count&gt;</span> parallel jobs (which can be more or less than the number of processing cores).</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render -j 4 foo.html bar.html zam.css</span></p></td></tr></table></div></div><p>As a rule of thumb, parallel rendering works best if you do <span class="stt">raco setup</span> first, which updates Pollen&rsquo;s disk caches:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco setup -p</span></p></td></tr><tr><td><p><span class="stt">&gt; raco pollen render -p</span></p></td></tr></table></div></div><p><span style="font-style: italic">Warning</span>: In all cases, the newly rendered output file will overwrite any previous output file.</p><p><span style="font-weight: bold">Directory mode</span>: <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">render</span><span class="stt"> </span><span class="RktVar">directory</span> renders all preprocessor source files and then all pagetree files found in the specified directory. If none of these files are found, a pagetree will be generated for the directory (which will include all source files, but also everything else that exists there; see <a href="Pagetree.html#%28part._.The_automatic_pagetree%29" data-pltdoc="x">The automatic pagetree</a>) and then rendered. If the <span class="RktVar">directory</span> argument is omitted, the command defaults to the current directory.</p><p>In directory mode, this command can be invoked with two other optional arguments (in addition to the <span class="stt">--target</span>, <span class="stt">--parallel</span>, and  <span class="stt">--jobs</span> switches mentioned above):</p><p>The <span class="stt">--subdir</span> or <span class="stt">-s</span> switch also renders subdirectories. <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._current-project-root%29%29" class="RktValLink" data-pltdoc="x">current-project-root</a></span> remains fixed at the initial directory, just as it would be in the project server after invoking <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">start</span>.</p><p>Certain subdirectories are automatically ignored, including Racket and Pollen private directories (like <span class="stt">compiled</span>) and source-control directories (like <span class="stt">.git</span> and <span class="stt">.svn</span>). You can omit other paths by overriding <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._default-omitted-path~3f%29%29" class="RktValLink" data-pltdoc="x">default-omitted-path?</a></span>. You can override these omissions &#8212;&#160;that is, force a path to be included in a recursive render &#8212;&#160;by overriding <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._default-extra-path~3f%29%29" class="RktValLink" data-pltdoc="x">default-extra-path?</a></span>.</p><p>The <span class="stt">--recursive</span> or <span class="stt">-r</span> switch renders subdirectories recursively. Meaning, each subdirectory is treated like an independent subproject, and <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._current-project-root%29%29" class="RktValLink" data-pltdoc="x">current-project-root</a></span> moves around accordingly. In many projects, there won&rsquo;t be any difference between the <span class="stt">-s</span> and <span class="stt">-r</span> switches. But if the difference matters in your project, you have them both.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_publish&quot;">10.6<tt>&nbsp;</tt><a name="(part._raco_pollen_publish)"></a><span class="stt">raco pollen publish</span></h4><p>Make a copy of the project directory on the desktop, but without any source files or other Pollen-related files. (This function is pretty lame, and I invite suggestions for improvement.)</p><p><span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">publish</span><span class="stt"> </span><span class="RktVar">project-dir</span> will publish the project in <span class="RktVar">project-dir</span> onto the desktop in a folder called <span class="RktSym">publish</span>. <span style="font-weight: bold">Warning</span>: if <span class="RktSym">publish</span> already exists on the desktop, it will be overwritten.</p><p><span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">publish</span><span class="stt"> </span><span class="RktVar">project-dir</span><span class="stt"> </span><span class="RktVar">dest-dir</span> will publish the project in <span class="RktVar">project-dir</span> to <span class="RktVar">dest-dir</span> rather than the desktop. <span style="font-weight: bold">Warning</span>: if <span class="RktVar">dest-dir</span> already exists, it will be overwritten by the newly published directory.</p><p>If you&rsquo;re already in your project directory and want to publish somewhere other than the desktop, use <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">publish</span><span class="stt"> </span><span class="RktVar">.</span><span class="stt"> </span><span class="RktVar">dest-dir</span>.</p><p>By default, this command will automatically overwrite the destination directory. Adding the optional <span class="stt">-c</span> or <span class="stt">--confirm</span> switch will ask for confirmation if the destination already exists.</p><p>You can determine the default publishing destination for a project by overriding <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._default-publish-directory%29%29" class="RktValLink" data-pltdoc="x">default-publish-directory</a></span>.</p><p>Certain files and directories are automatically omitted from the published directory, including Racket and Pollen sources, Pollen caches, and source-control directories (like <span class="stt">.git</span> and <span class="stt">.svn</span>). You can omit other files by overriding <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._default-omitted-path~3f%29%29" class="RktValLink" data-pltdoc="x">default-omitted-path?</a></span>. You can override these omissions &#8212;&#160;that is, force a path to be published &#8212;&#160;by overriding <span class="RktSym"><a href="Setup.html#%28def._%28%28lib._pollen%2Fsetup..rkt%29._default-extra-path~3f%29%29" class="RktValLink" data-pltdoc="x">default-extra-path?</a></span>.</p><p>The optional <span class="stt">--dry-run</span> or <span class="stt">-d</span> switch prints the source and destination directories for publishing without actually doing so. If the destination-directory path cannot be created, an error will arise.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_setup&quot;">10.7<tt>&nbsp;</tt><a name="(part._raco_pollen_setup)"></a><span class="stt">raco pollen setup</span></h4><p>Finds Pollen source files in the current directory, compiles them, and loads the results into the <a href="Cache.html" data-pltdoc="x">Cache</a>. This will give you the snappiest performance during an interactive session with the project server.</p><p>Can also be invoked as <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">setup</span><span class="stt"> </span><span class="RktVar">directory</span>, which will set up the files in <span class="RktVar">directory</span>.</p><p>The optional <span class="stt">--parallel</span> or <span class="stt">-p</span> switch creates a set of parallel setup jobs equal to the number of processing cores on the system. On a multi-core machine, this will usually make your setup finish faster.</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen setup -p</span></p></td></tr></table></div></div><p>The alternative <span class="stt">--jobs &lt;count&gt;</span> or <span class="stt">-j &lt;count&gt;</span> switch does the same thing, but takes one argument that creates <span class="RktSym">&lt;count&gt;</span> parallel jobs (which can be more or less than the number of processing cores).</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen setup -j 4</span></p></td></tr></table></div></div><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>As of mid-2020, Pollen&rsquo;s parallel-processing performance under the CS (= Chez Scheme) variant of Racket is worse than ordinary Racket. If you use Racket CS, you may get better results using <span class="stt">-j 4</span> (which will limit the operation to four cores) than <span class="stt">-p</span> (which will use all available cores).</p></blockquote></blockquote></blockquote><p>The optional <span class="stt">--dry-run</span> or <span class="stt">-d</span> switch prints the paths that would be compiled by this command without actually doing so.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_reset&quot;">10.8<tt>&nbsp;</tt><a name="(part._raco_pollen_reset)"></a><span class="stt">raco pollen reset</span></h4><p>Resets Pollen&rsquo;s <a href="Cache.html" data-pltdoc="x">Cache</a> by deleting the cache directories, including <span class="stt">compiled</span> directories created by Racket. Use this when you need a fresh start in life.</p><p>Can also be invoked as <span class="RktSym">raco</span><span class="stt"> </span><span class="RktSym">pollen</span><span class="stt"> </span><span class="RktSym">reset</span><span class="stt"> </span><span class="RktVar">directory</span>, which will reset a different project <span class="RktVar">directory</span>.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;raco_pollen_version&quot;">10.9<tt>&nbsp;</tt><a name="(part._raco_pollen_version)"></a><span class="stt">raco pollen version</span></h4><p>Would you believe this prints the Pollen version number.</p><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;The_POLLEN_environment_variable&quot;">10.10<tt>&nbsp;</tt><a name="(part._.The_.P.O.L.L.E.N_environment_variable)"></a>The <span class="stt">POLLEN</span> environment variable</h4><p>Pollen recognizes a <span class="stt">POLLEN</span> environment variable on the command line, which can be used to pass through any value you like. This value can be used within your project files with <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=envvars.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._getenv%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">getenv</a></span><span class="stt"> </span><span class="RktVal">"POLLEN"</span><span class="RktPn">)</span>, which if not set, returns <span class="RktVal">#f</span>. Take this file, for instance:</p><div class="fileblock"><div class="SIntrapara"><div class="fileblockFiletitle"><span class="fileblockFilename"><span class="stt">"test.txt.pp"</span></span></div></div><div class="SIntrapara"><div class="fileblockFilecontent"><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktMeta">Result</span><span class="hspace">&nbsp;</span><span class="RktMeta">is</span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">&#9674;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._or%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">or</a></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=envvars.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._getenv%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">getenv</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"POLLEN"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">{</span><span class="RktMeta">nothing</span><span class="RktPn">}</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></div></div><p>The <span class="stt">POLLEN</span> environment variable will change how it&rsquo;s rendered:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen render test.txt ; cat test.txt</span></p></td></tr><tr><td><p><span class="stt">rendering test.txt.pp</span></p></td></tr><tr><td><p><span class="stt">rendering: /test.txt.pp as /test.txt</span></p></td></tr><tr><td><p><span class="stt">Result is nothing</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&gt; POLLEN=DEBUG raco pollen render test.txt ; cat test.txt</span></p></td></tr><tr><td><p><span class="stt">rendering test.txt.pp</span></p></td></tr><tr><td><p><span class="stt">rendering: /test.txt.pp as /test.txt</span></p></td></tr><tr><td><p><span class="stt">Result is DEBUG</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></div></div><h4 x-source-module="(lib &quot;pollen/scribblings/pollen.scrbl&quot;)" x-source-pkg="pollen" x-part-tag="&quot;Logging___the_PLTSTDERR_environment_variable&quot;">10.11<tt>&nbsp;</tt><a name="(part._.Logging___the_.P.L.T.S.T.D.E.R.R_environment_variable)"></a>Logging &amp; the <span class="stt">PLTSTDERR</span> environment variable</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=logging.html&amp;version=8.6" class="Sq" data-pltdoc="x">Logging</a> for an introduction to Racket&rsquo;s logging system.</p></blockquote></blockquote></blockquote><p>By default, Pollen will log messages at the <span class="RktVal">'</span><span class="RktVal">info</span> level or above to the console during any terminal session (e.g., project server or rendering job). So if you start the project server like so:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; raco pollen start</span></p></td></tr></table></div></div><p>You will see log messages starting with:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">pollen: starting project server ...</span></p></td></tr></table></div></div><p>And so forth.</p><p>You can use Racket&rsquo;s <span class="RktSym">PLTSTDERR</span> environment variable to adjust the level of logging. If you provide an explicit log level for Pollen, it will override this default behavior. So if you only want to see messages at the <span class="RktVal">'</span><span class="RktVal">error</span> level or above, you would invoke the project server like so:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; PLTSTDERR=error@pollen raco pollen start</span></p></td></tr></table></div></div><p>After this, the project server will work normally, but you won&rsquo;t see the usual <span class="RktVal">'</span><span class="RktVal">info</span>-level messages, and instead will only see <span class="RktVal">'</span><span class="RktVal">error</span> messages or above.</p><p>Conversely, if you want more detailed logging, you can invoke the <span class="RktVal">'</span><span class="RktVal">debug</span> log level like so:</p><div class="terminal"><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; PLTSTDERR=debug@pollen raco pollen start</span></p></td></tr></table></div></div><p>Then you&rsquo;ll see the usual <span class="RktVal">'</span><span class="RktVal">info</span> messages, plus a bunch more.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="mini-tutorial.html" title="backward to &quot;9 Mini tutorials&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pollen: the book is a program&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="File_formats.html" title="forward to &quot;11 File formats&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/pollen/raco-pollen.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:53 GMT -->
</html>