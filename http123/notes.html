<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/http123/notes.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:27:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>8&nbsp;Notes</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">http123:<span class="mywbr"> &nbsp;</span> HTTP Client</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="intro.html" class="tocviewlink" data-pltdoc="x">Introduction to http123</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="client.html" class="tocviewlink" data-pltdoc="x">Client API</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="request.html" class="tocviewlink" data-pltdoc="x">Requests</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="header.html" class="tocviewlink" data-pltdoc="x">Headers</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="response.html" class="tocviewlink" data-pltdoc="x">Responses</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="exn.html" class="tocviewlink" data-pltdoc="x">Exceptions</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="util.html" class="tocviewlink" data-pltdoc="x">Utilities</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Notes</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="internals.html" class="tocviewlink" data-pltdoc="x">Internals</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>8&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Notes</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">8.1&nbsp;</td><td><a href="#%28part._known-issues%29" class="tocviewlink" data-pltdoc="x">Known Issues and Limitations</a></td></tr><tr><td align="right">8.2&nbsp;</td><td><a href="#%28part._log%29" class="tocviewlink" data-pltdoc="x">Logging</a></td></tr><tr><td align="right">8.3&nbsp;</td><td><a href="#%28part._misc%29" class="tocviewlink" data-pltdoc="x">Miscellaneous Notes</a></td></tr><tr><td align="right">8.4&nbsp;</td><td><a href="#%28part._evt-result%29" class="tocviewlink" data-pltdoc="x">Synchronizable Event Results</a></td></tr><tr><td align="right">8.5&nbsp;</td><td><a href="#%28part._hpack-indexing%29" class="tocviewlink" data-pltdoc="x">HPACK Indexing Policy</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">8.1<tt>&nbsp;</tt></span><a href="#%28part._known-issues%29" class="tocsubseclink" data-pltdoc="x">Known Issues and Limitations</a></td></tr><tr><td><span class="tocsublinknumber">8.2<tt>&nbsp;</tt></span><a href="#%28part._log%29" class="tocsubseclink" data-pltdoc="x">Logging</a></td></tr><tr><td><span class="tocsublinknumber">8.3<tt>&nbsp;</tt></span><a href="#%28part._misc%29" class="tocsubseclink" data-pltdoc="x">Miscellaneous Notes</a></td></tr><tr><td><span class="tocsublinknumber">8.4<tt>&nbsp;</tt></span><a href="#%28part._evt-result%29" class="tocsubseclink" data-pltdoc="x">Synchronizable Event Results</a></td></tr><tr><td><span class="tocsublinknumber">8.5<tt>&nbsp;</tt></span><a href="#%28part._hpack-indexing%29" class="tocsubseclink" data-pltdoc="x">HPACK Indexing Policy</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="util.html" title="backward to &quot;7 Utilities&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;http123: HTTP Client&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="internals.html" title="forward to &quot;9 Internals&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;http123/scribblings/http123.scrbl&quot;)" x-source-pkg="http123" x-part-tag="&quot;notes&quot;">8<tt>&nbsp;</tt><a name="(part._notes)"></a>Notes</h3><h4 x-source-module="(lib &quot;http123/scribblings/http123.scrbl&quot;)" x-source-pkg="http123" x-part-tag="&quot;known-issues&quot;">8.1<tt>&nbsp;</tt><a name="(part._known-issues)"></a>Known Issues and Limitations</h4><p>Support for HTTP/2 requires Racket 8.1 or later, because previous versions of
Racket&rsquo;s <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=openssl&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">openssl</span></a> bindings do not support ALPN.</p><p><div class="SIntrapara">The following features are currently unsupported:
</div><div class="SIntrapara"><ul><li><p>HTTP/2 without TLS (aka, <a href="https://tools.ietf.org/html/rfc7540#section-3.2">&ldquo;h2c&rdquo;</a>)</p></li><li><p>the <a href="https://tools.ietf.org/html/rfc7231#section-4.3.6"><span class="stt">CONNECT</span></a> method</p></li><li><p>the <span class="stt">Upgrade</span> header field (HTTP/1.1) &#8212;<wbr></wbr> Note: the HTTP/2
protocol <a href="https://tools.ietf.org/html/rfc7540#section-8.1.2.2">disallows</a> <span class="stt">Upgrade</span>.</p></li><li><p>Informational (1xx) responses &#8212;<wbr></wbr> This library silently discards
<a href="https://tools.ietf.org/html/rfc7231#section-6.2">Informational (1xx) responses</a>.</p></li><li><p>the <span class="stt">Expect: 100-continue</span> header field &#8212;<wbr></wbr> It is allowed, but this
library ignores any <span class="stt">100 Continue</span> response (see previous), and it never
delays sending the request message body.</p></li><li><p>&ldquo;server push&rdquo; streams (<span class="stt">PUSH_PROMISE</span>) (HTTP/2) &#8212;<wbr></wbr> The client&rsquo;s
initial <span class="stt">SETTINGS</span> frame at connection startup disables the feature.</p></li><li><p>stream <a href="https://tools.ietf.org/html/rfc7540#section-5.3">priorities</a> (HTTP/2)</p></li><li><p>various limits on protocol elements, with reasonable defaults</p></li></ul></div></p><p><div class="SIntrapara">There are various things that should be configurable that currently are not. A
few examples:
</div><div class="SIntrapara"><ul><li><p>flow control window sizes (HTTP/2)</p></li><li><p>HPACK indexing policy, including <a href="https://tools.ietf.org/html/rfc7541#section-7.1.3">never-index
fields</a> (HTTP/2)</p></li></ul></div></p><h4 x-source-module="(lib &quot;http123/scribblings/http123.scrbl&quot;)" x-source-pkg="http123" x-part-tag="&quot;log&quot;">8.2<tt>&nbsp;</tt><a name="(part._log)"></a>Logging</h4><p><div class="SIntrapara">This library logs on the following topics:
</div><div class="SIntrapara"><ul><li><p><span class="stt">http</span> &#8212;<wbr></wbr> about high-level client operations, connection creation and
management, and dispatching to HTTP/1.1 or HTTP/2 implementations</p></li><li><p><span class="stt">http1</span> &#8212;<wbr></wbr> about connections, request, and responses using the
HTTP/1.1 protocol</p></li><li><p><span class="stt">http2</span> &#8212;<wbr></wbr> about connections, streams, requests, and responses using
the HTTP/2 protocol</p></li></ul></div></p><h4 x-source-module="(lib &quot;http123/scribblings/http123.scrbl&quot;)" x-source-pkg="http123" x-part-tag="&quot;misc&quot;">8.3<tt>&nbsp;</tt><a name="(part._misc)"></a>Miscellaneous Notes</h4><p><div class="SIntrapara">A client automatically adds the following header fields, unless they overridden
by user-supplied fields:
</div><div class="SIntrapara"><ul><li><p><span class="stt">Accept-Encoding: gzip, deflate</span></p></li><li><p><span class="stt">User-Agent: racket-http123/</span><span class="emph">lib-version</span></p></li></ul></div></p><p>In general, the functions and methods of this library are thread-safe but not
kill-safe. For example, killing a thread that is using a client object has a
small chance of damaging the client object so that future operations block
forever.</p><p>Responses are not bound to specific clients. It may be useful to fetch a
response with one client and handle it (or handle redirections) with another
client.</p><h4 x-source-module="(lib &quot;http123/scribblings/http123.scrbl&quot;)" x-source-pkg="http123" x-part-tag="&quot;evt-result&quot;">8.4<tt>&nbsp;</tt><a name="(part._evt-result)"></a>Synchronizable Event Results</h4><p>This library uses <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._evt%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">evt/c</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktVar">X</span><span class="RktPn">)</span><span class="RktPn">)</span> to communicate the result of an
asynchronous process that normally produces an <span class="RktVar">X</span> but may fail. The
synchronization result is a constant function (or at least a function that
behaves like a constant function; calling it the first time may perform work,
but subsequent calls return the same result) in the success case, or a function
that raises an exception in the failure case.</p><p>An alternative would be <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._evt%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">evt/c</a></span><span class="stt"> </span><span class="RktVar">X</span><span class="RktPn">)</span>; this can be implemented on top of
the existing behavior by <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._wrap-evt%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">wrap-evt</a></span><span class="stt"> </span><span class="RktSym">evt</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span>. The
disadvantage to this approach is that it cannot be further wrapped with
exception-handling code. That is, a user that <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=sync.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._sync%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">sync</a></span>s on <span class="emph">multiple</span>
such events cannot tell which one raised the exception.</p><h4 x-source-module="(lib &quot;http123/scribblings/http123.scrbl&quot;)" x-source-pkg="http123" x-part-tag="&quot;hpack-indexing&quot;">8.5<tt>&nbsp;</tt><a name="(part._hpack-indexing)"></a>HPACK Indexing Policy</h4><p>HPACK (the compression scheme for HTTP/2 headers) is designed to reduce
vulnerability to attacks like <a href="https://en.wikipedia.org/wiki/CRIME">CRIME</a>,
which can discover secrets in headers by injecting data into the header and
observing the effectiveness of header compression. Part of this defense is
intrinsic, but HPACK additionally allows senders to choose which header fields
are &ldquo;indexed&rdquo;&#8212;<wbr></wbr>that is, entered into the dynamic compression table, to
further protect secret header data. For example, some HTTP/2 client libraries
automatically mark <span class="stt">Authorization</span> fields and short <span class="stt">Cookie</span> fields as
not-indexed, since they might contain low-entropy secret data.</p><p>This library indexes <span class="stt">Authorization</span> and <span class="stt">Cookie</span> fields by default. In
general, it does not mark any header fields as not-indexed based on security
rationale, although it does avoid indexing for other reasons. For example, it
does not index <span class="stt">If-Modified-Since</span> header fields, since they are unlikely to
have the same value from request to request.</p><p>Users of this library should follow this policy: If a request has a header field
with secret data, then the user should not allow an untrusted source to
influence the value of the same header field in any other request made on the
same connection. For example, if you make (or might make) a request with an
<span class="stt">Authorization</span> header field containing your password, you should not make
any other requests on the same connection with an <span class="stt">Authorization</span> header
whose value is influenced by an untrusted party.</p><p>Future versions of this library may make the indexing policy configurable.</p><p>See the <a href="https://tools.ietf.org/html/rfc7541#section-7">HPACK Security Considerations</a> for more details.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="util.html" title="backward to &quot;7 Utilities&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;http123: HTTP Client&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="internals.html" title="forward to &quot;9 Internals&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/http123/notes.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:27:18 GMT -->
</html>