<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/xsmith/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:07:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Xsmith</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Xsmith</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.How_to_.Install_.Xsmith%29" class="tocviewlink" data-pltdoc="x">How to Install Xsmith</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Xsmith_.Guide%29" class="tocviewlink" data-pltdoc="x">Xsmith Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Xsmith_.Reference%29" class="tocviewlink" data-pltdoc="x">Xsmith Reference</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Acknowledgments%29" class="tocviewlink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Code_and_.License%29" class="tocviewlink" data-pltdoc="x">Code and License</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._top%29" class="tocsubseclink" data-pltdoc="x">Xsmith</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.How_to_.Install_.Xsmith%29" class="tocsubseclink" data-pltdoc="x">How to Install Xsmith</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Xsmith_.Guide%29" class="tocsubseclink" data-pltdoc="x">Xsmith Guide</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._racr%29" class="tocsubseclink" data-pltdoc="x">RACR Overview</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._holes-and-choice-objects%29" class="tocsubseclink" data-pltdoc="x">Holes and Choice Objects</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._scope-graph%29" class="tocsubseclink" data-pltdoc="x">Scope Graphs</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._.Attributes__.Choices__and_.Properties__.Oh_.My_%29" class="tocsubseclink" data-pltdoc="x">Attributes, Choices, and Properties, Oh My!</a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._.Lifting%29" class="tocsubseclink" data-pltdoc="x">Lifting</a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#%28part._getting-started%29" class="tocsubseclink" data-pltdoc="x">Getting Started</a></td></tr><tr><td><span class="tocsublinknumber">3.7<tt>&nbsp;</tt></span><a href="#%28part._minimal-example%29" class="tocsubseclink" data-pltdoc="x">Minimal Example</a></td></tr><tr><td><span class="tocsublinknumber">3.8<tt>&nbsp;</tt></span><a href="#%28part._.Another_.Small_.Example_with_.Variables%29" class="tocsubseclink" data-pltdoc="x">Another Small Example with Variables</a></td></tr><tr><td><span class="tocsublinknumber">3.9<tt>&nbsp;</tt></span><a href="#%28part._.An_.Upgrade__.Using_.Canned_.Components%29" class="tocsubseclink" data-pltdoc="x">An Upgrade:<span class="mywbr"> &nbsp;</span> Using Canned Components</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Xsmith_.Reference%29" class="tocsubseclink" data-pltdoc="x">Xsmith Reference</a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._.Stability%29" class="tocsubseclink" data-pltdoc="x">Stability</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._generated-rules%29" class="tocsubseclink" data-pltdoc="x">Auto-<wbr></wbr>Generated attributes and choice-<wbr></wbr>methods</a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._.Forms_for_.Defining_a_.Grammar_and_.Its_.Attributes%29" class="tocsubseclink" data-pltdoc="x">Forms for Defining a Grammar and Its Attributes</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>spec-<wbr></wbr>component</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>xsmith-<wbr></wbr>interface-<wbr></wbr>functions</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>to-<wbr></wbr>grammar</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>attribute</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>choice-<wbr></wbr>method</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>property</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">current-<wbr></wbr>hole</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">make-<wbr></wbr>hole</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">make-<wbr></wbr>fresh-<wbr></wbr>node</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._.Custom_.Properties%29" class="tocsubseclink" data-pltdoc="x">Custom Properties</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>property</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-simple-property%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>simple-<wbr></wbr>property</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>non-<wbr></wbr>inheriting-<wbr></wbr>rule-<wbr></wbr>property</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#%28part._.Refiners%29" class="tocsubseclink" data-pltdoc="x">Refiners</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-refiner%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>refiner</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">make-<wbr></wbr>replacement-<wbr></wbr>node</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.6<tt>&nbsp;</tt></span><a href="#%28part._.Scope_.Graph_.Functions%29" class="tocsubseclink" data-pltdoc="x">Scope Graph Functions</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">binding</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>well-<wbr></wbr>formedness-<wbr></wbr>regexp</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>path-<wbr></wbr>greater-<wbr></wbr>than</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.7<tt>&nbsp;</tt></span><a href="#%28part._.Core_.Properties%29" class="tocsubseclink" data-pltdoc="x">Core Properties</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">may-<wbr></wbr>be-<wbr></wbr>generated</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">type-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">fresh</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">choice-<wbr></wbr>weight</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">depth-<wbr></wbr>increase</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._wont-over-deepen%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">wont-<wbr></wbr>over-<wbr></wbr>deepen</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">binder-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">reference-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">reference-<wbr></wbr>choice-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binding-structure%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">binding-<wbr></wbr>structure</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">strict-<wbr></wbr>child-<wbr></wbr>order?</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._mutable-container-access%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">mutable-<wbr></wbr>container-<wbr></wbr>access</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">io</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-predicate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">lift-<wbr></wbr>predicate</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-type-~3east-binder-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">lift-<wbr></wbr>type-<wbr></wbr>&gt;ast-<wbr></wbr>binder-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">choice-<wbr></wbr>filters-<wbr></wbr>to-<wbr></wbr>apply</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">edit</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">render-<wbr></wbr>node-<wbr></wbr>info</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-hole-info%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">render-<wbr></wbr>hole-<wbr></wbr>info</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.8<tt>&nbsp;</tt></span><a href="#%28part._.Types%29" class="tocsubseclink" data-pltdoc="x">Types</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>type-<wbr></wbr>variable</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-subtype-of%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>subtype-<wbr></wbr>of</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-variable~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">type-<wbr></wbr>variable?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">can-<wbr></wbr>unify?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">unify!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">can-<wbr></wbr>subtype-<wbr></wbr>unify?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">subtype-<wbr></wbr>unify!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">base-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">base-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">base-<wbr></wbr>type-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-arg-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type-<wbr></wbr>arg-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-return-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">function-<wbr></wbr>type-<wbr></wbr>return-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">product-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">product-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type-inner-type-list%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">product-<wbr></wbr>type-<wbr></wbr>inner-<wbr></wbr>type-<wbr></wbr>list</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-generic-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>generic-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generic-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generic-<wbr></wbr>type-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-type-arguments%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generic-<wbr></wbr>type-<wbr></wbr>type-<wbr></wbr>arguments</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>with</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._any-nominal-record-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">any-<wbr></wbr>nominal-<wbr></wbr>record-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-known-field-dict%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>known-<wbr></wbr>field-<wbr></wbr>dict</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>definition-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>definition-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">nominal-<wbr></wbr>record-<wbr></wbr>definition-<wbr></wbr>type-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._structural-record-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">structural-<wbr></wbr>record-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-structural-record-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>structural-<wbr></wbr>record-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._structural-record-type-known-field-dict%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">structural-<wbr></wbr>record-<wbr></wbr>type-<wbr></wbr>known-<wbr></wbr>field-<wbr></wbr>dict</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._force-type-exploration-for-node%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">force-<wbr></wbr>type-<wbr></wbr>exploration-<wbr></wbr>for-<wbr></wbr>node!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">settled-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-has-no-variables~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">type-<wbr></wbr>has-<wbr></wbr>no-<wbr></wbr>variables?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">concretize-<wbr></wbr>type</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.9<tt>&nbsp;</tt></span><a href="#%28part._.Miscellaneous_.Utilities%29" class="tocsubseclink" data-pltdoc="x">Miscellaneous Utilities</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-int%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>int!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-var-name%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>var-<wbr></wbr>name</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._enqueue-inter-choice-transform%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">enqueue-<wbr></wbr>inter-<wbr></wbr>choice-<wbr></wbr>transform</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.10<tt>&nbsp;</tt></span><a href="#%28part._.Debug_.Logging%29" class="tocsubseclink" data-pltdoc="x">Debug Logging</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xd-printf%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xd-<wbr></wbr>printf</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._datt-value%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">datt-<wbr></wbr>value</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.11<tt>&nbsp;</tt></span><a href="#%28part._.Turning_.Your_.Grammar_.Specification_.Into_a_.Program%29" class="tocsubseclink" data-pltdoc="x">Turning Your Grammar Specification Into a Program</a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xsmith-<wbr></wbr>feature-<wbr></wbr>enabled?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-max-depth%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">xsmith-<wbr></wbr>max-<wbr></wbr>depth</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.12<tt>&nbsp;</tt></span><a href="#%28part._.R.A.C.R_.Convenience_.Functions%29" class="tocsubseclink" data-pltdoc="x">RACR Convenience Functions</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fracr-convenience..rkt%29._expr-~3east-list%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">expr-<wbr></wbr>&gt;ast-<wbr></wbr>list</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">node-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">parent-<wbr></wbr>node</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._top-ancestor-node%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">top-<wbr></wbr>ancestor-<wbr></wbr>node</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">node-<wbr></wbr>subtype?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.13<tt>&nbsp;</tt></span><a href="#%28part._xsmith_app%29" class="tocsubseclink" data-pltdoc="x">xsmith/<span class="mywbr"> &nbsp;</span>app</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._~23~25app%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">#%app</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._define-xsmith-app%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>xsmith-<wbr></wbr>app</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.14<tt>&nbsp;</tt></span><a href="#%28part._canned-components%29" class="tocsubseclink" data-pltdoc="x">Canned Components</a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._define-basic-spec-component%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>basic-<wbr></wbr>spec-<wbr></wbr>component</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-expressions%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>basic-<wbr></wbr>expressions</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-statements%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>basic-<wbr></wbr>statements</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._block-user~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">block-<wbr></wbr>user?</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-loop-over-container%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">add-<wbr></wbr>loop-<wbr></wbr>over-<wbr></wbr>container</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._return-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">return-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._no-return-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">no-<wbr></wbr>return-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._fresh-maybe-return-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">fresh-<wbr></wbr>maybe-<wbr></wbr>return-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._void-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">void-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._number-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">number-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._int-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">int-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._float-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">float-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._bool-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">bool-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._string-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">string-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">mutable</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">immutable</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._array-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">array-<wbr></wbr>type</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">list-<wbr></wbr>type</span></span></a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Acknowledgments%29" class="tocsubseclink" data-pltdoc="x">Acknowledgments</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Code_and_.License%29" class="tocsubseclink" data-pltdoc="x">Code and License</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h2 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;top&quot;"><a name="(part._top)"></a><a name="(part._.Xsmith)"></a><a name="(mod-path._xsmith)"></a>Xsmith</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">William Hatch &lt;<a href="mailto:william@hatch.uno">william@hatch.uno</a>&gt;,<br/>Pierce Darragh &lt;<a href="mailto:pierce.darragh@gmail.com">pierce.darragh@gmail.com</a>&gt;,<br/>and Eric Eide &lt;<a href="mailto:eeide@cs.utah.edu">eeide@cs.utah.edu</a>&gt;</p></span></div><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#" class="RktModLink" data-pltdoc="x"><span class="RktSym">xsmith</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/xsmith" title="Install this package using `raco pkg install xsmith`"><span class="stt">xsmith</span></a></span></td></tr></table></p><p>Version xsmith 2.0.2 (1c277cb)</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Introduction&quot;">1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p>Xsmith is a library for creating fuzz testers, also known as <span style="font-style: italic">fuzzers</span>,
for programming language compilers and interpreters.  In other words, Xsmith is
a library for creating <span style="font-style: italic">random program generators</span>.</p><p>Xsmith implements a domain-specific language (DSL) for defining random program
generators.  The DSL is used to specify a programming language&rsquo;s grammar,
typing rules, and other information that guides generation choices.  Xsmith
also includes utilities for creating a command-line interface for generating a
single program or starting a web server that generates one program per request.</p><p>There are example random program generators built with Xsmith.  They are in the xsmith-examples package.</p><p><span style="font-weight: bold">Reporting bugs.</span>
Please send bug reports and fixes to
<a href="mailto:xsmith-bugs@flux.utah.edu">xsmith-bugs@flux.utah.edu</a>.</p><p><span style="font-weight: bold">Getting help.</span>
There is a mailing list,
<a href="mailto:xsmith-dev@flux.utah.edu">xsmith-dev@flux.utah.edu</a>, for
discussing Xsmith.  Visit
<a href="http://www.flux.utah.edu/mailman/listinfo/xsmith-dev">the
xsmith-dev list management website</a> to subscribe.  To post messages to the
list, you must first subscribe to the list.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;How_to_Install_Xsmith&quot;">2<tt>&nbsp;</tt><a name="(part._.How_to_.Install_.Xsmith)"></a>How to Install Xsmith</h3><p>First, install Racket.  If your operating system&rsquo;s package manager doesn&rsquo;t have a package or you want a fresher version, <a href="https://download.racket-lang.org/">download it</a>.</p><p>Then run <span class="stt">raco pkg install xsmith</span>.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Xsmith_Guide&quot;">3<tt>&nbsp;</tt><a name="(part._.Xsmith_.Guide)"></a>Xsmith Guide</h3><p>Xsmith uses <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>, an attribute grammar library, in its implementation, and some knowledge of <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> is necessary when using Xsmith.</p><p>To create a fuzzer with Xsmith, users create a specification by combining <span style="font-style: italic">specification components</span> (more commonly referred to as <span style="font-style: italic">spec components</span>), defined with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span>.
A spec component can define productions of a grammar with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, or it can provide <span style="font-style: italic">properties</span> of grammar productions with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>.
The grammar and properties are used to generate a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> grammar, <span style="font-style: italic">attributes</span> for the grammar, and <span style="font-style: italic">choice objects</span>, which guide AST generation.</p><p>Program generation starts by generating an AST hole for a given grammar production.
Generation continues by filling holes with concrete AST nodes, which may introduce new holes as child nodes.
The grammar specification is used to determine how to fill holes in the AST.
For example, in a grammar with addition and subtraction expressions, a generic Expression hole may be replaced by an Addition or Subtraction node.
A choice object is created for each valid possible replacement.
Choice objects have methods (called <span style="font-style: italic">choice-methods</span>) which aid in choosing a concrete replacement.
Some of these methods act as predicates to filter out choices that are not legal in a particular context, such as choices that introduce more holes when the maximum tree depth has been reached.
The <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span> property defines a method which determines the relative probability of each choice being chosen.
The <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property defines a method which determines how the choice is instantiated as a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> node.
Additional methods may be defined as helpers.
Choice objects have access to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span>, so they may query <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes in method bodies.
Choice object classes follow the same hierarchy as the grammar, so method inheritance for choice objects is similar to attribute inheritance for <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> nodes.</p><p><a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes and choice object methods may be added directly with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span>, respectively, but many are defined indirectly by various Xsmith properties.
Properties allow users to specify various attributes and choice methods in a more declarative fashion.</p><p>Xsmith was primarily designed for the implementation of language specifications for differential compiler/interpreter testing.
Therefore Xsmith takes pains to avoid producing programs that rely on commonly unspecified behaviors, such as the order of evaluation of function or operator arguments.
Because the language-agnostic analysis within Xsmith is quite conservative, there are many valid programs that will not be generated.
However, Xsmith makes it easy to create a fuzzer that obeys such rules without much language-specific work.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;racr&quot;">3.1<tt>&nbsp;</tt><a name="(part._racr)"></a>RACR Overview</h4><p>RACR is a library for Reference Attribute Grammars.
Xsmith&rsquo;s DSL defines a RACR grammar specification as well as various attributes.
The attributes are queried to determine how to generate the AST.</p><p>RACR caches the results of attribute queries and keeps track of the nodes accessed for any attribute.
When nodes used in an attribute computation are changed, future queries to that attribute are re-computed.</p><p>Users can specify new RACR attributes for Xsmith generators, but they should use <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span> or <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span> from Xsmith rather than using RACR functions directly.
In expressions evaluated in the context of RACR attributes (attributes) or choice methods, RACR attributes may be queried.</p><p>The main RACR APIs of interest are:</p><p>Functions for querying the AST:</p><ul><li><p>att-value</p></li><li><p>ast-child</p></li><li><p>ast-children</p></li><li><p>ast-parent</p></li></ul><p>Xsmith provides a function which generates a complete AST, but users can also perform AST rewrites after initial program generation.
Relevant RACR functions for performing AST rewrites include:</p><ul><li><p>perform-rewrites</p></li></ul><p>Full RACR documentation is <a href="https://github.com/christoff-buerger/racr/blob/master/racr/documentation/contents.md">here</a>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;holes-and-choice-objects&quot;">3.2<tt>&nbsp;</tt><a name="(part._holes-and-choice-objects)"></a>Holes and Choice Objects</h4><p>Hole nodes are <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> AST nodes.
For every node type in the grammar, a hole node is created as a subclass of that node, inheriting all of its <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes.
A hole can be recognized by the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_is-hole?</a> attribute.</p><p><div class="SIntrapara">Consider the following (partial) grammar defined in the </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">my-spec-component</span></p></td></tr></table></div><div class="SIntrapara"> grammar specification:</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>When a fresh AdditionExpression is created, it will include two Expression hole nodes.
When the generator gets to those holes, a choice object is created for each subclass of Expression (including Expression itself unless it is disabled with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span> property).
The choice objects have types corresponding to LiteralInt and AdditionExpression, and therefore may have different implementations for various choice methods.
The choice objects all have access to the Expression hole (through <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span>), but while choice objects have access to their specialized choice method implementations, the hole is of type Expression, and so all <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes that may be queried are specialized only as far as Expression, not to LiteralInt or AdditionExpression.</p><p>Although Xsmith <span style="font-style: italic">can</span> create holes for any type of production defined in the grammar, by default it will only generate more general holes.
In the case of this example, the default behavior would be for Xsmith to generate Expression holes, but not LiteralInt or AdditionExpression holes.
More specific holes are used either when a grammar production specifies that a child must be of a specific kind, or when a custom <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> implementation uses <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span> with a specific kind of production.
For example, we could extend the above example:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralSubtractionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">LiteralInt</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">LiteralInt</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Now, an Expression hole could be filled with LiteralInt, AdditionExpression, or LiteralSubtractionExpression.
However, where the AdditionExpression&rsquo;s two Expression child holes could be filled with any kind of Expression, the LiteralSubtractionExpression&rsquo;s children will only be LiteralInts.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;scope-graph&quot;">3.3<tt>&nbsp;</tt><a name="(part._scope-graph)"></a>Scope Graphs</h4><p>Xsmith uses the language-independent resolution algorithm of scope graphs.</p><p>The theory of scope graphs is described in the paper &#8220;A Theory of Name Resolution with Extended Coverage and Proofs&#8221;, (available at <a href="https://researchr.org/publication/NeronTVW15"><span class="url">https://researchr.org/publication/NeronTVW15</span></a>).</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Attributes__Choices__and_Properties__Oh_My_&quot;">3.4<tt>&nbsp;</tt><a name="(part._.Attributes__.Choices__and_.Properties__.Oh_.My_)"></a>Attributes, Choices, and Properties, Oh My!</h4><p>Aside from the grammar productions themselves, Xsmith language specifications deal with <span style="font-style: italic">attributes</span> (eg. via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span>), <span style="font-style: italic">choice methods</span> (via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span>), and <span style="font-style: italic">properties</span> (via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>).
The exact nature of these terms and how they relate to one another can be confusing, so let&rsquo;s talk about them.</p><ul><li><p><span style="font-weight: bold">Attributes</span>, written with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span>, are RACR attributes.
They are evaluated dynamically by traversing the generated tree.
RACR caches the results of attribute evaluation, flushing the cache when there are changes to parts of the tree that were previously used in computing an attribute.
For a full understanding of attributes, you must also read <a href="https://github.com/christoff-buerger/racr/blob/master/racr/documentation/contents.md">the RACR documentation.</a></p><p><div class="SIntrapara">Attributes are evaluated using <span class="RktSym">att-value</span>.
For example, if you have a node </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">my-node</span></p></td></tr></table></div><div class="SIntrapara"> and wish to evaluate the attribute </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">xsmith_type</span></p></td></tr></table></div><div class="SIntrapara"> on that node, you would do: <span class="RktPn">(</span><span class="RktSym">att-value</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">xsmith_type</span><span class="stt"> </span><span class="RktSym">my-node</span><span class="RktPn">)</span>.</div></p><p>Some attributes are defined automatically by properties.
You may or may not need to write custom attributes while creating a fuzzer, though we have tried to provide as many useful attributes as possible to avoid this.</p><p>Attributes generally can not directly access choice methods or properties.</p></li><li><p><span style="font-weight: bold">Choice Methods</span>, written with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span>, are methods on <a href="#%28part._holes-and-choice-objects%29" data-pltdoc="x">choice objects</a>.
When Xsmith begins filling in a hole node, it creates a choice object for each grammar production that could fit in that hole.
choice methods are used to filter and choose which of those productions to generate and guide generation.</p><p><div class="SIntrapara">choice methods are run using the <span class="RktSym">send</span> method-calling syntax on the choice object.
For example, if you wish to run the </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">xsmith_choice-weight</span></p></td></tr></table></div><div class="SIntrapara"> rule on </div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">some-choice-object</span></p></td></tr></table></div><div class="SIntrapara">, you would do: <span class="RktPn">(</span><span class="RktSym">send</span><span class="stt"> </span><span class="RktSym">xsmith_choice-weight</span><span class="stt"> </span><span class="RktSym">some-choice-object</span><span class="RktPn">)</span>.</div></p><p>choice methods are just Racket class methods.
You may or may not need to write custom choice methods while creating a fuzzer, but custom choice methods are less likely to be needed than custom attributes.
During evaluation of a choice method, the hole in question is available as <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span>, so attributes may still be queried in the context of choice methods, but choice methods can not directly access properties.</p></li><li><p><span style="font-weight: bold">Properties</span>, written with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>, are macros that automatically generate attributes and choice methods using a syntax that is often more convenient than manually implementing the attributes and choice methods separately yourself.
Properties are evaluated statically, but the attributes and choice methods they define are evaluated dynamically.
Each property may require its arguments to be given in a different way, so it is important to read the documentation for each property careful to know how to implement it correctly.</p><p>Most of the core attributes and choice methods provided by Xsmith, such as <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span>, are actually defined in terms of properties.
These properties are provided by Xsmith to make it easy to define a language specification, and many of them are required to use Xsmith successfully.
For the majority of programming languages in the mainstream, these supplied properties are sufficient for a full specification.</p><p>It is unlikely that you will need to implement custom properties.
Generally, you will want a custom property when you have some common set of attributes or choice methods that you would like to use in multiple separate fuzzers, in which case it may be worth defining a custom property for those fuzzers to share.
Such custom properties can be implemented with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span>.
A property can read the static specifications of other properties, and generate any number of attributes and choice methods, but it cannot statically access attribute or choice methods values because those are only available during AST generation.
However, a property can use the values of attributes and choice methods dynamically.</p></li></ul><p>Remember: Attributes and choice methods are functions that can be used within specific contexts of Xsmith fuzzers.
On ther other hand, properties are compile-time macros for generating attributes and choice methods and so are not themselves used during generation.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Lifting&quot;">3.5<tt>&nbsp;</tt><a name="(part._.Lifting)"></a>Lifting</h4><p>The term &#8220;lift&#8221; is used throughout this document and the Xsmith library.
In the context of Xsmith, "lifting" refers to creating a binding definition after it&rsquo;s needed by a reference.
In other words, when a reference node (i.e., a node which implements the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> property) is created and there is not an available definition that satisfies the type system and effect system, a new definition is &#8220;lifted&#8221; to a binding form that is visible from that reference location.
Additionally, with some probability, new definitions may be lifted even when there is a suitable definition available.
This probability can be controlled with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxLink" data-pltdoc="x">reference-choice-info</a></span> property.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;getting-started&quot;">3.6<tt>&nbsp;</tt><a name="(part._getting-started)"></a>Getting Started</h4><p>This section is a small walkthrough of creating a simple fuzzer using only basic Xsmith forms to show the fundamentals.
However, we recommend using <a href="#%28part._canned-components%29" data-pltdoc="x">Canned Components</a> for any serious fuzzer implementation.</p><p><div class="SIntrapara">To get started, we must require <span class="stt">xsmith</span> and <span class="stt">racr</span>.
Other modules may also be convenient, such as <span class="stt">racket/string</span>.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">xsmith</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">racr</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">racket/string</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">To define a fuzzer, first define a <span style="font-style: italic">spec component</span> with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span>.
We&rsquo;re going to create a simple arithmetic language, so we&rsquo;ll name our spec component <span class="stt">arith</span> for short.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">arith</span><span class="RktPn">)</span></p></blockquote></div></p><p>The spec component is where we store definitions of the grammar productions, properties, attributes, and choice methods.
Let&rsquo;s add some productions to the grammar defined by this spec component!
When adding nodes, we must always specify three components: the node&rsquo;s name, its supertype (also called a "parent type"), and a list of children nodes.
We&rsquo;ll define a top-level node that we will later use to specify where to start program generation, which we&rsquo;ll call <span class="stt">Program</span>.
The <span class="stt">Program</span> production will have a single child: an <span class="stt">Expression</span>.
Therefore, we will also need to provide a base <span class="stt">Expression</span> production.
Neither of these nodes has a supertype, so we will supply <span class="RktVal">#f</span> in the supertype field after the node name.
Note that the names of node types should be capitalized camel case (punctuation characters like <span class="stt">-</span> and <span class="stt">_</span> are disallowed).</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>We want the <span class="stt">Expression</span> node to be abstract and not generated itself, so we&rsquo;ll use the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span> property to restrict it.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>We can also put properties inline with the grammar definition if we prefer.
We can replace the above definition using this style:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>(Note that we cannot use both forms, as this will produce an error due to conflicting definitions of a property value for a given grammar production.)</p><p>If we add node types that are subtypes of Expression, they can be generated in Expression holes.
Let&rsquo;s add a node for literal integers.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Note that the literal node contains a child <span class="stt">v</span> that is a normal Racket value, not a grammar node type.
It is initialized with the expression on the right-hand side of the <span class="stt">=</span> sign.</p><p>The literal integers generated in our language will only be values from 0 to 99.
Note that we can add the initialization expression inline as above or with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property.
If we don&rsquo;t add an initialization expression, then non-node fields will be initialized with <span class="RktVal">#f</span>, while node fields will be initialized with hole nodes of the appropriate type..</p><p>Let&rsquo;s add addition expressions.
Because we have multiple Expressions, we need to give them names.
Note that we aren&rsquo;t supplying initialization code.
Because they are grammar node typed, they will be initialized with Expression Hole nodes (same with the Program node&rsquo;s Expression child).</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">l</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Our language only has one type: integers.
This means we don&rsquo;t <span style="font-style: italic">need</span> to add type rules, but we will anyway for the sake of a complete tutorial.
We will call the type <span class="stt">int</span> and add an implementation of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> property for our language so far.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Each rule supplied to the property is surrounded in square brackets, <span class="stt">[]</span>.</p><p>The left-hand side of each of these rules is an expression that returns the type the node can inhabit.
Most often, this will just be the name of the node type, such as <span class="stt">Program</span> and <span class="stt">LiteralInt</span> in this example.
If a node can inhabit multiple types, <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span> can be used to specify an unconstrained or partially constrained type.</p><p>On the right-hand side is a function with two parameters: the node currently being evaluated, and the type that is currently being used to confine generation of that node.
The body of the function returns a dictionary mapping children (by name or by node object) to a type.
Note that type variables are unified during the type analysis, so you should take care with object/pointer equality (i.e., <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span>) of type variables.</p><p>Now we need to specify how to print our programs, or &#8220;render&#8221; them.
For this, we use the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> property.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">number-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"(~a + ~a)"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>In this case, we are rendering each node directly to a string, but that&rsquo;s not usually the best approach.
More often, we render programs with some intermediate data structure and convert that to a string only as a last step.
Most Xsmith fuzzers either use s-expressions for rendering Lisp-like languages, or else the <span class="stt">pprint</span> Racket library&rsquo;s document objects.
You can, of course, use your own custom implementation if you prefer.</p><p>We put everything together with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> macro, which compiles our language specification and defines the <span class="stt">arith-command-line</span> function.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">arith</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:comment-wrap</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-join</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"// ~a"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">lines</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Note that we give it a function for how it wraps comments.
Specifically it is a function that takes a list of single-line strings and returns a single string that&rsquo;s been appropriately formatted to be commented in your language.
There are many optional arguments to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> that changes the way it behaves.</p><p>To actually run our fuzzer, we need to run the <span class="stt">arith-command-line</span> function.
Let&rsquo;s put it in our main submodule.
Then when we run our program from the command line it will generate a program.
It automatically has <span class="stt"></span><span class="stt">&ndash;</span><span class="stt">help</span> support, and has various options, such as setting a seed, a max depth, etc.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._module%252B%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">module+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">main</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arith-command-line</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;minimal-example&quot;">3.7<tt>&nbsp;</tt><a name="(part._minimal-example)"></a>Minimal Example</h4><p>Below is a complete generator of arithmetic expressions, following the implementation we just outlined in <a href="#%28part._getting-started%29" data-pltdoc="x">Getting Started</a>.
Note that we use <span class="stt">#lang clotho</span> instead of <span class="stt">#lang racket</span>, which allows us to capture, replay, and modify random choices during generation.</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"minimal-example.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">clotho</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">xsmith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racr</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/string</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">l</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">:</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">:</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">The</span><span class="hspace">&nbsp;</span><span class="RktCmt">default</span><span class="hspace">&nbsp;</span><span class="RktCmt">weight</span><span class="hspace">&nbsp;</span><span class="RktCmt">is</span><span class="hspace">&nbsp;</span><span class="RktCmt">10.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">l</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">number-&gt;string</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"(~a</span><span class="hspace">&nbsp;</span><span class="RktVal">+</span><span class="hspace">&nbsp;</span><span class="RktVal">~a)"</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">l</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">This</span><span class="hspace">&nbsp;</span><span class="RktCmt">line</span><span class="hspace">&nbsp;</span><span class="RktCmt">defines</span><span class="hspace">&nbsp;</span><span class="RktCmt">`arith-command-line`.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">arith</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:comment-wrap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">string-join</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"//</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lines</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._module%252B%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arith-command-line</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr></table></blockquote></blockquote></blockquote><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Another_Small_Example_with_Variables&quot;">3.8<tt>&nbsp;</tt><a name="(part._.Another_.Small_.Example_with_.Variables)"></a>Another Small Example with Variables</h4><p>Here is a bigger example that contains variables and references to those variables.</p><p>Note that instead of a <span class="stt">Program</span> node, we use the <span class="stt">LetStar</span> node as the base node from which to begin generation.
The purpose in having a specific top-level <span class="stt">Program</span> node is to be sure that the top-level node can have definitions lifted to it.
The <span class="stt">LetStar</span> node in the following example satisfies this purpose.</p><p>This example also renders to s-expressions rather than directly to strings like the <a href="#%28part._minimal-example%29" data-pltdoc="x">previous example</a>.
Because of this change, we have to give <span class="RktSym">xsmith-command-line</span> another optional argument, called <span class="stt">format-render</span>, specifying how we convert our rendered format into strings.</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"minimal-example-with-variables.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">clotho</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">xsmith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">xsmith/app</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racr</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/pretty</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/string</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/port</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Definition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LetStar</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">:</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Definition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">sideEs</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">:</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxLink" data-pltdoc="x">strict-child-order?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">VariableReference</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">SetBangRet</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">es</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">:</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html%23%2528def._%2528%2528lib._clotho%252Fmain..rkt%2529._random%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">random</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:prop</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">50</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Definition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LetStar</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">definitions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cn</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">sideEs</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cn</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">VariableReference</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">SetBangRet</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">int</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">es</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Note</span><span class="hspace">&nbsp;</span><span class="RktCmt">that</span><span class="hspace">&nbsp;</span><span class="RktCmt">we've</span><span class="hspace">&nbsp;</span><span class="RktCmt">imported</span><span class="hspace">&nbsp;</span><span class="RktCmt">xsmith/app,</span><span class="hspace">&nbsp;</span><span class="RktCmt">so</span><span class="hspace">&nbsp;</span><span class="RktCmt">our</span><span class="hspace">&nbsp;</span><span class="RktCmt">#%app</span><span class="hspace">&nbsp;</span><span class="RktCmt">allows</span><span class="hspace">&nbsp;</span><span class="RktCmt">quoted</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">symbols</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">be</span><span class="hspace">&nbsp;</span><span class="RktCmt">used</span><span class="hspace">&nbsp;</span><span class="RktCmt">in</span><span class="hspace">&nbsp;</span><span class="RktCmt">function</span><span class="hspace">&nbsp;</span><span class="RktCmt">position</span><span class="hspace">&nbsp;</span><span class="RktCmt">as</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">shorthand</span><span class="hspace">&nbsp;</span><span class="RktCmt">for</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">using</span><span class="hspace">&nbsp;</span><span class="RktCmt">`att-value`.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LetStar</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">d</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">definitions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">sideEs</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">VariableReference</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">SetBangRet</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=set_.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._set%2521%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">set!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">es</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">This</span><span class="hspace">&nbsp;</span><span class="RktCmt">line</span><span class="hspace">&nbsp;</span><span class="RktCmt">defines</span><span class="hspace">&nbsp;</span><span class="RktCmt">`arith-command-line`.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">arith</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:program-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">LetStar</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:type-thunks</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:comment-wrap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">string-join</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">";;</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lines</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:format-render</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">with-output-to-string</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">pretty-print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ast</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-output-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-output-port</a></span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._module%252B%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arith-command-line</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr></table></blockquote></blockquote></blockquote><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;An_Upgrade__Using_Canned_Components&quot;">3.9<tt>&nbsp;</tt><a name="(part._.An_.Upgrade__.Using_.Canned_.Components)"></a>An Upgrade: Using Canned Components</h4><p>Many programming languages share various features in common, such as binding scope, arithmetic expressions, functions, etc.
The <a href="#%28part._canned-components%29" data-pltdoc="x"><span class="stt">xsmith/canned-components</span></a> library in Xsmith provides tools for quickly building this common infrastructure for your language specification with minimal effort.
It supplies the ability to enable various productions as needed, as well as default implementations of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> properties for those nodes.
Here is an example of a fuzzer built using Canned Components.</p><blockquote class="SCodeFlow"><blockquote class="Rfilebox"><p class="Rfiletitle"><span class="Rfilename"><span class="stt">"minimal-example-with-canned-components.rkt"</span></span></p><blockquote class="Rfilecontent"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=guide&amp;rel=Module_Syntax.html%23%2528part._hash-lang%2529&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=clotho&amp;rel=sec_api.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">clotho</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">xsmith</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racr</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">xsmith/racr-convenience</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">xsmith/canned-components</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/string</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/list</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">racket/pretty</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">We</span><span class="hspace">&nbsp;</span><span class="RktCmt">first</span><span class="hspace">&nbsp;</span><span class="RktCmt">define</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">basic</span><span class="hspace">&nbsp;</span><span class="RktCmt">component</span><span class="hspace">&nbsp;</span><span class="RktCmt">and</span><span class="hspace">&nbsp;</span><span class="RktCmt">add</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">bunch</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">expressions.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">define-basic-spec-component</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">somelisp</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">add-basic-expressions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">somelisp</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:ProgramWithSequence</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:VoidExpression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:AssignmentExpression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:VariableReference</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:ProcedureApplication</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:IfExpression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:ExpressionSequence</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:LetSequential</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:LambdaWithExpression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:Numbers</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:Booleans</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:Strings</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:ImmutableList</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">add-loop-over-container</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">somelisp</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Map</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:collection-type-constructor</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">inner</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">immutable</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">inner</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:loop-type-constructor</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">inner</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">immutable</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">inner</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Now</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">basically</span><span class="hspace">&nbsp;</span><span class="RktCmt">just</span><span class="hspace">&nbsp;</span><span class="RktCmt">add</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">render</span><span class="hspace">&nbsp;</span><span class="RktCmt">property</span><span class="hspace">&nbsp;</span><span class="RktCmt">unless</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">want</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">manually</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">define</span><span class="hspace">&nbsp;</span><span class="RktCmt">more.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">sym</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">sym</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">render-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">sym</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cn</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_render-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">sym</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">op</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktSym">op</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">l</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">r</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">somelisp</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ProgramWithSequence</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Unless</span><span class="hspace">&nbsp;</span><span class="RktCmt">our</span><span class="hspace">&nbsp;</span><span class="RktCmt">language</span><span class="hspace">&nbsp;</span><span class="RktCmt">has</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">well-defined</span><span class="hspace">&nbsp;</span><span class="RktCmt">exception</span><span class="hspace">&nbsp;</span><span class="RktCmt">interface</span><span class="hspace">&nbsp;</span><span class="RktCmt">that</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">are</span><span class="hspace">&nbsp;</span><span class="RktCmt">trying</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">fuzz,</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">need</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">provide</span><span class="hspace">&nbsp;</span><span class="RktCmt">&#8220;safe&#8221;</span><span class="hspace">&nbsp;</span><span class="RktCmt">versions</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">functions</span><span class="hspace">&nbsp;</span><span class="RktCmt">that</span><span class="hspace">&nbsp;</span><span class="RktCmt">aren't</span><span class="hspace">&nbsp;</span><span class="RktCmt">total.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Canned</span><span class="hspace">&nbsp;</span><span class="RktCmt">components</span><span class="hspace">&nbsp;</span><span class="RktCmt">uses</span><span class="hspace">&nbsp;</span><span class="RktCmt">safe</span><span class="hspace">&nbsp;</span><span class="RktCmt">functions</span><span class="hspace">&nbsp;</span><span class="RktCmt">and</span><span class="hspace">&nbsp;</span><span class="RktCmt">requires</span><span class="hspace">&nbsp;</span><span class="RktCmt">us</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">provide</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">definitions.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Here</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">provide</span><span class="hspace">&nbsp;</span><span class="RktCmt">some</span><span class="hspace">&nbsp;</span><span class="RktCmt">before</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">generated</span><span class="hspace">&nbsp;</span><span class="RktCmt">program.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">safe-divide</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._numerator%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">numerator</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">divisor</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">divisor</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252F%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">/</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._numerator%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">numerator</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">divisor</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">safe-car</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fallback</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fallback</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._car%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">car</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">safe-cdr</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fallback</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">fallback</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym">render-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">definitions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">program-result</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">ExpressionSequence</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Let's</span><span class="hspace">&nbsp;</span><span class="RktCmt">add</span><span class="hspace">&nbsp;</span><span class="RktCmt">code</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">print</span><span class="hspace">&nbsp;</span><span class="RktCmt">the</span><span class="hspace">&nbsp;</span><span class="RktCmt">values</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">generated</span><span class="hspace">&nbsp;</span><span class="RktCmt">global</span><span class="hspace">&nbsp;</span><span class="RktCmt">variables.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_type</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">ExpressionSequence</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Program</span><span class="hspace">&nbsp;</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktVal">result:</span><span class="hspace">&nbsp;</span><span class="RktVal">~v\n"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">program-result</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">c</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">definitions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:when</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">xsmith_type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Variable</span><span class="hspace">&nbsp;</span><span class="RktVal">~a</span><span class="hspace">&nbsp;</span><span class="RktVal">value:</span><span class="hspace">&nbsp;</span><span class="RktVal">~v\n"</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Definition</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">AssignmentExpression</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=set_.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._set%2521%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">set!</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">newvalue</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ExpressionSequence</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym">render-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">effectexpressions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">finalexpression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LetSequential</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._let%252A%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">let*</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">dn</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">dn</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">definitions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">IfExpression</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">test</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">then</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._else%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">else</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">VariableReference</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ProcedureApplication</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym">render-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">arguments</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">FormalParameter</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3esymbol%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;symbol</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LambdaWithExpression</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym">render-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">parameters</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">BoolLiteral</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Not</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">And</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Or</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._or%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">or</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">IntLiteral</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Plus</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Minus</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._-%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Times</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">LessThan</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3c%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&lt;</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">GreaterThan</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3e%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">&gt;</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">SafeDivide</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">safe-divide</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">StringLiteral</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">v</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">StringAppend</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">binary-op-renderer</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-append%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-append</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">StringLength</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-length%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-length</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">Expression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ImmutableListLiteral</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote-splicing%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,@</a></span><span class="RktPn">(</span><span class="RktSym">render-children</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">expressions</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ImmutableListSafeCar</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym">safe-car</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">fallback</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ImmutableListSafeCdr</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym">safe-cdr</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">fallback</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">ImmutableListCons</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cons%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">newvalue</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">VoidExpression</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">Map</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._quasiquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">`</a></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">elemname</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quasiquote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._unquote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">,</a></span><span class="RktPn">(</span><span class="RktSym">render-child</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=quote.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._quote%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">'</a></span><span class="RktSym">collection</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Sometimes</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">have</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">type</span><span class="hspace">&nbsp;</span><span class="RktCmt">variable</span><span class="hspace">&nbsp;</span><span class="RktCmt">that</span><span class="hspace">&nbsp;</span><span class="RktCmt">is</span><span class="hspace">&nbsp;</span><span class="RktCmt">not</span><span class="hspace">&nbsp;</span><span class="RktCmt">concrete</span><span class="hspace">&nbsp;</span><span class="RktCmt">but</span><span class="hspace">&nbsp;</span><span class="RktCmt">needs</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">be.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Here</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">provide</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">list</span><span class="hspace">&nbsp;</span><span class="RktCmt">of</span><span class="hspace">&nbsp;</span><span class="RktCmt">options</span><span class="hspace">&nbsp;</span><span class="RktCmt">we</span><span class="hspace">&nbsp;</span><span class="RktCmt">can</span><span class="hspace">&nbsp;</span><span class="RktCmt">pick</span><span class="hspace">&nbsp;</span><span class="RktCmt">for</span><span class="hspace">&nbsp;</span><span class="RktCmt">an</span><span class="hspace">&nbsp;</span><span class="RktCmt">unconstrained</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">type</span><span class="hspace">&nbsp;</span><span class="RktCmt">variable.</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-thunks-for-concretization</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktSym">string-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">(</span><span class="RktSym">immutable</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">somelisp-format-render</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">s-exps</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">out</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stringport.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._open-output-string%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">open-output-string</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">for</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">symex</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">s-exps</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">pretty-print</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">symex</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">out</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stringport.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._get-output-string%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">get-output-string</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">out</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">somelisp</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:program-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ProgramWithSequence</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:type-thunks</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">type-thunks-for-concretization</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:comment-wrap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">string-join</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">";;</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">l</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lines</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:format-render</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">somelisp-format-render</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=module.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._module%252B%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">module+</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">main</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">somelisp-command-line</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr></table></blockquote></blockquote></blockquote><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Xsmith_Reference&quot;">4<tt>&nbsp;</tt><a name="(part._.Xsmith_.Reference)"></a>Xsmith Reference</h3><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Stability&quot;">4.1<tt>&nbsp;</tt><a name="(part._.Stability)"></a>Stability</h4><p>Xsmith does not currently promise API stability between versions.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;generated-rules&quot;">4.2<tt>&nbsp;</tt><a name="(part._generated-rules)"></a>Auto-Generated attributes and choice-methods</h4><p>Many attributes and choice-methods are auto-generated by Xsmith:</p><p><span style="font-weight: bold">attributes</span></p><ul><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_is-hole?</span></p><p>Accepts no arguments other than the node to call it on.
Returns <span class="RktVal">#t</span> when called on a hole node, otherwise returns <span class="RktVal">#f</span>.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Within the context of a choice method, this will return #t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_is-hole?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_render-node</span></p><p>Accepts no arguments other than the node to call it on.
Defined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> property.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">assuming we're outputting for a lispy language</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">+</span><span class="hspace">&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktRdr">,</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_find-descendants</span></p><p>Accepts the node to call it on, then a predicate.
Returns a list of all descendant nodes that satisfy the predicate.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This will return a list of all addition and subtraction nodes.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">It will not return any nodes that are subtypes, though!</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_find-descendants</span><span class="hspace">&nbsp;</span><span class="RktSym">ast-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._member%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">member</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-node-type</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">AdditionExpression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">SubtractionExpression</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_find-a-descendant</span></p><p>Accepts the node to call it on, then a predicate.
Like <span class="RktVal">'</span><span class="RktVal">xsmith_find-descendants</span>, but it only returns one.
If no descendant matching the predicate is found, it returns <span class="RktVal">#f</span>.
It is mostly useful if you just want to know if there is any descendant matching a type, such as to determine whether to do an analysis based on the presence or absence of some feature.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_binding</span>
Accepts the node to call it on and optionally a boolean <span class="stt">require-binder-or-reference</span> flag (defaults to <span class="RktVal">#t</span>).
If the given node is a reference, as determined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> property, then the reference is resolved and a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValLink" data-pltdoc="x">binding</a></span> object is returned.
If the given node is a binder, as determined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span> property, then its <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValLink" data-pltdoc="x">binding</a></span> object is returned.
For any other node, <span class="RktVal">#f</span> is returned when <span class="stt">require-binder-or-reference</span> is false, otherwise an error is raised.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This raises an exception if `n` is not a binder or reference.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_binding</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">If `n` is not a binder or a reference, return #f.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_binding</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The main use of this is to do analyses where you need to look up the declaration node that a reference refers to.
The <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding~3f%29%29" class="RktValLink" data-pltdoc="x">binding?</a></span> object returned by this function contains a reference to the binder node.
When resolving references, the <a href="#%28part._scope-graph%29" data-pltdoc="x">scope graph model</a> is used.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_ast-depth</span></p><p>Accepts the node it is called on, and no other arguments.
Returns the tree depth at that node.
Determined by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxLink" data-pltdoc="x">depth-increase</a></span>.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_ast-depth</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></p></blockquote></div></p></li><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_type</span>
This attribute takes no arguments (besides a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> node) and returns the type (<span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span>) of that node.
Note that the type of the node may be a not-yet-concretized type variable.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_type</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></p></blockquote></li></ul><p><span style="font-weight: bold">choice-methods</span></p><ul><li><p><span class="RktVal">'</span><span class="RktVal">xsmith_get-reference!</span>
This is a choice method that can be used when creating a reference node.
It uses <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxLink" data-pltdoc="x">reference-choice-info</a></span> to choose a reference.
The default value of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxLink" data-pltdoc="x">reference-choice-info</a></span> will cause a fresh appropriate definition to be lifted if none exists.
If no reference can be made (due to a non-default <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxLink" data-pltdoc="x">reference-choice-info</a></span>), <span class="RktVal">#f</span> will be returned.
Otherwise, it returns a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding~3f%29%29" class="RktValLink" data-pltdoc="x">binding?</a></span> of the reference, which you can use <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding-name%29%29" class="RktValLink" data-pltdoc="x">binding-name</a></span> on.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">-&gt; (fresh-type-variable int bool)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This will return the name of a variable in scope</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">that has type int or type bool.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">It may make a new definition node to do that.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding-name%29%29" class="RktValLink" data-pltdoc="x">binding-name</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">this</span><span class="hspace">&nbsp;</span><span class="RktSym">xsmith_get-reference!</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Note that the reference is <span class="emph">choosing</span> one of the possible types (via <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span>).
Probably you are using this in a <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> method to initialize a node.
So you will want to put that name in the node.</p><p>Generally you don&rsquo;t need to do this manually, however.
Nodes with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> property marked will automatically have their name fields initialized, and nodes with the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span> property marked will automatically have their name and type fields initialized.</p></li><li><p><div class="SIntrapara"><span class="RktVal">'</span><span class="RktVal">xsmith_get-reference-for-child!</span>
This is a choice method that can be used when creating reference nodes for children during the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> rule.
It takes two additional parameters:
</div><div class="SIntrapara"><ul><li><p><span style="font-style: italic">type</span>: <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="RktValLink" data-pltdoc="x">settled-type?</a></span> - the type you want the reference to be.  Note that it must be a settled type.  If you want this type to be based somehow on the type of the node in question, use <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._force-type-exploration-for-node%21%29%29" class="RktValLink" data-pltdoc="x">force-type-exploration-for-node!</a></span> so the node&rsquo;s type will be maximally concretely computed before you concretize it.</p></li><li><p><span style="font-style: italic">write-reference?</span>: <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span> - whether the reference will be used as a write reference.</p></li></ul></div></p><p>It returns a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding~3f%29%29" class="RktValLink" data-pltdoc="x">binding?</a></span> of the reference or <span class="RktVal">#f</span> if none can be made (due to a non-default <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxLink" data-pltdoc="x">reference-choice-info</a></span>).</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This will return the name of a variable in scope</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">with type int for a write reference</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding-name%29%29" class="RktValLink" data-pltdoc="x">binding-name</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">this</span><span class="hspace">&nbsp;</span><span class="RktSym">xsmith_get-reference-for-child!</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Like <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_get-reference!</a>, it may cause a new definition to be lifted.
Only use the result for children of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span>.</p></li></ul><p>Node type names, attribute names, and choice-method names are just symbols, so they are not hygienic.
The names of symbols used or defined by the xsmith library start with <span class="stt">xsmith</span> or <span class="stt">_xsmith</span>, so don&rsquo;t tread on those namespaces.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Forms_for_Defining_a_Grammar_and_Its_Attributes&quot;">4.3<tt>&nbsp;</tt><a name="(part._.Forms_for_.Defining_a_.Grammar_and_.Its_.Attributes)"></a>Forms for Defining a Grammar and Its Attributes</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-spec-component))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-spec-component</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">component-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines a spec component.  Spec components include information about a language grammar and attributes, and can be combined to generate an xsmith fuzzer.  You add grammar productions with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, you add properties with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>, and you can add attributes and choice-methods with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span>, respectively.  Spec components are combined with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span>.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Now use add-to-grammar, add-property, etc.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Then use my-spec-component in assemble-part-specs.</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-xsmith-interface-functions))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span></span></td></tr><tr><td><span class="RktPn">[</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:fuzzer-name</span><span class="hspace">&nbsp;</span><span class="RktVar">fuzzer-name:id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:fuzzer-version</span><span class="hspace">&nbsp;</span><span class="RktVar">fuzzer-version-string</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:program-node</span><span class="hspace">&nbsp;</span><span class="RktVar">program-node:id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:properties</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:command-line-name</span><span class="hspace">&nbsp;</span><span class="RktVar">command-line-name:id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:function-name</span><span class="hspace">&nbsp;</span><span class="RktVar">function-name:id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:comment-wrap</span><span class="hspace">&nbsp;</span><span class="RktVar">comment-wrap-function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:format-render</span><span class="hspace">&nbsp;</span><span class="RktVar">format-render-function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:default-max-depth</span><span class="hspace">&nbsp;</span><span class="RktVar">default-max-depth</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:default-type-max-depth</span><span class="hspace">&nbsp;</span><span class="RktVar">default-type-max-depth</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:type-thunks</span><span class="hspace">&nbsp;</span><span class="RktVar">type-thunks</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:features</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">feature-name:id</span><span class="hspace">&nbsp;</span><span class="RktVar">feature-default-value:boolean</span><span class="hspace">&nbsp;</span><span class="RktVar">optional-feature-docstring:string</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:extra-parameters</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">parameter-name:id</span><span class="hspace">&nbsp;</span><span class="RktVar">parameter-docstring:string</span><span class="hspace">&nbsp;</span><span class="RktVar">parameter-expression</span><span class="hspace">&nbsp;</span><span class="RktVar">param-converter</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Combines and compiles spec components into a generator.
Defines a function to parse a command line and generate programs.</div></p><p>The fuzzer name defaults to the name of the first spec component provided.
The command-line function is named the id passed to <span class="RktPn">#:command-line-name</span>, defaulting to <span class="stt">&lt;fuzzer-name&gt;-command-line</span> with <span class="stt">&lt;fuzzer-name&gt;</span> replaced appropriately.
The command-line function takes no arguments and parses <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=runtime.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-command-line-arguments%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-command-line-arguments</a></span>.</p><p><span class="RktPn">#:comment-wrap</span> takes a list of strings which contain info about the generated program, such as the command line used to generate it, the <span class="RktPn">#:fuzzer-name</span>, the <span class="RktPn">#:fuzzer-version</span>, and the random seed number.  It should return a string representing those lines commented out.  Such as the following, assuming the "#" character is the line-comment character in your language:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-join</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"# ~a"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">lines</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktSym">fuzzer-version</span> takes a string describing the version of the current fuzzer, used in automatically-generated output.</p><p><span class="RktPn">#:format-render</span> is a function which takes the output of your <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> property as input and should return a string representing the program (perhaps by use of a pretty-printing function).  If your <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> property produces a string already, you will not need to specify the <span class="RktPn">#:format-render</span> argument.</p><p>The <span class="RktPn">#:default-max-depth</span> sets the &#8220;max&#8221; tree depth generated.
It&rsquo;s a bit of a fib &ndash; there are situations where Xsmith will allow deeper generation, but they are limited.
Similarly the <span class="RktPn">#:default-type-max-depth</span> sets the maximum depth that will be used for type concretization.
In other words, when a type variable is concretized it will only choose base types past that depth.
However, deeper types can still be made through other means.</p><p>The <span class="RktPn">#:type-thunks</span> argument should be a list or thunk that returns a list of thunks that return a type.
IE <span class="stt">(listof (-&gt; type?))</span> or <span class="stt">(-&gt; (listof (-&gt; type?)))</span>.
However, <span class="RktVal">#f</span> may be returned instead of a thunk or instead of a type to filter out a given type in some situations.</p><p>The <span class="RktPn">#:features</span> argument takes a list of lists containing a feature name (as an identifier) and a default value (as a boolean), and optionally a list of documentation strings.
Each feature will be included in the command-line options as <span class="stt">--with-&lt;feature-name&gt;</span>.
Documentation strings will be displayed in the <span class="stt">--help</span> text, one per line.
The values of these features is available via <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="RktValLink" data-pltdoc="x">xsmith-feature-enabled?</a></span>.</p><p><span class="RktPn">#:extra-parameters</span> is a list of specifications for extra custom command line parameters.
Each list contains an identifier to be used as the name of the parameter (eg. for use in the command-line interface), a documentation string, a parameter, and a normalization function (or <span class="RktVal">#f</span>).
The normalization function should take the string given on the command line and convert it to the value that is actually parameterized during program generation.
The following example defines a <span class="RktVal">"--max-widgets"</span> parameter with a default of 3:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">widget-parameter</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-parameter%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-parameter</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:extra-parameters</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">max-widgets</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The maximum number of widgets"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">widget-parameter</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string-%7E3enumber%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string-&gt;number</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">The command-line options generated by default are:
</div><div class="SIntrapara"><ul><li><p><span class="stt">--help</span> &ndash; See all command-line options.  The <span class="stt">--help</span> list will automatically stay up to date, unlike this documentation.</p></li><li><p><span class="stt">--version</span> &ndash; Prints the version info of Xsmith and exits.</p></li><li><p><span class="stt">--server &lt;true-or-false&gt;</span> &ndash; Whether to run the web server.  Defaults to <span class="stt">false</span>.</p></li><li><p><span class="stt">--server-port &lt;port-number&gt;</span> &ndash; Port to use when running server.  Defaults to <span class="stt">8080</span>.</p></li><li><p><span class="stt">--server-ip &lt;ip-address&gt;</span> &ndash; Listen for connections to <span class="stt">&lt;ip-address&gt;</span>.  Use <span class="stt">false</span> to accept connections from all the machine&rsquo;s addresses.  Defaults to <span class="stt">127.0.0.1</span>.</p></li><li><p><span class="stt">--server-path &lt;url-path&gt;</span> &ndash; Run the server at <span class="stt">localhost:8080/url-path</span>.  Defaults to <span class="stt">/</span>.</p></li><li><p><span class="stt">--seed</span> &ndash; Random seed for program generation.  Defaults to whatever Racket does to initialize randomness normally.</p></li><li><p><span class="stt">--output-file &lt;filename&gt;</span> &ndash; Outputs to &lt;filename&gt; instead of standard output when not used with <span class="stt">--server</span>.</p></li><li><p><span class="stt">--max-depth &lt;n&gt;</span> &ndash; Maximum depth of the generated program tree.</p></li><li><p><span class="stt">--tree-on-error &lt;true-or-false&gt;</span> &ndash; Whether to show a partial program tree when an error occurs.  Defaults to <span class="stt">false</span>.</p></li><li><p><span class="stt">--with-&lt;feature&gt; &lt;bool&gt;</span> &ndash; Enables or disables generator-specific features, where <span class="stt">&lt;feature&gt;</span> is replaced with concrete feature names.</p></li></ul></div></p><p>Various attributes are automatically defined within the spec, see <a href="#%28part._generated-rules%29" data-pltdoc="x">Auto-Generated attributes and choice-methods</a>.</p><p>Properties (defined with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span>) are used to derive more <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attributes as well as Xsmith choice-methods, and extra properties can be used in your fuzzer by adding them with <span class="RktPn">#:properties</span>.
Each property may have a transformer function that alters other properties, attributes, or choice-methods.
All properties referenced within a spec-component are used to generate attributes and choice-methods, as well as any properties specified in the <span class="RktSym">maybe-properties</span> list.
Unless values for that property have also been specified within a spec component, properties in the <span class="RktPn">#:properties</span> list will only be able to generate rules based on the default value for the property.
Note that any property that has a value attached to a node in the grammar will be run, but if you have defined custom properties that don&rsquo;t have values attached you may need to add the properties to this list.
In other words, if you have a property that defines an attribute on the default node without attaching a value to any node, you need to add it here or the attribute won&rsquo;t actually be added.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-to-grammar))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-to-grammar</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">grammar-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">grammar-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">node-name</span><span class="hspace">&nbsp;</span><span class="RktVar">parent-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">field</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-prop</span><span class="hspace">&nbsp;</span><span class="RktVar">..</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">parent-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">identifier</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVal">#f</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">field</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">name/type-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">name/type-id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-type-id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-kleene-star</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-init-expr</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-type-id</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktVar">type-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-kleene-star</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">*</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-init-expr</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">=</span><span class="hspace">&nbsp;</span><span class="RktVar">init-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-prop</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-id</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-val</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds grammar productions to <span class="RktVar">spec-component</span>.</div></p><p><span class="RktVar">node-name</span> will be the name of the grammar production in <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>.
<span class="RktVar">parent-name</span> is either the name of the parent grammar production or <span class="RktVal">#f</span>.</p><p>Names for the node and fields are limited to alphabetic characters.  You may want to use camelCase style names since kebab-style or snake_style names are invalid due to this limitation.</p><p>Fields are then specified.
Each nonterminal inherits all fields of its parent nodes.
A field has a name, a type, an optional kleene star, and an optional initialization expression.
The type of each field is the name of the nonterminal that it must be or <span class="RktVal">#f</span> for fields that may contain arbitrary Racket values.
A field name may be the same as the type, in which case the type does not need to be specified.
If a type is not specified and the name does not match the name of a nonterminal, then the type #f is used.
If the optional kleene star is supplied, the field will be a list field.
If a kleene star is provided for a non-false type, the name and type must be specified separately.</p><p>The <span class="RktVar">init-expr</span> for each field specifies a default value for the field.
When a node is generated, each <span class="RktVar">init-expr</span> is evaluated unless a non-default value is supplied to the generating function.
If no <span class="RktVar">init-expr</span> is supplied, the following defaults are used:</p><ul><li><p>For false types, <span class="RktVal">#f</span>.</p></li><li><p>For nonterminal types, a hole node of the appropriate type.</p></li><li><p>For fields with a kleene star, an empty list.</p></li></ul><p>For nodes with a kleene star, <span class="RktVar">init-expr</span> may return a list or a number.
If a number is provided, the default value is a list of that many of the non-kleene-star default value.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktVar">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random</span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SumExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">addends</span><span class="hspace">&nbsp;</span><span class="RktVar">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVar">*</span><span class="hspace">&nbsp;</span><span class="RktVar">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The example defines a piece of a grammath that includes some kinds of expressions.
When a <span class="stt">LiteralInt</span> expression is generated, it&rsquo;s <span class="stt">v</span> field will be populated with a random number.
Since the <span class="RktSym">random</span> expression is evaluated for each fresh <span class="stt">LiteralInt</span>, they will (probably) receive different values for <span class="stt">v</span>.
When an <span class="stt">AditionExpression</span> node is generated, it will be populated with an <span class="stt">Expression</span> hole node for each of its <span class="stt">left</span> and <span class="stt">right</span> fields.
When a fresh <span class="stt">SumExpression</span> is generated, its <span class="stt">addends</span> field will be populated with a list of zero to four <span class="stt">Expression</span> hole nodes.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-attribute))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-attribute</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">rule-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">nonterminal-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-function</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds a <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> attribute rule to the spec-component.
The format for each rule is similar to that required by <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>&rsquo;s <span class="stt">ag-rule</span> form.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">interp</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">interp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">interp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">right</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SumExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._apply%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">apply</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">interp</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-children</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">addends</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-choice-method))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-choice-method</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">rule-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">nonterminal-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-function</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds an Xsmith choice-method to the spec-component.</div></p><p>Xsmith creates a choice object class for each node type in the specification grammar, following the same class hierarchy that AST nodes themselves do.  Choice objects are created every time Xsmith fills in a hole node.  One choice object is created for every node type that is legal to use in filling the hole.  Choice objects are then filtered according to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span> property, and then the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span> property of the remaining choice objects is used to determine the probability of choosing each one.  When a choice object is selected, its <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property is used to generate a new AST node of its type.  If all choices are eliminated, an exception is raised with a message stating which filter step invalidated each potential choice.</p><p>Choice-methods are methods on the choice objects.  Some choice-methods are used by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span> to filter choices.  Other choice-methods may be used by those filters or in the body of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property as helper methods.  While most information about the AST and the current choice are probably computed using attributes, information about choosing a specific node type to fill in an abstract hole (such as an expression hole which may be filled with many different types of expressions) are computed using choice-methods.</p><p>Choice-methods are methods in Racket&rsquo;s class system and therefore have the <span class="RktSym">this</span> macro available for use in their bodies to access other methods (eg. with the <span class="RktSym">send</span> macro).
Choice-methods also have the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span> macro available within their body so that they can query attributes of the <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> AST being elaborated (eg. with <span class="stt">att-value</span> to access attributes and <span class="stt">ast-parent</span> to inspect other nodes in the AST).</p><p>Since choice-methods are methods in Racket&rsquo;s <span class="RktSym">class</span> system, they must be defined with a literal <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span> (with no parameter for the implicit <span class="RktSym">this</span> argument).  If a method needs to modify state (such as to cache the computation of available references of the appropriate type), I would normally recommend the &#8220;let-over-lambda&#8221; pattern, but that is not allowed in this case.  To make up for this, I recommend using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._make-weak-hasheq%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">make-weak-hasheq</a></span> to hold the state, using the <span class="RktSym">this</span> object as a key.</p><p><div class="SIntrapara">This is a poor example, but it demonstrates how attributes and choice-methods can be used together to help make choices:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-weight-helper</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">my-helper-attribute</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">20</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">this</span><span class="hspace">&nbsp;</span><span class="RktSym">my-weight-helper</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._add-property))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-component</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-name</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">prop-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">nonterminal-name</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-value</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds property values to the spec-component.</div></p><p>Since property transformers are macros that may accept arbitrary domain-specific syntax, the grammar of prop-value varies for each property.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._current-hole))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">current-hole</a></span></span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Within the body of a choice-method, <span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span> returns the hole node being considered for replacement.
This allows choice-methods to query attribute attributes of the grammar.</div></p><p>Elsewhere it raises a syntax error.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._make-hole))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">make-hole</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hole-type-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Within the context of a spec component (eg. in the body of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, etc), <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span> is a function to generate a hole of a given type.</div></p><p><div class="SIntrapara">For example, to make a hole node that will eventually be replaced with some type of <span class="stt">Expression</span> node:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="RktPn">)</span></p></blockquote></div></p><p>This function is essentially used by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span> as the default value for grammar fields with nonterminal types that lack an init-expr.</p><p>Outside of a spec component context, it raises a syntax error.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._make-fresh-node))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">make-fresh-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">node-type-expression</span><span class="hspace">&nbsp;</span><span class="RktVar">optional-field-value-dict</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Within the context of a spec component (eg. in the body of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>, etc), <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span> is a function to generate a fresh node of the given type.
Construction of the new node is guided by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property.</div></p><p><div class="SIntrapara">For example, to generate a fresh <span class="stt">AdditionExpression</span> node, specifying values for some of its fields:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">AdditionExpression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">LiteralInt</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Note that the fresh node is initially created unattached to the rest of the program tree.
This means that any nodes whose <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> implementation needs to inspect the tree may fail.
In particular, reference nodes can only lift bindings when attached to the tree, and will probably fail if created with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Custom_Properties&quot;">4.4<tt>&nbsp;</tt><a name="(part._.Custom_.Properties)"></a>Custom Properties</h4><p>Properties are used to create domain-specific languages or terse declarative syntax for specifying attributes and choice-methods.
Custom properties are probably only useful for shared infrastructure for multiple languages (perhaps with the exception of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="RktStxLink" data-pltdoc="x">define-non-inheriting-rule-property</a></span>).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-property))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-dups</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-reads</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-rewrites</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-appends</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-transformer</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-dups</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:allow-duplicates?</span><span class="hspace">&nbsp;</span><span class="RktVar">literal-bool</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-reads</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:reads</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-arg-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-rewrites</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:rewrites</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-arg-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-appends</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:appends</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-arg-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-transformer</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">transformer-arg-spec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktVar">prop-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">attribute</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">choice-method</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">grammar</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a property for use with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>.</div></p><p>Properties can have a transformer function that produce attributes, choice-methods, or other property values.
Property transformers can read the values set for the property by <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span>, and optionally the values of other properties as well.
Not all properties must have a transformer &ndash; some properties may just be a single place to store information that is used by (multiple) other properties.</p><p>The transformer function accepts a dictionary mapping grammar node names (as symbols) to the syntax objects from the right-hand-side of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span> uses for each property that it reads.
The transformer function must return a list of dictionaries mapping grammar node names (as symbols) to syntax objects for the properties, attributes, and choice-methods that it writes.</p><p>Property transformers are run during <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> in an order determined by the read/write dependencies among the properties.
Appending goes before rewriting, which goes before reading.</p><p>If a property appends (using the #:appends keyword) to a property or rule, its return dictionary will be appended to the existing dictionary for that property/rule.
This allows a property or rule to be specified in part by the property that appends and in part by another property or the user.
If an appended rule (or property that disallows multiple values) ends up with two values for any node, an error is raised.</p><p>If a property rewrites (using the #:rewrites keyword) to a property or rule, its return dictionary replaces any previous dictionary for that property/rule.
Rewriting a property also automatically implies reading that property.
A property or rule may only be rewritten by one property transformer.</p><p><div class="SIntrapara">Example showing the arguments and return type needed by transformers:
The transformer argument order is its own property, then #:reads dictionaries in the order declared, then #:rewrites dictionaries in the order declared.
The transformer return order is #:rewrites dictionaries in the order declared then #:writes dictionaries in the order declared.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-property</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:reads</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:rewrites</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">property</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:appends</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">attribute</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">choice-method</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transformer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">this-prop-dict</span><span class="hspace">&nbsp;</span><span class="RktSym">prop-a-dict</span><span class="hspace">&nbsp;</span><span class="RktSym">prop-b-dict</span><span class="hspace">&nbsp;</span><span class="RktSym">prop-c-dict</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">compute output dictionaries...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">dict-for-c</span><span class="hspace">&nbsp;</span><span class="RktSym">dict-for-d</span><span class="hspace">&nbsp;</span><span class="RktSym">dict-for-e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The syntax object value for a property can be anything, since property transformers define the grammar and semantics of properties.</p><p>The syntax object value for <span class="stt">attributes</span> and <span class="stt">choice-methods</span> should be a syntax object specifying a function (IE a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span>).
<span class="stt">attributes</span> may be any syntax that evaluates to a function (so you may return an identifier that references a function or an expression that computes a function such as let-over-lambda), but choice-method syntax is provided to Racket&rsquo;s <span class="RktSym">class</span> macro, which requires literal <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span> forms.</p><p>Dictionaries may or may not contain an entry for each nonterminal in the grammar.
A dictionary may even be empty.</p><p>In addition to nonterminals, each dictionary may include a mapping for the value <span class="RktVal">#f</span>, which will define a default value used for the (super secret) parent node that <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> defines.
If nothing is specified for #f, attributes and choice-methods will have a default which errors, providing a helpful error message.</p><p>If the <span class="RktPn">#:allow-duplicates?</span> argument is supplied and is <span class="RktVal">#t</span>, then <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span> may be used more than once for the property for the same node, and the syntax object in the dictionary for the property will be a syntax list of the syntax objects specified in the various <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span> calls.
But by default only one use of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span> is allowed per property per node type, and the syntax object in the dict is the single syntax object from the one call.</p><p>Here is a simple example that basically desugars straight to an attribute with a default:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxLink" data-pltdoc="x">strict-child-order?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:appends</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">attribute</span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith_strict-child-order?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transformer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">this-prop-info</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith_strict-child-order?-info</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash-set%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash-set</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Fhash%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">for/hash</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._in-dict%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">in-dict</a></span><span class="hspace">&nbsp;</span><span class="RktSym">this-prop-info</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-parse</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">b:boolean</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith_strict-child-order?-info</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">The rationale for this example property is to:
</div><div class="SIntrapara"><ul><li><p>Allow values to be specified by just <span class="RktVal">#t</span> or <span class="RktVal">#f</span>, rather than <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">#t</span><span class="RktPn">)</span></p></li><li><p>To implicitly provide a default value to the root node (<span class="RktVal">#f</span>).</p></li></ul></div></p><p>For more realistic examples of properties, see the file <span class="stt">private/core-properties.rkt</span> in the Xsmith implementation.
Generally they are big, hairy macros.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-simple-property))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-simple-property%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-simple-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">property-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-type</span><span class="hspace">&nbsp;</span><span class="RktVar">optionals</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">rule-type</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">attribute</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">choice-method</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">optionals</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVar">default</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">This provides a simpler interface to quickly define properties that have no dependencies on other properties.</div></p><p>Defines a property that generates an attribute or choice-method according to <span class="RktVar">rule-type</span>.
The optional <span class="RktPn">#:default</span> value will be associated with the implicit <span class="RktVal">#f</span> node (and thus be inherited by other nodes unless overrided).
The default is given as literal syntax (IE no hash-quote or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._syntax%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">syntax</a></span> form needed).
The optional transformer should be a syntax parser, or in other words, it must be a function from a syntax object to a syntax object.
The default transformer is the identity function, meaning the rule is written verbatim.
Note that using the default transformer means there is little reason to use a property, since you can just use <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-attribute%29%29" class="RktStxLink" data-pltdoc="x">add-attribute</a></span> or <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span> directly instead.</p><p>By default the name of the generated <span class="stt">attribute</span> or <span class="stt">choice-method</span> is the same as the name of the property, but this may be overrided by providing <span class="RktPn">#:rule-name</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-non-inheriting-rule-property))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-non-inheriting-rule-property</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">property-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">rule-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-rule-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">default-value</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-transformer</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-rule-name</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:rule-name</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">default-value</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVar">default-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-transformer</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktVar">transformer-func</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-simple-property%29%29" class="RktStxLink" data-pltdoc="x">define-simple-property</a></span>, but it defines a property that generates an attribute or a choice-method that does NOT inherit its implementation from its superclass.</div></p><p><span class="RktVar">rule-type</span> must be either <span class="stt">attribute</span> or <span class="stt">choice-method</span>.</p><p><span class="RktVar">rule-name</span> defaults to <span class="RktVar">property-name</span>, but you can make it give the rule a different name than the property.</p><p><span class="RktVar">default-expr</span> is the default value of the property.  Any nonterminal that does not have a different value specified gets this one.  Note that the default is required, not optional, despite being a keyword argument.</p><p><span class="RktVar">transformer-func</span> is an optional transformer to transform the value.
It is not called with a dictionary like the transformers of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-property%29%29" class="RktStxLink" data-pltdoc="x">define-property</a></span>, but rather it receives each value individually.
This allows a small amount of sugar.
Note that the value supplied as the <span class="RktVar">default-expr</span> is also transformed by the <span class="RktVar">transformer-func</span> when it is supplied.
When no <span class="RktVar">transformer-func</span> is supplied, values are passed through literally.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-non-inheriting-rule-property%29%29" class="RktStxLink" data-pltdoc="x">define-non-inheriting-rule-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">some-bool-flag</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">attribute</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:transformer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">syntax-parser</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">a-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">B</span><span class="hspace">&nbsp;</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktSym">B</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">a-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">some-bool-flag</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">C</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Normally <span class="stt">B</span> would inherit a method from <span class="stt">A</span> when none was specified for it.
But in this case it inherits the default (<span class="RktVal">#f</span>).
When a user tries <span class="stt">(att-value 'some-bool-flag &lt;node-of-type-B&gt;)</span> it will return <span class="RktVal">#f</span>, not <span class="RktVal">#t</span>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Refiners&quot;">4.5<tt>&nbsp;</tt><a name="(part._.Refiners)"></a>Refiners</h4><p>Xsmith supports iterative refinement, which is a technique that allows for the modification of an existing AST.
There are no default refiners, and their use is entirely optional.
You might use a refiner to handle simplifications due to a post-generation analysis, such as using native mathematical operations instead of a specialized library when it has been proven that such operations will not produce unsafe results.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-refiner))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-refiner%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-refiner</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">spec-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">refiner-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-follows</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-refiner-predicate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">maybe-global-predicate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">refiner-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-follows</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:follows</span><span class="hspace">&nbsp;</span><span class="RktVar">refiner-name</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-refiner-predicate</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:refiner-predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">pred</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-global-predicate</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:global-predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">pred</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Each <span class="RktVar">refiner-clause</span> is a list of functions that each take exactly one argument: a node.
The final function in the list (the "refiner function") must return an AST node which will replace the node that was passed in to the function.
Each preceding function is a predicate that determines whether the refiner function will be run.
The list need only provide a refiner function; the predicate functions are optional.</div></p><p>Refiners can have an order imposed on them if so desired.
You can specify the <span class="RktPn">#:follows</span> parameter, which accepts either a refiner name or a list of refiner names.
All refiners will be sorted based on these <span class="RktPn">#:follows</span> declarations, and executed in the order determined.</p><p>If you want to predicate the execution of a refiner itself, you can use the <span class="RktPn">#:refiner-predicate</span> parameter.
This parameter accepts a single function that, if given, will be run prior to attempting to run the refiner at all.
If it returns anything other than <span class="RktVal">#f</span>, the refiner will be run.
The function should be a thunk (i.e., it should accept zero arguments).
This is useful if you wish to have a refiner toggled on or off by a command-line argument.</p><p>Additionally, you may wish to have some predicate shared among all clauses of a refiner.
The <span class="RktPn">#:global-predicate</span> parameter allows for this.
Similar to <span class="RktSym">refiner-predicate</span>, <span class="RktPn">#:global-predicate</span> accepts a single predicate function as argument.
This function will be prepended to the list of functions for each clause.</p><p>The <span class="RktVar">refiner-clause</span>s are similar to those used by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span> (and similar) functions.
One key difference with refiners is that there is always a <span class="RktVal">#f</span> clause given.
(The default implementation of this clause if omitted by the user is <span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span>, which means the refiner has no effect for any node which does not have a matching clause defined.)
The predicate defined by <span class="RktPn">#:global-predicate</span> (if present) will not ever be applied to the <span class="RktVal">#f</span> clause.
This means that if you want its functionality to be applied to nodes which do not have matching clauses, you will need to use it in a custom <span class="RktVal">#f</span> clause.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span><span class="hspace">&nbsp;</span><span class="RktSym">arith</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">...</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ArithOrVal</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This simplifies choices for generation.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Val</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOrVal</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>00</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Integer values on the specified</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">interval (-100, 100).</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOrVal</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOrVal</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Arithmetic operations have a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOrVal</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">left-hand side and a right-hand</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">side, which can be either a value</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">or another arithmetic operation.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AddOp</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">+</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SubOp</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">-</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MulOp</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">*</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">DivOp</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">/</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ModOp</span><span class="hspace">&nbsp;</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">%</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">... (more code here)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-refiner%29%29" class="RktStxLink" data-pltdoc="x">define-refiner</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">make-even</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This refiner makes all literal integer values into even values by</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">incrementing them by 1. The `#:refiner-predicate` parameter says that it</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will only be run when the `make-even` feature is enabled. This does</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">require the make-even feature to be defined in the `define-xsmith-interface-functions`</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">macro.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:refiner-predicate</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="RktValLink" data-pltdoc="x">xsmith-feature-enabled?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">make-even</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Val</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._odd%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">odd?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxLink" data-pltdoc="x">make-replacement-node</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252B%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-refiner%29%29" class="RktStxLink" data-pltdoc="x">define-refiner</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">replace-rhs-val-with-zero</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The `replace-rhs-val-with-zero` refiner looks at the right-hand side of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">every ArithOp to see if it's a Val. If it is, its internal value will</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">be replaced with 0.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:global-predicate</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="RktValLink" data-pltdoc="x">node-subtype?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ArithOp</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxLink" data-pltdoc="x">make-replacement-node</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-type%29%29" class="RktValLink" data-pltdoc="x">node-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-refiner%29%29" class="RktStxLink" data-pltdoc="x">define-refiner</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">arith</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">prevent-divide-by-zero</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">To prevent divide-by-zero errors, this refiner looks for generated</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">DivOps and checks whether their right-hand side is a 0. If it is, it</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is replaced with a 13.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:follows:replace-rhs-val-with-zero</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:refiner-predicate</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="RktValLink" data-pltdoc="x">xsmith-feature-enabled?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">prevent-divide-by-zero</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">DivOp</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="RktValLink" data-pltdoc="x">node-subtype?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxLink" data-pltdoc="x">make-replacement-node</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">DivOp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">rhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">... (more code here)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">arith</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">... (other options specified here as needed)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:features</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">make-even</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">prevent-divide-by-zero</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._make-replacement-node))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">make-replacement-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">new-node-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">original-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">children</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">children</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">hash</span><span class="hspace">&nbsp;</span><span class="RktVar">child-name</span><span class="hspace">&nbsp;</span><span class="RktVar">child-value</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">During refinement, you may wish to replace an entire node with a new node of a different type.
<span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxLink" data-pltdoc="x">make-replacement-node</a></span> handles all the logic involved in &ldquo;replacing&rdquo; a node in RACR for you.</div></p><p>A <span class="RktVar">new-node-type</span> must be given, which is a symbol corresponding to a node type in the grammar.
Then, <span class="RktVar">original-node</span> is the node which is being replaced.
The new node will completely take the place of the old node; there will no longer be any references to <span class="RktVar">original-node</span> in the AST.
Additionally, all children of the <span class="RktVar">original-node</span> will be copied to the new node except those replaced by the <span class="RktVar">children</span> hash.
This is simply a hash of child names to values, just like in <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-refiner%29%29" class="RktStxLink" data-pltdoc="x">define-refiner</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">replace-plus-with-minus</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">PlusOp</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxLink" data-pltdoc="x">make-replacement-node</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">MinusOp</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Note that <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-replacement-node%29%29" class="RktStxLink" data-pltdoc="x">make-replacement-node</a></span> should only be used in the bodies of refiner functions!
If a replacement is made but the refiner fails for some other reason (i.e., it returns <span class="RktVal">#f</span>), the replacement will be undone.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Scope_Graph_Functions&quot;">4.6<tt>&nbsp;</tt><a name="(part._.Scope_.Graph_.Functions)"></a>Scope Graph Functions</h4><p>This section describes the API to the <a href="#%28part._scope-graph%29" data-pltdoc="x">Scope Graph</a> model of binding.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._xsmith/main..rkt)._binding-def-or-param))"></a><a name="(def._((lib._xsmith/main..rkt)._binding-type))"></a><a name="(def._((lib._xsmith/main..rkt)._binding-ast-node))"></a><a name="(def._((lib._xsmith/main..rkt)._binding-name))"></a><a name="(def._((lib._xsmith/main..rkt)._binding~3f))"></a><a name="(def._((lib._xsmith/main..rkt)._struct~3abinding))"></a><a name="(def._((lib._xsmith/main..rkt)._binding))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding%29%29" class="RktValDef RktValLink" data-pltdoc="x">binding</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">name</span><span class="stt"> </span><span class="RktSym">ast-node</span><span class="stt"> </span><span class="RktSym">type</span><span class="stt"> </span><span class="RktSym">def-or-param</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">ast-node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">ast-node?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">def-or-param</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">definition</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parameter</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Struct for binding information of nodes that create bindings.</div></p><p>Notably this is returned by the attribute <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_binding</a>.</p><p>The <span class="RktSym">ast-node</span> field is the grammar node containing the definition of <span class="RktSym">name</span>.
The <span class="RktSym">def-or-param</span> field is there to distinguish names that are bound as function parameters vs names that are bound as (local or global) definitions.</p><p>Probably all you need to do with this, though, is get the <span class="RktSym">name</span> field and stuff it in the name field of your definition nodes in the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> method.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._current-well-formedness-regexp))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-well-formedness-regexp</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-well-formedness-regexp</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=regexp.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._regexp%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">regexp?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#px"rp*i?d"</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">For most languages you probably don&rsquo;t need to fuss with this.</div></p><p>When the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_binding</a> attribute is used or when Xsmith searches for a valid reference with <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_get-reference</a>, this regexp determines valid scope-graph resolution paths.
The path elements (reference, parent, import, definition) are turned into characters (r, p, i, and d respectively).
If the path from reference to definition matches this regexp, it is valid.
If two definitions have the same name and paths from a reference to both definitions are valid, the definition that is in scope for the reference is determined by <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="RktValLink" data-pltdoc="x">current-path-greater-than</a></span>.</p><p>Because Xsmith doesn&rsquo;t currently support import elements at all, modifying this regexp is somewhat of a moot point.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._current-path-greater-than))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-path-greater-than</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-path-greater-than%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-path-greater-than</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">comparator</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">comparator</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">reference</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">import</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">declaration</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">If there are two valid resolution paths (determined by <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._current-well-formedness-regexp%29%29" class="RktValLink" data-pltdoc="x">current-well-formedness-regexp</a></span>) for a name, this comparator determines which path is chosen.
The comparator must return a non-false value if the left operand is greater than the right, otherwise <span class="RktVal">#f</span>
The greatest path is chosen.</div></p><p>By default the comparator walks down the paths, comparing each element.
A path is greater than another if its first differing element is greater.
From least to greatest, path elements are <span class="RktVal">'</span><span class="RktVal">reference</span>, <span class="RktVal">'</span><span class="RktVal">parent</span>, <span class="RktVal">'</span><span class="RktVal">import</span>, <span class="RktVal">'</span><span class="RktVal">declaration</span>.</p><p>For most languages you probably don&rsquo;t need to fuss with this.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Core_Properties&quot;">4.7<tt>&nbsp;</tt><a name="(part._.Core_.Properties)"></a>Core Properties</h4><p>These properties are available for specification on Xsmith grammars.
Many of them define or modify the behavior of core functionality, such as <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> modifying how fresh program nodes are instantiated, or <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> defining a language&rsquo;s type rules.</p><p>Many are optional, but for any language at all you probably need to use <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span>.
Additionally, for any language with variables you need <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span>.
Next, the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property will likely become necessary for a few fields that Xsmith can&rsquo;t infer.
Then the most important of the truly optional properties is likely <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._may-be-generated))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">may-be-generated</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Acceptable values for this property are <span class="RktVal">#t</span> or <span class="RktVal">#f</span>, and the default is <span class="RktVal">#t</span>.</div></p><p>If may-be-generated is false, the node is not added to the list of possibile choices to replace an appropriate AST hole.
It is useful to set it to false for abstract node types or for specialized node types that are meant to be swapped in only after a full tree is generated, such as by a later analysis to determine validity of an unsafe operation.
This property is NOT inherited by subclasses.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Expression is abstract and should not be instantiated,</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">only AdditionExpression, SubtractionExpression, etc.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Only safe addition expressions should be generated,</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">but maybe a later pass after generation swaps some</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">safe addition expressions for unsafe ones after analysis.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">UnsafeAdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._type-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">type-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property is used to specify the type system used by the generator.
You should specify a type system even for dynamically typed languages so that programs don&rsquo;t just crash with dynamic type errors.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">float</span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-subtype-of%29%29" class="RktValLink" data-pltdoc="x">fresh-subtype-of</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SubtractionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-subtype-of%29%29" class="RktValLink" data-pltdoc="x">fresh-subtype-of</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">EqualityExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">bool</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">You could compute more by using</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a function and computing the type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">given the actual child node.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">r-node</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type%29%29" class="RktValLink" data-pltdoc="x">function-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">arg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-arg-type%29%29" class="RktValLink" data-pltdoc="x">function-type-arg-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-return-type%29%29" class="RktValLink" data-pltdoc="x">function-type-return-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The property is two armed.
The first arm specifies the type(s) that a node can inhabit, and its value is <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ed with the node&rsquo;s type during type checking.
The second arm specifies a relationship between a parent node and its children.
Children nodes are allowed to be subtypes of the type specified by their parent, so a node&rsquo;s type is <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span>-ed with the type specified by its parent during type checking.</p><p>The first part is the type (or partially-constrained type variable) that the given node can inhabit.
The expression given is evaluated fresh every time a node is type checked or considered for generation.
When determining the type of a node, this value is <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ed with this value.</p><p>Additionally, the expression for a node&rsquo;s type constraint may be a function that takes the node and returns a type instead of a type directly.
However, the function may be passed a hole node that does not yet have properly populated fields and that may be a supertype of the node type you are defining the constraint for.
So if you use a function here, you need to check the node with <span class="RktPn">(</span><span class="RktSym">att-value</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">xsmith_is-hole?</span><span class="stt"> </span><span class="RktSym">node</span><span class="RktPn">)</span></p><p>The second part is a function that takes a node, its type, and must return a dictionary mapping its children nodes to types.
The dictionary keys may be the node objects of the node&rsquo;s children OR the symbol of the field name the child inhabits.
The values in the hash may be types or functions from node to type.
For kleene-star children, if they are all supposed to have the same type, it is convenient to use the field name as the key.
However, if a kleene-star child needs a different type for each element of the list, you should use the nodes themselves as keys or use a function as dictionary value.</p><p><div class="SIntrapara">Note that the type argument of the function may always be a type variable.
Even if the only possible type that could come in is, say, the <span class="stt">int</span> type, it may come in wrapped as a type variable that has been unified such that <span class="stt">int</span> is the only possibility, but it is not <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> to the <span class="stt">int</span> type.
To deconstruct types, you should create the type you want to deconstruct, <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span> it with the type you want to deconstruct, then deconstruct the one you built.
For example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Cons</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">newval</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Cons</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="RktValLink" data-pltdoc="x">list-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-list-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lt</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">inner</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-type-type</span><span class="hspace">&nbsp;</span><span class="RktSym">lt</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">newval</span><span class="hspace">&nbsp;</span><span class="RktSym">inner</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">list</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>If the typing function makes any decisions about the type of the parent node when deciding the type of the child nodes, the decision needs to be reflected by either some unification with the child node types, construction/deconstruction using the parent type, or by saving the decision in the parent node and unifying with it in future passes.
Here&rsquo;s an example of a subtly broken type rule:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Convert</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Convert</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Don't do this.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This example uses the input type to determine an output type, and in fact makes a decision about what the input type is.
But this decision isn&rsquo;t saved.
The problem is that <span class="stt">t</span> could be a concrete <span class="stt">int</span>, a concrete <span class="stt">float</span>, or it could be a type variable that could be unified with either!
In the first two cases this type rule is fine, but in the third case it will effectively decide that the type is an <span class="stt">int</span>, and generate a <span class="stt">float</span> child expression.
Because it doesn&rsquo;t unify and save this decision, generation in another branch of code could then unify the variable with <span class="stt">float</span>, which would then cause a type error when this type function is re-run.</p><p><div class="SIntrapara">To fix it, there are two choices.
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara">You could split <span class="stt">Convert</span> into two rules that accept one type each.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">IntToFloat</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">FloatToInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">IntToFloat</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">FloatToInt</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">float</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>This solves the problem by making the type choice explicit in the requirements to generate the conversion node in the first place.</p></li><li><p>You could save the choice in a field of the <span class="stt">Convert</span> node and re-unify in later passes.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Convert</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">outputtype</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Convert</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">it</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">outputtype</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._when%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">when</a></span><span class="hspace">&nbsp;</span><span class="RktSym">it</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">it</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-choice</span><span class="hspace">&nbsp;</span><span class="RktSym">chosen-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._when%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">when</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="hspace">&nbsp;</span><span class="RktSym">it</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._enqueue-inter-choice-transform%29%29" class="RktValLink" data-pltdoc="x">enqueue-inter-choice-transform</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rewrite-terminal</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">outputtype</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">chosen-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._cond%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-choice</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">save-choice</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></li></ul></div></p><p>Note that the complexity of the <span class="stt">Convert</span> example arises because the input type has a relationship with the output type that can&rsquo;t be expressed in terms of a construction, decomposition, or unification of types.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._fresh))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">fresh</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property determines how fresh nodes are constructed (by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span> function).</div></p><p>Acceptable values for this property are expressions which produce a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dict?</a></span> object, or expressions which produce a function of type (-&gt; dict? dict?).  Keys of the dictionary must be field names of the node being generated.  The values in the dictionary are used to fill node fields of the appropriate name.  Any field whose name is not in the dictionary will be filled by evaluating the default init-expr defined in the grammar (via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span>).</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random</span><span class="hspace">&nbsp;</span><span class="RktVal">1000</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Make AdditionExpressions always be generated with a literal 7 argument.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym">LiteralInt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>This is useful for fields that must be determined together.  For example, a function call needs the function name and the number of arguments to be chosen together rather than independently.</p><p>As with all choice-methods, <span class="RktSym">this</span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span> are available for use in expressions, which you may want to do for eg. accessing available bindings or mutable information connected to the choice object.</p><p>If the result is a procedure instead of a dictionary, that procedure must accept and return a dictionary.  It is called with a dictionary that is empty unless the node being created is the result of lifting a definition.  In that case it will have the appropriate name and type fields with the name and type chosen by the lifting mechanism.  In the case of lifting a definition, the name and type fields in the return dictionary are ignored.  This procedure option is allowed because your fresh expression may need access to the name or type to determine the values of other fields.  If a definition node only has a name and type field then a fresh property is unnecessary when lifting, and if lifting is the only way you generate definitions then fresh properties or initializers for definition nodes are unnecessary.</p><p>If the value for a field (IE values inside the result dictionary) is a procedure, it will be called with 0 arguments.  This allows the fresh property to provide a default value that is not evaluated when <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-fresh-node%29%29" class="RktStxLink" data-pltdoc="x">make-fresh-node</a></span> is called with an appropriate value.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._choice-weight))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">choice-weight</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property determines the probability that different kinds of nodes will be chosen.  When choices have been filtered (based on <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span>), one of the remaining choices is chosen at random with probability (choice-weight / sum-of-choice-weights).</div></p><p>The expression provided as the choice weight will be evaluated in the context of a method call, so <span class="RktSym">this</span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span> are available.</p><p>Choice weights should be positive integer values.  The default weight is 10 unless set explicitly.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-weight%29%29" class="RktStxLink" data-pltdoc="x">choice-weight</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"The default choice weight."</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Generate more AdditionExpressions"</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">AdditionExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MultiplicationExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">15</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Generate fewer SumExpressions"</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">SumExpression</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._depth-increase))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">depth-increase</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property defines the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_ast-depth</a> non-inheriting attribute.</div></p><p>The property accepts an expression which much evaluate to a function of one argument (the <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> AST node) which returns an integer for the depth increase.
The default is <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>.
This property is NOT inherited by subclasses.</p><p>This is useful to allow node re-use.  For example, the body of an <span class="stt">if</span> or <span class="stt">for</span> statement might be a block and have the same semantics, but you might want a block inside an <span class="stt">if</span> to only be considered a depth increase of 1, not 2.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">no-depth-if-body-is-block</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="RktValLink" data-pltdoc="x">node-subtype?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Block</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._depth-increase%29%29" class="RktStxLink" data-pltdoc="x">depth-increase</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">IfStatement</span><span class="hspace">&nbsp;</span><span class="RktSym">no-depth-if-body-is-block</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ForStatement</span><span class="hspace">&nbsp;</span><span class="RktSym">no-depth-if-body-is-block</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._wont-over-deepen))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._wont-over-deepen%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">wont-over-deepen</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The default for this property is probably what you want, so probably just be sure to add this to the extra #:properties flag of <span class="RktSym">assemble-part-specs</span>.</div></p><p>But if you want to set it:</p><p>The property accepts expressions which will evaluate to booleans (IE anything but only #f is false...), which are evaluated if the choice is made at the point where the AST is at it maximum depth.  A true value means that the choice is acceptable, false otherwise.  The default is computed by checking whether a node includes AST-node-typed fields.  If it does not it is considered atomic and therefore acceptable to choose when the AST is already at its maximum depth.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._binder-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">binder-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property is used to mark nodes that define bindings.
The property consists of a list of optional keyword arguments.
</div><div class="SIntrapara"><ul><li><p><span class="RktPn">#:name-field</span> specifies the name of a field in the node that contains the name of the definition, and defaults to <span class="stt">name</span>.</p></li><li><p><span class="RktPn">#:type-field</span> specifies the name of a field in the node that contains a type annotation for the definition, and defaults to <span class="stt">type</span>.</p></li><li><p><span class="RktPn">#:binder-style</span> must be either <span class="stt">definition</span> or <span class="stt">parameter</span>, reflecting whether the binding is a function parameter (default: <span class="stt">definition</span>).
This is used by some Xsmith analyses about higher order values.</p></li><li><p><span class="RktPn">#:lift-target?</span> defaults to <span class="RktVal">#t</span>.  When <span class="RktPn">#:lift-target?</span> is true <span class="emph">and</span> the binding style is <span class="stt">definition</span> and not <span class="stt">parameter</span> then the binder is eligible to be lifted automatically.</p></li></ul></div></p><p>Note that for a basic definition with default name fields, the property need only contain an empty list to mark that the node is in fact a binder.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">FormalParameter</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">#:binder-style</span><span class="hspace">&nbsp;</span><span class="RktSym">parameter</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Reference</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Note that when definitions are lifted automatically, the <span class="stt">name</span> and <span class="stt">type</span> fields are given automatically.
But if definition nodes are filled in normally (not via lifting), values must be provided by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._reference-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">reference-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property marks nodes that are reference nodes.
The argument for the property is a list containing:</div></p><ul><li><p>The identifier <span class="stt">read</span> or the identifier <span class="stt">write</span>, indicating whether the reference reads or writes the variable</p></li><li><p>(Optional) <span class="RktPn">#:name-field</span>:  The name of the field that stores the reference name (as an identifier).  Defaults to <span class="stt">name</span>.</p></li><li><p>(Optionaly) <span class="RktPn">#:unifies</span>:  Accepts the name of a field that the type checker unifies with respect to.  The default value, <span class="RktVal">#t</span>, unifies the node itself instead of one of its fields.  Use <span class="RktVal">#f</span> to disable automated unification for this node.  (If you disable unification, you should implement your own manually!)</p><p>If you give a field for the unification target, that field&rsquo;s type rule must NOT depend on the parent node&rsquo;s type.
Essentially, the <span class="RktPn">#:unifies</span> argument is meant for writes to any type in a node that itself has type void.</p></li></ul><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Reference</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Assignment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktPn">#:unifies</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._reference-choice-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">reference-choice-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property allows you to bias reference choice.</div></p><p><div class="SIntrapara">The property takes a function that takes three arguments:
</div><div class="SIntrapara"><ul><li><p>The node</p></li><li><p>A (potentially empty) list of <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._binding~3f%29%29" class="RktValLink" data-pltdoc="x">binding?</a></span> reference options</p></li><li><p>A boolean that tells whether lifting a new definition is an option</p></li></ul></div></p><p>The function must return one of the options, the symbol <span class="RktVal">'</span><span class="RktVal">lift</span> to lift a fresh definition, or <span class="RktVal">#f</span>.
If it returns <span class="RktVal">#f</span>, then you can&rsquo;t have a reference there, and you have to deal with that in your fuzzer.
Returning <span class="RktVal">#f</span> is probably a bad idea.
The default shouldn&rsquo;t ever return <span class="RktVal">#f</span>.
The default value biases towards choosing parameters over definitions and lexically closer bindings over far ones.</p><p>You can give different values to different nodes, but a default on <span class="RktVal">#f</span> is probably good enough?</p><p><div class="SIntrapara">Here is an example that randomly chooses any option available, that only lifts when there are no existing options:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-choice-info%29%29" class="RktStxLink" data-pltdoc="x">reference-choice-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">options</span><span class="hspace">&nbsp;</span><span class="RktSym">lift-available?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">options</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lift-available?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lift</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">options</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._binding-structure))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binding-structure%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">binding-structure</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property is used on nodes that can have binders as children.
It determines the visibility of those binders to their siblings.
Options are <span class="RktVal">'</span><span class="RktVal">serial</span> (like <span class="stt">let*</span> in scheme), <span class="RktVal">'</span><span class="RktVal">parallel</span> (like <span class="stt">let</span> in scheme), and <span class="RktVal">'</span><span class="RktVal">recursive</span> (like <span class="stt">letrec</span> in scheme).</div></p><p>If the property is not specified, <span class="RktVal">'</span><span class="RktVal">serial</span> is assumed and used as a default.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letstar</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letrec</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binding-structure%29%29" class="RktStxLink" data-pltdoc="x">binding-structure</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">parallel</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Letstar we can leave blank if we want because serial is the default.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letrec</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">recursive</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._strict-child-order~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">strict-child-order?</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Specifies that a node&rsquo;s children are guaranteed by the language to have a strict evaluation order.
The default is false.
This property is used to determine whether nodes have a dependency in their read/write/io effect conditions.
(Those conditions are set by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="RktStxLink" data-pltdoc="x">io</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._reference-info%29%29" class="RktStxLink" data-pltdoc="x">reference-info</a></span> properties.)</div></p><p>Setting this property is unnecessary, but using it allows more liberal use of references, mutation, and io effects.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._strict-child-order~3f%29%29" class="RktStxLink" data-pltdoc="x">strict-child-order?</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Most languages have some sort of sequential construct, like a block</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Block</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._mutable-container-access))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._mutable-container-access%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">mutable-container-access</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Used to specify whether a node reads or writes a mutable container.
Here &#8220;container&#8221; means any kind of record, array, list, or compound data type.
If you have any kind of mutable record, array, etc, tag the read and write nodes with this effect.</div></p><p>The property takes a list of either the identifier <span class="stt">read</span> or the identifier <span class="stt">write</span>, then an expression for the key for the kind of mutable container.
The key can be anything, but it needs to be <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span> for each access of the same container type and not <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span> for accesses to different container types.
Eg. you could use the type constructor, or just a symbol for the name of the type.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._mutable-container-access%29%29" class="RktStxLink" data-pltdoc="x">mutable-container-access</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MutableRecordGetField</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">MutableRecord</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MutableRecordSetField</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">MutableRecord</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MutableArrayReference</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">MutableArray</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">MutableArraySet</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">write</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">MutableArray</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._io))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">io</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Used to specify that a node has some kind of IO effect, such as printing or reading a volatile variable.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._io%29%29" class="RktStxLink" data-pltdoc="x">io</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Print</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._lift-predicate))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-predicate%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">lift-predicate</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property specifies a predicate for whether a definition of a given type can be lifted to a node.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letstar</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Letrec</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">definitions</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Definition</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%252A%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">*</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-predicate%29%29" class="RktStxLink" data-pltdoc="x">lift-predicate</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Allow any definition type to be lifted into the top level of a program.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Lifting a definition to Lambda's formal parameter list would require changing all calls.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Allow local variables to be lifted, except make all functions top-level.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._lift-type-~3east-binder-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-type-~3east-binder-type%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">lift-type-&gt;ast-binder-type</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">If you have more than one binding node in your language (IE via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._binder-info%29%29" class="RktStxLink" data-pltdoc="x">binder-info</a></span>) you must specify this property.
This property should be defined once for the base node (#f).
It is a mapping from the type of a desired definition (eg. int, float, int -&gt; int, ...) to the AST node type (eg. VariableDefinition, FunctionDefinition).
This is important when different kinds of definitions use different AST nodes.
Otherwise it is just boilerplate...</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">VariableDefinition</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">FunctionDefinition</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">Body</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._lift-type-~3east-binder-type%29%29" class="RktStxLink" data-pltdoc="x">lift-type-&gt;ast-binder-type</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">FunctionDefinition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">VariableDefinition</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._choice-filters-to-apply))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This property accepts a syntax list of choice-method names to use as a filter for the node type.  Generally this should be set on the greatest super node type (or <span class="RktVal">#f</span> if there is no explicit super node type in your grammar).  Each choice-method in the list is called on the choice object with no arguments.  Each rule that returns <span class="RktVal">#f</span> rules the node out as a choice for filling in a hole.</div></p><p>Uses for this include restricting where certain nodes can appear.
For example, the easiest way to create a fuzzer for a language with functions is to have a Lambda expression node.
However, some languages do not support first-class functions.
But you can still encode the fuzzer as having a lambda node that is simply restricted to only be generated as children of definition nodes, or perhaps only global definition nodes.</p><p><div class="SIntrapara">In this code snippet, we define a choice method encoding this restriction, and add it to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-choice-method%29%29" class="RktStxLink" data-pltdoc="x">add-choice-method</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">no-lambda-except-global-def</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-node-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Definition</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-node-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._current-hole%29%29" class="RktStxLink" data-pltdoc="x">current-hole</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Program</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-component</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._choice-filters-to-apply%29%29" class="RktStxLink" data-pltdoc="x">choice-filters-to-apply</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-lambda-except-global-def</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Some core methods are always applied in addition to this list, such as the method defined by the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span> property.
If you don&rsquo;t make custom filtering rules you don&rsquo;t need to specify this property.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._edit))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">edit</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="RktStxLink" data-pltdoc="x">edit</a></span> property allows program trees to be edited during program elaboration.
The main purpose of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="RktStxLink" data-pltdoc="x">edit</a></span> property is to control ordering when filling out a tree.
Xsmith doesn&rsquo;t guarantee an ordering when filling in holes, but provides the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="RktStxLink" data-pltdoc="x">edit</a></span> property to take manual control.</div></p><p>The edit property is specified as a procedure that takes the node in question and returns either <span class="RktVal">#f</span> to signify that there is no edit necessary or a thunk that performs the edit.
The returned thunk <span class="emph">must</span> perform an edit in such a way that the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="RktStxLink" data-pltdoc="x">edit</a></span> property&rsquo;s procedure will return <span class="RktVal">#f</span> in the future, or editing will loop indefinitely.
The edit property may be specified multiple times, each with a different procedure that potentially performs an edit.
If multiple edit procedures are specified, the ordering of the procedures is not guaranteed, so if an order between them is necessary, they must have their own method of signalling between them.</p><p>One way the edit property may be used to stage edits is to specify a <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._fresh%29%29" class="RktStxLink" data-pltdoc="x">fresh</a></span> property that fills nodes as bud nodes (with <span class="stt">create-ast-bud</span>), then check for that node&rsquo;s dependencies (eg. sibling nodes) in the edit property.
When the dependencies are appropriately filled, the edit property can then replace the bud node with a hole node (using <span class="stt">rewrite-subtree</span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span>) to be filled in normally.
Note that if you follow this pattern, you need to take care in other properties (such as <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span>) to check whether children are bud nodes before trying to query their attributes.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">be sure the left node is filled before the right node</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">Addition</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">l</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3d%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-ast-bud</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._edit%29%29" class="RktStxLink" data-pltdoc="x">edit</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-bud-node?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._not%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">not</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_is-hole?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">l</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rewrite-subtree</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">r</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._make-hole%29%29" class="RktStxLink" data-pltdoc="x">make-hole</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">Expression</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._render-node-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">render-node-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Xsmith provides built-in pretty printer functionality used for final program output and debugging support.  This is given as a function which takes in one argument (a node) and renders that node in whatever format you like.  Common formats include plain strings, PPrint documents, or s-expressions.  If your <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> functions don&rsquo;t return strings, then you must implement the <span class="RktPn">#:format-render</span> argument of the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> function to convert the final rendered AST to a string for pretty-printing as output.
During debugging, this property may be called on a hole instead of a filled-in node.  If this happens, Xsmith will delegate to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-hole-info%29%29" class="RktStxLink" data-pltdoc="x">render-hole-info</a></span> property, detailed below.
The rendering function is defined as the <a href="#%28part._generated-rules%29" data-pltdoc="x">xsmith_render-node</a> attribute.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-spec-component</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">node</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-node-type</span><span class="hspace">&nbsp;</span><span class="RktSym">node</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/main..rkt)._render-hole-info))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-hole-info%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">render-hole-info</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">For help with debugging, this property allows you to render holes.
By default, this function simply returns a string containing the type of the hole wrapped in angle brackets.  If you have specified a custom <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> property and that property returns some type other than a string, it is likely you will want to configure this property to return the same type.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-hole-info%29%29" class="RktStxLink" data-pltdoc="x">render-hole-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hole</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._format%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"&lt;~a&gt;"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol-%7E3estring%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol-&gt;string</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-node-type</span><span class="hspace">&nbsp;</span><span class="RktSym">hole</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Types&quot;">4.8<tt>&nbsp;</tt><a name="(part._.Types)"></a>Types</h4><p>These type constructors and other functions are largely useful for specifying the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> property.</p><p>While there are various predicates for different types, at any point in type checking you might actually have a type variable instead of a concrete type.
So if you want to check if you have a particular type (and maybe deconstruct it), you should maybe create an instance of the type you are interested in, check if it <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span>, then <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ing it if you want to deconstruct it.
Note that if you do <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span> a type variable, that unification needs to be consistent between multiple runs of type checking (since it runs multiple times as the tree is constructed).
In other words, if you randomly choose a type at any point, you need to store that type in a grammar attribute and consistently unify against it.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for types.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._fresh-type-variable))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-type-variable</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a fresh type variable.  If given no arguments it is unconstrained and can unify with any type.  Arguments can be provided, in which case the type variable is constrained to be one of the types given.
In the optional arguments, only one function type is allowed.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Unconstrained</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">float</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">float</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._fresh-subtype-of))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-subtype-of%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-subtype-of</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a fresh type variable that is constrained to be a subtype of <span class="RktVar">t</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._type-variable~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-variable~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">type-variable?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for type variables.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._can-unify~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">can-unify?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span><span class="RktVar">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether two types can be unified without actually unifying them.</div></p><p><div class="SIntrapara">Note that if <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="stt"> </span><span class="RktVar">t1</span><span class="stt"> </span><span class="RktVar">t2</span><span class="RktPn">)</span> is true, then both <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-subtype-unify?</a></span><span class="stt"> </span><span class="RktVar">t1</span><span class="stt"> </span><span class="RktVar">t2</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-subtype-unify?</a></span><span class="stt"> </span><span class="RktVar">t2</span><span class="stt"> </span><span class="RktVar">t1</span><span class="RktPn">)</span> are true, but it is NOT the case that <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-subtype-unify?</a></span><span class="stt"> </span><span class="RktVar">t1</span><span class="stt"> </span><span class="RktVar">t2</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-subtype-unify?</a></span><span class="stt"> </span><span class="RktVar">t2</span><span class="stt"> </span><span class="RktVar">t1</span><span class="RktPn">)</span> imply that <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="stt"> </span><span class="RktVar">t1</span><span class="stt"> </span><span class="RktVar">t2</span><span class="RktPn">)</span> is true!
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._unify!))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">unify!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span><span class="RktVar">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Unifies two types.  This mutates type variables so that they match other variables or types going forward.</div></p><p>If unification fails an exception is raised.  Right now a failure to unify might mean that type variables are left in a bad state, so code generation should just give up at that point.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._can-subtype-unify~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">can-subtype-unify?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">sub</span><span class="hspace">&nbsp;</span><span class="RktVar">super</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">sub</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">super</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns whether two types can be subtype-unified without actually unifying them.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._subtype-unify!))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">subtype-unify!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">sub</span><span class="hspace">&nbsp;</span><span class="RktVar">super</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">sub</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">super</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Puts two types into a subtype relationship.
This mutates type variables so that they are constrained in a lattice relationship with other type variables.</div></p><p><div class="SIntrapara">Note that
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=begin.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._begin%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">begin</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">sub</span><span class="hspace">&nbsp;</span><span class="RktVar">super</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">super</span><span class="hspace">&nbsp;</span><span class="RktVar">sub</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">is equivalent to:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">sub</span><span class="hspace">&nbsp;</span><span class="RktVar">super</span><span class="RktPn">)</span></p></blockquote></div></p><p>If unification fails an exception is raised.
A failure in unification is basically catastrophic, so no code generation should be attempted after a unification failure.</p><p>The <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span> function is used automatically during type checking to put a node&rsquo;s type in the subtype relationship with the type its parent provides it, so you probably don&rsquo;t need to use this function manually.
The <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span> function is more useful in user code.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._base-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">base-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktVar">supertype</span><span class="hspace">&nbsp;</span><span class="RktPn">#:leaf?</span><span class="hspace">&nbsp;</span><span class="RktVar">leaf?</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">supertype</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">leaf?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a base type.  Base types are the same if they are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._eq%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">eq?</a></span>.  The <span class="RktVar">name</span> field is really just for convenience in printing for debugging.</div></p><p>If <span class="RktVar">leaf?</span> is true, no subtypes of this base type can be created.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._base-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">base-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for base-types.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._base-type-name))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type-name%29%29" class="RktValDef RktValLink" data-pltdoc="x">base-type-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">bt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the name of a base type.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg-type</span><span class="hspace">&nbsp;</span><span class="RktVar">return-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">return-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a function type.
For multi-argument functions, use a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span> for the argument type.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for function types.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type-arg-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-arg-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type-arg-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the argument type.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._function-type-return-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type-return-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">function-type-return-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._function-type~3f%29%29" class="RktValLink" data-pltdoc="x">function-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the return type.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._product-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">product-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">types</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">types</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">types?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a product type (tuple).  If <span class="RktVar">types</span> is <span class="RktVal">#f</span>, the length of the tuple is unspecified, and it can be <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ed with a product type of any length.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">any-length</span><span class="hspace">&nbsp;</span><span class="RktSym">l3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._product-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">product-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for product types.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._product-type-inner-type-list))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type-inner-type-list%29%29" class="RktValDef RktValLink" data-pltdoc="x">product-type-inner-type-list</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type~3f%29%29" class="RktValLink" data-pltdoc="x">product-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the list of types in the product-type, or <span class="RktVal">#f</span> for a product-type with a length that is still unspecified.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/main..rkt)._define-generic-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-generic-type%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-generic-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">field-spec</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">field-spec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">field-name</span><span class="hspace">&nbsp;</span><span class="RktVar">variance</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">field-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">variance</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">invariant</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">covariant</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">contravariant</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Used to create generic types.</div></p><p>This form defines a constructor <span class="RktVar">name</span>, a predicate <span class="RktVar">name</span><span class="stt">?</span>, and one accessor for each type-argument <span class="RktVar">name</span><span class="stt">-</span><span class="RktSym">type-argument</span> a la <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">struct</a></span>.
If no variance is given for a field, it is invariant when subtyping.</p><p>Each instance of a generic type can be unified with other instances of the same generic.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type%29%29" class="RktValLink" data-pltdoc="x">base-type</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-generic-type%29%29" class="RktStxLink" data-pltdoc="x">define-generic-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="RktValLink" data-pltdoc="x">list-type</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktVar">covariant</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="RktValLink" data-pltdoc="x">list-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">list-type?</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-type-arguments%29%29" class="RktValLink" data-pltdoc="x">generic-type-type-arguments</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">(list number)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">list-type-type</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">number</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="RktValLink" data-pltdoc="x">list-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-subtype-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-subtype-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-subtype-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">#f</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._generic-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">generic-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns true when <span class="RktVar">t</span> is a generic type.
Not very useful, since you probably want to know if it is an instance of a specific generic.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._generic-type-name))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-name%29%29" class="RktValDef RktValLink" data-pltdoc="x">generic-type-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the name of a generic type.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._generic-type-type-arguments))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type-type-arguments%29%29" class="RktValDef RktValLink" data-pltdoc="x">generic-type-type-arguments</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the inner types of a generic type as a list.
Remember that you can&rsquo;t deconstruct type variables that are not fully constrained!</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for nominal record types.</div></p><p>Partially specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>s are created with <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type-with</a></span>.
Fully specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>s are created by using <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span> on a partially specified one.
Rather than making them manually, simply rely on Xsmith&rsquo;s definition-lifting mechanism to create appropriate fully-specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>s.</p><p>When a partially defined <span class="RktSym">nominal-record-type</span> is <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span>-ed with a fully defined <span class="RktSym">nominal-record-type</span>, the partially defined one is mutated to become the same as the fully defined one.
When two partially defined <span class="RktSym">nominal-record-type</span>s are unified together, an error is raised.</p><p>Every node in a language grammar that stands for a <span class="RktSym">nominal-record-type</span> constructor, accessor, or mutator must include a reference to a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span> containing the <span class="RktSym">nominal-record-type</span> being used.</p><p>The reason for this is that nominal types must be defined in the program.
<span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span>s are necessary because the lookups of these type names are a different type than uses of the record type that the name is bound to.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-grammar</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">VariableReference</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">StructReference</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fieldname</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">structdefref</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">VariableReference</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">structval</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">my-grammar</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">StructReference</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">type-with-field</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type-with</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">fieldname</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">structval</span><span class="hspace">&nbsp;</span><span class="RktSym">type-with-field</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">structdefref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">type-with-field</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type-with))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-with%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type-with</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">fieldname</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">fieldtype</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fieldname</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fieldtype</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a partially-specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.
Use it to specify that you want a record that contains a certain type.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._any-nominal-record-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._any-nominal-record-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">any-nominal-record-type</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Creates a completely unconstrained <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.
It will unify with any fully constrained <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type-name))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-name%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Getter for the name of a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-type-known-field-dict))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type-known-field-dict%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-type-known-field-dict</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dict?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Getter for the inner type dictionary.
If you use this on a partially-specified <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span>, you will get an incomplete dictionary.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-definition-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructor.
See note in <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span> for how it is used.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-definition-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-definition-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for nominal record definition types constructed with <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span>.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._nominal-record-definition-type-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">nominal-record-definition-type-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type~3f%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Getter for the <span class="RktSym">nominal-record-type</span> inside a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._nominal-record-definition-type%29%29" class="RktValLink" data-pltdoc="x">nominal-record-definition-type</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._structural-record-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._structural-record-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">structural-record-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool/c</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Predicate for structural record types.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._fresh-structural-record-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-structural-record-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-structural-record-type</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktVar">field-dict</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:finalized?</span><span class="hspace">&nbsp;</span><span class="RktVar">finalized?</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">field-dict</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=hashtables.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._hash%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">finalized?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Constructor for a structural record type.
If <span class="RktVar">finalized?</span> is <span class="RktVal">#f</span>, the result is variable and may have fields added during unification.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._structural-record-type-known-field-dict))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._structural-record-type-known-field-dict%29%29" class="RktValDef RktValLink" data-pltdoc="x">structural-record-type-known-field-dict</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">srt</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fhash..rkt%2529._hash%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">hash/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">srt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._structural-record-type~3f%29%29" class="RktValLink" data-pltdoc="x">structural-record-type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the field/type mapping held by <span class="RktVar">srt</span>.</div></p><p>Because this may be updated by unification, and type exploration is lazy where possible, you should use <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._force-type-exploration-for-node%21%29%29" class="RktValLink" data-pltdoc="x">force-type-exploration-for-node!</a></span> before using this on the type of any particular node.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._force-type-exploration-for-node!))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._force-type-exploration-for-node%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">force-type-exploration-for-node!</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void/c</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">ast-node?</span></td></tr></table></blockquote></div><div class="SIntrapara">Type exploration is lazy, and is only done far enough for the built-in algorithm to check whether potential fresh nodes will have appropriate types for a given hole.</div></p><p>If you need to manually inspect details of types inside <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span>, you should use this function on the node whose type is in question to be sure the returned type reflects a maximally unified view.</p><p>TODO - explain better when you need to use this.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._settled-type~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">settled-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A settled type is a type that either has no variables (a la <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-has-no-variables~3f%29%29" class="RktValLink" data-pltdoc="x">type-has-no-variables?</a></span>) or that has type variables that have been completely constrained.</div></p><p>In other words, all type variables contained in this type (including <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span>s, <span class="RktSym">nominal-record-type</span>s, and <span class="RktSym">structural-record-type</span>s) have been unified such that they only have one option, which is itself settled.
If you have a variable that is not settled and you need a settled one, you can use <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span> on the type you have.</p><p>See warnings in <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValLink" data-pltdoc="x">concretize-type</a></span> about its use!</p><p>Note that through <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span>, variables may be effectively settled without passing the <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="RktValLink" data-pltdoc="x">settled-type?</a></span> predicate.
Xsmith uses <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span> internally, so this could be an issue even if you don&rsquo;t manually use it.
When a variable is subtype-unified to be the subtype of a base type, say <span class="stt">string</span>, the variable can unify with the range (<span class="RktVal">#f</span>, <span class="stt">string</span>).
If <span class="stt">string</span> has no subtypes, then <span class="stt">string</span> is the only type it can be unified with.
However, the <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="RktValLink" data-pltdoc="x">settled-type?</a></span> function doesn&rsquo;t currently have access to the list of subtypes (because currently they can be created dynamically), so it doesn&rsquo;t know that it&rsquo;s effectively settled.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._type-has-no-variables~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-has-no-variables~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">type-has-no-variables?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">If this returns true, then <span class="RktVar">t</span> is both a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="RktValLink" data-pltdoc="x">settled-type?</a></span> AND has no type variable wrappers (IE created at some point by <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span>).
Note that it may have <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type%29%29" class="RktValLink" data-pltdoc="x">product-type</a></span>s, <span class="RktSym">nominal-record-type</span>s, and <span class="RktSym">structural-record-type</span>s, but only ones that have been settled.</div></p><p>Mostly this is just useful to tell whether you can confidently use projection functions (eg. <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._product-type-inner-type-list%29%29" class="RktValLink" data-pltdoc="x">product-type-inner-type-list</a></span>) without running into type variable wrappers.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._concretize-type))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._concretize-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">concretize-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a type that <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._can-unify~3f%29%29" class="RktValLink" data-pltdoc="x">can-unify?</a></span> with <span class="RktVar">t</span>, but that is both a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._settled-type~3f%29%29" class="RktValLink" data-pltdoc="x">settled-type?</a></span> and a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type-has-no-variables~3f%29%29" class="RktValLink" data-pltdoc="x">type-has-no-variables?</a></span>.
Note that it does <span class="emph">not</span> <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._unify%21%29%29" class="RktValLink" data-pltdoc="x">unify!</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._subtype-unify%21%29%29" class="RktValLink" data-pltdoc="x">subtype-unify!</a></span> the returned type with the input type.</div></p><p>This function can be useful if you want to generate a random type or proactively make a decision about an unsettled type you have where you need a settled, concrete type.
But beware!  You should probably NOT generate random types or unify with concretized types unless you also store them in the grammar node that represents that type.
The type-checking code defined in the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> property can be flushed and re-run many times for each node, so a node that randomly chooses its type will not be stable.
Because the type algorithm imperatively unifies types, this causes mayhem.  Don&rsquo;t do it.</p><p>Note that to use this function you must pass a value in to the <span class="RktPn">#:type-thunks</span> argument of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span>.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Miscellaneous_Utilities&quot;">4.9<tt>&nbsp;</tt><a name="(part._.Miscellaneous_.Utilities)"></a>Miscellaneous Utilities</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._fresh-int!))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-int%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-int!</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">number?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns a unique integer.  The state of the generator is reset for each program generated, so that generation is reproducible.</div></p><p><div class="SIntrapara">Basically, use this rather than using your own unique number generator.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._fresh-var-name))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-var-name%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-var-name</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">template</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">template</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a name created by appending a fresh integer to the end of <span class="RktVar">template</span>.</div></p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-var-name%29%29" class="RktValLink" data-pltdoc="x">fresh-var-name</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"variable_"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">returns the string "variable_123", or something like it.</span></p></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._enqueue-inter-choice-transform))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._enqueue-inter-choice-transform%29%29" class="RktValDef RktValLink" data-pltdoc="x">enqueue-inter-choice-transform</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">You can&rsquo;t mutate the RACR tree during attribute evaluation.
But sometimes you really want to.
At any rate, if your attribute (perhaps defined by a property) needs to save some information in the tree for future iterations (such as a type rule that proactively concretizes a type), you can use this to make tree changes between the filling of one tree hole and another.</div></p><p>In other words, if your attribute needs to use <span class="RktSym">rewrite-terminal</span>, stick that computation in a thunk, use this on it, and it will be evaluated after the current round of attribute evaluation but before the next one.</p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Debug_Logging&quot;">4.10<tt>&nbsp;</tt><a name="(part._.Debug_.Logging)"></a>Debug Logging</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xd-printf))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xd-printf%29%29" class="RktValDef RktValLink" data-pltdoc="x">xd-printf</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">format-string</span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">format-string</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._printf%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">printf</a></span>, but it prints to a buffer that is output when an exception is raised during program generation.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._datt-value))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._datt-value%29%29" class="RktValDef RktValLink" data-pltdoc="x">datt-value</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">method</span><span class="hspace">&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">method</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">node</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">ast-node?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A wrapper for RACR&rsquo;s <span class="RktSym">att-value</span> function that prints trace info using <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xd-printf%29%29" class="RktValLink" data-pltdoc="x">xd-printf</a></span>.</div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Turning_Your_Grammar_Specification_Into_a_Program&quot;">4.11<tt>&nbsp;</tt><a name="(part._.Turning_.Your_.Grammar_.Specification_.Into_a_.Program)"></a>Turning Your Grammar Specification Into a Program</h4><p>Use the <span class="RktSym">xsmith-define-interface-functions</span> macro.  This section used to have more before things were rearranged.  Maybe things should be rearranged more.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xsmith-feature-enabled~3f))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-feature-enabled~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">xsmith-feature-enabled?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">feature</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">feature</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the value set by the user via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> for the given feature.
The feature name must have been supplied to the #:features argument of <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span>, or an error will be raised.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/main..rkt)._xsmith-max-depth))"></a><span title="Provided from: xsmith | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._xsmith-max-depth%29%29" class="RktValDef RktValLink" data-pltdoc="x">xsmith-max-depth</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._number%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">number?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the maximum tree generation depth as set by the user via <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-xsmith-interface-functions%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-interface-functions</a></span> or on the command line.</div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;RACR_Convenience_Functions&quot;">4.12<tt>&nbsp;</tt><a name="(part._.R.A.C.R_.Convenience_.Functions)"></a><a name="(mod-path._xsmith/racr-convenience)"></a>RACR Convenience Functions</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._xsmith%2Fracr-convenience%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">xsmith/racr-convenience</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/xsmith" title="Install this package using `raco pkg install xsmith`"><span class="stt">xsmith</span></a></span></td></tr></table></p><p>These are a group of convenience functions around <a href="#%28part._racr%29" data-pltdoc="x">RACR</a>.
They are not necessary, and some may not be the best choices.
But I have found them a little more convenient than using certain <a href="#%28part._racr%29" data-pltdoc="x">RACR</a> APIs directly.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/racr-convenience..rkt)._expr-~3east-list))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fracr-convenience..rkt%29._expr-~3east-list%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">expr-&gt;ast-list</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">length-expression</span><span class="hspace">&nbsp;</span><span class="RktVar">field-expression</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Creates an <span class="RktSym">ast-list-node?</span> containing a list of length <span class="RktVar">length-expression</span>.
For each element of the list, <span class="RktVar">field-expression</span> is evaluated again.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._node-type))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">node-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the symbol of the type of n, or #f if n is not a proper non-bud, non-list <span class="RktSym">ast-node?</span>.</div></p><p>Wrapper for <span class="RktSym">ast-node-type</span> that returns false rather than erroring when it gets bud nodes or list nodes...</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._parent-node))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValDef RktValLink" data-pltdoc="x">parent-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Wrapper for ast-parent that returns #f rather than erroring when the given node doesn&rsquo;t have a parent.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._top-ancestor-node))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._top-ancestor-node%29%29" class="RktValDef RktValLink" data-pltdoc="x">top-ancestor-node</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Calls <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._parent-node%29%29" class="RktValLink" data-pltdoc="x">parent-node</a></span> until it reaches the last parent, and returns it.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/racr-convenience..rkt)._node-subtype~3f))"></a><span title="Provided from: xsmith/racr-convenience | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fracr-convenience..rkt%29._node-subtype~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">node-subtype?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Wrapper for <span class="RktSym">ast-subtype?</span> that returns #f rather than erroring when the given node is a bud, list, or non-node.</div></p><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;xsmith_app&quot;">4.13<tt>&nbsp;</tt><a name="(part._xsmith_app)"></a><a name="(mod-path._xsmith/app)"></a>xsmith/app</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._xsmith%2Fapp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">xsmith/app</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/xsmith" title="Install this package using `raco pkg install xsmith`"><span class="stt">xsmith</span></a></span></td></tr></table></p><p>The xsmith/app module provides a convenient <span class="stt">#%app</span> replacement for accessing attributes (AKA methods, or attributes on AST nodes) and methods (AKA choice-methods) on choice objects.</p><p>See <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html&amp;version=8.6" class="Sq" data-pltdoc="x">Procedure Applications and <span class="RktSym"><span class="RktStxLink">#%app</span></span></a> for more details on <span class="stt">#%app</span>.</p><p>Note that these bindings are <span style="font-style: italic">not</span> provided by the main <span class="stt">xsmith</span> module.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/app..rkt)._~23~25app))"></a><span title="Provided from: xsmith/app | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._~23~25app%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">#%app</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">form</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">When the first form (after the [probably implicit] <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span> identifier) is a quoted symbol, the form is treated as a method application.</div></p><p><div class="SIntrapara">In short, if the node <span class="stt">n</span> is an <span class="RktSym">ast-node?</span>, then:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">$xsmith_type</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">is essentially rewritten as:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">att-value</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">xsmith_type</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></p></blockquote></div></p><p><div class="SIntrapara">Additionally, if <span class="stt">n</span> is an <span class="RktSym">object?</span> (probably a <span class="RktSym">choice-object?</span>), then:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">$choice-method-name</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">is essentially rewritten as:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">send</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">choice-method-name</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></p></blockquote></div></p><p>In practice, whether <span class="stt">n</span> is an <span class="RktSym">ast-node?</span> or <span class="RktSym">object?</span> can&rsquo;t be determined statically, so it is tested at runtime.</p><p>If the first form is not a quoted symbol, then the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">racket/base:#%app</a></span> from is used.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/app..rkt)._define-xsmith-app))"></a><span title="Provided from: xsmith/app | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._define-xsmith-app%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-xsmith-app</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">xsmith-app-name</span><span class="hspace">&nbsp;</span><span class="RktVar">inner-app</span><span class="hspace">&nbsp;</span><span class="RktVar">prefix</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines a macro like <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._~23~25app%29%29" class="RktStxLink" data-pltdoc="x">#%app</a></span> above, but using <span class="RktVar">inner-app</span> as the fallback instead of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">racket/base:#%app</a></span>.
Use this if you want to combine the xsmith/app behavior with another customized <span class="stt">#%app</span> implementation.</div></p><p>Additionally, <span class="RktVar">prefix</span> is used instead of <span class="stt">$</span>.  <span class="RktVar">prefix</span> is given as a symbol.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fapp..rkt%29._define-xsmith-app%29%29" class="RktStxLink" data-pltdoc="x">define-xsmith-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-xsmith-app</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=application.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7E23%7E25plain-app%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">#%plain-app</a></span><span class="hspace">&nbsp;</span><span class="RktSym">$^!</span><span class="RktPn">)</span></p></blockquote><h4 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;canned-components&quot;">4.14<tt>&nbsp;</tt><a name="(part._canned-components)"></a><a name="(mod-path._xsmith/canned-components)"></a>Canned Components</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._xsmith%2Fcanned-components%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">xsmith/canned-components</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/xsmith" title="Install this package using `raco pkg install xsmith`"><span class="stt">xsmith</span></a></span></td></tr></table></p><p>The abstract grammars for many languages are very similar.
We provide a library of canned components to get fuzzers up and running quickly for languages that include common patterns.
All uses of canned components should probably start with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._define-basic-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-basic-spec-component</a></span>.</p><p>Note that <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-expressions%29%29" class="RktStxLink" data-pltdoc="x">add-basic-expressions</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-statements%29%29" class="RktStxLink" data-pltdoc="x">add-basic-statements</a></span> aren&rsquo;t good abstractions, they just facilitate some shared code of common components.  You ultimately still have to know the structure of all components added.</p><p>The canned-components also export various types that the canned grammar nodes use.
Of note, statements use two statement types: <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._return-type%29%29" class="RktValLink" data-pltdoc="x">return-type</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._no-return-type%29%29" class="RktValLink" data-pltdoc="x">no-return-type</a></span>.
The expressions use all the other provided types.</p><p>For some examples that use these canned components, see the <span class="stt">xsmith-examples/simple</span> directory.</p><p>Note that these bindings are <span style="font-style: italic">not</span> provided by the main <span class="stt">xsmith</span> module.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/canned-components..rkt)._define-basic-spec-component))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._define-basic-spec-component%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-basic-spec-component</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">grammar-component</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines the <span class="stt">grammar-component</span> using <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._define-spec-component%29%29" class="RktStxLink" data-pltdoc="x">define-spec-component</a></span>, then adds definitions for <span class="stt">Expression</span>, <span class="stt">Statement</span>, <span class="stt">Definition</span>, <span class="stt">DefinitionNoRhs</span>, and <span class="stt">FormalParameter</span>.</div></p><p>The <span class="stt">Expression</span> and <span class="stt">Statement</span> nodes have no fields and cannot be generated by the grammar, but serve as scaffolding for other productions in <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-expressions%29%29" class="RktStxLink" data-pltdoc="x">add-basic-expressions</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-statements%29%29" class="RktStxLink" data-pltdoc="x">add-basic-statements</a></span>, and your own definitions.</p><p>The <span class="stt">Definition</span>, <span class="stt">DefinitionNoRhs</span>, and <span class="stt">FormalParameter</span> nodes all have both <span class="stt">type</span> and <span class="stt">name</span> fields.
The <span class="stt">Definition</span> node also has an <span class="stt">Expression</span> field.</p><p><span class="stt">DefinitionNoRhs</span> is meant to be used in forms that implicitly add a definition to subforms, but whose definition is not necessarily of the same type as a child the definition comes from.
For example, a loop form where you bind a variable to each element of a given list.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/canned-components..rkt)._add-basic-expressions))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-expressions%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-basic-expressions</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">grammar-component</span><span class="hspace">&nbsp;</span><span class="RktVar">optional</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">optional</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ProgramWithSequence</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:VoidExpression</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:AssignmentExpression</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:IfExpression</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:LambdaWithExpression</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:LambdaWithBlock</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:LetSequential</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ExpressionSequence</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:Booleans</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:Strings</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:MutableArray</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:MutableArraySafeAssignmentExpression</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ImmutableArray</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ImmutableList</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:MutableStructuralRecord</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:MutableStructuralRecordAssignmentExpression</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ImmutableStructuralRecord</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Extends <span class="RktVar">grammar-component</span> with an expression language.
All nodes added come with <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._type-info%29%29" class="RktStxLink" data-pltdoc="x">type-info</a></span> and other necessary properties specified, but they lack the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span>.
In other words, this form gives you everything but the pretty printing for these parts of your language.</div></p><p>TODO - maybe just show the add-to-grammar segments in the lists of what is added.
For now, you really just need to look at the source of canned-components to see what it is.  It&rsquo;s not a real abstraction, but I don&rsquo;t want to tediously document all the internal names right now.</p><p>The following top-level node types are always added to the grammar:</p><ul><li><p>An abstract <span class="stt">Expression</span> node (IE <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span> is false).</p></li></ul><p>If <span class="RktPn">#:ProgramWithSequence</span> is true,
<span class="stt">(ProgramWithSequence #f ([definitions : Definition *] ExpressionSequence))</span>
is added.  Use this when your language is free from the nonsense of statements.</p><p>The following <span class="stt">Expression</span> node types are always added:</p><p>TODO - document all of the field names</p><ul><li><p><span class="stt">VariableReference</span> with <span class="stt">name</span></p></li><li><p><span class="stt">ProcedureApplication</span></p></li><li><p><span class="stt">IntLiteral</span> &ndash; uses <span class="RktSym">int</span> type</p></li><li><p><span class="stt">Plus</span></p></li><li><p><span class="stt">Minus</span></p></li><li><p><span class="stt">Times</span></p></li><li><p><span class="stt">SafeDivide</span></p></li><li><p><span class="stt">LessThan</span></p></li><li><p><span class="stt">GreaterThan</span></p></li></ul><p>Other options mostly add a single node type with the same name as the option.  The exceptions are:</p><p>TODO</p><p><div class="SIntrapara">Type considerations:
</div><div class="SIntrapara"><ul><li><p>Numeric operations provided operate on the <span class="RktSym">number</span> type.</p></li><li><p>Arrays use either <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._array-type%29%29" class="RktValLink" data-pltdoc="x">array-type</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span> or <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="RktValLink" data-pltdoc="x">immutable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._array-type%29%29" class="RktValLink" data-pltdoc="x">array-type</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></li><li><p>Structural records use either <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-structural-record-type%29%29" class="RktValLink" data-pltdoc="x">fresh-structural-record-type</a></span><span class="RktPn">)</span><span class="RktPn">)</span> or <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="RktValLink" data-pltdoc="x">immutable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-structural-record-type%29%29" class="RktValLink" data-pltdoc="x">fresh-structural-record-type</a></span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></li><li><p>Lists use <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="RktValLink" data-pltdoc="x">immutable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="RktValLink" data-pltdoc="x">list-type</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p></li></ul></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/canned-components..rkt)._add-basic-statements))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-statements%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-basic-statements</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">grammar-component</span><span class="hspace">&nbsp;</span><span class="RktVar">optional</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">optional</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ProgramWithBlock</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:AssignmentStatement</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:ExpressionStatement</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:MutableArraySafeAssignmentStatement</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:MutableStructuralRecordAssignmentStatement</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-expressions%29%29" class="RktStxLink" data-pltdoc="x">add-basic-expressions</a></span>, extends <span class="RktVar">grammar-component</span> with a statement language, providing all necessary properties except <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span>.
If you use <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-statements%29%29" class="RktStxLink" data-pltdoc="x">add-basic-statements</a></span>, you must use <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-expressions%29%29" class="RktStxLink" data-pltdoc="x">add-basic-expressions</a></span> as well.</div></p><p>TODO - maybe just show the add-to-grammar segments in the lists of what is added.
For now, you really just need to look at the source of canned-components to see what it is.  It&rsquo;s not a real abstraction, but I don&rsquo;t want to tediously document all the internal names right now.</p><p>The following node types are always added to the grammar:</p><ul><li><p>An abstract <span class="stt">Statement</span> node (IE <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._may-be-generated%29%29" class="RktStxLink" data-pltdoc="x">may-be-generated</a></span> is false).</p></li><li><p><span class="stt">ReturnStatement</span> with <span class="stt">Expression</span></p></li><li><p><span class="stt">Block</span> (a Statement subtype) with <span class="stt">definitions</span> and <span class="stt">statements</span></p></li><li><p><span class="stt">IfElseStatement</span> with <span class="stt">test</span> <span class="stt">then</span> <span class="stt">else</span></p></li></ul><p>The optional arguments add a node with the same name as the keyword.</p><p><div class="SIntrapara">Type considerations:
</div><div class="SIntrapara"><ul><li><p><span class="stt">ReturnStatement</span> is of type <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._return-type%29%29" class="RktValLink" data-pltdoc="x">return-type</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></li><li><p><span class="stt">Block</span> and <span class="stt">IfElseStatement</span> are of type <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._fresh-maybe-return-type%29%29" class="RktValLink" data-pltdoc="x">fresh-maybe-return-type</a></span><span class="RktPn">)</span></p></li><li><p><span class="stt">AssignmentStatement</span>, <span class="stt">ExpressionStatement</span>, and others are of type <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._no-return-type%29%29" class="RktValLink" data-pltdoc="x">no-return-type</a></span></p></li></ul></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>spec-property</p></div></div><p class="RForeground"><a name="(form._((lib._xsmith/canned-components..rkt)._block-user~3f))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._block-user~3f%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">block-user?</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Property for nodes that use the Block node as a child to support definition children as well as a list of statements.
When given <span class="RktVal">#t</span>, the child Block won&rsquo;t increase the calculated AST depth.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-basic-statements%29%29" class="RktStxLink" data-pltdoc="x">add-basic-statements</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-component</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:Block</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-to-grammar%29%29" class="RktStxLink" data-pltdoc="x">add-to-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktSym">my-component</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">OneArmedIfStatement</span><span class="hspace">&nbsp;</span><span class="RktSym">Statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Expression</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">then</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Block</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:prop</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._block-user~3f%29%29" class="RktStxLink" data-pltdoc="x">block-user?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._xsmith/canned-components..rkt)._add-loop-over-container))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-loop-over-container%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">add-loop-over-container</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">grammar-component</span><span class="hspace">&nbsp;</span><span class="RktVar">kw-arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">kw-arg</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVar">identifier</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:loop-ast-type</span><span class="hspace">&nbsp;</span><span class="RktVar">identifier</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:body-ast-type</span><span class="hspace">&nbsp;</span><span class="RktVar">identifier</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:bind-whole-collection?</span><span class="hspace">&nbsp;</span><span class="RktVar">boolean</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:collection-type-constructor</span><span class="hspace">&nbsp;</span><span class="RktVar">function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:loop-type-constructor</span><span class="hspace">&nbsp;</span><span class="RktVar">function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:body-type-constructor</span><span class="hspace">&nbsp;</span><span class="RktVar">function</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:loop-variable-type-constructor</span><span class="hspace">&nbsp;</span><span class="RktVar">function</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Adds a looping form named <span class="RktPn">#:name</span> to <span class="RktVar">grammar-component</span>.
The looping node will be of ast-type <span class="RktSym">loop-ast-type</span>, which defaults to <span class="stt">Expression</span>.
The looping node will have 3 children:
</div><div class="SIntrapara"><ul><li><p><span class="stt">collection</span> - if <span class="RktPn">#:bind-whole-collection?</span> is <span class="RktVal">#t</span>, it will be of AST node type <span class="stt">Definition</span>, otherwise it will be of AST node type <span class="stt">Expression</span> (the default).  This represents the collection to be looped over, and the <span class="RktPn">#:bind-whole-collection?</span> is a convenience to make references to the whole collection available.</p></li><li><p><span class="stt">elemname</span> - of AST node type <span class="stt">DefinitionNoRhs</span> which itself has <span class="stt">name</span> and <span class="stt">type</span> fields but no <span class="stt">Expression</span> field.  This node represents the binding to an element of the list in each iteration of the body.</p></li><li><p><span class="stt">body</span> - of AST node type <span class="RktSym">body-ast-type</span>, which defaults to <span class="stt">Expression</span>.  Changing this is useful to make loops whose body is a <span class="stt">Statement</span> or <span class="stt">Block</span>.</p></li></ul></div></p><p>The <span class="RktPn">#:collection-type-constructor</span> should be a function from the type inside the collection to the type of the collection.</p><p>The <span class="RktPn">#:loop-type-constructor</span> should be a function from the type inside the collection to the type of the whole loop.
By default <span class="RktPn">#:loop-type-constructor</span> is the same as <span class="RktPn">#:collection-type-constructor</span>, which corresponds to a loop that forms a comprehension form with a result (similar to Racket&rsquo;s <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=for.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._for%252Flist%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">for/list</a></span> form).
However, common values for <span class="RktPn">#:loop-type-constructor</span> include <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">elem-type</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._void-type%29%29" class="RktValLink" data-pltdoc="x">void-type</a></span><span class="RktPn">)</span> for loop expressions that only side-effect, or <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">elem-type</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._fresh-maybe-return-type%29%29" class="RktValLink" data-pltdoc="x">fresh-maybe-return-type</a></span><span class="RktPn">)</span><span class="RktPn">)</span> for loops in those silly statement languages.</p><p>The <span class="RktPn">#:body-type-constructor</span> should be a function from the loop type and the element type to the type of the loop body.
By default <span class="RktPn">#:body-type-constructor</span> returns the element type, but for side-effectful loops and/or statement-bodied loops it should be something else.
For example, a statement-bodied loop should have <span class="RktPn">#:body-type-constructor</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">loop-type</span><span class="stt"> </span><span class="RktSym">elem-type</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">loop-type</span><span class="RktPn">)</span>.</p><p>The <span class="RktPn">#:loop-variable-type-constructor</span> should be a function from the type inside the collection to the type of the loop variable.
By default this is the identity function.
However, you can override this to make a loop over a container where the loop variable is, say, an integer that indexes the collection rather than an element of the collection.
The details of how you make the bound name match the type are essentially up to the <span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span> rules you write.</p><p>Most keyword arguments are optional, but <span class="RktPn">#:name</span> is required.</p><p><div class="SIntrapara">Example:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fcanned-components..rkt%29._add-loop-over-container%29%29" class="RktStxLink" data-pltdoc="x">add-loop-over-container</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">python-comp</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Sure, Python calls them lists, but my type system calls them arrays.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktSym">ArrayComprehension</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">#:collection-type-constructor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">elem-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._array-type%29%29" class="RktValLink" data-pltdoc="x">array-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">elem-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._add-property%29%29" class="RktStxLink" data-pltdoc="x">add-property</a></span><span class="hspace">&nbsp;</span><span class="RktSym">python-comp</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28form._%28%28lib._xsmith%2Fmain..rkt%29._render-node-info%29%29" class="RktStxLink" data-pltdoc="x">render-node-info</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ArrayComprehension</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h-append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktVal">"["</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">body</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktVal">" for "</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">elemname</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktVal">" in "</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">$xsmith_render-node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast-child</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">collection</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">text</span><span class="hspace">&nbsp;</span><span class="RktVal">"]"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/canned-components..rkt)._return-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._return-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">return-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A type used for statements in return position.</div></p><p>This is used to encode where a return statement is needed and what type it must be.
In other words, the block in a <span class="stt">LambdaWithBlock</span> has <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._return-type%29%29" class="RktValLink" data-pltdoc="x">return-type</a></span>, the last statement in the block is unified to have the same type.</p><p>For the curious, it is implemented as a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span> with a covariant inner type.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._no-return-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._no-return-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">no-return-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A type for statements that don&rsquo;t return.  In other words, it&rsquo;s <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._void-type%29%29" class="RktValLink" data-pltdoc="x">void-type</a></span> for statements.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/canned-components..rkt)._fresh-maybe-return-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._fresh-maybe-return-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">fresh-maybe-return-type</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Use this for compound statements that can optionally contain a return statement.</div></p><p>IE <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._return-type%29%29" class="RktValLink" data-pltdoc="x">return-type</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._no-return-type%29%29" class="RktValLink" data-pltdoc="x">no-return-type</a></span><span class="RktPn">)</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._void-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._void-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">void-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A void type.  Used by <span class="stt">AssignmentExpression</span> and the like.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._number-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._number-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">number-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._int-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._int-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">int-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Subtype of <span class="RktSym">number</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._float-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._float-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">float-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Subtype of <span class="RktSym">number</span>
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._bool-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._bool-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">bool-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._xsmith/canned-components..rkt)._string-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._string-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">string-type</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._base-type~3f%29%29" class="RktValLink" data-pltdoc="x">base-type?</a></span></p></blockquote></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/canned-components..rkt)._mutable))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValDef RktValLink" data-pltdoc="x">mutable</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Used for encoding mutable versions of types.
Eg. canned components provide <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._array-type%29%29" class="RktValLink" data-pltdoc="x">array-type</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._fresh-type-variable%29%29" class="RktValLink" data-pltdoc="x">fresh-type-variable</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span> and similar.</div></p><p><div class="SIntrapara">It is implemented as a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span> with a covariant inner type.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/canned-components..rkt)._immutable))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="RktValDef RktValLink" data-pltdoc="x">immutable</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Used for encoding immutable versions of types, much like <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/canned-components..rkt)._array-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._array-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">array-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructor for array types.
Implemented as a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span> with a covariant inner type.
The canned components only use this wrapped in <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="RktValLink" data-pltdoc="x">immutable</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._xsmith/canned-components..rkt)._list-type))"></a><span title="Provided from: xsmith/canned-components | Package: xsmith"><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._list-type%29%29" class="RktValDef RktValLink" data-pltdoc="x">list-type</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Constructor for list types.
Implemented as a <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fmain..rkt%29._generic-type~3f%29%29" class="RktValLink" data-pltdoc="x">generic-type?</a></span> with a covariant inner type.
The canned components only use this wrapped in <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._mutable%29%29" class="RktValLink" data-pltdoc="x">mutable</a></span> or <span class="RktSym"><a href="#%28def._%28%28lib._xsmith%2Fcanned-components..rkt%29._immutable%29%29" class="RktValLink" data-pltdoc="x">immutable</a></span>.</div></p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Acknowledgments&quot;">5<tt>&nbsp;</tt><a name="(part._.Acknowledgments)"></a>Acknowledgments</h3><p>This material is based upon work supported by the National Science
Foundation under Grant Number 1527638.
Any opinions, findings, and conclusions or recommendations expressed in this
material are those of the author(s) and do not necessarily reflect the views of
the National Science Foundation.</p><h3 x-source-module="(lib &quot;xsmith/scribblings/xsmith.scrbl&quot;)" x-source-pkg="xsmith" x-part-tag="&quot;Code_and_License&quot;">6<tt>&nbsp;</tt><a name="(part._.Code_and_.License)"></a>Code and License</h3><p>The code is available
<a href="https://gitlab.flux.utah.edu/xsmith/xsmith">at the University of
Utah Flux Research Group&rsquo;s GitLab server</a>.</p><p>Xsmith is Copyright (c) 2016&ndash;2020 The University of Utah.</p><p>Xsmith is distributed under the following license, which is often called
the &ldquo;BSD License.&rdquo;</p><p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p><ul><li><p>Redistributions of source code must retain the above copyright notice,
this list of conditions and the following disclaimer.</p></li><li><p>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</p></li></ul><p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &ldquo;AS IS&rdquo;
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<span class="nonavigation">&larr; prev</span>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/xsmith/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:07:26 GMT -->
</html>