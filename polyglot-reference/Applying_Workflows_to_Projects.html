<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/polyglot-reference/Applying_Workflows_to_Projects.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Applying Workflows to Projects</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Polyglot:<span class="mywbr"> &nbsp;</span> API Reference</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Projects.html" class="tocviewlink" data-pltdoc="x">Projects</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Workflows.html" class="tocviewlink" data-pltdoc="x">Workflows</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Applying Workflows to Projects</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Contributions.html" class="tocviewlink" data-pltdoc="x">Contributions</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Applying Workflows to Projects</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._polyglot_builds%29" class="tocviewlink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>builds</span></a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._polyglot_.C.L.I%29" class="tocviewlink" data-pltdoc="x"><span class="stt">polyglot</span> CLI</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._polyglot_builds%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>builds</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-workflow-object%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>polyglot-<wbr></wbr>workflow-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._build-polyglot-project%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">build-<wbr></wbr>polyglot-<wbr></wbr>project!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-builder%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>polyglot-<wbr></wbr>builder</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._polyglot-live~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">polyglot-<wbr></wbr>live?</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._polyglot_.C.L.I%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot</span> CLI</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#%28part._polyglot_start__.Start_a_.Project%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot start</span>:<span class="mywbr"> &nbsp;</span> Start a Project</a></td></tr><tr><td><span class="tocsublinknumber">3.2.2<tt>&nbsp;</tt></span><a href="#%28part._polyglot_build__.Build_a_.Project_.Once%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot build</span>:<span class="mywbr"> &nbsp;</span> Build a Project Once</a></td></tr><tr><td><span class="tocsublinknumber">3.2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Specifying_a_.Directory%29" class="tocsubseclink" data-pltdoc="x">Specifying a Directory</a></td></tr><tr><td><span class="tocsublinknumber">3.2.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Specifying_an_.Asset_.File%29" class="tocsubseclink" data-pltdoc="x">Specifying an Asset File</a></td></tr><tr><td><span class="tocsublinknumber">3.2.3<tt>&nbsp;</tt></span><a href="#%28part._polyglot_develop__.Build_a_.Project_.Live%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot develop</span>:<span class="mywbr"> &nbsp;</span> Build a Project Live</a></td></tr><tr><td><span class="tocsublinknumber">3.2.4<tt>&nbsp;</tt></span><a href="#%28part._polyglot_demo__.Build_.Demo_.Project%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot demo</span>:<span class="mywbr"> &nbsp;</span> Build Demo Project</a></td></tr><tr><td><span class="tocsublinknumber">3.2.5<tt>&nbsp;</tt></span><a href="#%28part._polyglot_publish__.Publish_to_.S3%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot publish</span>:<span class="mywbr"> &nbsp;</span> Publish to S3</a></td></tr><tr><td><span class="tocsublinknumber">3.2.5.1<tt>&nbsp;</tt></span><a href="#%28part._.Assumptions%29" class="tocsubseclink" data-pltdoc="x">Assumptions</a></td></tr><tr><td><span class="tocsublinknumber">3.2.5.2<tt>&nbsp;</tt></span><a href="#%28part._.Process%29" class="tocsubseclink" data-pltdoc="x">Process</a></td></tr><tr><td><span class="tocsublinknumber">3.2.6<tt>&nbsp;</tt></span><a href="#%28part._.Shared_.Command_.Options%29" class="tocsubseclink" data-pltdoc="x">Shared Command Options</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Workflows.html" title="backward to &quot;2 Workflows&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Polyglot: API Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Contributions.html" title="forward to &quot;4 Contributions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Applying_Workflows_to_Projects&quot;">3<tt>&nbsp;</tt><a name="(part._.Applying_.Workflows_to_.Projects)"></a>Applying Workflows to Projects</h3><p>You may apply a <a href="Workflows.html#%28tech._workflow%29" class="techoutside" data-pltdoc="x"><span class="techinside">workflow</span></a> to a <a href="Projects.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">project</span></a> programmatically
using <a href="#%28mod-path._polyglot%2Fbuilds%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/builds</span></a>, or manually using the
<span class="stt">polyglot</span> CLI.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_builds&quot;">3.1<tt>&nbsp;</tt><a name="(part._polyglot_builds)"></a><a name="(mod-path._polyglot/builds)"></a><span class="stt">polyglot/builds</span></h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._polyglot%2Fbuilds%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/builds</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot-lib" title="Install this package using `raco pkg install polyglot-lib`"><span class="stt">polyglot-lib</span></a></span></td></tr></table></p><p>The following procedures apply <a href="Workflows.html#%28tech._workflow%29" class="techoutside" data-pltdoc="x"><span class="techinside">workflows</span></a> to <a href="Projects.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">projects</span></a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top" colspan="3"><span class="RktPn">(</span><a name="(def._((lib._polyglot/builds..rkt)._make-polyglot-workflow-object))"></a><span title="Provided from: polyglot/builds | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-workflow-object%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-polyglot-workflow-object</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">project</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:live?</span><span class="hspace">&nbsp;</span><span class="RktVar">live?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:forced-workflow</span><span class="hspace">&nbsp;</span><span class="RktVar">forced-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:fallback-workflow</span><span class="hspace">&nbsp;</span><span class="RktVar">fallback-workflow</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._is-a%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">project</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._is-a%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fprojects..rkt%29._polyglot-project~25%29%29" class="RktValLink" data-pltdoc="x">polyglot-project%</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">live?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">forced-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._subclass%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">subclass?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">fallback-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._subclass%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">subclass?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">This is a factory function that returns a new instance of a workflow class.
During instantiation, <span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._polyglot-project-directory%29%29" class="RktValLink" data-pltdoc="x">polyglot-project-directory</a></span> equals <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._get-field%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">get-field</a></span><span class="stt"> </span><span class="RktSym">directory</span><span class="stt"> </span><span class="RktVar">project</span><span class="RktPn">)</span>.</div></p><p>The factory will use the first class available among the following expressions:</p><ol><li><p><span class="RktVar">forced-workflow</span></p></li><li><p><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="stt"> </span><span class="RktVar">project</span><span class="stt"> </span><span class="RktSym">get-workflow-class</span><span class="stt"> </span><span class="RktPn">#:live?</span><span class="stt"> </span><span class="RktVar">live?</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="stt"> </span><span class="RktVar">fallback-workflow</span><span class="RktPn">)</span><span class="RktPn">)</span></p></li></ol><p>If no class is found, the procedure will raise <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/builds..rkt)._build-polyglot-project!))"></a><span title="Provided from: polyglot/builds | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._build-polyglot-project%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">build-polyglot-project!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">project</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">compiler</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:changed</span><span class="hspace">&nbsp;</span><span class="RktVar">changed</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:removed</span><span class="hspace">&nbsp;</span><span class="RktVar">removed</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym">dict?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">project</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._is-a%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fprojects..rkt%29._polyglot-project~25%29%29" class="RktValLink" data-pltdoc="x">polyglot-project%</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">compiler</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._is-a%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">changed</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">removed</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Equivalent to</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._polyglot-project-directory%29%29" class="RktValLink" data-pltdoc="x">polyglot-project-directory</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._get-field%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">get-field</a></span><span class="hspace">&nbsp;</span><span class="RktSym">directory</span><span class="hspace">&nbsp;</span><span class="RktVar">project</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=when_unless.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._unless%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">unless</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._dist-rel%29%29" class="RktValLink" data-pltdoc="x">dist-rel</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">project</span><span class="hspace">&nbsp;</span><span class="RktSym">ensure-empty-distribution!</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">compiler</span><span class="hspace">&nbsp;</span><span class="RktSym">compile!</span><span class="hspace">&nbsp;</span><span class="RktPn">#:changed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">keep</span><span class="hspace">&nbsp;</span><span class="RktVar">changed</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:remove</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">keep</span><span class="hspace">&nbsp;</span><span class="RktVar">removed</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>where <span class="RktSym">keep</span> is a function that filters out any paths that are
not asset paths in <span class="RktSym">project</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/builds..rkt)._make-polyglot-builder))"></a><span title="Provided from: polyglot/builds | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-builder%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-polyglot-builder</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">project-directory</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:cycle-after</span><span class="hspace">&nbsp;</span><span class="RktVar">cycle-after</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:forced-workflow</span><span class="hspace">&nbsp;</span><span class="RktVar">forced-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:fallback-workflow</span><span class="hspace">&nbsp;</span><span class="RktVar">fallback-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:entry-assets</span><span class="hspace">&nbsp;</span><span class="RktVar">entry-assets</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:gc-request</span><span class="hspace">&nbsp;</span><span class="RktVar">gc-request</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%252A%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span>*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">#:changed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:removed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">dict?</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">project-directory</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fprojects..rkt%29._useable-polyglot-directory~3f%29%29" class="RktValLink" data-pltdoc="x">useable-polyglot-directory?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cycle-after</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-positive-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-positive-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">100</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">forced-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._subclass%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">subclass?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">fallback-workflow</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._subclass%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">subclass?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">#f</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">entry-assets</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unclear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unclear/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"index.md"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">gc-request</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">major</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">minor</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">incremental</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">major</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a builder procedure that supports ongoing builds of the project located at
<span class="RktVar">project-directory</span>. The procedure uses
<span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-workflow-object%29%29" class="RktValLink" data-pltdoc="x">make-polyglot-workflow-object</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._build-polyglot-project%21%29%29" class="RktValLink" data-pltdoc="x">build-polyglot-project!</a></span> for
you.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktVar">project-directory</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._build-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">build-path</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"my-project"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">build!</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-builder%29%29" class="RktValLink" data-pltdoc="x">make-polyglot-builder</a></span><span class="hspace">&nbsp;</span><span class="RktVar">project-directory</span><span class="hspace">&nbsp;</span><span class="RktPn">#:entry-assets</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"index.md"</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">asset-paths</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">names</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">el</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._build-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">build-path</a></span><span class="hspace">&nbsp;</span><span class="RktVar">project-directory</span><span class="hspace">&nbsp;</span><span class="RktVal">"assets"</span><span class="hspace">&nbsp;</span><span class="RktSym">el</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">names</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">build!</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">build!</span><span class="hspace">&nbsp;</span><span class="RktPn">#:changed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">asset-paths</span><span class="hspace">&nbsp;</span><span class="RktVal">"contact.md"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">build!</span><span class="hspace">&nbsp;</span><span class="RktPn">#:removed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">asset-paths</span><span class="hspace">&nbsp;</span><span class="RktVal">"junk.md"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:changed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">asset-paths</span><span class="hspace">&nbsp;</span><span class="RktVal">"about.md"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">...</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Beware that live builds may not work as expected if you load a
project&rsquo;s <span class="stt">.polyglotrc.rkt</span> file on your own without reload support (See
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=interactive.html%23%2528def._%2528%2528lib._racket%252Frerequire..rkt%2529._dynamic-rerequire%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-rerequire</a></span>). To be safe and avoid confusion, use only the
procedures in <a href="Projects.html#%28mod-path._polyglot%2Fprojects%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/projects</span></a> or
<a href="#%28mod-path._polyglot%2Fbuilds%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/builds</span></a> to handle workflows.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara"><span class="RktVar">forced-workflow</span> and <span class="RktVar">fallback-workflow</span> work as they do
in <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-workflow-object%29%29" class="RktValLink" data-pltdoc="x">make-polyglot-workflow-object</a></span>. <span class="RktPn">#:live?</span> is always set to
<span class="RktVal">#t</span> when using <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._make-polyglot-builder%29%29" class="RktValLink" data-pltdoc="x">make-polyglot-builder</a></span>.</div></p><p><span class="RktPn">#:changed</span> and <span class="RktPn">#:removed</span> assets are <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span>
names for parity with <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._build-polyglot-project%21%29%29" class="RktValLink" data-pltdoc="x">build-polyglot-project!</a></span>. On the other
hand, whenever the builder procedure creates a workflow object
<span class="RktSym">W</span>, it will stage each <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unclear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unclear/c</a></span> asset name
<span class="RktSym">A</span> in <span class="RktVar">entry-assets</span> for processing using <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="stt"> </span><span class="RktSym">W</span><span class="stt"> </span><span class="RktSym">add!</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="stt"> </span><span class="RktSym">W</span><span class="stt"> </span><span class="RktSym">clarify</span><span class="stt"> </span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span> (See <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span>). By a
default convention, <span class="RktVal">"index.md"</span> is the <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unclear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unclear/c</a></span> name
of the initial page of any Polyglot project. You will not be able to
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528meth._%2528%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529._add%2521%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add!</a></span> additional assets to the compiler
except through the workflow implementation.</p><p>If <span class="RktVar">cycle-after</span> is a positive integer, then after every
<span class="RktVar">cycle-after</span> builds the compiler will be replaced with a fresh
instance. <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=garbagecollection.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._collect-garbage%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">collect-garbage</a></span><span class="stt"> </span><span class="RktVar">gc-request</span><span class="RktPn">)</span> will follow. This counteracts
entropy on the underlying dependency graph during work, reducing the odds of
surprises during long work sessions at the cost of periodic rebuilds. It also
limits memory consumption for some expensive builds. To disable this feature,
set <span class="RktVar">cycle-after</span> to <span class="RktVal">#f</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/builds..rkt)._polyglot-live~3f))"></a><span title="Provided from: polyglot/builds | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbuilds..rkt%29._polyglot-live~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">polyglot-live?</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._parameter%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parameter/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">When <span class="RktVal">#t</span>, you may assume that the end user expects an ongoing
build. The <span class="stt">polyglot develop</span> CLI command sets this to <span class="RktVal">#t</span>
immediately.</div></p><p>If you are writing your own build service using polyglot, set this to
<span class="RktVal">#t</span> before instantiating any workflow class. Check this value
if you are writing a workflow that behaves differently during live
builds, such as kicking off a development server.</p><p>While it is possible to set this to <span class="RktVal">#f</span> within the dynamic
extent of a workflow that applies other workflows in an opinionated
way, be sure you understand the consequences of doing so.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_CLI&quot;">3.2<tt>&nbsp;</tt><a name="(part._polyglot_.C.L.I)"></a><span class="stt">polyglot</span> CLI</h4><p>To simplify use, Polyglot comes with a <span class="stt">polyglot</span> CLI that acts as a
front-end to the <a href="index.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot</span></a> collection. You can also use <span class="stt">raco
polyglot</span> for backwards compatibility.</p><p>The <span class="stt">build</span>, <span class="stt">demo</span> and <span class="stt">develop</span> commands forward events
from <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Logging.html%23%2528def._%2528%2528lib._unlike-assets%252Flogging..rkt%2529._unlike-assets-logger%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-assets-logger</a></span> to STDOUT. The <span class="stt">build</span> and
<span class="stt">demo</span> commands report the number of warnings and errors
encountered during processing.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_start__Start_a_Project&quot;">3.2.1<tt>&nbsp;</tt><a name="(part._polyglot_start__.Start_a_.Project)"></a><span class="stt">polyglot start</span>: Start a Project</h5><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot start -f my-functional-website</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot start my-imperative-website</span></p></td></tr></table></p><p>The <span class="stt">start</span> command creates a project directory with the given name
in the working directory. By default, the project will use
<span class="RktSym"><a href="Workflows.html#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span> and include some supported starter
code. If you specify <span class="RktInBG"><span class="hspace"></span><span class="RktIn">-f</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--functional</span><span class="hspace"></span></span>, the
project will reflect use of <span class="RktSym"><a href="Workflows.html#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/functional%</a></span> instead.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_build__Build_a_Project_Once&quot;">3.2.2<tt>&nbsp;</tt><a name="(part._polyglot_build__.Build_a_.Project_.Once)"></a><span class="stt">polyglot build</span>: Build a Project Once</h5><p>The <span class="stt">build</span> command accepts a path as an argument and attempts to
build a project using a workflow. If a workflow cannot be determined,
the <span class="stt">build</span> command will try to use <span class="RktSym"><a href="Workflows.html#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span>
for backwards-compatibility reasons. If the path is a relative path,
it will be converted to a complete path relative to the current
working directory.</p><p>The behavior will vary slightly if you specify a directory or a file.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Specifying_a_Directory&quot;">3.2.2.1<tt>&nbsp;</tt><a name="(part._.Specifying_a_.Directory)"></a>Specifying a Directory</h5><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot build my-website</span></p></td></tr></table></p><p>When you specify a directory, the <span class="stt">build</span> command will try to
require <span class="RktSym">polyglot+%</span> from <span class="stt">my-website/.polyglotrc.rkt</span>,
falling back to <span class="RktSym"><a href="Workflows.html#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span> on failure. It will then
instantiate the selected workflow class, and start processing
from <span class="stt">my-website/assets/index.md</span>.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Specifying_an_Asset_File&quot;">3.2.2.2<tt>&nbsp;</tt><a name="(part._.Specifying_an_.Asset_.File)"></a>Specifying an Asset File</h5><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot build my-website/assets/styles/styles.css</span></p></td></tr></table></p><p>When you specify a file, the <span class="stt">build</span> command will require
<span class="RktSym">polyglot+%</span> from the <span class="stt">.polyglotrc.rkt</span> in the nearest
project directory, falling back to <span class="RktSym"><a href="Workflows.html#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span> on
failure. It will then instantiate the selected workflow class, and
start processing from the asset specified in the command line.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_develop__Build_a_Project_Live&quot;">3.2.3<tt>&nbsp;</tt><a name="(part._polyglot_develop__.Build_a_.Project_.Live)"></a><span class="stt">polyglot develop</span>: Build a Project Live</h5><p>The <span class="stt">develop</span> command builds a project once, then rebuilds your
website in response to changes in assets detected using
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=file-watchers&amp;rel=index.html%23%2528def._%2528%2528lib._file-watchers%252Fmain..rkt%2529._robust-watch%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">robust-watch</a></span>. It will stop when you press Control-C.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot develop my-website</span></p></td></tr></table></p><p>The <span class="stt">develop</span> command will also start a local development server
unless <span class="stt">-n</span> or <span class="stt">-</span><span class="stt">-no-server</span> is specified. You can also
set a port using <span class="stt">-p</span>/<span class="stt">-</span><span class="stt">-port</span>, or use the default of
<span class="RktVal">8080</span>.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot develop -p 6790 my-website</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot develop -n my-website # Server won't start</span></p></td></tr></table></p><p>The process that monitors and rebuilds assets operates independently of the
server. If you do not start the development server, the <span class="stt">develop</span> command
will still rebuild assets in response to changes.</p><p>The rules for how the <span class="stt">develop</span> command treats paths are the same
as the <span class="stt">build</span> command.</p><p>You can specify a delay, in milliseconds, that must elapse after the last
detected change in assets before the command tries rebuilding your site. By
default, this is 500 milliseconds. You can use this to aggregate changes and
avoid triggering too many builds when saving changes rapidly in your project.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot develop --delay 1000 my-website</span></p></td></tr></table></p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_demo__Build_Demo_Project&quot;">3.2.4<tt>&nbsp;</tt><a name="(part._polyglot_demo__.Build_.Demo_.Project)"></a><span class="stt">polyglot demo</span>: Build Demo Project</h5><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot demo</span></p></td></tr></table></p><p>The <span class="stt">demo</span> command is a special case of <span class="stt">build</span> that targets the README
from Polyglot&rsquo;s own source code. The distribution directory will appear in
the working directory. This command is meant to verify that a Polyglot
installation is supported on the target platform and is working as intended.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_publish__Publish_to_S3&quot;">3.2.5<tt>&nbsp;</tt><a name="(part._polyglot_publish__.Publish_to_.S3)"></a><span class="stt">polyglot publish</span>: Publish to S3</h5><p>The <span class="stt">publish</span> command builds a project once, then writes the
contents of a project&rsquo;s <a href="Projects.html#%28tech._distribution._directory%29" class="techoutside" data-pltdoc="x"><span class="techinside">distribution directory</span></a> to an AWS S3
bucket. The rules for how the <span class="stt">publish</span> command treats paths are
the same as the <span class="stt">build</span> command.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot publish my-website my-bucket</span></p></td></tr></table></p><p>Before you use this command, <span style="font-weight: bold">read this entire section.</span> If you
do not agree with ANY of it, then use the AWS CLI or the
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=aws&amp;rel=S3__Storage_.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">aws/s3</span></a> library to publish your website.</p><p>Use the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">-d</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--dry-run</span><span class="hspace"></span></span> switch to
avoid writing content to S3 and instead merely report
what the command would otherwise do to the bucket.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot publish -d my-website my-bucket</span></p></td></tr></table></p><p>Use the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">-r</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--region</span><span class="hspace"></span></span> switch to
change the applicable S3 region.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot publish -r us-east-2 my-website my-bucket</span></p></td></tr></table></p><p>Use the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--delete-diff</span><span class="hspace"></span></span> switch to delete all objects in the S3
bucket that are not part of the distribution uploaded to the
bucket. Most people won&rsquo;t need this.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot publish --delete-diff my-website my-bucket</span></p></td></tr></table></p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Assumptions&quot;">3.2.5.1<tt>&nbsp;</tt><a name="(part._.Assumptions)"></a>Assumptions</h5><ul><li><p>The bucket is configured for static web hosting.</p></li><li><p>HTML files should never be cached.</p></li><li><p>All other files should be cached forever.</p></li></ul><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Process&quot;">3.2.5.2<tt>&nbsp;</tt><a name="(part._.Process)"></a>Process</h5><ol><li><p>Authenticate against AWS with <span class="RktSym">read-keys/aws-cli</span>.</p></li><li><p>Read all keys in the bucket and compare them to the local contents of the dist directory. Remember the elements that are remote but not local.</p></li><li><p>Uploads the contents of the dist directory to the root of the bucket, overwriting any objects that already exist.</p></li><li><p>If <span class="RktSym"><span class="nobreak">--d</span>elete-diff</span> is set on the command, delete from the bucket the objects marked in Step 2.</p></li></ol><p><span style="font-weight: bold">If you want to ensure no broken links, then do not ever use
<span class="RktSym"><span class="nobreak">--d</span>elete-diff</span></span>. You&rsquo;ll only want to use that option if the
space savings and hygiene are actually worth it, and if
<span style="font-style: italic">everything</span> in the bucket that you need for your website is
produced by a Polyglot build.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Shared_Command_Options&quot;">3.2.6<tt>&nbsp;</tt><a name="(part._.Shared_.Command_.Options)"></a>Shared Command Options</h5><p>Some command-line flags may be specified after <span class="stt">polyglot</span> but
before a subcommand.</p><p>Use the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">-v</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--verbose</span><span class="hspace"></span></span> option to include debug
level events from <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Logging.html%23%2528def._%2528%2528lib._unlike-assets%252Flogging..rkt%2529._unlike-assets-logger%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-assets-logger</a></span> in STDOUT.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot -v build some-site</span></p></td></tr></table></p><p>Use the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">-b</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">--by-module</span><span class="hspace"></span></span> option with a path
to a Racket module to forcibly use that module in place of a project&rsquo;s
<span class="stt">.polyglotrc.rkt</span>.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">$ polyglot -b /etc/polyglot.d/shared-config.rkt build some-site</span></p></td></tr></table></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Workflows.html" title="backward to &quot;2 Workflows&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Polyglot: API Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Contributions.html" title="forward to &quot;4 Contributions&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/polyglot-reference/Applying_Workflows_to_Projects.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
</html>