<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Mirrored from docs.racket-lang.org/polyglot-reference/Workflows.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2&nbsp;Workflows</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="../local-redirect/local-redirect.js"></script><script type="text/javascript" src="../local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Polyglot:<span class="mywbr"> &nbsp;</span> API Reference</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Projects.html" class="tocviewlink" data-pltdoc="x">Projects</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Workflows</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Applying_Workflows_to_Projects.html" class="tocviewlink" data-pltdoc="x">Applying Workflows to Projects</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Contributions.html" class="tocviewlink" data-pltdoc="x">Contributions</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="#" class="tocviewselflink" data-pltdoc="x">Workflows</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Built-.In_.Workflows%29" class="tocviewlink" data-pltdoc="x">Built-<wbr></wbr>In Workflows</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._polyglot_txexpr__.Workflows_from_.Scratch%29" class="tocviewlink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>txexpr</span>:<span class="mywbr"> &nbsp;</span> Workflows from Scratch</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._polyglot_elements%29" class="tocviewlink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>elements</span></a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Built-.In_.Workflows%29" class="tocsubseclink" data-pltdoc="x">Built-<wbr></wbr>In Workflows</a></td></tr><tr><td><span class="tocsublinknumber">2.1.1<tt>&nbsp;</tt></span><a href="#%28part._polyglot_base%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>base</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">polyglot/<span class="mywbr"> &nbsp;</span>base%</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29._clarify%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">clarify</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29._delegate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">delegate</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._make-minimal-html-page%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>minimal-<wbr></wbr>html-<wbr></wbr>page</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._add-dependencies%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">add-<wbr></wbr>dependencies!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.1.2<tt>&nbsp;</tt></span><a href="#%28part._polyglot_imperative%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>imperative</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">polyglot/<span class="mywbr"> &nbsp;</span>imperative%</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29._delegate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">delegate</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29._preprocess-txexprs%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preprocess-<wbr></wbr>txexprs</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%2Fimperative%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>txexpr/<span class="mywbr"> &nbsp;</span>imperative!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">polyglot%</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>txexpr!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.1.3<tt>&nbsp;</tt></span><a href="#%28part._polyglot_functional%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>functional</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">polyglot/<span class="mywbr"> &nbsp;</span>functional%</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._delegate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">delegate</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._preprocess-page%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">preprocess-<wbr></wbr>page</span></span></a></td></tr><tr><td><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._postprocess-page%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">postprocess-<wbr></wbr>page</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._run-txexpr%2Ffunctional%21%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">run-<wbr></wbr>txexpr/<span class="mywbr"> &nbsp;</span>functional!</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._current-replace-element-predicate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>replace-<wbr></wbr>element-<wbr></wbr>predicate</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._tx-replace-me%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tx-<wbr></wbr>replace-<wbr></wbr>me</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._polyglot_txexpr__.Workflows_from_.Scratch%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>txexpr</span>:<span class="mywbr"> &nbsp;</span> Workflows from Scratch</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Analysis%29" class="tocsubseclink" data-pltdoc="x">Analysis</a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._get-text-elements%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>text-<wbr></wbr>elements</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-search-tagged%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tx-<wbr></wbr>search-<wbr></wbr>tagged</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tag-<wbr></wbr>equal?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._make-tag-predicate%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>tag-<wbr></wbr>predicate</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._discover-dependencies%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">discover-<wbr></wbr>dependencies</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Replacing_.Elements%29" class="tocsubseclink" data-pltdoc="x">Replacing Elements</a></td></tr><tr><td><span class="tocsublinknumber">2.2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Passive_.Replacement%29" class="tocsubseclink" data-pltdoc="x">Passive Replacement</a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tx-<wbr></wbr>replace</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace-tagged%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tx-<wbr></wbr>replace-<wbr></wbr>tagged</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">substitute-<wbr></wbr>many-<wbr></wbr>in-<wbr></wbr>txexpr</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._apply-manifest%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">apply-<wbr></wbr>manifest</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Aggressive_.Replacement%29" class="tocsubseclink" data-pltdoc="x">Aggressive Replacement</a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%2Faggressive%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tx-<wbr></wbr>replace/<span class="mywbr"> &nbsp;</span>aggressive</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace-tagged%2Faggressive%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">tx-<wbr></wbr>replace-<wbr></wbr>tagged/<span class="mywbr"> &nbsp;</span>aggressive</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">substitute-<wbr></wbr>many-<wbr></wbr>in-<wbr></wbr>txexpr/<span class="mywbr"> &nbsp;</span>loop</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._interlace-txexprs%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">interlace-<wbr></wbr>txexprs</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Content_.Generation%29" class="tocsubseclink" data-pltdoc="x">Content Generation</a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._genid%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">genid</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._polyglot_elements%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">polyglot/<span class="mywbr"> &nbsp;</span>elements</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">script-<wbr></wbr>element?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element-of-type~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">script-<wbr></wbr>element-<wbr></wbr>of-<wbr></wbr>type?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._app-element~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">app-<wbr></wbr>element?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._lib-element~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">lib-<wbr></wbr>element?</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._app-or-lib-element~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">app-<wbr></wbr>or-<wbr></wbr>lib-<wbr></wbr>element?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._write-script%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">write-<wbr></wbr>script</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._load-script%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">load-<wbr></wbr>script</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.6</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Projects.html" title="backward to &quot;1 Projects&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Polyglot: API Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Applying_Workflows_to_Projects.html" title="forward to &quot;3 Applying Workflows to Projects&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Workflows&quot;">2<tt>&nbsp;</tt><a name="(part._.Workflows)"></a>Workflows</h3><p>A <a href="Projects.html#%28tech._project%29" class="techoutside" data-pltdoc="x"><span class="techinside">project</span></a>&rsquo;s <a name="(tech._workflow)"></a><span style="font-style: italic">workflow</span> reads files from the project&rsquo;s
<a href="Projects.html#%28tech._assets._directory%29" class="techoutside" data-pltdoc="x"><span class="techinside">assets directory</span></a> and writes files to the project&rsquo;s
<a href="Projects.html#%28tech._distribution._directory%29" class="techoutside" data-pltdoc="x"><span class="techinside">distribution directory</span></a>.</p><p>A workflow&rsquo;s implementation is a subclass of
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span>, which allows any asset to depend on other
assets. Any workflow class is a valid value for <span class="RktSym">polyglot+%</span> in
<span class="stt">.polyglotrc.rkt</span>.</p><h4 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Built-In_Workflows&quot;">2.1<tt>&nbsp;</tt><a name="(part._.Built-.In_.Workflows)"></a>Built-In Workflows</h4><p>To save time for new users, Polyglot ships with three built-in
workflows: <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span>, and
<span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/functional%</a></span>. Each may be extended, overridden, or
ignored entirely.</p><p><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/functional%</a></span> both
operate under the assumption that they must produce HTML5 documents
from Markdown files. In addition, each Markdown file may contain
<a name="(tech._application._element)"></a><span style="font-style: italic">application elements</span> and <a name="(tech._library._element)"></a><span style="font-style: italic">library elements</span>.
Application elements are of form <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;script type="application/racket"&gt;...&lt;/script&gt;</span><span class="hspace"></span></span>, and library elements are of form
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;script type="text/racket"&gt;...&lt;/script&gt;</span><span class="hspace"></span></span>. The text content of
these elements are copied to Racket modules contained in
<span class="RktPn">(</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._polyglot-temp-directory%29%29" class="RktValLink" data-pltdoc="x">polyglot-temp-directory</a></span><span class="RktPn">)</span>. The name of each Racket module is
equal to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">ID.rkt</span><span class="hspace"></span></span>, where <span class="RktInBG"><span class="hspace"></span><span class="RktIn">ID</span><span class="hspace"></span></span> is the value of the
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">id</span><span class="hspace"></span></span> attribute of the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;script&gt;</span><span class="hspace"></span></span> element. If the
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">id</span><span class="hspace"></span></span> attribute is not present or empty, a temporary name will
be used instead.</p><p>The Racket modules created on disk from application elements are
loaded using <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span> in the order they are
encountered in Markdown. The intended behavior and responsibility
of application element&rsquo;s Racket module depends on the workflow
executing it. Library elements, on the other hand, are saved to disk
as-is and used according to the whims of the Racket modules produced
from application elements.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_base&quot;">2.1.1<tt>&nbsp;</tt><a name="(part._polyglot_base)"></a><a name="(mod-path._polyglot/base)"></a><span class="stt">polyglot/base</span></h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._polyglot%2Fbase%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/base</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot-lib" title="Install this package using `raco pkg install polyglot-lib`"><span class="stt">polyglot-lib</span></a></span></td></tr></table></p><p>The base workflow sets rules shared by <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/functional%</a></span>
and <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span> by specializing the behavior of
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span>.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>class</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/base..rkt)._polyglot/base~25))"></a><span title="Provided from: polyglot/base | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">polyglot/base%</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=objectutils.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._class%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">class?</a></span></p></blockquote></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span>superclass:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span></p></td></tr></table></div><div class="SIntrapara">Implements the base workflow. An instance of <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span>
does not set any rules for application elements.</div><div class="SIntrapara">In the terminology of <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">unlike-assets</span></a>,
<span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span> uses complete paths as <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span> names.
Fulfilled assets are represented as complete paths to
files in a distribution directory.</div><div class="SIntrapara"><blockquote class="leftindent"><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/base</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/base..rkt)._polyglot/base~25)._clarify))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29._clarify%29%29" class="RktValDef RktValLink" data-pltdoc="x">clarify</a></span><span class="hspace">&nbsp;</span><span class="RktVar">unclear</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">unclear</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unclear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unclear/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">If the string looks like a readable path on your system, returns a complete path.</div></p><p>Relative paths are completed using <span class="RktPn">(</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._assets-rel%29%29" class="RktValLink" data-pltdoc="x">assets-rel</a></span><span class="RktPn">)</span>. Complete paths are used as-is.</p><p>If the completed path does not refer to a readable file, this will raise <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span>
unless the path extension equals <span class="RktVal">#".literal"</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/base</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/base..rkt)._polyglot/base~25)._delegate))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29._delegate%29%29" class="RktValDef RktValLink" data-pltdoc="x">delegate</a></span><span class="hspace">&nbsp;</span><span class="RktVar">clear</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-asset%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-asset/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">Selects an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure to act as the first
representation of an asset with the given <span class="RktVar">clear</span> path.</div></p><p>The procedure depends on the result of <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=More_Path_Utilities.html%23%2528def._%2528%2528lib._racket%252Fpath..rkt%2529._path-get-extension%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path-get-extension</a></span><span class="stt"> </span><span class="RktVar">clear</span><span class="RktPn">)</span>:</p><p><div class="SIntrapara"><ul><li><p><span class="RktVal">#".literal"</span>: The path will be treated as a fulfilled asset without further processing. The path may refer to a non-existent file in the project&rsquo;s distribution.</p></li><li><p><span class="RktVal">#".css"</span>: The path is assumed to refer to a CSS file. For every <span class="RktInBG"><span class="hspace"></span><span class="RktIn">url(X)</span><span class="hspace"></span></span> expression in the stylesheet, the compiler will add! <span class="RktInBG"><span class="hspace"></span><span class="RktIn">X</span><span class="hspace"></span></span> as a dependency of the CSS file.</p></li><li><p><span class="RktVal">#".rkt"</span>: The path is assumed to refer to a Racket module. The module must <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._provide%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">provide</a></span><span class="stt"> </span><span class="RktSym">write-dist-file</span><span class="RktPn">)</span>, where <span class="RktSym">write-dist-file</span> is an <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure that may return a complete path as a fulfilled file in a distribution.</p></li><li><p>In all other cases, the file located at path <span class="RktVar">clear</span> will be copied directly to the distribution directory, and renamed. The new name of the file will equal the first 8 characters of the SHA-1 hash of the file&rsquo;s own contents, with the same extension. This is for cache-busting purposes. The asset is then considered fulfilled with a path to the newly-renamed file.</p></li></ul></div><div class="SIntrapara"></div></p></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/base..rkt)._make-minimal-html-page))"></a><span title="Provided from: polyglot/base | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._make-minimal-html-page%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-minimal-html-page</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html%23%2528def._%2528%2528lib._xml%252Fprivate%252Fxexpr-core..rkt%2529._xexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">html</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">head</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">title</span><span class="stt"> </span><span class="RktVal">"Untitled"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">body</span><span class="stt"> </span><span class="RktRdr">,@</span><span class="RktVar">body</span><span class="RktVal">)</span><span class="RktVal">)</span></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/base..rkt)._add-dependencies!))"></a><span title="Provided from: polyglot/base | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._add-dependencies%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">add-dependencies!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">clear</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">compiler</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">txexpr/expanded</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">compiler</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Object_and_Class_Contracts.html%23%2528def._%2528%2528lib._racket%252Fclass..rkt%2529._is-a%7E3f%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">is-a?/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">txexpr/expanded</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Assuming <span class="RktVar">clear</span> is a path to a Markdown file, and
<span class="RktVar">txexpr/expanded</span> is <span style="font-style: italic">derived</span> from that file in a given
workflow, this procedure will discover and <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528meth._%2528%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529._add%2521%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">add!</a></span> dependencies in <span class="RktVar">txexpr/expanded</span> and return an
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure that prepares a final HTML5 document with
rewritten links to production-ready assets in a distribution.</div></p><p>Specifically, <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._add-dependencies%21%29%29" class="RktValLink" data-pltdoc="x">add-dependencies!</a></span> maps the output of
<span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._discover-dependencies%29%29" class="RktValLink" data-pltdoc="x">discover-dependencies</a></span><span class="stt"> </span><span class="RktVar">txexpr/expanded</span><span class="RktPn">)</span> to clear names using
<span class="RktVar">compiler</span> and adds them to the build using <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="stt"> </span><span class="RktVar">compiler</span><span class="stt"> </span><span class="RktSym">add!</span><span class="RktPn">)</span>. As a special case, Markdown dependencies are added to
the compilation but without a dependency relationship on
<span class="RktVar">clear</span>. This is to avoid a circular dependency locking up a
build when two pages link to each other.</p><p>The returned <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure <span style="font-style: italic">must</span> be used as the
next step for the asset named by <span class="RktVar">clear</span>. That procedure will
resolve the dependencies in <span class="RktVar">txexpr/expanded</span>, write a finished
HTML5 document to a distribution, and fulfill the asset using the path
of the HTML5 document.</p><p>You will likely not call this yourself, but you can use it for custom
workflows derived from <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span> if you aim to create
HTML5 documents from Markdown using a different set of rules. The
dependency resolution step is tedious, and this will take care of it
for you.</p><p>For an example, see the functional workflow&rsquo;s
<span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._delegate%29%29" class="RktValLink" data-pltdoc="x">delegate</a></span> implementation.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_imperative&quot;">2.1.2<tt>&nbsp;</tt><a name="(part._polyglot_imperative)"></a><a name="(mod-path._polyglot/imperative)"></a><a name="(mod-path._(submod._polyglot/imperative._safe))"></a><span class="stt">polyglot/imperative</span></h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._polyglot%2Fimperative%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/imperative</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot-lib" title="Install this package using `raco pkg install polyglot-lib`"><span class="stt">polyglot-lib</span></a></span></td></tr><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._submod%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">submod</a></span><span class="stt"> </span><span class="RktSym">polyglot/imperative</span><span class="stt"> </span><span class="RktSym">safe</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>The Imperative Workflow seeks application elements within Markdown
files and runs them under the expectation that they will produce
content as a side-effect. In that sense, app elements behave similarly
to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">&lt;?php echo ...; ?&gt;</span><span class="hspace"></span></span> in PHP.</p><p>To use module-level contracts, require the <span class="RktSym">safe</span> submodule.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>class</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/imperative..rkt)._polyglot/imperative~25))"></a><span title="Provided from: polyglot/imperative, (submod polyglot/imperative safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">polyglot/imperative%</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=objectutils.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._class%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">class?</a></span></p></blockquote></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span>superclass:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span></p></td></tr></table></div><div class="SIntrapara">Implements the imperative workflow.</div><div class="SIntrapara"><blockquote class="leftindent"><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/imperative</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/imperative..rkt)._polyglot/imperative~25)._delegate))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29._delegate%29%29" class="RktValDef RktValLink" data-pltdoc="x">delegate</a></span><span class="hspace">&nbsp;</span><span class="RktVar">clear</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-asset%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-asset/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29._delegate%29%29" class="RktValLink" data-pltdoc="x">delegate</a></span>, except Markdown files
(identified by a <span class="RktVal">#".md"</span> extension) are parsed and processed
using this <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure:</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span><span class="RktSym">compiler</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">txexpr/parsed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=markdown&amp;rel=index.html%23%2528def._%2528%2528lib._markdown%252Fparse..rkt%2529._parse-markdown%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parse-markdown</a></span><span class="hspace">&nbsp;</span><span class="RktVar">clear</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">txexpr/preprocessed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktSym">compiler</span><span class="hspace">&nbsp;</span><span class="RktSym">preprocess-txexprs</span><span class="hspace">&nbsp;</span><span class="RktSym">txexpr/parsed</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">txexpr/processed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%2Fimperative%21%29%29" class="RktValLink" data-pltdoc="x">run-txexpr/imperative!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">txexpr/preprocessed</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._add-dependencies%21%29%29" class="RktValLink" data-pltdoc="x">add-dependencies!</a></span><span class="hspace">&nbsp;</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span><span class="RktSym">compiler</span><span class="hspace">&nbsp;</span><span class="RktSym">txexpr/processed</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/imperative</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/imperative..rkt)._polyglot/imperative~25)._preprocess-txexprs))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29._preprocess-txexprs%29%29" class="RktValDef RktValLink" data-pltdoc="x">preprocess-txexprs</a></span><span class="hspace">&nbsp;</span><span class="RktVar">tx-expressions</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx-expressions</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">This method transforms <span class="RktVar">tx-expressions</span> parsed from a source Markdown file
into a new list of tagged X-expressions. This transformation occurs before
the instance uses <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%2Fimperative%21%29%29" class="RktValLink" data-pltdoc="x">run-txexpr/imperative!</a></span>.</div></p><p>Use this to sanitize untrusted code, generate application elements based on content,
or attach common metadata to documents.</p><p>The default implementation searches <span class="RktVar">tx-expressions</span> for elements with a
<span class="stt">data-macro</span> attribute. If the attribute exists, it must be a string of at
most two words (e.g. <span class="RktVal">"holiday"</span> or <span class="RktVal">"holiday halloween"</span>).  If a
second word is not specified, it is assumed to be <span class="RktVal">"replace-element"</span>.</p><p>The first word is converted to a path to a Racket module in the <a href="Projects.html#%28tech._assets._directory%29" class="techoutside" data-pltdoc="x"><span class="techinside">assets
directory</span></a>, and the second word is converted to a symbol used to extract a
provided identifier via <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span>, with reload support for live
builds (e.g. <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._assets-rel%29%29" class="RktValLink" data-pltdoc="x">assets-rel</a></span><span class="stt"> </span><span class="RktVal">"holiday.rkt"</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">halloween</span><span class="RktPn">)</span>).</p><p><div class="SIntrapara">The <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span> must return a <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span> procedure that transforms the original Tagged X-expression holding
the <span class="stt">data-macro</span> attribute to at least zero new elements.</div><div class="SIntrapara"></div></p></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/imperative..rkt)._run-txexpr/imperative!))"></a><span title="Provided from: polyglot/imperative, (submod polyglot/imperative safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%2Fimperative%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">run-txexpr/imperative!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">target</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktVar">initial-layout</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">target</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">initial-layout</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528lib._racket%252Ffunction..rkt%2529._identity%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">identity</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Transforms <span class="RktVar">target</span> into a new tagged X-expression, <span class="RktSym">target-prime</span>, presumably representing HTML5.</div></p><p>The transformation does not mutate <span class="RktVar">target</span>, but does depend on side-effects:</p><ol><li><p>Remember <span class="RktVar">initial-layout</span> as the page layout.</p></li><li><p>Save all Racket modules from <a href="#%28tech._application._element%29" class="techoutside" data-pltdoc="x"><span class="techinside">application elements</span></a> and <a href="#%28tech._library._element%29" class="techoutside" data-pltdoc="x"><span class="techinside">library elements</span></a> found in <span class="RktSym">target-prime</span> to disk. Remove all library elements from <span class="RktSym">target-prime</span>.</p></li><li><p><div class="SIntrapara">For each Racket module <span class="RktSym">M</span> written to disk, in order matching app elements encountered:
</div><div class="SIntrapara"><ol><li><p>Instantiate the module using <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span><span class="stt"> </span><span class="RktSym">M</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span></p></li><li><p><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Reading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read</a></span> all tagged X-expressions produced by <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._write%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">write</a></span> calls in the module as a side-effect.</p></li><li><p>Replace the page layout with <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span><span class="stt"> </span><span class="RktSym">M</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">layout</span><span class="RktPn">)</span>, if possible. Otherwise keep the existing layout.</p></li><li><p>Replace the app element that sourced <span class="RktSym">M</span> with the content written by that element.</p></li></ol></div></p></li><li><p>Return <span class="RktPn">(</span><span class="RktSym">layout</span><span class="stt"> </span><span class="RktSym">target-prime</span><span class="RktPn">)</span>, where <span class="RktSym">layout</span> is bound to the layout procedure after Step 3.</p></li></ol><p>Side-effects:</p><ul><li><p>Unique and short-lived directories and Racket modules will appear in <span class="RktPn">(</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._system-temp-rel%29%29" class="RktValLink" data-pltdoc="x">system-temp-rel</a></span><span class="RktPn">)</span>. They are deleted by the time control leaves this procedure.</p></li><li><p>Events will appear on <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Logging.html%23%2528def._%2528%2528lib._unlike-assets%252Flogging..rkt%2529._unlike-assets-logger%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-assets-logger</a></span>. Info-level events will report summarized content fragments created by your application elements. Any output on <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-error-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-error-port</a></span><span class="RktPn">)</span> caused by script elements will apperar as error-level events.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/imperative..rkt)._polyglot~25))"></a><span title="Provided from: polyglot/imperative, (submod polyglot/imperative safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">polyglot%</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=objectutils.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._class%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">class?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">An alias for <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._polyglot%2Fimperative~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/imperative%</a></span> kept for backwards compatibility.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/imperative..rkt)._run-txexpr!))"></a><span title="Provided from: polyglot/imperative, (submod polyglot/imperative safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">run-txexpr!</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=procedures.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._procedure%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">procedure?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">An alias for <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%2Fimperative%21%29%29" class="RktValLink" data-pltdoc="x">run-txexpr/imperative!</a></span> kept for backwards compatibility.</div></p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_functional&quot;">2.1.3<tt>&nbsp;</tt><a name="(part._polyglot_functional)"></a><a name="(mod-path._polyglot/functional)"></a><a name="(mod-path._(submod._polyglot/functional._safe))"></a><span class="stt">polyglot/functional</span></h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._polyglot%2Ffunctional%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/functional</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot-lib" title="Install this package using `raco pkg install polyglot-lib`"><span class="stt">polyglot-lib</span></a></span></td></tr><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._submod%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">submod</a></span><span class="stt"> </span><span class="RktSym">polyglot/functional</span><span class="stt"> </span><span class="RktSym">safe</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>To use module-level contracts, require the <span class="RktSym">safe</span> submodule.</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>class</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/functional..rkt)._polyglot/functional~25))"></a><span title="Provided from: polyglot/functional, (submod polyglot/functional safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29%29" class="RktValDef RktValLink" data-pltdoc="x">polyglot/functional%</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=objectutils.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._class%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">class?</a></span></p></blockquote></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span>superclass:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span></p></td></tr></table></div><div class="SIntrapara">Specializes <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span> to process Markdown files
where application elements can replace page contents without
side-effects.</div><div class="SIntrapara"><blockquote class="leftindent"><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/functional</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/functional..rkt)._polyglot/functional~25)._delegate))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._delegate%29%29" class="RktValDef RktValLink" data-pltdoc="x">delegate</a></span><span class="hspace">&nbsp;</span><span class="RktVar">clear</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-asset%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-asset/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._clear%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">clear/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._polyglot%2Fbase~25%29%29" class="RktValLink" data-pltdoc="x">polyglot/base%</a></span>&rsquo;s implementation, except
Markdown files (identified by an <span class="RktVal">#".md"</span> extension)
are handled with this <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._advance%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">advance/c</a></span> procedure:</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">clear</span><span class="hspace">&nbsp;</span><span class="RktSym">compiler</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fragment</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=markdown&amp;rel=index.html%23%2528def._%2528%2528lib._markdown%252Fparse..rkt%2529._parse-markdown%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parse-markdown</a></span><span class="hspace">&nbsp;</span><span class="RktVar">clear</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">base-page</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._make-minimal-html-page%29%29" class="RktValLink" data-pltdoc="x">make-minimal-html-page</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fragment</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">preprocessed</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">preprocess-page</span><span class="hspace">&nbsp;</span><span class="RktSym">base-page</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._add-dependencies%21%29%29" class="RktValLink" data-pltdoc="x">add-dependencies!</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">clear</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">compiler</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">postprocess-page</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._run-txexpr%2Ffunctional%21%29%29" class="RktValLink" data-pltdoc="x">run-txexpr/functional!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">preprocessed</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/functional</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/functional..rkt)._polyglot/functional~25)._preprocess-page))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._preprocess-page%29%29" class="RktValDef RktValLink" data-pltdoc="x">preprocess-page</a></span><span class="hspace">&nbsp;</span><span class="RktVar">page-tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">page-tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">A page-replacing method that runs before any app <span class="stt">replace-page</span> procedure provided by an application element&rsquo;s module.</div></p><p>By default, this is the identity function.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>method</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=ivaraccess.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fclass-internal..rkt%2529._send%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktVar">a-polyglot/functional</span><span class="hspace">&nbsp;</span><a name="(meth._(((lib._polyglot/functional..rkt)._polyglot/functional~25)._postprocess-page))"></a><span class="RktSym"><a href="#%28meth._%28%28%28lib._polyglot%2Ffunctional..rkt%29._polyglot%2Ffunctional~25%29._postprocess-page%29%29" class="RktValDef RktValLink" data-pltdoc="x">postprocess-page</a></span><span class="hspace">&nbsp;</span><span class="RktVar">page-tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">page-tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara"></div><div class="SIntrapara">A page-replacing method that runs after every <span class="stt">replace-page</span> procedure provided by an application element&rsquo;s module.</div></p><p><div class="SIntrapara">By default, this is the identity function.</div><div class="SIntrapara"></div></p></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/functional..rkt)._run-txexpr/functional!))"></a><span title="Provided from: polyglot/functional, (submod polyglot/functional safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._run-txexpr%2Ffunctional%21%29%29" class="RktValDef RktValLink" data-pltdoc="x">run-txexpr/functional!</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">target</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:max-passes</span><span class="hspace">&nbsp;</span><span class="RktVar">max-passes</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">target</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-passes</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">1000</span></td></tr></table></blockquote></div><div class="SIntrapara">Transforms <span class="RktVar">target</span> into a new tagged X-expression,
<span class="RktSym">target-prime</span>, presumably representing HTML5. If
<span class="RktVar">target</span> is a list of elements, then this procedure will begin
processing with <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fbase..rkt%29._make-minimal-html-page%29%29" class="RktValLink" data-pltdoc="x">make-minimal-html-page</a></span><span class="stt"> </span><span class="RktVar">target</span><span class="RktPn">)</span> instead.</div></p><p>The transformation is a fold on <span class="RktVar">target</span> into a new page
<span class="RktSym">target-prime</span> that repeats these steps until no substitutions occur:</p><ol><li><p>Save all Racket modules from <a href="#%28tech._application._element%29" class="techoutside" data-pltdoc="x"><span class="techinside">application elements</span></a> and <a href="#%28tech._library._element%29" class="techoutside" data-pltdoc="x"><span class="techinside">library elements</span></a> found in <span class="RktSym">target-prime</span> to disk.</p></li><li><p>Evaluate <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span><span class="stt"> </span><span class="RktSym">path</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">replace-page</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span> for each <span class="RktSym">path</span> derived from an app element, in order.</p></li><li><p>For each <span class="RktSym">replace-page</span> procedure, functionally replace <span class="RktSym">target-prime</span> with</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=parameters.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fmore-scheme..rkt%2529._parameterize%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">parameterize</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._current-replace-element-predicate%29%29" class="RktValLink" data-pltdoc="x">current-replace-element-predicate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">F</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">replace-page</span><span class="hspace">&nbsp;</span><span class="RktSym">target-prime</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>where <span class="RktSym">F</span> is a predicate that matches the application element that sourced the <span class="RktSym">replace-page</span> procedure.</p></li><li><p>Remove from <span class="RktSym">target-prime</span> all app and lib elements discovered in Step 1.</p></li></ol><p>If this process repeats more than <span class="RktVar">max-passes</span> times, the
procedure will raise <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span>.</p><p>In addition to all side-effects produced by app or library elements,
status events will appear on <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Logging.html%23%2528def._%2528%2528lib._unlike-assets%252Flogging..rkt%2529._unlike-assets-logger%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-assets-logger</a></span>. Temporary
Racket modules are deleted by the time control leaves this procedure.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._polyglot/functional..rkt)._current-replace-element-predicate))"></a><span title="Provided from: polyglot/functional, (submod polyglot/functional safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._current-replace-element-predicate%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-replace-element-predicate</a></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._parameter%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parameter/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A parameter used to set the target for <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._tx-replace-me%29%29" class="RktValLink" data-pltdoc="x">tx-replace-me</a></span>. The functional
workflow will set this parameter to a predicate that matches the application
element in which a <span class="stt">replace-page</span> procedure is evaluating.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/functional..rkt)._tx-replace-me))"></a><span title="Provided from: polyglot/functional, (submod polyglot/functional safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._tx-replace-me%29%29" class="RktValDef RktValLink" data-pltdoc="x">tx-replace-me</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span><span class="RktVar">replace</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%29%29" class="RktValLink" data-pltdoc="x">tx-replace</a></span>, except the predicate is <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ffunctional..rkt%29._current-replace-element-predicate%29%29" class="RktValLink" data-pltdoc="x">current-replace-element-predicate</a></span><span class="RktPn">)</span>.</div></p><h4 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_txexpr__Workflows_from_Scratch&quot;">2.2<tt>&nbsp;</tt><a name="(part._polyglot_txexpr__.Workflows_from_.Scratch)"></a><a name="(mod-path._polyglot/txexpr)"></a><a name="(mod-path._(submod._polyglot/txexpr._safe))"></a><span class="stt">polyglot/txexpr</span>: Workflows from Scratch</h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._polyglot%2Ftxexpr%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/txexpr</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot-lib" title="Install this package using `raco pkg install polyglot-lib`"><span class="stt">polyglot-lib</span></a></span></td></tr><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._submod%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">submod</a></span><span class="stt"> </span><span class="RktSym">polyglot/txexpr</span><span class="stt"> </span><span class="RktSym">safe</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>This module provides all bindings from the <a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">txexpr</span></a> and
<a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=xml&amp;rel=index.html&amp;version=8.6" class="RktModLink Sq" data-pltdoc="x"><span class="RktSym">xml</span></a> modules, plus the below.</p><p>To use module-level contracts, require the <span class="RktSym">safe</span> submodule.</p><p><a href="#%28mod-path._polyglot%2Ftxexpr%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/txexpr</span></a> offers workflow-independent tools to define
where programs exist within annotated documents, and to create new documents
according to how you process those programs. Combining this module with your
own subclass of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Imperative_Model.html%23%2528def._%2528%2528lib._unlike-assets%252Fmain..rkt%2529._unlike-compiler%7E25%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-compiler%</a></span> allows you to write static site
generators that evolve independently of built-in workflows.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Analysis&quot;">2.2.1<tt>&nbsp;</tt><a name="(part._.Analysis)"></a>Analysis</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._get-text-elements))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._get-text-elements%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-text-elements</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns all string children of <span class="RktVar">tx</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._tx-search-tagged))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-search-tagged%29%29" class="RktValDef RktValLink" data-pltdoc="x">tx-search-tagged</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span><span class="RktVar">tag</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Return all elements in <span class="stt">tx</span> with the given tag. Returns an empty list
if there are no matches.</div></p><p>If an element matches, the search will not descend into the child elements.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._tag-equal~3f))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">tag-equal?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tag</span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">tx</span> is a tagged X-expression and its tag is <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">equal?</a></span> to <span class="stt">tag</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._make-tag-predicate))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._make-tag-predicate%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-tag-predicate</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tags</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tags</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a procedure that checks if a value causes <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="RktValLink" data-pltdoc="x">tag-equal?</a></span> to return
<span class="RktVal">#t</span> for any of the given <span class="stt">tags</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._discover-dependencies))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._discover-dependencies%29%29" class="RktValDef RktValLink" data-pltdoc="x">discover-dependencies</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the values of <span class="stt">href</span>, <span class="stt">src</span>, or <span class="stt">srcset</span> attributes in
<span class="RktVar">tx</span> that appear to refer to assets on a local file system.
This will check for complete paths, relative paths, and URLs with
the <span class="RktVal">"file://"</span> scheme.</div></p><p>If a single element contains multiple eligible attribute values, they
will all appear in the returned output.</p><p>Relative paths will not be made complete. It&rsquo;s up to you to decide a base directory.
This frees you from needing to use <span class="RktPn">(</span><span class="RktSym"><a href="Projects.html#%28def._%28%28lib._polyglot%2Fpaths..rkt%29._assets-rel%29%29" class="RktValLink" data-pltdoc="x">assets-rel</a></span><span class="RktPn">)</span>.</p><p>Values that appear on parent elements will come before values
that appear on child elements in the output. In the event multiple
dependency values appear on a single element, they will appear in
the order respecting the attribute list on that element.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._discover-dependencies%29%29" class="RktValLink" data-pltdoc="x">discover-dependencies</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">parent</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktVal">"a.png"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">child</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">href</span><span class="hspace">&nbsp;</span><span class="RktVal">"b.png"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">src</span><span class="hspace">&nbsp;</span><span class="RktVal">"c.png"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktRes">'("a.png"<span class="stt"> </span>"b.png"<span class="stt"> </span>"c.png")</span></div></p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Replacing_Elements&quot;">2.2.2<tt>&nbsp;</tt><a name="(part._.Replacing_.Elements)"></a>Replacing Elements</h5><p>The following procedures find and replace elements using callbacks. The callback
that defines replacements elements is called <span class="stt">replace</span> for the sake of this
documentation.</p><p>The procedures are either <span style="font-style: italic">passive</span> or <span style="font-style: italic">aggressive</span>. The aggressive
procedures will replace all matching elements, including the ones that appear in
the replacements it already made. The passive procedures will replace all matching elements,
but if the replacement produces more matching elements, they will simply leave them in
the output.</p><p>Consider the following replacement rules:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;p title="Hi"&gt;...&lt;/p&gt; --&gt; &lt;section&gt;&lt;h1&gt;Hi&lt;/h1&gt;&lt;p&gt;...&lt;/p&gt;&lt;/section&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;p&gt;...&lt;/p&gt; --&gt; &lt;section&gt;&lt;p&gt;...&lt;/p&gt;&lt;/section&gt;</span></p></td></tr></table></p><p>In this case you want a passive procedure, because it will replace all
<span class="stt">&lt;p&gt;</span> elements in a document with <span class="stt">&lt;section&gt;</span> elements, but will leave
the <span class="stt">&lt;p&gt;</span> elements from the replacement as part of the intended output.</p><p>An aggressive procedure would not terminate because the substitution rules
would disallow any <span class="stt">&lt;p&gt;</span> elements, even in the replacement.</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&lt;p title="Hi"&gt;...&lt;/p&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">--&gt; &lt;section&gt;&lt;h1&gt;Hi&lt;/h1&gt;&lt;p&gt;...&lt;/p&gt;&lt;/section</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">--&gt; &lt;section&gt;&lt;h1&gt;Hi&lt;/h1&gt;&lt;section&gt;&lt;p&gt;...&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">--&gt; &lt;section&gt;&lt;h1&gt;Hi&lt;/h1&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;...&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...</span></p></td></tr></table></p><p>This is not to say that aggressive procedures are generally unhelpful. They are
meant for use cases where replacements may vary and eventually stop producing
matching elements.</p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Passive_Replacement&quot;">2.2.2.1<tt>&nbsp;</tt><a name="(part._.Passive_.Replacement)"></a>Passive Replacement</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._tx-replace))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%29%29" class="RktValDef RktValLink" data-pltdoc="x">tx-replace</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">replace</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Replaces each element <span class="stt">E</span> matching a predicate with the list of elements
returned from <span class="stt">(replace E)</span>. Note that this can create empty parent elements.
Behaves like <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span>, except it only returns the
first value.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._tx-replace-tagged))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace-tagged%29%29" class="RktValDef RktValLink" data-pltdoc="x">tx-replace-tagged</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span><span class="RktVar">tag</span><span class="hspace">&nbsp;</span><span class="RktVar">replace</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%29%29" class="RktValLink" data-pltdoc="x">tx-replace</a></span>, except you can designate all elements of a certain tag.</div></p><p>e.g. <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace-tagged%29%29" class="RktValLink" data-pltdoc="x">tx-replace-tagged</a></span><span class="stt"> </span><span class="RktVar">tx</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">h2</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">lamdba</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">`</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">h3</span><span class="stt"> </span><span class="RktVal">unquote</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">get-elements</span><span class="stt"> </span><span class="RktVal">x</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._substitute-many-in-txexpr))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValDef RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">tx</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Pay careful attention to the wording here.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Find and replace <span style="font-style: italic">all</span> elements in <span class="stt">tx</span> with <span style="font-style: italic">at least one</span> child
element matching <span class="stt">replace?</span>. Each <span style="font-style: italic">immediate descendent</span> element
<span class="stt">C</span> is replaced with <span style="font-style: italic">all</span> elements from <span class="stt">(replace C)</span>. Returns the
new content as the first value, and a list of the reconstructed elements as the second value.</div></p><p>Normally you do not need to call this directly, but it is helpful to understand
how it works. This is useful if you want to build a "stepper" to inspect
replacements in a broader pipeline.</p><p>A matching element can be replaced by <span style="font-style: italic">at least zero</span> elements, so
the <span class="stt">replace</span> procedure must return a list of <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr</a></span>.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"1"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="RktValLink" data-pltdoc="x">tag-equal?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"1"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div></p><p>Return an empty list to remove the element
outright (possibly leaving an empty parent element).</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"1"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="RktValLink" data-pltdoc="x">tag-equal?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"1"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div></p><p>As a special case, if <span class="stt">(replace? tx)</span> is true, then the return values
will be <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=values.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._values%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">values</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">replace</span><span class="stt"> </span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="RktPn">)</span>. This is the only case where
the first returned value matches <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="RktPn">)</span> and
not <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span> in the range contract.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"1"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="RktValLink" data-pltdoc="x">tag-equal?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">root</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">root</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">main</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"1"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"2"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div></p><p>Take care to understand that while <span style="font-style: italic">all</span> elements with at least one
matching child are reconstructed, the substitution will not account for nested
children. This avoids the risk of infinite loops in the event replacement
elements always includes other matching elements.</p><p>To guarentee full replacement of elements, use <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr/loop</a></span>.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"new"</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"new"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"new"</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"old"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._apply-manifest))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._apply-manifest%29%29" class="RktValDef RktValLink" data-pltdoc="x">apply-manifest</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span><span class="RktVar">manifest</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktVar">rewrite</span><span class="RktOpt">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">manifest</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dict?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rewrite</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a new <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr</a></span> such that each <span class="stt">href</span>, <span class="stt">src</span>, and <span class="stt">srcset</span>
attribute value that appears as a key <span class="stt">K</span> in <span class="RktVar">manifest</span> is replaced
with <span class="RktPn">(</span><span class="RktVar">rewrite</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict-ref%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dict-ref</a></span><span class="stt"> </span><span class="RktVar">manifest</span><span class="stt"> </span><span class="RktSym">K</span><span class="RktPn">)</span><span class="RktPn">)</span>. By default, <span class="RktVar">rewrite</span>
returns only the <span class="RktSym">name</span> value returned from <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._split-path%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">split-path</a></span>.</div></p><p>Pair this with <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._discover-dependencies%29%29" class="RktValLink" data-pltdoc="x">discover-dependencies</a></span> to set up a workflow where
discovered build-time assets are replaced with production-ready assets.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">page</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Fimperative..rkt%29._run-txexpr%21%29%29" class="RktValLink" data-pltdoc="x">run-txexpr!</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=markdown&amp;rel=index.html%23%2528def._%2528%2528lib._markdown%252Fparse..rkt%2529._parse-markdown%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parse-markdown</a></span><span class="hspace">&nbsp;</span><span class="RktSym">md-file</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">layout</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">optimized</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._foldl%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">foldl</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dep</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=dicts.html%23%2528def._%2528%2528lib._racket%252Fdict..rkt%2529._dict-set%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dict-set</a></span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktSym">dep</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">write-optimized-to-disk!</span><span class="hspace">&nbsp;</span><span class="RktSym">dep</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#hash</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._discover-dependencies%29%29" class="RktValLink" data-pltdoc="x">discover-dependencies</a></span><span class="hspace">&nbsp;</span><span class="RktSym">page</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Replace things like &lt;img src="logo.png" /&gt; with &lt;img src="809a2d.png" /&gt;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">production-ready</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._apply-manifest%29%29" class="RktValLink" data-pltdoc="x">apply-manifest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">page</span><span class="hspace">&nbsp;</span><span class="RktSym">optimized</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=file-ports.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._with-output-to-file%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">with-output-to-file</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"page.html"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:exists</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">truncate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"&lt;!DOCTYPE html&gt;"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._xexpr-%7E3ehtml%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">xexpr-&gt;html</a></span><span class="hspace">&nbsp;</span><span class="RktSym">page</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Aggressive_Replacement&quot;">2.2.2.2<tt>&nbsp;</tt><a name="(part._.Aggressive_.Replacement)"></a>Aggressive Replacement</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._tx-replace/aggressive))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%2Faggressive%29%29" class="RktValDef RktValLink" data-pltdoc="x">tx-replace/aggressive</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">replace</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._tx-replace-tagged/aggressive))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace-tagged%2Faggressive%29%29" class="RktValDef RktValLink" data-pltdoc="x">tx-replace-tagged/aggressive</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">tx</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">tag</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tag</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._symbol%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Aggressive variants of <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace%29%29" class="RktValLink" data-pltdoc="x">tx-replace</a></span> and <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tx-replace-tagged%29%29" class="RktValLink" data-pltdoc="x">tx-replace-tagged</a></span>.</div></p><p>Acts as a shorthand for <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr/loop</a></span>, except
it only returns the first value.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top" colspan="3"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._substitute-many-in-txexpr/loop))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="RktValDef RktValLink" data-pltdoc="x">substitute-many-in-txexpr/loop</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">tx</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace?</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:max-replacements</span><span class="hspace">&nbsp;</span><span class="RktVar">max-replacements</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr-element%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr-element?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">replace</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-replacements</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">1000</span></td></tr></table></blockquote></div><div class="SIntrapara">Repeats <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span> until no substitutions
are possible. To illustrate, this would not terminate if it weren&rsquo;t for
<span class="stt">max-replacements</span>:</div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr/loop</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._tag-equal~3f%29%29" class="RktValLink" data-pltdoc="x">tag-equal?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">p</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr/loop</a></span> raises <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span> if
it iterates once more after performing <span class="stt">max-replacements</span>.</p><p>The return values are like those returned from <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._interlace-txexprs))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._interlace-txexprs%29%29" class="RktValDef RktValLink" data-pltdoc="x">interlace-txexprs</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">tx-expressions</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace?/list-or-proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">replace/list-or-proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:max-replacements</span><span class="hspace">&nbsp;</span><span class="RktVar">max-replacements</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">#:max-passes</span><span class="hspace">&nbsp;</span><span class="RktVar">max-passes</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx-expressions</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">replace?/list-or-proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">replace/list-or-proc</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._or%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._non-empty-listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">non-empty-listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-replacements</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">1000</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">max-passes</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._exact-integer%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">50</span></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._interlace-txexprs%29%29" class="RktValLink" data-pltdoc="x">interlace-txexprs</a></span> returns a list of tagged X-expressions
constructed by a variable number of <span class="stt">passes</span> over <span class="stt">tx-expressions</span>.</div></p><p>Unlike the other substitution procedures, <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._interlace-txexprs%29%29" class="RktValLink" data-pltdoc="x">interlace-txexprs</a></span>
accepts multiple pairings of <span class="stt">replace?</span> and <span class="stt">replace</span>. If
<span class="stt">replace?/list-or-proc</span> or <span class="stt">replace/list-or-proc</span> are not lists,
they will be treated as if they were lists containing the original value as
the only element. The lists must have the same number of elements,
just like if you had provided them to <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmap..rkt%2529._map%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">map</a></span> or <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Flist..rkt%2529._foldl%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">foldl</a></span>.</p><p>For each pass, the following happens:</p><ol><li><p><div class="SIntrapara">For each <span class="stt">replace?</span> and <span class="stt">replace</span> procedure, do this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._substitute-many-in-txexpr%2Floop%29%29" class="RktValLink" data-pltdoc="x">substitute-many-in-txexpr/loop</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cons%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=symbols.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._gensym%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">gensym</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">tx-expressions</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">replace?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">replace</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:max-replacements</span><span class="hspace">&nbsp;</span><span class="RktVar">max-replacements</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></li><li><p>If any replacements occurred, repeat.</p></li></ol><p><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._interlace-txexprs%29%29" class="RktValLink" data-pltdoc="x">interlace-txexprs</a></span> returns only the transformed list of tagged X-expressions,
or raises <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=exns.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._exn%7E3afail%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">exn:fail</a></span> if it would exceed <span class="stt">max-passes</span>.</p><p>This is the procedure you would likely use to write more flexible workflows.
Here is an example program that parses a Markdown file, and
defines a pass to remove all script and style elements, then
all elements with no children. Because the procedure
will continue until no substitutions are possible,
only the heading will remain.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">racket/string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">markdown</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">polyglot/txexpr</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">discard</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">null</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">md</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-join</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"# Hello, world"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"&lt;script&gt;blah&lt;/script&gt;"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"&lt;b&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/b&gt;"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._interlace-txexprs%29%29" class="RktValLink" data-pltdoc="x">interlace-txexprs</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=markdown&amp;rel=index.html%23%2528def._%2528%2528lib._markdown%252Fparse..rkt%2529._parse-markdown%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">parse-markdown</a></span><span class="hspace">&nbsp;</span><span class="RktSym">md</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._make-tag-predicate%29%29" class="RktValLink" data-pltdoc="x">make-tag-predicate</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">script</span><span class="hspace">&nbsp;</span><span class="RktVal">style</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._get-elements%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">get-elements</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">discard</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">discard</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">h1</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktVal">"hello-world"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello, world"</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div></p><h5 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;Content_Generation&quot;">2.2.3<tt>&nbsp;</tt><a name="(part._.Content_.Generation)"></a>Content Generation</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/txexpr..rkt)._genid))"></a><span title="Provided from: polyglot/txexpr, (submod polyglot/txexpr safe) | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Ftxexpr..rkt%29._genid%29%29" class="RktValDef RktValLink" data-pltdoc="x">genid</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=txexpr&amp;rel=index.html%23%2528def._%2528%2528lib._txexpr%252Fmain..rkt%2529._txexpr%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">txexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a value for an <span class="stt">id</span> attribute that is not used anywhere in <span class="stt">tx</span>.</div></p><h4 x-source-module="(lib &quot;polyglot/scribblings/reference/polyglot-reference.scrbl&quot;)" x-source-pkg="polyglot-doc" x-part-tag="&quot;polyglot_elements&quot;">2.3<tt>&nbsp;</tt><a name="(part._polyglot_elements)"></a><a name="(mod-path._polyglot/elements)"></a><span class="stt">polyglot/elements</span></h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._polyglot%2Felements%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/elements</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/polyglot-lib" title="Install this package using `raco pkg install polyglot-lib`"><span class="stt">polyglot-lib</span></a></span></td></tr></table></p><p><a href="#%28mod-path._polyglot%2Felements%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">polyglot/elements</span></a> integrates the Racket module system
with tagged X-expressions via <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._script-element~3f))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">script-element?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">tx</span> is a tagged X-expression with tag
<span class="RktVal">'</span><span class="RktVal">script</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._script-element-of-type~3f))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element-of-type~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">script-element-of-type?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">type</span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=strings.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._string%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element~3f%29%29" class="RktValLink" data-pltdoc="x">script-element?</a></span><span class="stt"> </span><span class="RktVar">tx</span><span class="RktPn">)</span> is <span class="RktVal">#t</span> and the
<span class="stt">type</span> attribute equals <span class="RktVar">type</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._app-element~3f))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._app-element~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">app-element?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Equivalent to </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._or%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element-of-type~3f%29%29" class="RktValLink" data-pltdoc="x">script-element-of-type?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"application/rackdown"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element-of-type~3f%29%29" class="RktValLink" data-pltdoc="x">script-element-of-type?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"application/racket"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._lib-element~3f))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._lib-element~3f%29%29" class="RktValDef RktValLink" data-pltdoc="x">lib-element?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element-of-type~3f%29%29" class="RktValLink" data-pltdoc="x">script-element-of-type?</a></span><span class="stt"> </span><span class="RktVal">"text/racket"</span><span class="stt"> </span><span class="RktVar">tx</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._app-or-lib-element~3f))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><span class="RktSymDef RktSym">app-or-lib-element?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">tx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=booleans.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._boolean%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Equivalent to </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._or%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._lib-element~3f%29%29" class="RktValLink" data-pltdoc="x">lib-element?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._app-element~3f%29%29" class="RktValLink" data-pltdoc="x">app-element?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._write-script))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._write-script%29%29" class="RktValDef RktValLink" data-pltdoc="x">write-script</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">script</span><span class="hspace">&nbsp;</span><span class="RktVar">dir</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">script</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._script-element~3f%29%29" class="RktValLink" data-pltdoc="x">script-element?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">dir</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._directory-exists%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">directory-exists?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">For use with <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._load-script%29%29" class="RktValLink" data-pltdoc="x">load-script</a></span>.</div></p><p>Writes the text children of <span class="RktVar">script</span> to a file in <span class="RktVar">dir</span>
and returns a path to the created file.</p><p>If <span class="RktVar">script</span> contains multiple separate strings as children,
then they will be separated by newline characters in the output file.</p><p>Side-effect: Sends <span class="RktVal">"Wrote script: ~a"</span> info-level event to
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=unlike-assets&amp;rel=Logging.html%23%2528def._%2528%2528lib._unlike-assets%252Flogging..rkt%2529._unlike-assets-logger%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">unlike-assets-logger</a></span>, where <span class="stt">~a</span> is the displayed
form of the returned path.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._polyglot/elements..rkt)._load-script))"></a><span title="Provided from: polyglot/elements | Package: polyglot-lib"><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._load-script%29%29" class="RktValDef RktValLink" data-pltdoc="x">load-script</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span><span class="RktOpt">[</span><span class="RktVar">make-input</span><span class="RktOpt">]</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0"><tr><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._input-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">input-port?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Manipulating_Paths.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._path%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">make-input</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=function-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._-%7E3e%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._output-port%7E3f%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528form._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">void</a></span></td></tr></table></blockquote></div><div class="SIntrapara">For use with <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._write-script%29%29" class="RktValLink" data-pltdoc="x">write-script</a></span>.</div></p><p>Like <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Module_Names_and_Loading.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._dynamic-require%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">dynamic-require</a></span><span class="stt"> </span><span class="RktVar">path</span><span class="stt"> </span><span class="RktVal">#f</span><span class="RktPn">)</span>, except any use of
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-output-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-output-port</a></span>, <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-input-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-input-port</a></span>, or
<span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-error-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-error-port</a></span> are reflected in the returned
ports. <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._load-script%29%29" class="RktValLink" data-pltdoc="x">load-script</a></span> will apply <span class="RktVar">make-input</span> to an output port
before loading the module to populate a buffer.  That buffer may be consumed
via <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=port-ops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-input-port%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-input-port</a></span> in the module&rsquo;s top-level forms.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._define-values%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">readable-stdout</span><span class="hspace">&nbsp;</span><span class="RktSym">writeable-stdin</span><span class="hspace">&nbsp;</span><span class="RktSym">readable-stderr</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._load-script%29%29" class="RktValLink" data-pltdoc="x">load-script</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._write-script%29%29" class="RktValLink" data-pltdoc="x">write-script</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">script</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktVal">"blah"</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"#lang racket"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"(displayln \"What's your name?\")"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"(define name (read-line))"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"(printf \"Hi, ~a!\" name)"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Filesystem.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._current-directory%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">current-directory</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._%7Ece%7Ebb%2529%2529&amp;version=8.6" class="RktStxLink Sq" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">to-module</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Sage"</span><span class="hspace">&nbsp;</span><span class="RktSym">to-module</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Input.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-line%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">readable-stdout</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Writing.html%23%2528def._%2528%2528lib._racket%252Fprivate%252Fmisc..rkt%2529._displayln%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">displayln</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.6/doc/local-redirect/index.html?doc=reference&amp;rel=Byte_and_String_Input.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._read-line%2529%2529&amp;version=8.6" class="RktValLink Sq" data-pltdoc="x">read-line</a></span><span class="hspace">&nbsp;</span><span class="RktSym">readable-stdout</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Take care to note that if the module found at <span class="RktVar">path</span> waits for
input, you will need to provide it via <span class="RktVar">make-input</span> or else control will
not leave <span class="RktSym"><a href="#%28def._%28%28lib._polyglot%2Felements..rkt%29._load-script%29%29" class="RktValLink" data-pltdoc="x">load-script</a></span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.6&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index-2.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.6&quot;);">top</a><span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Projects.html" title="backward to &quot;1 Projects&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Polyglot: API Reference&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Applying_Workflows_to_Projects.html" title="forward to &quot;3 Applying Workflows to Projects&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body>
<!-- Mirrored from docs.racket-lang.org/polyglot-reference/Workflows.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 07 Sep 2022 03:29:59 GMT -->
</html>